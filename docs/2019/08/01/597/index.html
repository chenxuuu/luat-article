<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>Air720系列Lua版本异常分析说明（死机、重启、网络、socket） [ Luat doc 社区文章静态页面镜像 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
    <script id="leancloud">
      AV.init({
          appId: "6E5zTbTljdUbVW2WkXPsXGJk-gzGzoHsz",
          appKey: "0vsyDKfNpeSECAI70J794ugv"
      });
    </script>

<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="/favicon.ico"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="/about">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">Air720系列Lua版本异常分析说明（死机、重启、网络、socket）</h1>
<article class="post markdown-style">
  <pre><code>                        &lt;div class=&quot;Section1&quot;&gt;
</code></pre>
<h1 align="center" style="text-align:center"><a name="_Toc482402375"></a><a name="_Toc108888799"><span style="font-family:楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">第一章</span>
</a><span style="font-family:楷体_GB2312;
mso-ascii-font-family:&quot;Times New Roman&quot;">死机以及重启异常</span></h1>

<h2><a name="_Toc482402376"><span lang="EN-US">1.1</span></a><span style="font-family:楷体_GB2312;
mso-ascii-font-family:Arial">如何从设备管理器中的端口判断死机或者重启</span></h2>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">如果彻底死机，设备管理器中的端口如下图所示，模块的</span><span lang="EN-US">USB</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">映射出的端口，有且仅有一个</span></p><p class="MsoNormal" style="text-indent:21.0pt"></p><div style="text-align: justify; margin-left: 25px;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-4KOZUFfh5d439333c2dcc.png" class="img-responsive" style="text-indent: 21pt; width: 438.261px; height: 67.2px;"></div><br><p></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">如果设备管理器中的端口一直如下图所示，则表示正常工作</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US"><v:shape id="图片_x0020_4" o:spid="_x0000_i1025" type="#_x0000_t75" style="width:290.4pt;height:54.6pt;visibility:visible;
 mso-wrap-style:square">
 <v:imagedata src="file:///C:\Users\ZHUTIA~1\AppData\Local\Temp\msohtmlclip1\01\clip_image002.png" o:title="">
</v:imagedata></v:shape></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">&nbsp;</span>&nbsp;<img src="http://oldask.openluat.com/image/show/attachments-2019-08-b3sVOEXH5d439367793e1.png" class="img-responsive" style="width: 50%; float: none;"></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">如果端口在不断的闪烁，弹出来又消失，则表示模块在不断的重启</span></p>

<h2><span lang="EN-US">1.</span><span lang="EN-US">2</span><span style="font-family:楷体_GB2312;mso-ascii-font-family:
Arial">如何从日志判断“是否彻底死机”</span></h2>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">日志中如果出现类似于下面的死机信息，正常情况下，</span><span lang="EN-US">20</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">多秒后，会自动重启，如果一直不会自动重启，则可以认定程序确实死机了</span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: LR:
0x6014bbd<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: PC:
0x6767cc4<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: SP:
0x72adb80<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: MSA
Disable Sleep<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: Wait
for DSP L1 Memory dump...<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: first
entry!<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG:
Software version: NZ_NZ_CP_2.178.000X<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: Compilation
time: Jun 13 2019 09:17:56<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; Ep0: TX 0, RX 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; AT: TX 0, RX 0,
CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; DIAG: TX 0, RX
0, CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; RNDIS: TX 0, RX
1, CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; MassStorage: TX
0, RX 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: Cancel
RNDIS transfer<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: Prepare
for Sd dump<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG:
eeSDDumpPrepare Enter<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG:
eeSDDumpPrepare Exit<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: Prepare
for diag transmit<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG:
finalAction:5, eeFatalActionExt:602453d, eeMode:3f<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; EE LOG: IPCIIR
0x0, APBC_IPC_CLK 0x4, AIRQ_IPC_ENABLE 0x3d10<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">只要没有设置</span><span lang="EN-US">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">模式，出现任何异常，理论上都会自动重启</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">如果遇到“异常后无法自动重启，一直处于死机状态”的问题，首先按照如下步骤确认一下是否设置了</span><span lang="EN-US">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">模式：</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">1</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、脚本代码中是否执行了</span><span lang="EN-US">ril.request("AT*EXASSERT=1")</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">语句</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">2</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、是否人为通过模块</span><span lang="EN-US">USB</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">口枚举出的</span><span lang="EN-US">ASR MODEM DEVICE AT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">口发送过</span><span lang="EN-US">AT*EXASSERT=1</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">命令</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">3</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、如果有条件重启模块，重启后，通过模块</span><span lang="EN-US">USB</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">口枚举出的</span><span lang="EN-US">ASR MODEM DEVICE AT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">口发送</span><span lang="EN-US">AT*EXASSERT?</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">命令，查询一下</span><span lang="EN-US">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">状态</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">注意：模块一旦设置过</span><span lang="EN-US" style="color:red">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">模式，是永远保存在</span><span lang="EN-US" style="color:
red">flash</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;color:red">中的，只能通过</span><span lang="EN-US" style="color:red">AT*EXASSERT=0</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">关闭</span><span lang="EN-US" style="color:red">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">模式，所以</span><span lang="EN-US" style="color:red">AT*EXASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">只能在调试问题时使用，而且使用之后，要及时通过</span><span lang="EN-US" style="color:red">AT*EXASSERT=0</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;color:red">关闭</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">如果没有设置</span><span lang="EN-US" style="color:red">ASSERT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">模式，出现了“异常后无法自动重启，一直处于死机状态”的问题，则肯定是不正常的，需要具体问题具体分析</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US" style="color:red">PS</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;color:red">：</span><span lang="EN-US" style="color:red">Luat V0017</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">以及之前的版本固件，存在一个</span><span lang="EN-US" style="color:red">bug</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">，可能会导致异常死机而无法自动重启</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p>

<h2><a name="_Toc482402377"><span lang="EN-US">1.</span></a><span lang="EN-US">3</span><span style="font-family:楷体_GB2312;mso-ascii-font-family:Arial">如何从日志中判断“是否重启，以及重启原因”</span></h2>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">日志中搜索</span><span style="font-size:11.0pt;mso-fareast-font-family:微软雅黑;mso-font-kerning:0pt;
mso-ansi-language:ZH-CN">poweron reason</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，可以获取到开机原因值，例如：</span></p>

<p class="MsoNormal" align="left" style="margin: 0cm 0cm 0.0001pt; text-indent: 0cm;"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [poweron reason:]<b><span style="color:red"> 3 </span></b>SOCKET_LONG_CONNECTION
2.0.0 2.2.1 Luat_V0019_ASR1802_720D<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">中的</span><span lang="EN-US">3</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">就表示开机原因值</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">开机原因值的意义如下：</span></p>

<p class="MsoNormal" align="left" style="text-indent: 18pt;"><span lang="EN-US" style="font-size:9.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;"> </span><span lang="EN-US" style="font-size:7.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">0: </span><span style="font-size:7.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">按键开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1: </span>充电开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2: </span>闹钟开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3:
</span>软件重启开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4:
</span>其他原因导致的开机<span lang="EN-US">&nbsp;&nbsp; <o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="text-indent: 15pt;"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">&nbsp;&nbsp; 6: </span><span style="font-size:7.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">异常开机<span lang="EN-US">, &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 8: </span>看门狗开机<span lang="EN-US">,&nbsp;&nbsp;&nbsp;&nbsp; 10: </span>电池开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 11:
</span>系统使能开机<span lang="EN-US">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 12:
USB</span>开机<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="text-indent: 15pt;"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">&nbsp;&nbsp; 13: JIG</span><span style="font-size:7.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 14: </span>开关由<span lang="EN-US">OFF</span>拨到<span lang="EN-US">ON</span>检测到<span lang="EN-US">exton1n</span>时<span lang="EN-US">,</span>准许开机<span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 15: </span>外部原因开机<span lang="EN-US">,<o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="text-indent: 15pt;"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">&nbsp;&nbsp; 255: </span><span style="font-size:7.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;">未知<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoNormal" style="text-indent:21.0pt"><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">遇到重启问题时，按照如下步骤分析具体原因：</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l0 level1 lfo1"><!--[if !supportLists]--><span lang="EN-US">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">是否存在脚本运行异常</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">找到重启前上一次运行的最后日志，确认一下是否有脚本运行异常信息输出，例如</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">lua /lua/socketTask.lua:75: attempt
to perform arithmetic on global 'djkasjdlas' (a nil value)<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">stack traceback:<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">/lua/socketTask.lua:75: in function
'cb<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">/lua/sys.lua:363: in function 'run'<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">/lua/<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">如果脚本中使用了</span><span lang="EN-US">errDump</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">功能模块（<span style="color:red">一定要使用</span></span><span lang="EN-US" style="color:red">errDump</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">功能模块，此功能模块对“量产投放市场的设备，远程调试初步定位问题”至关重要</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">），直接在日志中搜索</span><span lang="EN-US">errDump</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，也可以定位出是否发生脚本异常，例如</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">[E]-[errDump.luaErr]
/lua/socketTask.lua:75: attempt to perform arithmetic on global 'djkasjdlas' (a
nil value)<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">stack traceback:<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /lua/socketTask.lua:75:
in function 'cb'<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /lua/sys.lua:363:
in function 'run'<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; /lua/main.lua:59:
in main chunk<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [C]:
?<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l0 level1 lfo1"><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">是否存在固件运行异常</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">如果在第</span><span lang="EN-US">1</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">步存在了脚本运行异常，则可以不用关心这一步的固件运行异常，因为任何脚本运行异常都会触发固件运行异常。</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">找到重启前上一次运行的最后日志，确认一下是否有固件运行异常信息输出，例如</span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: LR: 0x6014bbd<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: PC: 0x6767cc4<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: SP: 0x72adb80<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: MSA Disable Sleep<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Wait for DSP L1 Memory
dump...<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: first entry!<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Software version:
NZ_NZ_CP_2.178.000X<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Compilation time: Jun 13
2019 09:17:56<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Ep0: TX 0, RX 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AT: TX 0, RX 0, CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DIAG: TX 0, RX 0, CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RNDIS: TX 0, RX 1, CTRL 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MassStorage: TX 0, RX 0<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Cancel RNDIS transfer<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Prepare for Sd dump<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: eeSDDumpPrepare Enter<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: eeSDDumpPrepare Exit<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: Prepare for diag transmit<o:p></o:p></span></p>

<p class="MsoNormal" style="text-indent:15.0pt"><span lang="EN-US" style="font-size:7.5pt">&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; EE LOG: finalAction:5,
eeFatalActionExt:602453d, eeMode:3f<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">EE LOG: IPCIIR 0x0, APBC_IPC_CLK
0x4, AIRQ_IPC_ENABLE 0x3d10<o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">如果脚本中使用了</span><span lang="EN-US">errDump</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">功能模块（</span><span lang="EN-US">core</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">为</span><span lang="EN-US">0019</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">以及以后的版本，</span><span lang="EN-US">script</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">为</span><span lang="EN-US">2.2.0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">以及以后的版本）（<span style="color:red">一定要使用</span></span><span lang="EN-US" style="color:red">errDump</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">功能模块，此功能模块对“量产投放市场的设备，远程调试初步定位问题”至关重要</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">），直接在日志中搜索</span><span lang="EN-US">errDump</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，也可以定位出是否发生固件异常，例如</span></p>

<p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt">[E]-[errDump.firmwareAssertErr]
desc=FALSE,file=platform_main.cline=506,LR:0x6015025,PC:0x67688e4,SP:0x72adb80</span></p><p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US" style="font-size:7.5pt"><br></span></p><p class="MsoListParagraph" style="margin-left: 42pt; text-indent: -21pt;"><span lang="EN-US">3.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; &nbsp; &nbsp; &nbsp;</span></span><span style="font-family: 宋体; text-indent: 0cm;">如果不存在前2种情况，确认一下是否为供电不稳引起的重启</span></p>

</div><p>

<p><span lang="EN-US" style="font-size:10.5pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Times New Roman&quot;,&quot;serif&quot;;mso-fareast-font-family:宋体;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA"><br clear="all" style="page-break-before:always;mso-break-type:section-break"><br></span></p>
</p><div class="Section2">

<h1 align="center" style="text-align:center"><a name="_Toc482402379"><span style="font-family:楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">第二章</span>
</a><span style="font-family:
楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">网络异常</span></h1>

<p class="MsoNormal" style="text-indent:0cm;mso-char-indent-count:0;tab-stops:
241.5pt"><span lang="EN-US">&nbsp; </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">此章节介绍如何搜索日志，一步步排查是否出现网络异常</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">CGSN</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，确认一下日志中的</span><span lang="EN-US">IMEI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">是否与标签上的</span><span lang="EN-US">IMEI</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">一致，如果不一致，则可能生产过程出错</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">ATWMFT</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果返回</span><span lang="EN-US">ERR</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，表示模块没有校准，可能会导致各种网络问题，基本上可以确定是生产过程出错导致的，必须返厂维修；如果返回</span><span lang="EN-US">SUCCESS</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，表示正常</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:0cm;mso-char-indent-count:
0;tab-stops:241.5pt"><span lang="EN-US">&nbsp;</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:0cm;mso-char-indent-count:
0;tab-stops:241.5pt"><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;;color:red">注意：如果通过</span><span lang="EN-US" style="color:red">AT+CFUN=0</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">进入飞行模式，以下几步的查询结果都是异常状态</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:0cm;mso-char-indent-count:
0;tab-stops:241.5pt"><span lang="EN-US" style="color:red">&nbsp;</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">3.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">CPIN</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果返回的不是</span><span lang="EN-US">READY</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，则</span><span lang="EN-US">SIM</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">卡异常</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">4.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">CSQ</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，查询信号强度，信号强度最大值为</span><span lang="EN-US">31</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果查询出来的信号值小于</span><span lang="EN-US">10</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，可以认为信号较弱，如果环境本身的信号不差，则需要分析硬件射频是否存在问题</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">5.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">CREG</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">、</span><span lang="EN-US">CGREG</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US">CEREG</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，查询网络状态，如果状态不是</span><span lang="EN-US">1</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">或者</span><span lang="EN-US">5</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，则表示网络未成功注册</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">6.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">^MODE</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，查询当前使用的网络模式，</span><span lang="EN-US">2G</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">、</span><span lang="EN-US">3G</span><span style="font-family:
宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">还是</span><span lang="EN-US">4G</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，此模式仅作为分析问题时补充信息使用</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l3 level1 lfo2;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">7.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">CGDCONT</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，查询</span><span lang="EN-US">PDP</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">是否已经激活，如果返回的查询结果中有</span><span lang="EN-US">APN</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">以及本地</span><span lang="EN-US">IP</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">，则表示正常</span></p>

</div><p>

<p><span lang="EN-US" style="font-size:10.5pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Times New Roman&quot;,&quot;serif&quot;;mso-fareast-font-family:宋体;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA"><br clear="all" style="page-break-before:always;mso-break-type:section-break"><br></span></p>
</p><div class="Section3">

<h1 align="center" style="text-align:center"><a name="_Toc482402387"><span style="font-family:楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">第三章</span>
</a><span lang="EN-US">socket</span><span style="font-family:楷体_GB2312;
mso-ascii-font-family:&quot;Times New Roman&quot;">应用异常</span></h1>

<p class="MsoNormal" style="text-indent:0cm;mso-char-indent-count:0;tab-stops:
241.5pt"><span lang="EN-US">&nbsp; </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">此章节介绍如何搜索日志，一步步排查是否出现</span><span lang="EN-US">socket</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">应用异常</span></p>

<p class="MsoNormal" style="text-indent:0cm;mso-char-indent-count:0;tab-stops:
241.5pt"><span lang="EN-US">&nbsp; </span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">注意：如果通过</span><span lang="EN-US" style="color:red">AT+CFUN=0</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;;color:red">进入飞行模式，以下几步的查询结果都是异常状态</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l1 level1 lfo3;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">socket</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果出现</span><span lang="EN-US">socket:connect:
core sock conn error</span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">或者</span><span lang="EN-US">socket:connect: connect fail</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，则表示</span><span lang="EN-US">socket</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">连接失败</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l1 level1 lfo3;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">socket</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果出现</span><span lang="EN-US">send fail</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">则表示发送失败</span></p>

<p class="MsoListParagraph" style="margin-left:31.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l1 level1 lfo3;tab-stops:241.5pt"><!--[if !supportLists]--><span lang="EN-US">3.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">搜索</span><span lang="EN-US">socket</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">，如果出现</span><span lang="EN-US">socket.rtos.MSG_SOCK_CLOSE_IND</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">则表示</span><span lang="EN-US">socket'</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">被动关闭</span></p>

</div><p>

<p><span lang="EN-US" style="font-size:10.5pt;mso-bidi-font-size:12.0pt;font-family:
&quot;Times New Roman&quot;,&quot;serif&quot;;mso-fareast-font-family:宋体;mso-font-kerning:1.0pt;
mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA"><br clear="all" style="page-break-before:always;mso-break-type:section-break"><br></span></p>
</p><h1 align="center" style="text-align:center"><a name="_Toc482402393"><span style="font-family:楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">第四章</span>
<span lang="EN-US">errDump</span></a><span style="font-family:楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">功能说明</span></h1><p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:0"><span lang="EN-US" style="color:red">errDump</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;
color:red">功能模块对“量产投放市场的设备，远程调试初步定位问题”至关重要</span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">，</span><span style="color:red"> </span><span style="font-family:宋体;mso-ascii-font-family:
&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;;color:red">强烈建议客户一定要使用此功能，</span><span style="font-family: 宋体;">加载此功能模块后，具备如下功能：</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p><p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l2 level1 lfo4"><!--[if !supportLists]--><span lang="EN-US">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family: 宋体;">可以上报死机以及重启异常到调试服务器</span><span lang="EN-US"><o:p></o:p></span></p><p class="MsoListParagraph" style="margin-left:42.0pt;text-indent:-21.0pt;
mso-char-indent-count:0;mso-list:l2 level1 lfo4"><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span style="font-family: 宋体;">如果打开了</span><span lang="EN-US">errDump.</span><span lang="EN-US"> setNetworkLog(true)</span><span style="font-family: 宋体;">开关，可以上报网络和</span><span lang="EN-US">socket</span><span style="font-family: 宋体;">应用异常到调试服务器</span><span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p><p class="MsoNormal"><span lang="EN-US">&nbsp;</span></p><h1 align="center" style="text-align:center"><span style="font-family:楷体_GB2312;
mso-ascii-font-family:&quot;Times New Roman&quot;">第五章</span> <span style="font-family:
楷体_GB2312;mso-ascii-font-family:&quot;Times New Roman&quot;">总结</span></h1><p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:0"><span style="font-family: 宋体; text-indent: 21pt;">如果无法输出日志，则根据设备管理器中的端口判断模块是否死机或者一直在反复重启</span><br></p><p class="MsoNormal" style="text-indent:21.0pt;mso-char-indent-count:0"><span style="font-family: 宋体;">如果有日志输出，正则搜索如下信息，判断是否存在网络和</span><span lang="EN-US">socket</span><span style="font-family: 宋体;">应用异常</span><span lang="EN-US" style="color:red"><o:p></o:p></span></p><p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span lang="EN-US">EE
LOG|traceback|\[E\]|errDump|CGSN|ATWMFT|CFUN|CPIN|CREG|CGREG|CEREG|CSQ|\^MODE|CGDCONT|conn
error|send fail|MSG_SOCK_CLOSE_IND</span></p><p>























































</p><p class="MsoNormal"><span lang="EN-US">&nbsp;&nbsp;&nbsp; </span><span style="font-family:宋体;
mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:&quot;Times New Roman&quot;">注意：以上字符串中的</span><span lang="EN-US">\</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;
mso-hansi-font-family:&quot;Times New Roman&quot;">为</span><span lang="EN-US">notepad++</span><span style="font-family:宋体;mso-ascii-font-family:&quot;Times New Roman&quot;;mso-hansi-font-family:
&quot;Times New Roman&quot;">中使用的转义字符，不同编辑器可能不同，根据使用的编辑器自行修改</span></p>


</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/2019/08/02/598/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/2019/07/30/596/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
				
				
				<li>
					<a href="mailto:1178752402@qq.com" title="email" target="_blank">
					<i class="fa fa-email"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/CaiChenghan" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://www.jianshu.com/u/565c8e790605" title="jianshu" target="_self">
					<i class="fa fa-jianshu"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © chenxuuu 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
