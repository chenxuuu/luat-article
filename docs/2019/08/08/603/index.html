<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>Air系列模块远程升级功能汇总 [ Luat doc 社区文章静态页面镜像 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="/about">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">Air系列模块远程升级功能汇总</h1>
<article class="post markdown-style">
  <pre><code>                        &lt;div style=&quot;border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;&quot;&gt;
</code></pre>
<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:18.0pt"="">一、远程升级功能概述</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">Air</span><span style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">系列模块（本文指<span lang="EN-US">2G</span>和<span lang="EN-US">4G</span>模块）支持三种开发模式：<span lang="EN-US">AT</span>开发、<span lang="EN-US">Lua</span>开发、<span lang="EN-US">CSDK</span>开发，本文仅介绍<span lang="EN-US">AT</span>和<span lang="EN-US">Lua</span>两种开发模式的远程升级功能。不同开发模式的固件组成部分也不相同：<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; AT</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">开发模式：<span lang="EN-US">core</span>固件<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lua</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">开发模式：<span lang="EN-US">core</span>固件<span lang="EN-US">+</span>脚本<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">不同模块，不同开发模式，支持的远程升级功能也不尽相同，对比如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><div align="center">

<table class="MsoTableGrid" style="border: none;" border="1" cellspacing="0" cellpadding="0">
 <tbody><tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:1.0pt">
  <td width="73" style="width:43.8pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="margin-bottom:7.4pt;mso-pagination:widow-orphan;
  word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:
  " 0pt"="" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:=""><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width="236" style="width:5.0cm;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">是否支持远程升级功能<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA">远程升级成功后，新版本脚本运行异常，是否自动回退到最后一次烧录版本</span><br></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:1;height:1.0pt">
  <td width="73" style="width:43.8pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">4G</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">AT</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模式<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="236" style="width:5.0cm;border-top:none;border-left:none;border-bottom:
  solid black 1.0pt;mso-border-bottom-themecolor:text1;border-right:solid black 1.0pt;
  mso-border-right-themecolor:text1;mso-border-top-alt:solid black .5pt;
  mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">支持<span lang="EN-US">core</span>固件远程升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">远程升级成功后，永远不回退<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:2;height:1.0pt">
  <td width="73" style="width:43.8pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">4G</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">Lua</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模式<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="236" style="width:5.0cm;border-top:none;border-left:none;border-bottom:
  solid black 1.0pt;mso-border-bottom-themecolor:text1;border-right:solid black 1.0pt;
  mso-border-right-themecolor:text1;mso-border-top-alt:solid black .5pt;
  mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">支持<span lang="EN-US">2</span>种方式远程升级：<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">1</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、<span lang="EN-US">core</span>固件<span lang="EN-US">+</span>脚本全量升级<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">2</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、脚本单独升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">远程升级成功后，永远不回退<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3;height:1.0pt">
  <td width="73" style="width:43.8pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">2G</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="margin-bottom:7.4pt;mso-pagination:widow-orphan;
  word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:
  " 0pt"="" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">Lua</span><span style="font-size:7.5pt;font-family:" 微软雅黑","sans-serif";="" mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">模式<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="236" style="width:5.0cm;border-top:none;border-left:none;border-bottom:
  solid black 1.0pt;mso-border-bottom-themecolor:text1;border-right:solid black 1.0pt;
  mso-border-right-themecolor:text1;mso-border-top-alt:solid black .5pt;
  mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">支持脚本单独远程升级<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">不支持<span lang="EN-US">core</span>固件远程升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">支持自动回退，可以通过<span lang="EN-US">sys.setRollBack</span>接口来设置“是否回退”，以及“开机运行多长时间后出现的异常，才允许回退”<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:4;mso-yfti-lastrow:yes;height:1.0pt">
  <td width="73" style="width:43.8pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">2G</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">AT</span><span style="font-size:7.5pt;
  font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模式<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="236" style="width:5.0cm;border-top:none;border-left:none;border-bottom:
  solid black 1.0pt;mso-border-bottom-themecolor:text1;border-right:solid black 1.0pt;
  mso-border-right-themecolor:text1;mso-border-top-alt:solid black .5pt;
  mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">不支持任何方式的远程升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</tbody></table>

</div><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:" inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;mso-hansi-font-family:="">二、远程升级功能原理</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"=""><o:p></o:p></span></b></p>

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">2.1</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">4G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块（</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;="">AT/Lua</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">版本）</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">4G</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">模块的<span lang="EN-US">flash</span>总容量为<span lang="EN-US">16MB</span>，其中有一个<span lang="EN-US">FBF</span>分区（<span lang="EN-US">0022</span>之前的<span lang="EN-US">core</span>中，<span lang="EN-US">FBF</span>分区总空间为<span lang="EN-US">5.375MB</span>；<span lang="EN-US">0022</span>以及之后的<span lang="EN-US">core</span>中，<span lang="EN-US">FBF</span>分区总空间为<span lang="EN-US">5.875MB</span>），用于存放远程升级包。模块从网络端将远程升级包成功下载保存到<span lang="EN-US">FBF</span>分区后，下次重启时，<span lang="EN-US">BOOTLOADER</span>程序会从<span lang="EN-US">FBF</span>分区将远程升级包解析、搬运到<span lang="EN-US">CODE</span>区，而后再清除<span lang="EN-US">FBF</span>分区的使用标志，就完成了一次远程升级过程。</span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Lua</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">版本中，下载远程升级包，保存到<span lang="EN-US">FBF</span>分区的过程如下（可参考<span lang="EN-US">lib/update.lua</span>辅助理解）：<span lang="EN-US"><o:p></o:p></span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、执行<span lang="EN-US">rtos.fota_start()</span>打开写<span lang="EN-US">FBF</span>分区功能，返回<span lang="EN-US">0</span>表示打开成功，其余表示失败<span lang="EN-US"><o:p></o:p></span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、下载升级包，如果升级包较小，可以先保存到一个文件中，下载结束之后，循环执行<span lang="EN-US">rtos.fota_process(curData</span>，<span lang="EN-US"> totalLen)</span>将升级包内容分段写到<span lang="EN-US">FBF</span>分区，<span lang="EN-US">curData</span>为当前要写入的分段数据内容，<span lang="EN-US">totalLen</span>为升级包的总大小（单位为字节），返回<span lang="EN-US">0</span>表示写成功，其余表示失败；如果升级包较大，可以边下载边写<span lang="EN-US">FBF</span>分区<span lang="EN-US"><o:p></o:p></span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、执行<span lang="EN-US">rtos.fota_end()</span>关闭写<span lang="EN-US">FBF</span>分区功能，返回<span lang="EN-US">0</span>表示关闭成功，其余表示失败<span lang="EN-US"><o:p></o:p></span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">注意：无论第<span lang="EN-US">2</span>步是否成功，第<span lang="EN-US">1</span>步只要成功，必须执行第<span lang="EN-US">3</span>步，第<span lang="EN-US">1</span>步和第<span lang="EN-US">3</span>步成对出现，并且在一次升级过程中，仅执行一次即可<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">2.2</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">2G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块（</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;="">Lua</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">版本）</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">2G</span><span style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">模块的<span lang="EN-US">flash</span>总容量有<span lang="EN-US">4MB</span>和<span lang="EN-US">8MB</span>两种，其中有一个文件系统分区（不同固件的文件系统空间也不相同，可以在脚本中通过<span lang="EN-US">rtos.get_fs_free_size()</span>来打印当前剩余的文件系统空间），此分区可以存放程序运行过程中实时创建的文件，也可以存放远程升级包。模块从网络端将远程升级包成功下载保存为文件系统分区的<span lang="EN-US">/luazip/update.bin</span>文件后，下次重启时，内核<span lang="EN-US">core</span>程序会解压缩<span lang="EN-US">/luazip/update.bin</span>文件，将解压缩出来的新版本脚本和资源文件存放在文件系统分区，然后删除<span lang="EN-US">/luazip/update.bin</span>文件，就完成了一次远程升级过程，自动重启以后运行的脚本代码为文件系统分区中的新版本脚本文件。<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">整个过程如下图所示</span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img class="img-responsive" style="width: 535.5px;" src="http://oldask.openluat.com/image/show/attachments-2019-08-ST9tIkvv5d4bdfaea40a7.png"><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt;mso-no-proof:yes"=""><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"></v:stroke>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"></v:f>
  <v:f eqn="sum @0 1 0"></v:f>
  <v:f eqn="sum 0 0 @1"></v:f>
  <v:f eqn="prod @2 1 2"></v:f>
  <v:f eqn="prod @3 21600 pixelWidth"></v:f>
  <v:f eqn="prod @3 21600 pixelHeight"></v:f>
  <v:f eqn="sum @0 0 1"></v:f>
  <v:f eqn="prod @6 1 2"></v:f>
  <v:f eqn="prod @7 21600 pixelWidth"></v:f>
  <v:f eqn="sum @8 21600 0"></v:f>
  <v:f eqn="prod @7 21600 pixelHeight"></v:f>
  <v:f eqn="sum @10 21600 0"></v:f>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"></v:path>
 <o:lock v:ext="edit" aspectratio="t"></o:lock>
</v:shapetype><v:shape id="图片_x0020_0" o:spid="_x0000_i1027" type="#_x0000_t75"
 alt="2G模块远程升级原理.png" style='width:414.6pt;height:279.6pt;visibility:visible;
 mso-wrap-style:square'>
 <v:imagedata src="file:///C:\Users\ZHUTIA~1\AppData\Local\Temp\msohtmlclip1\01\clip_image001.png"
  o:title="2G模块远程升级原理"></v:imagedata>
</v:shape><![endif]--><!--[if !vml]--><!--[endif]--></span><b><span lang="EN-US" style="font-size:14.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"=""><o:p></o:p></span></b></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:" inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;mso-hansi-font-family:="">三、远程升级功能使用方法</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"=""><o:p></o:p></span></b></p>

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">3.1</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">4G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块（</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;="">AT</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">版本）</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">支持合宙服务器和自建服务器远程升级<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">使用方法参考：</span><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/984">http://oldask.openluat.com/article/984</a></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">3.2</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">4G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块（</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;="">Lua</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">版本）</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></b><span style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">支持合宙服务器、阿里云服务器和自建服务器远程升级<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">合宙服务器使用方法参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/915">http://oldask.openluat.com/article/915</a></span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">阿里云服务器使用方法参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/877">http://oldask.openluat.com/article/877</a></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">自建服务器使用方法参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/107">http://oldask.openluat.com/article/107</a></span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">3.3</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">2G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块（</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;="">Lua</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">版本）</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
" color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span></b><span style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">支持合宙服务器、阿里云服务器和自建服务器远程升级<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">合宙服务器使用方法参考：<a href="http://oldask.openluat.com/article/984" target="_blank">http://oldask.openluat.com/article/984</a></span><span lang="EN-US"></span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">阿里云服务器使用方法参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/877">http://oldask.openluat.com/article/877</a></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">自建服务器使用方法参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/107">http://oldask.openluat.com/article/107</a></span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:" inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;mso-hansi-font-family:="">四、常见问题</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"=""><o:p></o:p></span></b></p>

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">4.1</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、请求下载升级包，服务器返回失败</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">登录<span lang="EN-US">IOT</span>网站，进入项目，打开“固件升级<span lang="EN-US">-&gt;</span>升级日志”，根据<span lang="EN-US">IMEI</span>查询升级记录错误描述<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">如果<span lang="EN-US">IOT</span>网站查询不到，搜索设备日志，获取服务器返回的错误码<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">然后对照下表分析：</span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><span lang="EN-US"><o:p></o:p></span></span></p><div align="center">

<table width="753" class="MsoTableGrid" style="width: 451.65pt; border: none;" border="1" cellspacing="0" cellpadding="0">
 <tbody><tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">错误码<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="106" style="width:63.75pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">错误码含义<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">导致错误的可能原因<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:1;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">17<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">无权限<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">设备<span lang="EN-US">IMEI</span>不在你的账户下<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:2;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">25<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">无效的项目<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">脚本中<span lang="EN-US">main.lua</span>的<span lang="EN-US">PRODUCT_KEY</span>和<span lang="EN-US">IOT</span>网站上产品的<span lang="EN-US">productKey</span>不一致<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="margin-bottom:7.4pt;mso-pagination:widow-orphan;
  word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:
  &quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
  0pt">26<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">无效的固件<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">确认一下<span lang="EN-US">main.lua</span>中的<span lang="EN-US">PROJECT</span>和<span lang="EN-US">IOT</span>网站上的升级配置项中的<span lang="EN-US">PROJECT</span>字段是否一致<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果是<span lang="EN-US">4G</span>模块，要确保模块型号和<span lang="EN-US">IOT</span>网站上的升级配置项模块型号是否一致；例如模块型号是<span lang="EN-US">Air720D</span>，则<span lang="EN-US">IOT</span>网站上也必须是<span lang="EN-US">Air720D<o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果是<span lang="EN-US">4G</span>模块，要确保模块中使用的<span lang="EN-US">CORE</span>版本号小于等于<span lang="EN-US">IOT</span>网站上升级配置项中的<span lang="EN-US">CORE</span>版本号；例如模块中使用的是<span lang="EN-US">V0017</span>，则<span lang="EN-US">IOT</span>网站上只允许大于等于<span lang="EN-US">V0017<o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果是<span lang="EN-US">2G</span>模块，要确保模块中使用的<span lang="EN-US">CORE</span>版本号和<span lang="EN-US">IOT</span>网站上升级配置项中的<span lang="EN-US">CORE</span>版本号一致；例如模块中使用的是<span lang="EN-US">Luat_V0035_8955</span>，则<span lang="EN-US">IOT</span>网站上也必须是<span lang="EN-US">Luat_V0035_8955<o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:4;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">27<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">已是最新版本<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果确认不是最新版本，可能原因为：<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">设备<span lang="EN-US">IMEI</span>不属于<span lang="EN-US">IOT</span>网站上的产品；可将<span lang="EN-US">IMEI</span>发给合宙技术支持人员确认<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">IOT</span><span style="font-size:7.5pt;
  font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
  mso-font-kerning:0pt">网站的升级配置项，没有配置“允许该设备升级”<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果是<span lang="EN-US">4G</span>模块，配置的是全固件升级（<span lang="EN-US">core</span>和脚本都升级），但是上传的升级包，却只有脚本；例如模块中是<span lang="EN-US">core</span>（<span lang="EN-US">V0017</span>）、脚本（<span lang="EN-US">1.0.0</span>），<span lang="EN-US">IOT</span>网站上配置的是<span lang="EN-US">core</span>（<span lang="EN-US">V0021</span>）、脚本（<span lang="EN-US">1.0.1</span>），但是上传升级包时，升级包是一个小于<span lang="EN-US">1M</span>字节的文件，此时就会认为升级包中仅包含脚本，不包含<span lang="EN-US">core</span>；所以设备请求升级时，返回错误<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:5;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">40<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">循环升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">当同一的<span lang="EN-US">IMEI</span>，频繁的请求从<span lang="EN-US">A</span>版本升级到<span lang="EN-US">B</span>版本，并且从服务器下载<span lang="EN-US">B</span>版本成功。超过一定频率，服务器就会返回此错误，一般有如下几种情况会导致此现象的发生<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l2 level1 lfo3;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">下载<span lang="EN-US">B</span>版本之后，重启应用<span lang="EN-US">B</span>版本过程中，发生错误，导致失败；此时仍然运行<span lang="EN-US">A</span>版本，会再次请求<span lang="EN-US">B</span>版本。一直这样循环<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l2 level1 lfo3;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">下载<span lang="EN-US">B</span>版本之后，重启应用<span lang="EN-US">B</span>版本成功，但是运行<span lang="EN-US">B</span>版本时，很快发生了异常，导致版本回退到<span lang="EN-US">A</span>版本；此时仍然运行<span lang="EN-US">A</span>版本，会再次请求<span lang="EN-US">B</span>版本。一直这样循环<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l2 level1 lfo3;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">用户在压力挂测远程升级功能，会循环请求测试<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">第<span lang="EN-US">1</span>种和第<span lang="EN-US">2</span>种情况，是程序运行异常所致，所以必须解决异常后，再考虑升级，否则一直频繁下载，会导致<span lang="EN-US">sim</span>卡流量超出，造成经济损失<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果是第<span lang="EN-US">3</span>种情况，可以手动解除限制，允许再次升级，解除限制的方法为：<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">登录<span lang="EN-US">IOT</span>网站，进入项目，打开“设备列表<span lang="EN-US">-&gt;</span>解除禁止升级”<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:6;mso-yfti-lastrow:yes;height:1.0pt">
  <td width="56" style="width:33.5pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">5<o:p></o:p></span></p>
  </td>
  <td width="106" style="width:63.75pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">升级包文件中没有包含<span lang="EN-US">core<o:p></o:p></span></span></p>
  </td>
  <td width="591" style="width:354.4pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">如果设备中的<span lang="EN-US">core</span>版本和升级包文件名中包含的<span lang="EN-US">core</span>版本不一致，则升级包文件中应该要包含<span lang="EN-US">core</span>，但是升级包文件小于<span lang="EN-US">1M</span>，所以判断升级包中并没有包含<span lang="EN-US">core</span>，不允许升级<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
</tbody></table></div><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">4.2</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、升级配置项固件名称重复</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">同一产品下，允许配置多个升级配置项，但是固件名称不能重复，如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt;mso-no-proof:yes"=""><!--[if gte vml 1]><v:shape
 id="图片_x0020_1" o:spid="_x0000_i1026" type="#_x0000_t75" style='width:385.8pt;
 height:245.4pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="file:///C:\Users\ZHUTIA~1\AppData\Local\Temp\msohtmlclip1\01\clip_image003.png"
  o:title=""></v:imagedata>
</v:shape><![endif]--><!--[if !vml]--><!--[endif]--></span><span lang="EN-US" style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"=""><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><img class="img-responsive" style="width: 480.5px;" src="http://oldask.openluat.com/image/show/attachments-2019-08-fFhxLoHp5d4be00aa0567.png"></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">如果配置了多个相同固件名称的升级配置项，则只保留一个，删除其余的升级配置项</span></p><p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;">

<p><b>&lt;span lang=”EN-US” style=”font-size:11.5pt;font-family:” 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt”=””&gt;4.3</span></b><b>&lt;span style=”font-size:11.5pt;font-family:” inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;=”” mso-font-kerning:0pt”=””&gt;、</span></b><b>&lt;span lang=”EN-US” style=”font-size:11.5pt;<br>font-family:” 宋体;color:#333333;mso-font-kerning:0pt”=”” inherit”,”serif”;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:=””&gt;2G</span></b><b>&lt;span style=”font-size:<br>11.5pt;font-family:” 0pt”=”” 微软雅黑”,”sans-serif”;mso-ascii-font-family:inherit;=”” mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:=””&gt;模块下载升级包之后，重启应用新版本失败</span></b><b>&lt;span lang=”EN-US” style=”font-size:11.5pt;<br>font-family:” 宋体;color:#333333;mso-font-kerning:0pt”=”” inherit”,”serif”;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:=””&gt;&lt;o:p&gt;</o:p></span></b></p></p>
</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">下面以“本地烧录的脚本为<span lang="EN-US">1.0.0</span>，要远程升级到<span lang="EN-US">1.0.1</span>”为例说明此问题<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">当<span lang="EN-US">1.0.0</span>版本成功下载<span lang="EN-US">1.0.1</span>升级包文件之后，会自动重启，然后从升级中解压缩出来<span lang="EN-US">1.0.1</span>版本的所有脚本和资源文件，保存到文件系统中，如果文件系统空间不足，就会出现应用新版本失败的问题<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">目前仅出现过文件系统空间不足导致的失败问题，此问题的典型日志如下图所示：</span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img class="img-responsive" style="width: 516.5px;" src="http://oldask.openluat.com/image/show/attachments-2019-08-codIQPCC5d4be0256af5f.png"><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt;mso-no-proof:yes"=""><!--[if gte vml 1]><v:shape
 id="图片_x0020_4" o:spid="_x0000_i1025" type="#_x0000_t75" style='width:415.2pt;
 height:71.4pt;visibility:visible;mso-wrap-style:square'>
 <v:imagedata src="file:///C:\Users\ZHUTIA~1\AppData\Local\Temp\msohtmlclip1\01\clip_image005.png"
  o:title=""></v:imagedata>
</v:shape><![endif]--><!--[if !vml]--><!--[endif]--></span><span lang="EN-US" style="font-size:9.0pt;
font-family:" 微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"=""><o:p></o:p></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(255, 0, 0);"><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif;">TTS</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif;">的<span lang="EN-US">lod</span>，文件系统空间比较紧张，尤其要注意控制项目的脚本大小</span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(255, 0, 0);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif;"><span style="color: rgb(255, 0, 0);">比较可靠的一种文件系统剩余空间是否能够保证成功升级的计算方法为：“升级包<span lang="EN-US" style="">bin</span>文件”<span lang="EN-US" style="">+</span>“生成升级包时，在<span lang="EN-US" style="">luatools</span>的目录<span lang="EN-US" style="">ClearScr</span>下的所有文件”<span lang="EN-US" style="">&lt; </span>模块剩余文件系统空间（通过<span lang="EN-US" style="">rtos.get_fs_free_size()</span>计算出来）的</span><span lang="EN-US" style=""><span style="color: rgb(255, 0, 0);">85%</span><span style="color: rgb(51, 51, 51);"><o:p></o:p></span></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">可参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/110">http://oldask.openluat.com/article/110</a>
</span><span style="font-family:宋体;mso-ascii-font-family:Calibri;mso-ascii-theme-font:
minor-latin;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
mso-hansi-font-family:Calibri;mso-hansi-theme-font:minor-latin">辅助理解</span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">4.4</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">2G</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">模块远程升级后的版本回退功能</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2G</span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">模块仅支持远程升级脚本，下面以“本地烧录的脚本为<span lang="EN-US">1.0.0</span>，要远程升级到<span lang="EN-US">1.0.1</span>”为例说明回退功能<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">当成功升级到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">版本后，</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">运行过程中，如果出现异常（例如对</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">nil</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">值进行算数运算：</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">a = nil+3</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">；这些异常可以通过</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">功能模块上报调试服务器），并且</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">配置了允许回退功能，则会删除</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">的脚本，自动重启后，运行本地烧录的</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.0</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">版本，可参考</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">2.2</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">章节的示意图。如果</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.0</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">版本使用了</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">功能模块，则会自动上报这个异常到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">服务器；即使</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.0</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">版本没有</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">功能模块，如果没有新的错误异常产生，这个错误异常也会保存到设备中，可以再升级一个带有</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">功能的新版本，新版本升级后，仍然会上报这个错误异常到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">服务器；如果使用的是合宙官方的</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">errDump</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">服务器，可以通过如下方式查询这个错误：</span></p>

<p class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">登录<span lang="EN-US">iot.openluat.com</span>，随便选择一个产品，点进去，点击左侧的<span lang="EN-US">&nbsp;“</span>查询<span lang="EN-US">debug”&nbsp;</span>菜单，<span lang="EN-US">&nbsp;</span>输入设备<span lang="EN-US">imei</span>号、开始结束日期，点击搜索即可（友情提醒：开始和结束日期的跨度越大，搜索速度越慢）<span lang="EN-US"><o:p></o:p></span></span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">&nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</span>为什么要设计回退功能呢，功过是非暂且不评；那么有没有什么办法不允许回退版本呢，以<span lang="EN-US">task</span>版本为例，有一个<span lang="EN-US">sys.setRollBack(flag,secs)</span>可以灵活配置，可在本示例中的<span lang="EN-US">1.0.1</span>脚本中调用这个接口配置，详情参考<span lang="EN-US">API</span>说明<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">注意：一旦发生回退，是回退到最后一次本地烧录的版本，假设本地烧录的是</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.0</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">，后来远程升级到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">，</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">又远程升级到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.2</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">，</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">.......</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">，一直远程升级到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.9</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">，只要</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.1</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.9</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">中的任何一个版本发生回退，都是回退到</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">1.0.0</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">版本</span></p>

<p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">另外：<span lang="EN-US">V0035</span>以及之前的<span lang="EN-US">core</span>有个<span lang="EN-US">bug</span>，如果远程升级下载升级包的过程中，重启设备，会自动回退到最后一次本地烧录的版本。如果无法更新<span lang="EN-US">core</span>至<span lang="EN-US">V0036</span>以及之后的版本，要尽可能的在脚本程序中，最大限度的处理这种异常：例如远程升级下载升级包过程中不要主动重启；自建的升级服务器，升级包下载后，如果校验失败，通过调用<span lang="EN-US">os.remove("/luazip/update.bin")</span>删除升级包；原则就是，不要让错误或者不完整的升级包存在<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">4.5</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、远程升级对</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:="">NVM</span></b><b><span style="font-size:
11.5pt;font-family:" 0pt"="" 微软雅黑","sans-serif";mso-ascii-font-family:inherit;="" mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:="">、文件系统中文件的影响</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="" inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:=""><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">远程升级功能本身对<span lang="EN-US">NVM</span>中的原来保存的参数、运行过程中创建的文件没有任何影响<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">有关<span lang="EN-US">NVM</span>的详细说明参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/76">http://oldask.openluat.com/article/76</a></span><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"="">4.6</span></b><b><span style="font-size:11.5pt;font-family:" inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;="" mso-font-kerning:0pt"="">、远程升级包的正确性检查</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:" 微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"=""><o:p></o:p></span></b></p>

</div><p>































































































</p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:" 宋体;color:#333333;mso-font-kerning:0pt"="">远程升级包下载之后，下次重启会首先对升级包的准确性进行检查（</span><span style="font-size: 12px;">算法不便透漏</span><span style="font-size: 9pt;">），检查通过之后才会应用升级</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p align="left" class="MsoNormal" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">4.7</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、下载升级包过程中，如果发生异常重启，有什么影响</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">下载过程中，异常重启，导致升级包没有下载完整；此时异常重启，不会导致模块死机或者变砖，只是校验升级包不对，直接将升级包删除，然后<span lang="EN-US">2G</span>和<span lang="EN-US">4G</span>模块运行的软件代码不太相同：<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoListParagraph" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">2G</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">模块：如果设备中<span lang="EN-US">core</span>固件的版本号是<span lang="EN-US">0035</span>或者之前的版本，<span lang="EN-US">core</span>中存在一个<span lang="EN-US">bug</span>，会导致重启后运行的是设备最后一次本地烧录的脚本；<span lang="EN-US">0036</span>以及之后的<span lang="EN-US">core</span>版本不存在此<span lang="EN-US">bug</span>，重启后仍然运行远程升级之前的脚本<span lang="EN-US"><o:p></o:p></span></span></p><p align="left" class="MsoNormal" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;">





</p><p align="left" class="MsoListParagraph" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">4G</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">模块：重启后运行的是升级前的固件</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">4.8</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、下载升级包之后自动重启，重启后发现一直在不断重启</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p align="left" class="MsoListParagraph" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;">

</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">升级包中打包的文件如果含有中文名，例如：测试说明<span lang="EN-US">.txt</span>，会导致模块下载升级包之后，一直不断重启的问题</span></p>














</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/2019/08/08/604/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/2019/08/08/602/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © chenxuuu 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
