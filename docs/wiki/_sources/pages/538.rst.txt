spi
===

   作者：吴永 更新时间：2020年8月12日 关键字：SPI

.. _spi-1:

spi
---

spi 操作接口

--------------

spi.setup
~~~~~~~~~

-  语法

   ``spi.setup(id,chpa,cpol,dataBits,clock,duplexMode)``

-  参数

   +----------+--------------------------------------+------------------+
   | 参数     | 释义                                 | 取值范围         |
   +==========+======================================+==================+
   | id       | SPI的ID，spi.SP                      | 0                |
   |          | I_1表示SPI1，Air720U系列只有SPI1作为 |                  |
   |          | 普通SPI接口使用，固定传spi.SPI_1即可 |                  |
   +----------+--------------------------------------+------------------+
   | chpa     | 0:第一个clk的跳变沿                  | 0~1              |
   |          | 传输数据，1:第二个clk跳变沿传输数据  |                  |
   +----------+--------------------------------------+------------------+
   | cpol     | clock                                | 0~1              |
   |          | 管脚                                 |                  |
   |          | 的默认状态，0表示低电平，1表示高电平 |                  |
   +----------+--------------------------------------+------------------+
   | dataBits | 数据位                               | 8                |
   +----------+--------------------------------------+------------------+
   | clock    | spi时钟频率，number数值              | 110000-100000000 |
   +----------+--------------------------------------+------------------+
   | duplex   | 只支持全双工                         | 1                |
   +----------+--------------------------------------+------------------+

-  返回值

   number类型，1表示成功，0表示失败

--------------

spi.send()
~~~~~~~~~~

写数据

-  语法

   ``spi.send(id,data)``

-  参数

   +------+--------------------------------------------------+----------+
   | 参数 | 释义                                             | 取值范围 |
   +======+==================================================+==========+
   | id   | SPI的ID，spi.SPI_1表示SPI1，Air720U系列          | 0        |
   |      | 只有SPI1作为普通SPI接口使用，固定传spi.SPI_1即可 |          |
   +------+--------------------------------------------------+----------+
   | data | string类型，要发送的数据                         |          |
   +------+--------------------------------------------------+----------+

-  返回值

   number类型，写成功的数据长度

--------------

spi.recv()
~~~~~~~~~~

读数据

-  语法

   ``spi.recv(id,length)``

-  参数

   +--------+------------------------------------------------+----------+
   | 参数   | 释义                                           | 取值范围 |
   +========+================================================+==========+
   | id     | SPI的ID，spi.SPI_1表示SPI1，Air720U系列只      | 0        |
   |        | 有SPI1作为普通SPI接口使用，固定传spi.SPI_1即可 |          |
   +--------+------------------------------------------------+----------+
   | length | 要读取的数据的长度                             |          |
   +--------+------------------------------------------------+----------+

-  返回值

   string类型，读取的数据内容

--------------

spi.send_recv()
~~~~~~~~~~~~~~~

读写数据

-  语法

   ``spi.send_recv(id,data)``

-  参数

   +------+--------------------------------------------------+----------+
   | 参数 | 释义                                             | 取值范围 |
   +======+==================================================+==========+
   | id   | SPI的ID，spi.SPI_1表示SPI1，Air720U系列          | 0        |
   |      | 只有SPI1作为普通SPI接口使用，固定传spi.SPI_1即可 |          |
   +------+--------------------------------------------------+----------+
   | data | string类型，要发送的数据                         |          |
   +------+--------------------------------------------------+----------+

-  返回值

   string类型，读取的数据内容

--------------

spi.close()
~~~~~~~~~~~

关闭SPI

-  语法

   ``spi.close(id)``

-  参数

   +------+--------------------------------------------------+----------+
   | 参数 | 释义                                             | 取值范围 |
   +======+==================================================+==========+
   | id   | SPI的ID，spi.SPI_1表示SPI1，Air720U系列          | 0        |
   |      | 只有SPI1作为普通SPI接口使用，固定传spi.SPI_1即可 |          |
   +------+--------------------------------------------------+----------+

-  返回值

   number类型，1表示成功，0表示失败
