<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>LuatOS 项目进度(20210124更新) [ Luat doc 社区文章静态页面 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="https://doc.luatos.wiki/wiki/">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">LuatOS 项目进度(20210124更新)</h1>
<article class="post markdown-style">
  <h1 id="LuatOS项目简介"><a href="#LuatOS项目简介" class="headerlink" title="LuatOS项目简介"></a>LuatOS项目简介</h1><p>gitee地址 <a target="_blank" rel="noopener" href="https://gitee.com/openLuat/LuatOS">https://gitee.com/openLuat/LuatOS</a><br>github地址 <a target="_blank" rel="noopener" href="https://github.com/openLuat/LuatOS">https://github.com/openLuat/LuatOS</a><br>QQ群: 1061642968</p>
<hr>
<h1 id="LuatOS-项目进展报告-20210124"><a href="#LuatOS-项目进展报告-20210124" class="headerlink" title="LuatOS 项目进展报告 - 20210124"></a>LuatOS 项目进展报告 - 20210124</h1><h2 id="本周进展"><a href="#本周进展" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS"><a href="#LuatOS" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: dbg库第一版,脚本调试器,命令行形式</li>
</ul>
<h3 id="LuaTools"><a href="#LuaTools" class="headerlink" title="LuaTools"></a>LuaTools</h3><ul>
<li>add: 发布2.1.1</li>
<li>add: 添加luatos dbg调试器代理</li>
<li>change: 迁移更新服务</li>
</ul>
<h3 id="Air302"><a href="#Air302" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: 并入上游v035 sdk</li>
</ul>
<h3 id="官网"><a href="#官网" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: 代理luatools的更新服务</li>
</ul>
<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><ul>
<li>vscode-luatos-debug vscode插件完成度60%</li>
</ul>
<h2 id="下周计划"><a href="#下周计划" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air820ug: 继续适配sdk,也许可能有机会把lua vm跑起来</li>
<li>air302: 分发新的测试版本</li>
<li>air640w: 并入新的u8g2库(预期’消防车’会发起pr)</li>
<li>luatools: 继续完善调试器代理</li>
<li>其他: 完成vscode的luatos调试插件</li>
<li>官网: 完善博客的页面编辑器</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20210116"><a href="#LuatOS-项目进展报告-20210116" class="headerlink" title="LuatOS 项目进展报告 - 20210116"></a>LuatOS 项目进展报告 - 20210116</h1><h2 id="本周进展-1"><a href="#本周进展-1" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-1"><a href="#LuatOS-1" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 为string库添加base64方法</li>
<li>add: 为air640w的dfs_lfs2添加新的布局,通过减少文件系统大小,塞入中文字库</li>
<li>fix: socket.ntpSync没了</li>
<li>update: 默认禁用debug库,在实现lua版本的调试器之前,这个库没有意义</li>
</ul>
<h3 id="LuaTools-1"><a href="#LuaTools-1" class="headerlink" title="LuaTools"></a>LuaTools</h3><ul>
<li>add: 直接读取AP日志</li>
<li>update:适配host协议上传命令给RDA8910</li>
</ul>
<h3 id="Air302-1"><a href="#Air302-1" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: 释放uart0给用户使用</li>
</ul>
<h3 id="air820ug"><a href="#air820ug" class="headerlink" title="air820ug"></a>air820ug</h3><ul>
<li>add: 添加hello world</li>
</ul>
<h3 id="官网-1"><a href="#官网-1" class="headerlink" title="官网"></a>官网</h3><ul>
<li>update: 完成资源库设计</li>
<li>add: 为LuaTools做一个页面(未上线)</li>
</ul>
<h3 id="探索类"><a href="#探索类" class="headerlink" title="探索类"></a>探索类</h3><ul>
<li>Lua调试器探索: <a target="_blank" rel="noopener" href="https://github.com/Tencent/LuaPanda">LuaPanda</a></li>
</ul>
<h2 id="下周计划-1"><a href="#下周计划-1" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air820ug: 继续适配sdk</li>
<li>官网: 设计并实现资源库</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20210110"><a href="#LuatOS-项目进展报告-20210110" class="headerlink" title="LuatOS 项目进展报告 - 20210110"></a>LuatOS 项目进展报告 - 20210110</h1><h2 id="本周进展-2"><a href="#本周进展-2" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-2"><a href="#LuatOS-2" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>fix: msgbus和timer的freertos实现有错误,修正之</li>
</ul>
<h3 id="Air100st"><a href="#Air100st" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>update: 刷机流程完善</li>
<li>update: 文件系统验证通过,能跑脚本了</li>
</ul>
<h3 id="LuaTools-2"><a href="#LuaTools-2" class="headerlink" title="LuaTools"></a>LuaTools</h3><ul>
<li>add: luadb v2 支持校验</li>
<li>update: 已交付给测试部进行测试</li>
</ul>
<h2 id="下周计划-2"><a href="#下周计划-2" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 适配更多外设</li>
<li>luatools: 支持air640w的固件刷机和底层刷机</li>
<li>air820ug: 开始适配sdk</li>
<li>官网: 为LuaTools做一个页面</li>
<li>官网: 设计并实现资源库</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20210103"><a href="#LuatOS-项目进展报告-20210103" class="headerlink" title="LuatOS 项目进展报告 - 20210103"></a>LuatOS 项目进展报告 - 20210103</h1><h2 id="本周进展-3"><a href="#本周进展-3" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-3"><a href="#LuatOS-3" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 添加FEATURE_STATIC_LUASTATE,静态化lua_State结构体</li>
<li>fix: mqtt2的shutdown没有生效 </li>
<li>fix: http库的api文档有语法错误</li>
</ul>
<h3 id="Air100st-1"><a href="#Air100st-1" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>正在完善刷机刷脚本协议</li>
</ul>
<h3 id="官网-2"><a href="#官网-2" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: 添加luatools所需的web api</li>
</ul>
<h3 id="LuaTools-3"><a href="#LuaTools-3" class="headerlink" title="LuaTools"></a>LuaTools</h3><ul>
<li>add: 定义中性版本</li>
<li>add: 日志自动清理</li>
<li>add: 按文件夹添加脚本(递归子目录)</li>
<li>change: 默认输出x86版本, 本次更新后, 将替换原有的x64版本</li>
<li>fix: 修复air302下载固件和脚本失败的bug</li>
<li>fix: 调整菜单, 修复错误的链接</li>
<li>fix: 项目列表栏的表头不应该显示</li>
<li>fix: 执行air302的语法检查会报错</li>
</ul>
<h2 id="下周计划-3"><a href="#下周计划-3" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 仍需讨论终版设计</li>
<li>air100st: 完成下载脚本的功能</li>
<li>air302: 支持ctiot升级脚本(仍无头绪)</li>
<li>air302: 用户反馈gpio在联网前持续触发到联网成功后, 有极小概率出现不再触发的问题(仍无重现)</li>
<li>air302: 用户反馈edrx参数设置无效的问题(待确认)</li>
<li>luatools: 将新版进行测试后推送,拟定新的开发计划和发布周期</li>
<li>官网: 解决设备轨迹跟踪的遗留问题</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201228"><a href="#LuatOS-项目进展报告-20201228" class="headerlink" title="LuatOS 项目进展报告 - 20201228"></a>LuatOS 项目进展报告 - 20201228</h1><h2 id="本周进展-4"><a href="#本周进展-4" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-2"><a href="#Air302-2" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 使得crypto/ctiot/http可选编译</li>
<li>update: 支持完全禁用unilog编译</li>
<li>update: 调整luat_malloc_air302,使用户可以自行调整内存大小</li>
<li>change: luaL_prepbuffsize也没有必要每次都GC</li>
<li>add: 发布V0005 beta1测试版本</li>
</ul>
<h3 id="LuatOS-4"><a href="#LuatOS-4" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>fix: luaM_realloc_无需每次都GC</li>
<li>change: luaL_prepbuffsize也没有必要每次都GC</li>
<li>update: 如果是测试固件,打印额外的提示语句</li>
</ul>
<h3 id="Air100st-2"><a href="#Air100st-2" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>完成适配spi flash,完成lfs文件系统</li>
</ul>
<h3 id="官网-3"><a href="#官网-3" class="headerlink" title="官网"></a>官网</h3><ul>
<li>update:主页手机版式</li>
<li>update:博客等页面的手机版式</li>
</ul>
<h2 id="下周计划-4"><a href="#下周计划-4" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 解决开发板的问题,确定终版设计</li>
<li>air100st: 配合luatools考虑下载脚本的流程</li>
<li>luatos: 完成rtt package所需要的元数据文件(上周未完成)</li>
<li>air302: 支持ctiot升级脚本(上周未完成)</li>
<li>luatools: 修复急需的特性,检讨代码结构</li>
<li>官网: 适配GT06协议</li>
<li>官网: 添加luatools所需的web api</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201220"><a href="#LuatOS-项目进展报告-20201220" class="headerlink" title="LuatOS 项目进展报告 - 20201220"></a>LuatOS 项目进展报告 - 20201220</h1><h2 id="本周进展-5"><a href="#本周进展-5" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-3"><a href="#Air302-3" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: 并入最新sdk后,uart2无法使用的bug</li>
</ul>
<h3 id="LuatOS-5"><a href="#LuatOS-5" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 添加墨水屏中文字库支持</li>
<li>add: 墨水屏驱动支持微雪全系列</li>
<li>update: eink的字库实现二分查找,并替换为无版权问题的谷歌字体</li>
<li>change: lua vm异常退出时,不在关闭lua state,保留现场,便于做内存分析</li>
</ul>
<h3 id="Air100st-3"><a href="#Air100st-3" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>继续适配spi flash</li>
</ul>
<h3 id="官网-4"><a href="#官网-4" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: 天气API</li>
<li>update: 优化设备管理和轨迹显示</li>
</ul>
<h2 id="下周计划-5"><a href="#下周计划-5" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 继续完成spi flash驱动,文件系统(上周未完成)</li>
<li>air302: 发布V0005测试版(上周未发布V0005,这周改成发测试版吧)</li>
<li>luatos: 完成rtt package所需要的元数据文件(上周未完成)</li>
<li>air640w: 尝试让其也支持墨水屏</li>
<li>air302: 支持ctiot升级脚本</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201213"><a href="#LuatOS-项目进展报告-20201213" class="headerlink" title="LuatOS 项目进展报告 - 20201213"></a>LuatOS 项目进展报告 - 20201213</h1><h2 id="本周进展-6"><a href="#本周进展-6" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-4"><a href="#Air302-4" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 并入sdk patch1 和 patch2</li>
<li>update: 发布V0004</li>
<li>fix: gpio16不能被控制的bug</li>
</ul>
<h3 id="LuatOS-6"><a href="#LuatOS-6" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 添加墨水屏支持, 由”好记星”贡献</li>
<li>add: 添加内置的SHT30读取支持,由”好记星”贡献</li>
<li>fix: crc.c里面的数组应该改成static的</li>
</ul>
<h3 id="Air100st-4"><a href="#Air100st-4" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>新的makefile已经完成</li>
</ul>
<h3 id="官网-5"><a href="#官网-5" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: jt808服务部署完成,基础功能可用,与设备联调ok</li>
</ul>
<h2 id="下周计划-6"><a href="#下周计划-6" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: spi和flash驱动,文件系统</li>
<li>air302: 发布V0005或者V0004.patch2</li>
<li>air302: 解决uart2无法使用的bug</li>
<li>air302: 解决http的2个bug</li>
<li>air302: 添加墨水屏的demo,基于自建的天气服务</li>
<li>官网: 优化设备管理和轨迹显示</li>
<li>官网: 添加天气API</li>
<li>air640w: 完成rtt package所需要的元数据文件</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201206"><a href="#LuatOS-项目进展报告-20201206" class="headerlink" title="LuatOS 项目进展报告 - 20201206"></a>LuatOS 项目进展报告 - 20201206</h1><h2 id="本周进展-7"><a href="#本周进展-7" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-5"><a href="#Air302-5" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 并入最新的sdk v001.034.20201120</li>
<li>add: 添加 PTW和 TimeZone 的API</li>
</ul>
<h3 id="LuatOS-7"><a href="#LuatOS-7" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>fix: air302的ds18b20的demo有错误</li>
</ul>
<h3 id="官网-6"><a href="#官网-6" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: devtrack服务的地图展示</li>
</ul>
<h2 id="下周计划-7"><a href="#下周计划-7" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 完成cmake版的Makefile,添加luatos更多代码</li>
<li>air302: 发布V0004正式版</li>
<li>官网: 测试jt808服务</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201128"><a href="#LuatOS-项目进展报告-20201128" class="headerlink" title="LuatOS 项目进展报告 - 20201128"></a>LuatOS 项目进展报告 - 20201128</h1><h2 id="本周进展-8"><a href="#本周进展-8" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-6"><a href="#Air302-6" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: 按移芯的答复,修改band获取和设置的代码, 现已支持锁频</li>
<li>update: 开始合并sdk v001.034.20201120</li>
<li>add: air302添加个上报到luatos设备跟踪服务的demo</li>
</ul>
<h3 id="Air100st-5"><a href="#Air100st-5" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: uart实现</li>
</ul>
<h3 id="LuatOS-8"><a href="#LuatOS-8" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: luat_shell支持at+ecrst,改善air302的刷机体验</li>
<li>update: air640w.py适配星盟TW-1菊花板的下载逻辑</li>
</ul>
<h2 id="Air640w"><a href="#Air640w" class="headerlink" title="Air640w"></a>Air640w</h2><ul>
<li>add : air640w支持pwm</li>
<li>update: 为air640w的demo添加标准注释头</li>
</ul>
<h3 id="官网-7"><a href="#官网-7" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: netlab支持加密连接</li>
<li>add: netlab支持更多界面动画</li>
<li>update: devlog服务小规模测试完成</li>
</ul>
<h2 id="下周计划-8"><a href="#下周计划-8" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 实现更多外设的移植,并入lua/luatos代码</li>
<li>air302: 发布V0004正式版或测试版</li>
<li>air302: 合并sdk</li>
<li>air640w: 发布V0004正式版</li>
<li>官网: 部署和测试devtrack服务</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201122"><a href="#LuatOS-项目进展报告-20201122" class="headerlink" title="LuatOS 项目进展报告 - 20201122"></a>LuatOS 项目进展报告 - 20201122</h1><h2 id="本周进展-9"><a href="#本周进展-9" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-7"><a href="#Air302-7" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: 添加nbiot.setTZ方法, 方便设置时区</li>
<li>update:加入官方给的GPIO中断解决方法</li>
<li>update:ctiot默认启用UQ MODE缓存数据</li>
<li>fix: netclient有几个日志不够清晰</li>
<li>remove: 移除已经没用的luat_lib_package_air302.c,因为默认的实现已经ok</li>
<li>remove: luat_disp_air302.c是空的,删掉吧</li>
<li>change: luat_fs_air302.c 减少一个日志吧</li>
</ul>
<h3 id="Air100st-6"><a href="#Air100st-6" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: 新的os API和dev API</li>
</ul>
<h3 id="LuatOS-9"><a href="#LuatOS-9" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>update: fpconv_g_fmt,去掉浮点数json化后,后面多余的’0’</li>
<li>update: json_encode,添加浮点数转换精度和模式的设置,原来的接口调用方式,默认为”%.7g”,和lua的tostring保持一致</li>
<li>update: 为air640w引入rtt库已经合并的rt_hw_us_delay方法</li>
<li>update: 为air302的mqtt2的demo添加少许注释</li>
<li>fix: air640w因初始化顺序问题,自动重连没有生效的bug. 原因是文件系统的初始化比rt_wlan_cfg_cache_refresh晚<br>fix: 更正mqtt 2的demo发不出消息的bug</li>
<li>add: mqtt2的demo</li>
<li>add:ctwing平台增加update API，用于和平台保活 update:ctiot demo 增加update保持连接，增加tx fail后重连平台的操作</li>
<li>add: 为air302添加sht20的demo</li>
<li>add: 为air302添加sht30的demo,顺便加上接线说明</li>
<li>remove: 移除ltests.c,反正也没用的</li>
<li>change: luat_malloc_weak.c添加一段内存调试用代码,默认关闭</li>
<li>change: luaL_prepbuffsize已经有强制gc, 无需在新建字符串时gc了</li>
</ul>
<h3 id="官网-8"><a href="#官网-8" class="headerlink" title="官网"></a>官网</h3><ul>
<li>官网: 部署多租户后台</li>
<li>官网: 部署devlog日志跟踪服务</li>
<li>官网: 部署lbsloc测试服务</li>
</ul>
<h2 id="下周计划-9"><a href="#下周计划-9" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 实现更多外设的移植</li>
<li>luatos: 协助团队外的开发者集成墨水屏</li>
<li>w800: 继续协助飞思创完成后续适配</li>
<li>官网: 完成并部署设备日志的查看界面</li>
<li>官网: 部署或小范围测试devlog/lbsloc/devtrace</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201115"><a href="#LuatOS-项目进展报告-20201115" class="headerlink" title="LuatOS 项目进展报告 - 20201115"></a>LuatOS 项目进展报告 - 20201115</h1><h2 id="本周进展-10"><a href="#本周进展-10" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-8"><a href="#Air302-8" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: gpio中断有问题,属于sdk的问题</li>
<li>fix: 获取基站数据有概率导致重启</li>
<li>fix: l_nbiot_set_edrx有日志语句错误</li>
<li>fix: air302的demo里有错误的aon_gpio和adc描述,修正一下</li>
<li>update: 新sdk的合并延后到v001.035</li>
</ul>
<h3 id="Air100st-7"><a href="#Air100st-7" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: 自定义的bootloader</li>
<li>add: 集成cm_trackback 异常堆栈跟踪</li>
</ul>
<h3 id="LuatOS-10"><a href="#LuatOS-10" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 新的mqtt2.lua,异步mqtt库, 低内存消耗,异步api</li>
<li>add: mqttcore.unpack方法,至此,全部mqtt解码均使用C实现</li>
<li>add: uart库的校验位识别符,支持全大写</li>
<li>add: urlEncode,在原来接口不变的前提下,添加了php标准,RFC3986标准和自定义标准的选择</li>
<li>fix: 使用内存在溢出的边缘时,有概率导致死机,修正luat_heap_alloc的逻辑</li>
<li>fix: mqtt2.lua在处理不完整的数据包时会报错</li>
<li>fix: 在air640w上的socket使用,如果lua端提前close,而后台线程之后才关闭, 有概率报错</li>
<li>fix: 让l_mqttcore_packSUBSCRIBE更健壮一些</li>
<li>fix: i2c带上返回值 #I24COF</li>
<li>update: cjson的fpconv的代码有点多余,清理一下</li>
</ul>
<h3 id="air640w及w800"><a href="#air640w及w800" class="headerlink" title="air640w及w800"></a>air640w及w800</h3><ol>
<li>支持wifi信息保存到文件系统</li>
<li>协助飞思创完成w800的基础移植(uart/gpio/文件系统/浮点数打印,均已可用)</li>
</ol>
<h3 id="官网-9"><a href="#官网-9" class="headerlink" title="官网"></a>官网</h3><ul>
<li>官网: iot平台后端界面初始化,基础数据结构完成</li>
<li>官网: 虚拟设备的基础部分改为Qt实现</li>
</ul>
<h2 id="下周计划-10"><a href="#下周计划-10" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 实现更多外设的移植</li>
<li>luatos: 协助团队外的开发者集成墨水屏</li>
<li>air302: 继续测试mqtt2的表现</li>
<li>w800: 继续协助飞思创完成后续适配</li>
<li>官网: 完成并部署设备日志的查看界面</li>
<li>官网: 部署iot后台</li>
<li>官网: 部署lbsloc测试服务</li>
<li>官网: 虚拟设备与luatos联合编译</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201108"><a href="#LuatOS-项目进展报告-20201108" class="headerlink" title="LuatOS 项目进展报告 - 20201108"></a>LuatOS 项目进展报告 - 20201108</h1><h2 id="本周进展-11"><a href="#本周进展-11" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-9"><a href="#Air302-9" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 合并sdk v001.033(仍未完成)</li>
</ul>
<h3 id="Air100st-8"><a href="#Air100st-8" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: 测试开发板已收到,基本测试中</li>
<li>add: 切换freertos底层,基础工作已经完成</li>
</ul>
<h3 id="LuatOS-11"><a href="#LuatOS-11" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>update: 与团队外的开发者调试Air302的内存问题</li>
</ul>
<h3 id="官网-10"><a href="#官网-10" class="headerlink" title="官网"></a>官网</h3><ul>
<li>官网: netlab英文版(海外版上线)</li>
<li>官网: luatos英文版官网开发中</li>
<li>官网: 设备日志服务,后端完成,等待前端</li>
<li>官网: 虚拟设备前端页面部分完成</li>
</ul>
<h2 id="下周计划-11"><a href="#下周计划-11" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 重新适配uart和gpio, 迁移luatos的上层代码</li>
<li>luatos: 调研lua 5.4</li>
<li>luatos: 设计主动式内存回收机制</li>
<li>官网: 设计并完成iot后台数据结构</li>
<li>官网: 完成设计日志的查看界面,需配合iot后台</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201101"><a href="#LuatOS-项目进展报告-20201101" class="headerlink" title="LuatOS 项目进展报告 - 20201101"></a>LuatOS 项目进展报告 - 20201101</h1><h2 id="本周进展-12"><a href="#本周进展-12" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-10"><a href="#Air302-10" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 合并sdk v001.033(未并入主线,问题有点多)</li>
</ul>
<h3 id="Air640w-1"><a href="#Air640w-1" class="headerlink" title="Air640w"></a>Air640w</h3><ul>
<li>fix: 修正几个编译问题</li>
<li>change: mcu固件的lua vm内存扩展到170kb</li>
<li>release: 发布V0003,并发布信息</li>
</ul>
<h2 id="下周计划-12"><a href="#下周计划-12" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air100st: 重新评估转用freertos底层</li>
<li>官网: 继续关注备案,设计其他模块</li>
<li>air302: 解决客户反馈的bug, 有客户反馈死机的问题(内存相关?)</li>
<li>luatos: 编写mqtt异步版本(本周未完成)</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201025"><a href="#LuatOS-项目进展报告-20201025" class="headerlink" title="LuatOS 项目进展报告 - 20201025"></a>LuatOS 项目进展报告 - 20201025</h1><h2 id="本周进展-13"><a href="#本周进展-13" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-11"><a href="#Air302-11" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: 创建timer失败的时候, 删除timer会段错误</li>
<li>fix: 修正ds18b20概率性修正失败的bug</li>
<li>add: 适配pm库的两个新方法,并简化日志</li>
</ul>
<h3 id="LuatOS本身"><a href="#LuatOS本身" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>fix: l_pm_last_reson改对(2个返回值)之后,行为反而跟原本不符</li>
<li>fix: 修改air302生成量产文件的目录, 适配骑士智能的批量下载工具的布局</li>
<li>update: air302.py生成便于使用的量产文件</li>
<li>add: pm添加2个新方法, 一个读取唤醒的deepTimer的id, 一个读取deepTimer唤醒时间</li>
</ul>
<h3 id="官网-11"><a href="#官网-11" class="headerlink" title="官网"></a>官网</h3><ul>
<li>update: netlab调优完成,与串口工具llcom的集成完成</li>
</ul>
<h3 id="硬件方面"><a href="#硬件方面" class="headerlink" title="硬件方面"></a>硬件方面</h3><ul>
<li>继续等待LuatOS开发板(缺flash,重新做pcb中)</li>
</ul>
<h2 id="下周计划-13"><a href="#下周计划-13" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>官网: 继续关注备案,设计其他模块</li>
<li>air302: 解决客户反馈的bug</li>
<li>luatos: 编写mqtt异步版本</li>
<li>luatos:  测试AT适配(Air724UG)</li>
<li>luatos: 考虑改写socket实现</li>
<li>虚拟设备: 继续推进编写</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201018"><a href="#LuatOS-项目进展报告-20201018" class="headerlink" title="LuatOS 项目进展报告 - 20201018"></a>LuatOS 项目进展报告 - 20201018</h1><h2 id="本周进展-14"><a href="#本周进展-14" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-12"><a href="#Air302-12" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: gpio上拉下拉的bug</li>
<li>fix: gpio切换模式是不应该打印日志,会导致ds18b20无法读取</li>
<li>fix: 修正延时函数的bug 从而修正ds18b20读取失败的bug</li>
<li>update: 更新air302的adc用法,推荐用户用完adc就关闭,这样更省电</li>
<li>update: 更新air302的ds18b20示例,加上了网络灯</li>
<li>add: 演示上传温度数据到tlink平台,默认间隔2分钟,使用ds18b20</li>
<li>add: 发布V0003正式版, 并在开源中国发新闻</li>
</ul>
<h3 id="LuatOS本身-1"><a href="#LuatOS本身-1" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>update: 新风格的README</li>
<li>update: 减少luat_main的日志. remove: 移除多余的l_sprintf方法</li>
<li>add: sensor库读取ds18b20时,默认校验crc值,以提供更可靠的输出</li>
</ul>
<h3 id="官网-12"><a href="#官网-12" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: netlab的服务器端已经就绪(tcplab的替代方案)</li>
</ul>
<h3 id="相关硬件方面"><a href="#相关硬件方面" class="headerlink" title="相关硬件方面"></a>相关硬件方面</h3><ul>
<li>update: 由于Flash缺失, LuatOS开发板继续延误中</li>
<li>update: 基于w600(即Air640w的芯片)的串口记录器, 已打样, 电路ok, 读写TF卡正常</li>
</ul>
<h2 id="下周计划-14"><a href="#下周计划-14" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>为Air302的V0004/V0005进行规划,主要是合并新的SDK及补充非核心库.</li>
<li>继续推进官网备案,使用临时域名部署各模块.</li>
<li>完成netlab网页端,推动llcom集成,争取开始公测</li>
<li>推进LuatOS开发板的片上设备的适配</li>
<li>测试AT适配(Air724系列)</li>
<li>为Air640w发布两个版本的V0003, wifi版和mcu版</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20201011"><a href="#LuatOS-项目进展报告-20201011" class="headerlink" title="LuatOS 项目进展报告 - 20201011"></a>LuatOS 项目进展报告 - 20201011</h1><h2 id="本周进展-15"><a href="#本周进展-15" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-13"><a href="#Air302-13" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: 添加udp与uart集成的demo</li>
<li>add: 支持读取DHT12温湿度传感器,并添加demo</li>
<li>add: 支持读写EEPROM,并添加demo</li>
<li>fix: i2c实现的bug</li>
</ul>
<h3 id="LuatOS本身-2"><a href="#LuatOS本身-2" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>add: sensor库暴露w1单总线协议的Lua API</li>
</ul>
<h3 id="官网-13"><a href="#官网-13" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: 基础后台已上线</li>
</ul>
<h2 id="下周计划-15"><a href="#下周计划-15" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air302仍需解决读取ds18b20的bug,最迟10月12号发布V0003,不再等了.</li>
<li>继续推进官网备案,开始使用临时域名作为替代</li>
<li>依然需要等待LuatOS开发板就位</li>
<li>开始推进官网子模块的实现,如udplab</li>
<li>推进air724的基本集成</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20200927"><a href="#LuatOS-项目进展报告-20200927" class="headerlink" title="LuatOS 项目进展报告 - 20200927"></a>LuatOS 项目进展报告 - 20200927</h1><h2 id="本周进展-16"><a href="#本周进展-16" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-14"><a href="#Air302-14" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: SSL功能经讨论,新的mbedtls配置也是不可行的.至此,彻底放弃SSL功能</li>
<li>fix: nbiot.setEDRX方法是最后一个参数应支持字符串形式</li>
</ul>
<h3 id="LuatOS本身-3"><a href="#LuatOS本身-3" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>fix: lauxlib读取文件时使用的getc没有映射到luat_fs_getc. 其中air302受影响.</li>
<li>fix: 修正几个keil下才报的编译错误</li>
<li>fix: luat_i2c_rtt有个编译警告,修正一下吧</li>
</ul>
<h3 id="Air100st-9"><a href="#Air100st-9" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>update: i2s 预研</li>
</ul>
<h3 id="Air724"><a href="#Air724" class="headerlink" title="Air724"></a>Air724</h3><ul>
<li>update: 预研csdk发现几个严重的bug,等待解决</li>
</ul>
<h2 id="下周计划-16"><a href="#下周计划-16" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>待air302的i2c问题得到确认或解决后,发布V0003,时间定在国庆前.</li>
<li>继续推进官网备案</li>
<li>继续推进虚拟设备的编写</li>
<li>国庆后主推air100st的相关开发任务</li>
<li>协助飞思创开发w800的集成</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20200920"><a href="#LuatOS-项目进展报告-20200920" class="headerlink" title="LuatOS 项目进展报告 - 20200920"></a>LuatOS 项目进展报告 - 20200920</h1><h2 id="本周进展-17"><a href="#本周进展-17" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-15"><a href="#Air302-15" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 更新SDK v001.031的patch 1</li>
<li>update: 测试新的休眠唤醒判断代码(lua的)</li>
<li>change: 更新sdk后, 强制休眠将不能使用RTC唤醒</li>
</ul>
<h3 id="LuatOS本身-4"><a href="#LuatOS本身-4" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>update: 修正pwm相关逻辑</li>
<li>add: fs添加mount/umount/mkdir方法</li>
</ul>
<h3 id="Air100st-10"><a href="#Air100st-10" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: pwm可用</li>
<li>add: 支持挂载tf卡</li>
</ul>
<h3 id="Air640w-2"><a href="#Air640w-2" class="headerlink" title="Air640w"></a>Air640w</h3><ul>
<li>add: 支持纯mcu编译模式,禁用所有网络相关的代码,总可用内存达220kb</li>
<li>add: 支持挂载tf卡</li>
<li>update: 支持pwm设置</li>
</ul>
<h3 id="Air724-1"><a href="#Air724-1" class="headerlink" title="Air724"></a>Air724</h3><ul>
<li>update: 预研csdk发现几个严重的bug,等待解决</li>
</ul>
<h2 id="下周计划-17"><a href="#下周计划-17" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>周三发布V0003正式版,并到osc发新闻(又推迟到下周)</li>
<li>继续推进AT适配的相关设计工作</li>
<li>推进Air100st片上usb设备的适配</li>
<li>继续推进官网备案(又被打回重审了,心累)</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20200913"><a href="#LuatOS-项目进展报告-20200913" class="headerlink" title="LuatOS 项目进展报告 - 20200913"></a>LuatOS 项目进展报告 - 20200913</h1><h2 id="本周进展-18"><a href="#本周进展-18" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-16"><a href="#Air302-16" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: 格式化浮点数的bug</li>
<li>fix: nbiot.getEdrx的实现写成了set方法了</li>
<li>update: 放开uart1的rx功能</li>
<li>update: 仅主动开启AON后,才在休眠时启动AON配置.<a target="_blank" rel="noopener" href="https://gitee.com/openLuat/LuatOS/issues/I1U917">https://gitee.com/openLuat/LuatOS/issues/I1U917</a></li>
<li>update: luat_main无需参数了</li>
</ul>
<h3 id="Air100st-11"><a href="#Air100st-11" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>add: spi flash可用</li>
<li>add: usb slave模式(模拟成U盘),部分完成</li>
</ul>
<h3 id="LuatOS本身-5"><a href="#LuatOS本身-5" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>fix: mqtt.lua的pub_msg没反应 <a target="_blank" rel="noopener" href="https://gitee.com/openLuat/LuatOS/issues/I1TRE7">https://gitee.com/openLuat/LuatOS/issues/I1TRE7</a></li>
<li>fix: rtt环境下读取lua vm内存大小失败.原因是老的luat_meminfo_luavm没删掉</li>
<li>change: luat_main不再传参数了</li>
<li>add: sys的订阅功能支持多topic</li>
<li>add: 添加几个设计文档</li>
<li>add: 增加低功耗定时器运行监测，如果不是自己的定时器唤醒，则继续睡</li>
<li>add: 添加gpio.setDefaultPull方法</li>
</ul>
<h3 id="Air724-2"><a href="#Air724-2" class="headerlink" title="Air724"></a>Air724</h3><ul>
<li>add: 编译环境搭建完成,添加对应的bsp目录</li>
</ul>
<h2 id="下周计划-18"><a href="#下周计划-18" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>周一/周二发布V0003正式版,并到osc发新闻</li>
<li>继续推进AT适配的相关设计工作</li>
<li>推进Air100st片上设备的适配(i2c/spi/usb)</li>
<li>完成air724的核心适配(timer/msgbus/uart)</li>
<li>继续推进Air001虚拟设备的实现</li>
<li>继续推进官网备案</li>
</ul>
<hr>
<h1 id="LuatOS-项目进展报告-20200905"><a href="#LuatOS-项目进展报告-20200905" class="headerlink" title="LuatOS 项目进展报告 - 20200905"></a>LuatOS 项目进展报告 - 20200905</h1><h2 id="本周进展-19"><a href="#本周进展-19" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="Air302-17"><a href="#Air302-17" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: ctiot库, 支持中国电信的ctwing平台</li>
<li>add: 合并上游sdk v001.031.20200829</li>
<li>update: 返回更详细的开机原因</li>
</ul>
<h3 id="Air100st-12"><a href="#Air100st-12" class="headerlink" title="Air100st"></a>Air100st</h3><ul>
<li>update: 片上文件系统可用</li>
</ul>
<h3 id="LuatOS本身-6"><a href="#LuatOS本身-6" class="headerlink" title="LuatOS本身"></a>LuatOS本身</h3><ul>
<li>add: 通用的lua vm heap实现,平台无关</li>
<li>add: ctiot库的抽象实现</li>
</ul>
<h3 id="Air001-虚拟设备"><a href="#Air001-虚拟设备" class="headerlink" title="Air001(虚拟设备)"></a>Air001(虚拟设备)</h3><ul>
<li>add: 添加一个概念实现</li>
</ul>
<h3 id="官网-14"><a href="#官网-14" class="headerlink" title="官网"></a>官网</h3><ul>
<li>备案仍未完成</li>
<li>logo重新设计中</li>
</ul>
<h2 id="下周计划-19"><a href="#下周计划-19" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>继续与厂商调试air302的浮点数编译问题,完成后发布V0003正式版</li>
<li>启动AT适配的相关设计工作</li>
<li>推进Air100st片上设备的适配</li>
<li>推进Air001与mqtt的通信实现</li>
</ul>
<hr>
<h1 id="季度进度汇总及后续开发计划-2020-09-03"><a href="#季度进度汇总及后续开发计划-2020-09-03" class="headerlink" title="季度进度汇总及后续开发计划 2020-09-03"></a>季度进度汇总及后续开发计划 2020-09-03</h1><p>以下描述的模块适配和大功能的开发, 未包含LuatOS本身及社区的开发.</p>
<h2 id="Air302-18"><a href="#Air302-18" class="headerlink" title="Air302"></a>Air302</h2><ul>
<li>8月中,对外发布V0003 –&gt; 实际推迟到现在(9月初), 剩余1个关键的bug未解决</li>
<li>8月底,转入维护期 –&gt; 等待V0003的发布</li>
</ul>
<h2 id="Air640w-3"><a href="#Air640w-3" class="headerlink" title="Air640w"></a>Air640w</h2><ul>
<li>7月底,已转入维护期</li>
</ul>
<h2 id="Air100"><a href="#Air100" class="headerlink" title="Air100"></a>Air100</h2><ul>
<li>9月底,发布初始化版本 –&gt; 实际暂停中,未执行开发任务</li>
</ul>
<h2 id="Air100st-stm32f407"><a href="#Air100st-stm32f407" class="headerlink" title="Air100st(stm32f407)"></a>Air100st(stm32f407)</h2><ul>
<li>8月底,完成基本适配 –&gt; 延期到9月初,等待片上文件系统适配</li>
<li>9月底,完成开发板的适配,内部测试版 –&gt; 依然定于9月底, 需要完成USB/I2S的适配(视情况完成屏幕和摄像头的适配)</li>
<li>10月中, 对外发布初始版本</li>
<li>10月底, 完成一款应用, 功能经过测试的版本</li>
<li>11月中, 与AT适配进行结合,发布一个功能完善的版本</li>
</ul>
<h2 id="AT适配"><a href="#AT适配" class="headerlink" title="AT适配"></a>AT适配</h2><ul>
<li>9月中, 完成设计</li>
<li>9月底, 通用AT框架</li>
<li>10月中, 适配Air724UG系列</li>
<li>10月底, 适配Air720S系列,发布初始版本 – 取决于Air724UG适配的顺利程度</li>
<li>11月中, 适配EC20/EC200系列</li>
</ul>
<h2 id="Air001-虚拟设备-1"><a href="#Air001-虚拟设备-1" class="headerlink" title="Air001(虚拟设备)"></a>Air001(虚拟设备)</h2><ul>
<li>9月初, 完成设计</li>
<li>9月底, 完成原型</li>
<li>10月中, 设备端–&gt;mqtt–&gt;界面,跑通</li>
<li>11月中, 发布初始版本</li>
</ul>
<p>维护期 : 已实现主要开发任务,完成固件的对外发布, 往后以修正bug为主.</p>
<hr>
<h1 id="LuatOS-项目进展报告-20200830"><a href="#LuatOS-项目进展报告-20200830" class="headerlink" title="LuatOS 项目进展报告 - 20200830"></a>LuatOS 项目进展报告 - 20200830</h1><h2 id="本周进度"><a href="#本周进度" class="headerlink" title="本周进度"></a>本周进度</h2><h3 id="LuatOS-12"><a href="#LuatOS-12" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: ctiot的Lua API和平台抽象层API</li>
<li>add: 虚拟设备的部分设计文档</li>
<li>move: 整理代码,把luat/w60x的全部源码搬到bsp/air640w/rtt/applications</li>
</ul>
<h3 id="Air302-19"><a href="#Air302-19" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: ctiot的平台层实现</li>
<li>change: 调整几个AON GPIO相关的调用</li>
<li>update: 浮点数格式化的问题有解决的希望了</li>
</ul>
<h3 id="Air100-amp-Air100st"><a href="#Air100-amp-Air100st" class="headerlink" title="Air100 &amp; Air100st"></a>Air100 &amp; Air100st</h3><ul>
<li>update: 片上文件系统未完成</li>
</ul>
<h2 id="下周计划-20"><a href="#下周计划-20" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>air302合并新版sdk v001.031.20200829</li>
<li>air302解决浮点数格式化的问题</li>
<li>测试ctiot的实现</li>
<li>完成虚拟设备的原型设计并尝试实现</li>
<li>完成air100st的片上文件系统</li>
<li>设计lua vm的debug机制</li>
</ul>
<h1 id="LuatOS-项目进展报告-20200823"><a href="#LuatOS-项目进展报告-20200823" class="headerlink" title="LuatOS 项目进展报告 - 20200823"></a>LuatOS 项目进展报告 - 20200823</h1><h2 id="本周进展-20"><a href="#本周进展-20" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-13"><a href="#LuatOS-13" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 为air640w添加个how_to_build.md的文档</li>
<li>add: 添加对虚拟设备的一些想法及概念验证</li>
<li>fix: lua-cjson里面有编译错误</li>
<li>fix: luat_shell执行loadstr出错时,应该打印出出错原因</li>
<li>fix: 修正几个编译警告</li>
<li>fix: 修正l_crypto_crc16的一个小的编译警告</li>
<li>update: 整理rtt的SConscript文件</li>
<li>update: 解包mqtt数据时使用移位运算符更好一些</li>
<li>change: pack.unpack解出整数时,应该返回整数,而非浮点数</li>
<li>change: 改变w60x/air640w的编译方式,移除子模块</li>
</ul>
<h3 id="Air302-20"><a href="#Air302-20" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: Air302的spi功能和demo</li>
<li>add: Air302的远程升级demo</li>
<li>fix: os.remove不能删除文件</li>
</ul>
<h3 id="Air100-amp-Air100st-1"><a href="#Air100-amp-Air100st-1" class="headerlink" title="Air100 &amp; Air100st"></a>Air100 &amp; Air100st</h3><ul>
<li>update: Air100的移植先暂缓</li>
<li>update: Air100st uart/外挂spi flash可用</li>
</ul>
<h2 id="下周计划-21"><a href="#下周计划-21" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>争取发布Air302的V0003,并在OSC发新闻稿</li>
<li>继续完成Air100st的集成</li>
<li>修正Air302浮点数格式化的bug</li>
<li>完善虚拟模块Air001的设计</li>
<li>继续推进lwm2m库的完成</li>
<li>周例会定于每周一下午2点,时长约30分钟</li>
<li>推进air724UG</li>
</ul>
<h1 id="LuatOS-项目进度报告-20200816"><a href="#LuatOS-项目进度报告-20200816" class="headerlink" title="LuatOS 项目进度报告 - 20200816"></a>LuatOS 项目进度报告 - 20200816</h1><h2 id="本周进度-1"><a href="#本周进度-1" class="headerlink" title="本周进度"></a>本周进度</h2><h3 id="LuatOS-14"><a href="#LuatOS-14" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>fix: mklfs生成文件系统的bug</li>
<li>fix: 日志应该以\r\n结尾 <a target="_blank" rel="noopener" href="https://gitee.com/openLuat/LuatOS/issues/I1QYUH">https://gitee.com/openLuat/LuatOS/issues/I1QYUH</a></li>
<li>fix: 加上spi接口的返回值</li>
<li>add: 为netclient_send添加额外的flags参数</li>
<li>add: bsp/air100st</li>
<li>add: crypto库支持aes的解密, 并添加demo</li>
<li>add: 添加fs库,用于执行文件系统相关的操作,当前仅支持查询磁盘空间大小</li>
<li>add: 使得rtt下也支持fs模块</li>
</ul>
<h3 id="Air302-21"><a href="#Air302-21" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>fix: 修改netclient,真正支持PSM模式, 并添加PSM模式下TCP长连接的demo</li>
<li>fix: aes加密/解密会内存泄漏</li>
<li>fix: 底层sdk返回的block_used按字节计算,明显是bug呀</li>
<li>add: 添加luat_fs_info方法,用于获取文件系统的使用情况</li>
<li>update: 唤醒时不要调用appGetECBCInfoSync,起码减少2秒启动时间</li>
<li>update: 按移芯的建议,修改tcpipConnectionSend的raininfo参数, 进入休眠的时长减少到2秒</li>
<li>update: spi库调试中,未成功</li>
<li>update: lwm2m库仍在开发中</li>
</ul>
<h3 id="air100"><a href="#air100" class="headerlink" title="air100"></a>air100</h3><ul>
<li>update: sdk就绪, 移植工作未完成</li>
</ul>
<h3 id="air100st"><a href="#air100st" class="headerlink" title="air100st"></a>air100st</h3><ul>
<li>update: 添加bsp并编译ok,为下一步集成做准备</li>
</ul>
<h3 id="官网-15"><a href="#官网-15" class="headerlink" title="官网"></a>官网</h3><ul>
<li>add: 临时官网地址 <a target="_blank" rel="noopener" href="https://luatos.vue2.cn/">https://luatos.vue2.cn/</a></li>
</ul>
<h2 id="下周计划-22"><a href="#下周计划-22" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>继续推进官网的备案</li>
<li>继续推进air302剩余的工作(spi和lwm2m库)</li>
<li>集成并测试air100st临时开发板的板载资源</li>
<li>推进air100的sdk移植</li>
</ul>
<p>#LuatOS 项目进度报告 - 20200807</p>
<p>本周重点: 发布air302的V0003预览测试版及SDK</p>
<h2 id="本周进度-2"><a href="#本周进度-2" class="headerlink" title="本周进度"></a>本周进度</h2><h3 id="LuatOS-15"><a href="#LuatOS-15" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 测试完成OTA机制,发布公测版</li>
<li>change: http非200响应也读取body</li>
</ul>
<h3 id="Air302-22"><a href="#Air302-22" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: OTA机制,可使用iot.openluat.com进行升级</li>
<li>add: http文件下载</li>
<li>add: sdk,供用户自行编译LuatOS@Air302固件</li>
<li>add: V0003测试预览版</li>
</ul>
<h3 id="Air640"><a href="#Air640" class="headerlink" title="Air640"></a>Air640</h3><ul>
<li>add: OTA机制,暂时只能使用第三方升级服务</li>
</ul>
<h3 id="官网-16"><a href="#官网-16" class="headerlink" title="官网"></a>官网</h3><ul>
<li>首页UI设计完成</li>
</ul>
<h2 id="下周计划-23"><a href="#下周计划-23" class="headerlink" title="下周计划"></a>下周计划</h2><ul>
<li>推进air302的lwm2m库的开发和测试</li>
<li>推进air302的spi库的测试</li>
<li>推进官网备案</li>
<li>推进官网服务器的准备</li>
<li>推进LuatOS开发板的设计工作</li>
<li>预研Air100适配v2版API</li>
<li>预研Lua静态字符串池</li>
</ul>
<p>#LuatOS 项目进度报告 - 20200802</p>
<h2 id="本周进度-3"><a href="#本周进度-3" class="headerlink" title="本周进度"></a>本周进度</h2><h3 id="LuatOS-16"><a href="#LuatOS-16" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 脚本的OTA机制(测试中)</li>
<li>add: libgnss 测试通过,合并到主干</li>
<li>add: 添加wlan的api文档</li>
<li>add: 添加类似于一型一密的阿里云物联网平台的demo,使用regproxy实现</li>
<li>add: http库的rtt实现</li>
<li>fix: rtt版netclient的CONNECT标识有错误</li>
<li>fix: hmac_sha1/hmac_md5的rtt+硬件加速版本有bug,修正一下</li>
<li>change: 改luaconf.h,统一用32bits!!</li>
<li>add: api v2版(讨论中)</li>
</ul>
<h3 id="Air302-23"><a href="#Air302-23" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>release: 发布V0002版</li>
<li>add: http的下载功能</li>
<li>add: 适配脚本的OTA功能</li>
<li>change: 开放uart0给用户使用</li>
<li>fix: 修正几个客户反馈的小bug</li>
<li>update: lwm2m库的重新设计</li>
</ul>
<h3 id="Air640w-4"><a href="#Air640w-4" class="headerlink" title="Air640w"></a>Air640w</h3><ul>
<li>release: 发布V0002版</li>
<li>add: 网页配网/oneshot配网</li>
<li>change: 脚本区扩展到256kb</li>
<li>change: 适配脚本OTA机制</li>
</ul>
<h3 id="STM32F407"><a href="#STM32F407" class="headerlink" title="STM32F407"></a>STM32F407</h3><ul>
<li>梳理开发板需求</li>
</ul>
<h3 id="下周计划-24"><a href="#下周计划-24" class="headerlink" title="下周计划"></a>下周计划</h3><ul>
<li>详细测试脚本OTA机制</li>
<li>推进官网设计和开发,还有就是备案</li>
<li>推进lwm2m的实现和测试</li>
<li>推进stm32f407开发板</li>
<li>推进api v2版的讨论</li>
<li>为月中的V0003做准备</li>
</ul>
<h1 id="LuatOS-项目进展报告-20200726"><a href="#LuatOS-项目进展报告-20200726" class="headerlink" title="LuatOS 项目进展报告 - 20200726"></a>LuatOS 项目进展报告 - 20200726</h1><h2 id="本周进展-21"><a href="#本周进展-21" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-17"><a href="#LuatOS-17" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: crypto支持crc系列校验值/aes系列加密算法</li>
<li>add: 抽取luat_shell到LuatOS</li>
<li>change: 使用Paland.printf替换原有的custom_vsprintf,解决一系列格式化的bug</li>
<li>add: 添加32bits的luac.exe并修改air302.py</li>
<li>update: lwm2m的lua api设计(未完成)</li>
<li>update: libgnss的重新实现(测试未通过,不合并)</li>
</ul>
<h3 id="Air302-24"><a href="#Air302-24" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>change: 改为使用32bits的整型和浮点数</li>
<li>add: 适配抽象后的luat_shell</li>
</ul>
<h2 id="STM32"><a href="#STM32" class="headerlink" title="STM32"></a>STM32</h2><ul>
<li>开发板设计中</li>
</ul>
<h2 id="官网-17"><a href="#官网-17" class="headerlink" title="官网"></a>官网</h2><ul>
<li>UI设计中</li>
</ul>
<h2 id="下周计划-25"><a href="#下周计划-25" class="headerlink" title="下周计划"></a>下周计划</h2><h3 id="LuatOS-18"><a href="#LuatOS-18" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>设计: 官网UI设计</li>
<li>开发: lwm2m的实现</li>
<li>开发: ota机制的实现</li>
</ul>
<h1 id="LuatOS-项目进展报告-20200719"><a href="#LuatOS-项目进展报告-20200719" class="headerlink" title="LuatOS 项目进展报告 - 20200719"></a>LuatOS 项目进展报告 - 20200719</h1><h2 id="本周进展-22"><a href="#本周进展-22" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-19"><a href="#LuatOS-19" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: 新的api文档 <a target="_blank" rel="noopener" href="https://gitee.com/openLuat/LuatOS/blob/master/docs/api/lua/README.md">https://gitee.com/openLuat/LuatOS/blob/master/docs/api/lua/README.md</a></li>
<li>add: lpmem库的lua api层, 此为模块用于操作低功耗模式下的不掉电内存块</li>
<li>add: 改善air302的demo</li>
<li>add: mqtt的协议编解码使用C实现</li>
</ul>
<h3 id="Air302-25"><a href="#Air302-25" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>update: 底层SDK更新到v001.029.20190709</li>
<li>add: lpmem的air302实现</li>
<li>change: 调整内存布局为方案1: sys 30k, luavm 78kb</li>
</ul>
<h2 id="下周计划-26"><a href="#下周计划-26" class="headerlink" title="下周计划"></a>下周计划</h2><h3 id="LuatOS-20"><a href="#LuatOS-20" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>设计: stm32开发板需求</li>
<li>设计: lwm2m的lua api设计</li>
<li>设计: 官网UI设计</li>
<li>测试: mqtt协议深入</li>
<li>开发: crc/aes支持</li>
<li>修复: string.format和require的bug</li>
</ul>
<h3 id="Air302-26"><a href="#Air302-26" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>设计: update机制及部分实现</li>
<li>开发: http库,下载文件到文件系统</li>
<li>开发: cwting平台的lwm2m或通用lwm2m,待讨论</li>
<li>测试: spi接口api</li>
</ul>
<h1 id="LuatOS-项目进展报告-20200710"><a href="#LuatOS-项目进展报告-20200710" class="headerlink" title="LuatOS 项目进展报告 - 20200710"></a>LuatOS 项目进展报告 - 20200710</h1><p>尴尬的一周,LuatOS团队为支持阿里云的一型一密, 花费大量时间实现https,结果只能禁用之.<br>情况是这样:<br>要支持阿里云一型一密–&gt;需要支持https请求(因为动态注册的url只支持https)–&gt;需要http库及mbedtls支持(https需要加密库)–&gt;需要更多系统内存(mbedtls内存需求大)–&gt;压缩luavm的内存–&gt;luavm低于所需的最低限度,无法跑mqtt.lua</p>
<p>后续解决方向: 纯C的mqtt库</p>
<h2 id="本周进展-23"><a href="#本周进展-23" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-21"><a href="#LuatOS-21" class="headerlink" title="LuatOS"></a>LuatOS</h3><ul>
<li>add: disp支持中文字库</li>
<li>add: http库</li>
<li>add: API文档解析器基本完成</li>
<li>fix: air302.py的一些错误</li>
<li>fix: tostring在air302下返回错误的字符串</li>
</ul>
<h3 id="Air302-27"><a href="#Air302-27" class="headerlink" title="Air302"></a>Air302</h3><ul>
<li>add: 适配http库,支持https但内存尴尬,当前禁用https</li>
<li>add: pm低功耗模块支持force和check方法</li>
<li>add: 支持飞行模式</li>
<li>add: nbiot库添加更多网络信息</li>
<li>fix: gpio.get返回错误的值</li>
</ul>
<h1 id="LuatOS-项目进展报告-20200703"><a href="#LuatOS-项目进展报告-20200703" class="headerlink" title="LuatOS 项目进展报告 - 20200703"></a>LuatOS 项目进展报告 - 20200703</h1><h2 id="本周进展-24"><a href="#本周进展-24" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-22"><a href="#LuatOS-22" class="headerlink" title="LuatOS"></a>LuatOS</h3><p>add: 添加libgnss库,处理nmea数据,对接GPS模块(例如Air530),但不含agps和星历<br>update: sensor库抽象为底层无关的库<br>fix: 修正air302.py的几个错误</p>
<h3 id="Air302-28"><a href="#Air302-28" class="headerlink" title="Air302"></a>Air302</h3><p>fix: 休眠唤醒后需要主动获取联网数据<br>fix: uart2使用非115200时乱码<br>fix: netclient在域名解析成功但连接失败时未清理干净<br>fix: gpio设置上拉没有起作用<br>add: 引用libgnss库,处理nmea数据<br>add: 引用sensor库</p>
<h3 id="新的Wifi-BLE模块"><a href="#新的Wifi-BLE模块" class="headerlink" title="新的Wifi/BLE模块"></a>新的Wifi/BLE模块</h3><p>add: 基础项目结构完成</p>
<h1 id="LuatOS-项目进展报告-20200628"><a href="#LuatOS-项目进展报告-20200628" class="headerlink" title="LuatOS 项目进展报告 - 20200628"></a>LuatOS 项目进展报告 - 20200628</h1><h2 id="本周进展-25"><a href="#本周进展-25" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-23"><a href="#LuatOS-23" class="headerlink" title="LuatOS"></a>LuatOS</h3><ol>
<li>i2c添加readReg方法</li>
<li>添加pm模块的lua库代码</li>
<li>rtt版的socket实现,支持UDP通信</li>
<li>重构C LOG API</li>
<li>添加libcoap库</li>
</ol>
<h3 id="Air302-29"><a href="#Air302-29" class="headerlink" title="Air302"></a>Air302</h3><ol>
<li>禁用信号强度更新的日志,使模块能进入低功耗模式</li>
<li>添加低功耗模式的实现代码</li>
<li>添加UDP通信的代码</li>
<li>修正dns解析失败后netclient有错误的bug</li>
<li>调整lpmem库的首地址和长度</li>
<li>扩展uart1的shell功能,支持更多命令</li>
<li>验证i2c库读取光强度传感器opt3001</li>
<li>引用并验证libcoap库的使用</li>
<li>添加全新的air302.py脚本,实现在命令行下的编译/刷机/打包</li>
</ol>
<h1 id="LuatOS-项目进度报告-20200619"><a href="#LuatOS-项目进度报告-20200619" class="headerlink" title="LuatOS 项目进度报告 - 20200619"></a>LuatOS 项目进度报告 - 20200619</h1><h2 id="本周进展-26"><a href="#本周进展-26" class="headerlink" title="本周进展"></a>本周进展</h2><h3 id="LuatOS-24"><a href="#LuatOS-24" class="headerlink" title="LuatOS"></a>LuatOS</h3><ol>
<li>抽象disp库,添加对SSD1306的软件I2C支持. 换句话说,只要支持了GPIO,就起码能驱动SSD1306</li>
<li>解决一个内存异常的老bug,涉及lauxlib的resizebox方法</li>
<li>gpio.setup返回闭包,并修正OUTPUT模式下的初始值错误</li>
<li>添加rtos.meminfo(),返回luavm和系统的内存使用情况</li>
</ol>
<h3 id="Air302-30"><a href="#Air302-30" class="headerlink" title="Air302"></a>Air302</h3><ol>
<li>添加i2c实现</li>
<li>添加spi实现</li>
<li>修正vbat电压值错误</li>
<li>修改GPIO17的PWM错误</li>
<li>适配LuatOS对disp库的修正</li>
<li>适配LuaTools的信号值获取</li>
<li>适配LuaTools的rtos.meminfo()</li>
</ol>
<h3 id="新的Wifi-BLE模块-1"><a href="#新的Wifi-BLE模块-1" class="headerlink" title="新的Wifi/BLE模块"></a>新的Wifi/BLE模块</h3><ol>
<li>未完成heap和文件系统的适配</li>
</ol>
<h3 id="Air640W"><a href="#Air640W" class="headerlink" title="Air640W"></a>Air640W</h3><ol>
<li>支持disp库的软件i2c模式</li>
</ol>
<h3 id="社区"><a href="#社区" class="headerlink" title="社区"></a>社区</h3><ol>
<li>在码云建立openLuat组织,将相关项目迁入</li>
<li>为LuatOS申请GVP,并成功获得认证</li>
</ol>
<h2 id="下周计划-27"><a href="#下周计划-27" class="headerlink" title="下周计划"></a>下周计划</h2><ol>
<li>Air302的pm低功耗模块, coap或lwm2m模块, aliyun sdk模块</li>
<li>解决Air302的i2c/spi/io模块存在的bug</li>
<li>推进LuaTools对Air302的适配</li>
<li>测试Air302的lpmem模块的可靠性</li>
</ol>
<hr>
<hr>
<h1 id="LuatOS-项目进度报告-20200612"><a href="#LuatOS-项目进度报告-20200612" class="headerlink" title="LuatOS 项目进度报告 - 20200612"></a>LuatOS 项目进度报告 - 20200612</h1><h2 id="LuatOS整体"><a href="#LuatOS整体" class="headerlink" title="LuatOS整体"></a>LuatOS整体</h2><h3 id="本周已完成"><a href="#本周已完成" class="headerlink" title="本周已完成"></a>本周已完成</h3><ol>
<li><code>adc</code>/<code>pwm</code>/<code>crypto</code>库的抽象设计和实现</li>
</ol>
<h3 id="下周计划完成"><a href="#下周计划完成" class="headerlink" title="下周计划完成"></a>下周计划完成</h3><ol>
<li><code>m2m</code>库的抽象设计</li>
<li>继续推进<code>luatos.com</code>备案</li>
</ol>
<h2 id="Air302-NBIOT芯片"><a href="#Air302-NBIOT芯片" class="headerlink" title="Air302 NBIOT芯片"></a>Air302 NBIOT芯片</h2><p>该模块为当前的重点开发任务</p>
<h3 id="固件版本V0001-20200612"><a href="#固件版本V0001-20200612" class="headerlink" title="固件版本V0001_20200612"></a>固件版本V0001_20200612</h3><p>模块尚未正式发售,固件只推送给种子用户</p>
<ol>
<li>总体进度估算, 已完成50%</li>
<li>硬件层, 70%可用</li>
<li>应用层, 20%可用</li>
</ol>
<h3 id="本周已完成-1"><a href="#本周已完成-1" class="headerlink" title="本周已完成"></a>本周已完成</h3><ol>
<li>硬件层已完成 <code>uart</code>/<code>gpio</code>/<code>pwm</code>/<code>adc</code>/<code>crypto</code> 的适配</li>
<li>应用层已完成 <code>socket</code>/<code>mqtt</code> 的适配, 已可以连接阿里云物联网</li>
</ol>
<h3 id="下周计划完成-1"><a href="#下周计划完成-1" class="headerlink" title="下周计划完成"></a>下周计划完成</h3><ol>
<li>硬件层,适配<code>spi</code>/<code>i2c</code></li>
<li>应用层,适配<code>aliyun物联网sdk</code></li>
<li>解决客户反馈的bug</li>
</ol>
<h2 id="Air640W-wifi芯片"><a href="#Air640W-wifi芯片" class="headerlink" title="Air640W wifi芯片"></a>Air640W wifi芯片</h2><h3 id="本周无固件版本发布"><a href="#本周无固件版本发布" class="headerlink" title="本周无固件版本发布"></a>本周无固件版本发布</h3><ol>
<li>从功能上说, 已完成90%的适配任务</li>
</ol>
<h3 id="本周已完成-2"><a href="#本周已完成-2" class="headerlink" title="本周已完成"></a>本周已完成</h3><ol>
<li><code>crypto</code>库的md5/sha1的硬件加速, 支持无加密的阿里云mqtt连接</li>
</ol>
<h3 id="下周计划完成-2"><a href="#下周计划完成-2" class="headerlink" title="下周计划完成"></a>下周计划完成</h3><ol>
<li><code>crypto</code>库支持sha256/sha512/aes/3des, 由社区推动.</li>
<li><code>pwm</code> 适配, 由社区推动.</li>
</ol>
<h2 id="新的Wifi-BLE芯片"><a href="#新的Wifi-BLE芯片" class="headerlink" title="新的Wifi/BLE芯片"></a>新的Wifi/BLE芯片</h2><p>该厂商的信息暂时保密^_^</p>
<h3 id="本周已完成-3"><a href="#本周已完成-3" class="headerlink" title="本周已完成"></a>本周已完成</h3><ol>
<li>环境搭建,编译/下载ok</li>
<li>调研移植的难点和工作量</li>
</ol>
<h3 id="下周计划完成-3"><a href="#下周计划完成-3" class="headerlink" title="下周计划完成"></a>下周计划完成</h3><ol>
<li>移植文件系统littlefs,或者先用ROMFS,待定</li>
<li>移植一款heap实现,使用heap_4或者rtt版本修改而成</li>
<li>把LuatOS核心跑起来</li>
</ol>
<h1 id="全景图"><a href="#全景图" class="headerlink" title="全景图"></a>全景图</h1><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200612221205656_LuatOS_weekly_20200612.png"></p>
<p>较之前的版本又长出了几个分支^_^</p>

</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/871/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/835/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
				
				<li>
					<a href="https://doc.luatos.wiki/wiki/" title="stack-overflow" target="_self">
					<i class="fa fa-stack-overflow"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © 仅供搜索引擎收录使用 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
