<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>Air系列4G模块AT版本MQTT应用说明 [ Luat doc 社区文章静态页面镜像 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="/about">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">Air系列4G模块AT版本MQTT应用说明</h1>
<article class="post markdown-style">
  <pre><code>                        &lt;div style=&quot;border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;&quot;&gt;
</code></pre>
<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">一、应用概述</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">4G</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">模块支持<span lang="EN-US">MQTT</span>和<span lang="EN-US">MQTT
SSl</span>协议，<span lang="EN-US">&nbsp; MQTT</span>应用的基本流程如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">1</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">、激活<span lang="EN-US">PDP</span>（参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/937">http://oldask.openluat.com/article/937</a></span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">）</span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、如果要支持<span lang="EN-US">SSL</span>，配置<span lang="EN-US">SSL</span>参数<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、通过<span lang="EN-US">TCP</span>连接到<span lang="EN-US">MQTT</span>服务器<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、发送<span lang="EN-US">MQTT CONNECT</span>到服务器，打开会话连接<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、订阅或者发布消息<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;6</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">、出现异常后：关闭<span lang="EN-US">TCP</span>连接，有选择性的去激活<span lang="EN-US">PDP</span>；然后再有选择性的激活<span lang="EN-US">PDP</span>，从第<span lang="EN-US">2</span>步开始执行</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">二、应用流程和异常处理</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本章节分四部分来介绍<span lang="EN-US">MQTT</span>应用的基本流程和异常处理<span lang="EN-US"> <o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、连接、订阅、发布</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">先来看个正常情况下的<span lang="EN-US">AT</span>命令序列，如果不理解<span lang="EN-US">AT</span>命令含义，请自行参考<span lang="EN-US">AT</span>手册<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+CPIN?<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">+CPIN: READY&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">查询</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">sim</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">卡是否正常</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+CGATT?<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">+CGATT: 1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">查询是否附着上数据网络，如果返回</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">+CGATT: 0</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">表示未附着上</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+SAPBR=3,1,"CONTYPE","GPRS"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+SAPBR=3,1,"APN",""&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">设置</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">APN</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，此处</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">""</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">表示使用从网络端自动获取到的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">APN<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+SAPBR=1,1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">发起激活</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">的请求</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+SAPBR=2,1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">注意：此命令仅仅查询</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">地址，可以不执行</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">+SAPBR: 1,1,"10.159.1.145"&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">请求到的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">地址</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MSUB="mqtt/sub_topic",0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">SUBACK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MPUB="mqtt/pub_topic",0,0,"publish
  0 payload"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MPUB="mqtt/pub_topic",1,0,"publish
  1 payload"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PUBACK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MPUB="mqtt/pub_topic",2,0,"publish
  2 payload"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PUBREC<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PUBCOMP</span></span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">正常功能以及异常处理的流程图如下<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><img src="http://oldask.openluat.com/image/show/attachments-2019-09-A2393J3U5d774dd06a722.png" class="img-responsive" style="width: 974px;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"> <v:shapetype id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t" path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter">
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0">
  <v:f eqn="sum @0 1 0">
  <v:f eqn="sum 0 0 @1">
  <v:f eqn="prod @2 1 2">
  <v:f eqn="prod @3 21600 pixelWidth">
  <v:f eqn="prod @3 21600 pixelHeight">
  <v:f eqn="sum @0 0 1">
  <v:f eqn="prod @6 1 2">
  <v:f eqn="prod @7 21600 pixelWidth">
  <v:f eqn="sum @8 21600 0">
  <v:f eqn="prod @7 21600 pixelHeight">
  <v:f eqn="sum @10 21600 0">
 </v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:f></v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect">
 <o:lock v:ext="edit" aspectratio="t">
</o:lock></v:path></v:stroke></v:shapetype><v:shape id="图片_x0020_4" o:spid="_x0000_i1025" type="#_x0000_t75" alt="mqtt应用.png" style="width:414.6pt;height:502.8pt;visibility:visible;
 mso-wrap-style:square">
 <v:imagedata src="file:///C:\Users\ZHUTIA~1\AppData\Local\Temp\msohtmlclip1\01\clip_image001.png" o:title="mqtt应用">
</v:imagedata></v:shape><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">在这个过程中，注意事项如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、发送<span lang="EN-US">MIPSTART</span>命令后，收到<span lang="EN-US">OK</span>仅仅表示<span lang="EN-US">4G</span>模块开始处理这条命令，并不表示<span lang="EN-US">TCP</span>已经连接成功；只有收到<span lang="EN-US">CONNECT OK</span>才是成功的应答（其余错误应答，参考<span lang="EN-US">AT</span>手册）<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、发送<span lang="EN-US">MCONNECT</span>命令后，收到<span lang="EN-US">OK</span>仅仅表示<span lang="EN-US">4G</span>模块开始处理这条命令，并不表示<span lang="EN-US">MQTT</span>已经连接成功；只有收到<span lang="EN-US">CONNACK OK</span>才是成功的应答（其余错误应答，参考<span lang="EN-US">AT</span>手册）<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、发送<span lang="EN-US">MSUB</span>命令后，收到<span lang="EN-US">OK</span>仅仅表示<span lang="EN-US">4G</span>模块开始处理这条命令，并不表示<span lang="EN-US">MQTT</span>已经订阅成功；只有收到<span lang="EN-US">SUBACK</span>才是成功的应答（其余错误应答，参考<span lang="EN-US">AT</span>手册）<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 4</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、发送<span lang="EN-US">MPUB</span>命令后，如果<span lang="EN-US">QOS</span>不是<span lang="EN-US">0</span>，则收到<span lang="EN-US">OK</span>仅仅表示<span lang="EN-US">4G</span>模块开始处理这条命令，并不表示<span lang="EN-US">MQTT</span>已经发布成功；只有收到<span lang="EN-US">PUBACK</span>（<span lang="EN-US">QOS</span>为<span lang="EN-US">1</span>时）或者<span lang="EN-US">PUBCOMP</span>（<span lang="EN-US">QOS</span>为<span lang="EN-US">2</span>时）才是成功的应答（其余错误应答，参考<span lang="EN-US">AT</span>手册）<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、接收</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">先来看下接收到订阅消息时的<span lang="EN-US">AT</span>命令处理序列，如果不理解<span lang="EN-US">AT</span>命令含义，请自行参考<span lang="EN-US">AT</span>手册<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">......&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处省略了</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">激活的过程，参考</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">2.1</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">章节</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MSUB="mqtt/sub_topic",0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">SUBACK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">在</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">mqtt/sub_topic</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">上收到订阅消息，</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">payload</span></span><span class="pln"><span style="font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:
  宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">为</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">123456<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">默认是直接输出收到的订阅消息，不做缓存</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB: "mqtt/sub_topic",6
  byte,123456</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">设置订阅消息的处理模式，设置为缓存模式</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">接下来收到订阅消息时，会提示订阅消息的缓存位置</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+MQTTMSGSET=1<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">在</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">mqtt/sub_topic</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">上收到一条订阅消息，缓存到位置</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB: 0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">主动读取缓存的所有订阅消息</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+MQTTMSGGET<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB:mqtt/sub_topic,6 byte,123456<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">在</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">mqtt/sub_topic</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">上收到一条订阅消息，缓存到位置</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB: 0<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">在</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">mqtt/sub_topic</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">上收到一条订阅消息，缓存到位置</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">1<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB: 1<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">主动读取缓存的所有订阅消息</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+MQTTMSGGET<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB:mqtt/sub_topic,6 byte,123456<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+MSUB:mqtt/sub_topic,6 byte,123456<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:#0070C0;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">OK</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">注意事项如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:red;mso-font-kerning:
0pt">红色</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">和</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#0070C0;mso-font-kerning:0pt">蓝色</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">两部分演示了处理订阅消息的两种方式，用户根据产品需要自行决定使用何种方式<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、使用</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#0070C0;
mso-font-kerning:0pt">蓝色</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">的缓存方式处理订阅消息时，需要注意最多支持<span lang="EN-US">4</span>条缓存，为了防止消息覆盖导致的丢失，收到订阅消息时，应及时主动读取处理<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">TCP</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">被动断开</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">先来看下连接被动断开时的<span lang="EN-US">AT</span>命令处理序列，如果不理解<span lang="EN-US">AT</span>命令含义，请自行参考<span lang="EN-US">AT</span>手册<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">......&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处省略了</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">激活的过程，参考</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">2.1</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">章节</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">CLOSED&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:red;
  border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm">此处</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">TCP</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">连接被动断开</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+MIPCLOSE<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+CME ERROR: 767&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">此处无论返回</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">OK</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">、</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">ERROR</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">还是</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">CME ERROR</span></span><span class="pln"><span style="font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:
  宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">，都直接跳过，不用做正确性判断</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK</span></span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参考<span lang="EN-US">2.1</span>章节流程图，左下角的“收到<span lang="EN-US">CLOSED</span>错误提示，表示<span lang="EN-US">MQTT</span>的<span lang="EN-US">TCP</span>连接被动断开”为异常处理的触发点<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">PDP</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">被动去激活</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">先来看下<span lang="EN-US">PDP</span>被动去激活时的<span lang="EN-US">AT</span>命令处理序列，如果不理解<span lang="EN-US">AT</span>命令含义，请自行参考<span lang="EN-US">AT</span>手册<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">......&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处省略了</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">激活的过程，参考</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">2.1</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">章节</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+SAPBR 1: DEACT&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">此处</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">PDP</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">被动去激活</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+MIPCLOSE<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">OK&nbsp;&nbsp;&nbsp;&nbsp;
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:
  Consolas;mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;
  mso-hansi-font-family:Consolas;mso-bidi-font-family:Consolas;color:red;
  border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;padding:0cm">此处无论返回</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">OK</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">、</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">ERROR</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">还是</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">CME ERROR</span></span><span class="pln"><span style="font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:
  宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">，都直接跳过，不用做正确性判断</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">AT+SAPBR=0,1<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size:7.5pt;
  font-family:Consolas;color:red;border:none windowtext 1.0pt;mso-border-alt:
  none windowtext 0cm;padding:0cm">+CME ERROR: 3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //</span></span><span class="pln"><span style="font-size:7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;
  mso-fareast-font-family:宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:
  Consolas;mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">此处无论返回</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">OK</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">、</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">ERROR</span></span><span class="pln"><span style="font-size:7.5pt;
  font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:宋体;
  mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">还是</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm">CME ERROR</span></span><span class="pln"><span style="font-size:
  7.5pt;font-family:宋体;mso-ascii-font-family:Consolas;mso-fareast-font-family:
  宋体;mso-fareast-theme-font:minor-fareast;mso-hansi-font-family:Consolas;
  mso-bidi-font-family:Consolas;color:red;border:none windowtext 1.0pt;
  mso-border-alt:none windowtext 0cm;padding:0cm">，都直接跳过，不用做正确性判断</span></span><span class="pln"><span lang="EN-US" style="font-size:7.5pt;font-family:Consolas;
  color:red;border:none windowtext 1.0pt;mso-border-alt:none windowtext 0cm;
  padding:0cm"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">......&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处省略了</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">PDP</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">激活的过程，参考</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">2.1</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">章节</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONFIG="866289037465624","user","password"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MIPSTART="lbsmqtt.airm2m.com","1884"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNECT OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">AT+MCONNECT=1,60<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">OK<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">CONNACK OK</span></span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p>







































































</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参考<span lang="EN-US">2.1</span>章节流程图，右下角的“收到<span lang="EN-US">+SAPBR 1: DEACT</span>错误提示，表示<span lang="EN-US">PDP</span>被动去激活”为异常处理的触发点</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;mso-hansi-font-family:
inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">三、常见问题</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">MQTT</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">支持多连接吗</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">目前<span lang="EN-US">MQTT</span>仅支持单连接，不支持多连接<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">MQTT</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">的遗嘱如何使用</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">通过<span lang="EN-US">AT+MCONFIG</span>命令可以设置遗嘱的<span lang="EN-US">qos</span>、<span lang="EN-US">retain</span>标志、<span lang="EN-US">topic</span>、<span lang="EN-US">payload</span>；在如下几种（包含但是又不仅限于如下情况）情况下，服务器会主动发布遗嘱消息到订阅的客户端：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、模块和服务器通信异常（例如模块突然关机、模块进入了一个没有网络信号的环境等）超过<span lang="EN-US">1.5</span>倍（一般是<span lang="EN-US">1.5</span>倍，但不排除服务器可以修改这个时间）的<span lang="EN-US"> keep alive</span>时间（可以通过<span lang="EN-US">AT+MCONNECT</span>设置<span lang="EN-US">keep alive</span>时间）<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、模块主动执行<span lang="EN-US">AT+MDISCONNECT</span>或者<span lang="EN-US">AT+MIPCLOSE<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">曾经有用户碰到过如下问题：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;">













</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">模块设置了遗嘱<span lang="EN-US">topic</span>为<span lang="EN-US">/will_topic</span>，遗嘱<span lang="EN-US">payload</span>为<span lang="EN-US">offline</span>，<span lang="EN-US">keep alive</span>时间为<span lang="EN-US">5</span>分钟，模块关机后，等待<span lang="EN-US">2</span>分钟，在等待的<span lang="EN-US">2</span>分钟内，其他订阅了<span lang="EN-US">/will_topic</span>的客户端没有收到遗嘱消息（这是正常的，因为还没有到达<span lang="EN-US">1.5</span>倍的<span lang="EN-US">keep alive</span>时间），<span lang="EN-US">2</span>分钟后，模块开机<span lang="EN-US">mqtt</span>重连成功后，其他客户端却收到了遗嘱消息，这是什么原因呢？这部分机制是服务器端设计的，和模块无关，个人认为：服务器端仍然在维持<span lang="EN-US">2</span>分钟前的那个<span lang="EN-US">mqtt</span>连接，现在模块开机，用同样的<span lang="EN-US">client id</span>重连后，会断开之前维护的相同<span lang="EN-US">client id</span>的<span lang="EN-US">mqtt</span>连接，断开时，就发布了一次遗嘱消息。那这种问题，如何解决呢？模块可以在<span lang="EN-US">AT+MCONNECT</span>返回<span lang="EN-US">CONNACK OK</span>之后，通过<span lang="EN-US">AT+MPUB</span>一个<span lang="EN-US">topic</span>为<span lang="EN-US">/will_topic</span>，<span lang="EN-US">payload</span>为<span lang="EN-US">online</span>的消息，这样订阅了遗嘱<span lang="EN-US">topic</span>的其他客户端就会收到这个<span lang="EN-US">online</span>消息</span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">MQTT SSL</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如何使用</span></b></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">本文主要描述了基本流程和异常处理，对于</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">MQTT
SSL</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">使用方法没有做过多描述，这一部分，请自行参考</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">AT</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">手册</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">MQTT</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">章节下《使用方法举例》中的</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">"SSL</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">带证书验证流程</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">"</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">使用方法；支持的</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">SSL</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">参数，请自行参考</span><span lang="EN-US" style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">AT+SSLCFG</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">命令说明</span></p>

<p><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt;mso-ansi-language:
EN-US;mso-fareast-language:ZH-CN;mso-bidi-language:AR-SA">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt;mso-ansi-language:EN-US;mso-fareast-language:ZH-CN;
mso-bidi-language:AR-SA">如果<span lang="EN-US">SSL</span>的参数配置不变，则每次开机运行过程中，</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">仅设置一次即可</span><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;"></p>
<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、重试多次</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">PDP</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">，</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;
mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">MQTT</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
mso-ascii-font-family:inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">应用一直连接失败</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">如果重试多次<span lang="EN-US">PDP</span>激活，<span lang="EN-US">PDP</span>一直激活失败，或者<span lang="EN-US">MQTT</span>一直连接失败，则尝试使用如下手段恢复：<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、使用<span lang="EN-US">RESET</span>引脚复位模块<span lang="EN-US"><o:p></o:p></span></span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、极端情况下，直接给模块断电，再上电，<span lang="EN-US">POWER
KEY</span>引脚拉低开机<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><span lang="EN-US"><o:p></o:p></span></span></p>
                        
                        
                        
                        
                        
                        
                        
                        
                        
</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/626/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/624/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © chenxuuu 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
