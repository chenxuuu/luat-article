<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>Air800(GPRS+GPS模块)连接OneNet平台 [ Luat doc 社区文章静态页面镜像 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="/about">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">Air800(GPRS+GPS模块)连接OneNet平台</h1>
<article class="post markdown-style">
  <pre><code>                    &lt;h2 id=&quot;air800介绍&quot; style=&quot;outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 24px; color: rgb(79, 79, 79); font-weight: 700; line-height: 32px; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;OneNet平台介绍&lt;br&gt;&lt;/h2&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;OneNET作为中国移动通信集团推出的一个专业物联网开放云平台，提供了丰富的智能硬件开发工具和可靠的服务，助力各类终端设备迅速接入网络，实现数据传输、数据存储、数据管理等完整的交互流程。&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;支持公开协议包括EDP、MODBUS、MQTT以及HTTP等多种协议。详细资料参见：&lt;a href=&quot;https://open.iot.10086.cn/doc&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot; style=&quot;outline: 0px; color: rgb(103, 149, 181); cursor: pointer; word-break: break-all;&quot;&gt;https://open.iot.10086.cn/doc&lt;/a&gt;&lt;/p&gt;&lt;h2 id=&quot;所需api&quot; style=&quot;outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 24px; color: rgb(79, 79, 79); font-weight: 700; line-height: 32px; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a name=&quot;t2&quot; style=&quot;outline: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;&quot;&gt;&lt;/a&gt;所需API&lt;/h2&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;Luat封装了很多的实用API，所以在实现一些功能的时候就无需自己造轮子，直接调用其API即可&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a href=&quot;http://wiki.openluat.com/doc/luatApi/#mqtt&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot; style=&quot;outline: 0px; color: rgb(103, 149, 181); cursor: pointer; word-break: break-all;&quot;&gt;mqtt&lt;/a&gt;&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a href=&quot;http://wiki.openluat.com/doc/luatApi/#pack&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot; style=&quot;outline: 0px; color: rgb(103, 149, 181); cursor: pointer; word-break: break-all;&quot;&gt;pack&lt;/a&gt;&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a href=&quot;http://wiki.openluat.com/doc/luatApi/#gps&quot; rel=&quot;nofollow&quot; target=&quot;_blank&quot; style=&quot;outline: 0px; color: rgb(103, 149, 181); cursor: pointer; word-break: break-all;&quot;&gt;gps&lt;/a&gt;&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;lbs&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a href=&quot;http://wiki.openluat.com/doc/luatApi/#json&quot; target=&quot;_blank&quot;&gt;json&lt;/a&gt;&lt;/p&gt;&lt;h2 id=&quot;实现思路&quot; style=&quot;outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 24px; color: rgb(79, 79, 79); font-weight: 700; line-height: 32px; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;a name=&quot;t3&quot; style=&quot;outline: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;&quot;&gt;&lt;/a&gt;实现思路&lt;/h2&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;本例通过MQTT将Air800获取到的GPS坐标发送到OneNET平台并显示。&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;MQTT协议是一个面向物联网应用的即时通信协议，使用TCP/IP提供网络连接，能够对负载内容实现消息屏蔽传输，开销小，可以有效降低网络流量。OneNET平台采用的是标准MQTT协议，所以使用合宙提供的MQTT API就能很方便的连上。只需要在OneNET上生成一个应用方可得到MQTT鉴权&lt;/p&gt;&lt;pre class=&quot;prettyprint&quot; name=&quot;code&quot; style=&quot;outline: 0px; padding: 8px 16px 6px 56px; margin-bottom: 24px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; position: relative; overflow-y: hidden; line-height: 22px; color: rgb(0, 0, 0); background-color: rgb(246, 248, 250); border-width: initial; border-style: none; border-color: initial; font-variant-ligatures: common-ligatures;&quot;&gt;&lt;code class=&quot;hljs  has-numbering&quot; style=&quot;outline: 0px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; display: block; padding: 0.5em; color: rgb(0, 0, 0); line-height: 22px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto; white-space: pre; word-wrap: normal; text-size-adjust: none; word-break: break-all;&quot;&gt;Q1：MQTT连接鉴权时,Payload中ClientIdentifier;UserName;UserPassword分别填写什么？
</code></pre>
<p>A： ClientIdentifier: 创建设备时得到的设备ID，为数字字串；     </p>
<pre><code>   UserName: 注册产品时，平台分配的产品ID，为数字字串； 

   UserPassword: 为设备的鉴权信息（即唯一设备编号，SN），或者为apiKey，为字符串。&lt;/code&gt;&lt;ul class=&quot;pre-numbering&quot; style=&quot;outline: 0px; padding-top: 8px; padding-bottom: 8px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font-size: inherit; word-break: break-all; position: absolute; width: 48px; background-color: rgb(238, 240, 244); top: 0px; left: 0px; text-align: right;&quot;&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;1&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;2&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;3&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;4&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;5&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;6&lt;/li&gt;&lt;li style=&quot;outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);&quot;&gt;7&lt;/li&gt;&lt;/ul&gt;&lt;/pre&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;OneNET平台优势之一可以利用数据点快速生成应用&lt;/p&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-MvPFGaTu5b9c730355901.png&quot; class=&quot;img-responsive&quot; style=&quot;color: rgb(0, 0, 0); font-size: 14px; text-align: start; width: 865.5px;&quot;&gt;&lt;/p&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-5bFg4QYI5b9c7307e3436.png&quot; class=&quot;img-responsive&quot; style=&quot;color: rgb(0, 0, 0); font-size: 14px; text-align: start; width: 709.5px;&quot;&gt;&lt;/p&gt;&lt;div&gt;&lt;br&gt;要想让数据在OneNET平台上以数据点形式展现出来就得按照OneNET协议上传数据，使用OneNET平台的mqtt协议调试工具可以看到payload以json格式发送，并在json前面加0x01,0x00,0x20(这个字节为json长度),payload格式发送。&lt;/div&gt;&lt;p style=&quot;outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, &quot; sf=&quot;&quot; ui=&quot;&quot; text&quot;,=&quot;&quot; arial,=&quot;&quot; &quot;pingfang=&quot;&quot; sc&quot;,=&quot;&quot; &quot;hiragino=&quot;&quot; sans=&quot;&quot; gb&quot;,=&quot;&quot; &quot;microsoft=&quot;&quot; yahei&quot;,=&quot;&quot; &quot;wenquanyi=&quot;&quot; micro=&quot;&quot; hei&quot;,=&quot;&quot; sans-serif;=&quot;&quot; font-variant-ligatures:=&quot;&quot; common-ligatures;&quot;=&quot;&quot;&gt;json格式如下&lt;/p&gt;&lt;pre class=&quot;prettyprint&quot; name=&quot;code&quot; style=&quot;outline: 0px; padding: 8px 16px 6px 56px; margin-bottom: 24px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; position: relative; overflow-y: hidden; line-height: 22px; color: rgb(0, 0, 0); background-color: rgb(246, 248, 250); border-width: initial; border-style: none; border-color: initial; font-variant-ligatures: common-ligatures;&quot;&gt;&lt;code class=&quot;language-json hljs  has-numbering&quot; style=&quot;outline: 0px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; display: block; padding: 0.5em; color: rgb(0, 0, 0); line-height: 22px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto; white-space: pre; word-wrap: normal; text-size-adjust: none; word-break: break-all;&quot;&gt;&#123;
&quot;&lt;span class=&quot;hljs-attribute&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;datastreams&lt;/span&gt;&quot;: &lt;span class=&quot;hljs-value&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;[
    &#123;
        &quot;&lt;span class=&quot;hljs-attribute&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;id&lt;/span&gt;&quot;: &lt;span class=&quot;hljs-value&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;&lt;span class=&quot;hljs-string&quot; style=&quot;outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;&quot;&gt;&quot;temperature&quot;&lt;/span&gt;&lt;/span&gt;, //数据流名称或数据流模板名称
        &quot;&lt;span class=&quot;hljs-attribute&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;datapoints&lt;/span&gt;&quot;: &lt;span class=&quot;hljs-value&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;[
           &#123;
              &quot;&lt;span class=&quot;hljs-attribute&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;at&lt;/span&gt;&quot;: &lt;span class=&quot;hljs-value&quot; style=&quot;outline: 0px; font-size: inherit; word-break: break-all;&quot;&gt;&lt;span class=&quot;hljs-string&quot; style=&quot;outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;&quot;&gt;&quot;2013-04-22T00:35:43&quot;&lt;/span&gt;&lt;/span&gt;, //上传数据点时间，可选。如果为空，则设备云会取当前时间。
</code></pre>
<p>//如果存在其格式必须为”<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">YYYY-MM-DDThh:mm:ss”的形式（例如：2015-03-22T22:31:12）<br>                    “value</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">42</span>  //上传数据点值<br>                </span>},<br>                {<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">at</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">“2013-04-22T00:55:43”</span></span>,<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">value</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">84</span> //上传数据点值<br>                </span>}<br>            ]<br>        </span>},<br>        {<br>            “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">id</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">“key”</span></span>, //数据流名称或数据流模板名称<br>            “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">datapoints</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">[<br>                {<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">at</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">“2013-04-22T00:35:43”</span></span>,//上传数据点时间，可选。<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">value</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">{…}//上传数据点值<br>                </span>},<br>                {<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">at</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">“2013-04-22T00:35:43”</span></span>,<br>                    “<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">value</span>“: <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">{…}//上传数据点值<br>                </span>}<br>            ]<br>        </span>},<br>        {…}<br>    ]<br></span>}</code><ul class="pre-numbering" style="outline: 0px; padding-top: 8px; padding-bottom: 8px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font-size: inherit; word-break: break-all; position: absolute; width: 48px; background-color: rgb(238, 240, 244); top: 0px; left: 0px; text-align: right;"><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">1</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">2</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">3</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">4</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">5</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">6</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">7</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">8</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">9</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">10</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">11</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">12</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">13</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">14</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">15</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">16</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">17</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">18</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">19</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">20</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">21</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">22</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">23</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">24</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">25</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">26</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">27</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">28</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">29</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">30</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">31</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">32</li></ul></pre>&lt;p style=”outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;本例中的json格式为</p><pre class="prettyprint" name="code" style="outline: 0px; padding: 8px 16px 6px 56px; margin-bottom: 24px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; position: relative; overflow-y: hidden; line-height: 22px; color: rgb(0, 0, 0); background-color: rgb(246, 248, 250); border-width: initial; border-style: none; border-color: initial; font-variant-ligatures: common-ligatures;"><code class="language-json hljs  has-numbering" style="outline: 0px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; display: block; padding: 0.5em; color: rgb(0, 0, 0); line-height: 22px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto; white-space: pre; word-wrap: normal; text-size-adjust: none; word-break: break-all;">&#123;<br>    "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">datastreams</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">[<br>        &#123;<br>            "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">id</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">"gps"</span></span>,<br>            "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">datapoints</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">[<br>                &#123;<br>                    "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">at</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">""</span></span>,<br>                    "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">value</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;">&#123;<br>                        "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">lon</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">106.584</span></span>,<br>                        "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">lat</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">29.5707</span></span>,<br>                        "<span class="hljs-attribute" style="outline: 0px; font-size: inherit; word-break: break-all;">ele</span>": <span class="hljs-value" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">100</span><br>                    </span>&#125;<br>                </span>&#125;<br>            ]<br>        </span>&#125;<br>    ]<br></span>&#125;</code><ul class="pre-numbering" style="outline: 0px; padding-top: 8px; padding-bottom: 8px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font-size: inherit; word-break: break-all; position: absolute; width: 48px; background-color: rgb(238, 240, 244); top: 0px; left: 0px; text-align: right;"><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">1</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">2</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">3</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">4</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">5</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">6</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">7</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">8</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">9</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">10</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">11</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">12</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">13</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">14</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">15</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">16</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">17</li></ul></pre>&lt;p style=”outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;可以看到对应不同的数据点，只需要修改“id”和“datapoints”。</p>&lt;h2 id=”部分代码” style=”outline: 0px; padding: 0px; margin: 8px 0px 16px; font-size: 24px; color: rgb(79, 79, 79); font-weight: 700; line-height: 32px; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;<a name="t4" style="outline: 0px; color: rgb(78, 161, 219); cursor: pointer; word-break: break-all;"></a>部分代码</h2>&lt;p style=”outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;所以将GPS数据发送到OneNET平台上，最关键点将获取到的GPS数据打包为OneNET数据点格式</p><pre class="prettyprint" name="code" style="outline: 0px; padding: 8px 16px 6px 56px; margin-bottom: 24px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; position: relative; overflow-y: hidden; line-height: 22px; color: rgb(0, 0, 0); background-color: rgb(246, 248, 250); border-width: initial; border-style: none; border-color: initial; font-variant-ligatures: common-ligatures;"><code class="language-lua hljs  has-numbering" style="outline: 0px; font-family: Consolas, Inconsolata, Courier, monospace; font-size: 14px; display: block; padding: 0.5em; color: rgb(0, 0, 0); line-height: 22px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto; white-space: pre; word-wrap: normal; text-size-adjust: none; word-break: break-all;"><span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">local</span> <span class="hljs-function" style="outline: 0px; font-size: inherit; word-break: break-all;"><span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">function</span> <span class="hljs-title" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">msgPack</span><span class="hljs-params" style="outline: 0px; color: rgb(79, 79, 79); font-size: inherit; word-break: break-all;">()</span></span><br>  <span class="hljs-comment" style="outline: 0px; color: rgb(136, 0, 0); font-size: inherit; word-break: break-all;">--打包json</span><br>  <span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">local</span> torigin =<br>  &#123;<br>    datastreams =<br>    &#123; &#123;<br>      id = <span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">"gps"</span>,<br>      datapoints =<br>      &#123; &#123;<br>        at = <span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">""</span>,<br>        value =<br>        &#123;<br>          lon = bgps.returnBlng(),      <span class="hljs-comment" style="outline: 0px; color: rgb(136, 0, 0); font-size: inherit; word-break: break-all;">--得到获取到的经度</span><br>          lat = bgps.returnBlat(),      <span class="hljs-comment" style="outline: 0px; color: rgb(136, 0, 0); font-size: inherit; word-break: break-all;">--得到获取到的纬度</span><br>          ele = <span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">"100"</span><br>        &#125;<br>      &#125; &#125;<br>    &#125; &#125;<br>  &#125;<br>  <span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">local</span> msg = json.encode(torigin)      <span class="hljs-comment" style="outline: 0px; color: rgb(136, 0, 0); font-size: inherit; word-break: break-all;">--对json进行编码</span><br>  <span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">local</span> len = msg.len(msg)<br>  buf = pack.pack(<span class="hljs-string" style="outline: 0px; color: rgb(0, 153, 0); font-size: inherit; word-break: break-all;">"bbbA"</span>, <span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">0x01</span>,<span class="hljs-number" style="outline: 0px; color: rgb(0, 102, 102); font-size: inherit; word-break: break-all;">0x00</span>,len,msg)    <span class="hljs-comment" style="outline: 0px; color: rgb(136, 0, 0); font-size: inherit; word-break: break-all;">--打包数据流字节头</span><br><span class="hljs-keyword" style="outline: 0px; color: rgb(0, 0, 136); font-size: inherit; word-break: break-all;">end</span></code><ul class="pre-numbering" style="outline: 0px; padding-top: 8px; padding-bottom: 8px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; font-size: inherit; word-break: break-all; position: absolute; width: 48px; background-color: rgb(238, 240, 244); top: 0px; left: 0px; text-align: right;"><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">1</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">2</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">3</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">4</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">5</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">6</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">7</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">8</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">9</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">10</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">11</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">12</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">13</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">14</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">15</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">16</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">17</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">18</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">19</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">20</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">21</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">22</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">23</li></ul></pre>&lt;p style=”outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;GPS读取数据处理</p><pre class="prettyprint" name="code" style="outline: 0px; padding: 8px 16px 6px 56px; margin-bottom: 24px; position: relative; overflow-y: hidden; line-height: 22px; background-color: rgb(246, 248, 250); border-width: initial; border-style: none; border-color: initial;"><code class="language-lua hljs  has-numbering" style="outline: 0px; display: block; padding: 0.5em; line-height: 22px; background-color: rgb(246, 248, 250); border-radius: 4px; overflow-x: auto; word-wrap: normal; text-size-adjust: none; word-break: break-all;"><span class="hljs-comment" style="outline: 0px; word-break: break-all;"><font color="#880000" face="Consolas, Inconsolata, Courier, monospace"><span style="font-size: 14px; font-variant-ligatures: common-ligatures; white-space: pre;">--- 模块功能：GPS功能测试.<br>-- @author openLuat<br>-- @module gps.testGps<br>-- @license MIT<br>-- @copyright openLuat<br>-- @release 2018.03.23</p>
<p>module(…,package.seeall)</p>
<p>require”gps”<br>require”agps”<br>require”lbsLoc”<br>require”common”</p>
<p>local Rlat = “”<br>local Rlng = “”<br>–[[<br>功能  ：发送查询位置请求<br>参数  ：无<br>返回值：无<br>]]<br>local function reqLbsLoc()<br>    reqAddr = not reqAddr<br>    lbsLoc.request(getLocCb,reqAddr)<br>end</p>
<p>–[[<br>功能  ：获取基站对应的经纬度后的回调函数<br>参数  ：<br>        result：number类型，0表示成功，1表示网络环境尚未就绪，2表示连接服务器失败，3表示发送数据失败，4表示接收服务器应答超时，5表示服务器返回查询失败；为0时，后面的3个参数才有意义<br>        lat：string类型，纬度，整数部分3位，小数部分7位，例如031.2425864<br>        lng：string类型，经度，整数部分3位，小数部分7位，例如121.4736522<br>        addr：string类型，UCS2大端编码的位置字符串。调用lbsLoc.request时传入的第二个参数为true时，才返回本参数<br>返回值：无<br>]]<br>function getLocCb(result,lat,lng,addr)<br>    –log.info(“testLbsLoc.getLocCb”,result,lat,lng,result==0 and common.ucs2beToGb2312(addr) or “”)<br>    –获取经纬度成功<br>    if result==0 then<br>        Rlat = lat<br>        Rlng = lng<br>        log.info(“testLbsLoc success”,Rlat,Rlng)<br>    else<br>        Rlat = “”<br>        Rlng = “”<br>    end</p>
<p>end</p>
<p>function printGps()<br>    if gps.isFix() then<br>        local tLocation = gps.getLocation()<br>        Rlat = tLocation.lat<br>        Rlng = tLocation.lng<br>        log.info(“testGps.printGps success”,<br>        gps.isOpen(),gps.isFix(),<br>        tLocation.lngType,tLocation.lng,tLocation.latType,tLocation.lat,<br>        gps.getAltitude(),<br>        speed,<br>        gps.getCourse(),<br>        gps.getViewedSateCnt(),<br>        gps.getUsedSateCnt())<br>    else<br>        reqLbsLoc()<br>    end<br>    return Rlat,Rlng</p>
<p>end</p>
<p>local function test1Cb(tag)<br>    log.info(“testGps.test1Cb”,tag)<br>    –printGps()<br>end</p>
<p>–设置GPS+BD定位<br>–如果不调用此接口，默认也为GPS+BD定位<br>–gps.setAerialMode(1,1,0,0)</p>
<p>–设置仅gps.lua内部处理NEMA数据<br>–如果不调用此接口，默认也为仅gps.lua内部处理NEMA数据<br>–如果gps.lua内部不处理，把NMEA数据通过回调函数cb提供给外部程序处理，参数设置为1,nmeaCb<br>–如果gps.lua和外部程序都处理，参数设置为2,nmeaCb<br>– gps.setNmeaMode(2,nmeaCb)</p>
<p>– test(testIdx)<br>gps.open(gps.DEFAULT,&#123;tag=”TEST1”,cb=test1Cb&#125;)<br>–sys.timerLoopStart(printGps,20000)</span><span style="font-variant-ligatures: common-ligatures; white-space: pre;"><br></span></font></span></code><ul class="pre-numbering" style="color: rgb(0, 0, 0); font-family: Consolas, Inconsolata, Courier, monospace; font-size: inherit; font-variant-ligatures: common-ligatures; outline: 0px; padding-top: 8px; padding-bottom: 8px; margin-right: 0px; margin-bottom: 0px; margin-left: 0px; word-break: break-all; position: absolute; width: 48px; background-color: rgb(238, 240, 244); top: 0px; left: 0px; text-align: right;"><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">1</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">2</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">3</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">4</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">5</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">6</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">7</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">8</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">9</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">10</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">11</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">12</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">13</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">14</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">15</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">16</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">17</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">18</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">19</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">20</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">21</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">22</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">23</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">24</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">25</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">26</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">27</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">28</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">29</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">30</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">31</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">32</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">33</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">34</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">35</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">36</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">37</li><li style="outline: 0px; padding: 0px 8px; margin: 0px; font-size: inherit; list-style: none; word-break: break-all; color: rgb(153, 153, 153);">38<br><br class="Apple-interchange-newline"></li></ul></pre>&lt;table class=”highlight tab-size js-file-line-container” data-tab-size=”8” style=”tab-size: 8; color: rgb(36, 41, 46); font-family: -apple-system, BlinkMacSystemFont, “ segoe=”” ui”,=”” helvetica,=”” arial,=”” sans-serif,=”” “apple=”” color=”” emoji”,=”” “segoe=”” ui=”” symbol”;=”” background-color:=”” rgb(255,=”” 255,=”” 255);”=””&gt;<tbody><tr>&lt;td id=”LC1” class=”blob-code blob-code-inner js-file-line” style=”padding-right: 10px; padding-left: 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-family: SFMono-Regular, Consolas, “ liberation=”” mono”,=”” menlo,=”” courier,=”” monospace;=”” font-size:=”” 12px;=”” word-wrap:=”” normal;=”” white-space:=”” pre;”=””&gt;<br></td></tr><tr>&lt;td id=”L89” class=”blob-num js-line-number” data-line-number=”89” style=”padding-right: 10px; padding-left: 10px; width: 50.4px; min-width: 50px; font-family: SFMono-Regular, Consolas, “ liberation=”” mono”,=”” menlo,=”” courier,=”” monospace;=”” font-size:=”” 12px;=”” line-height:=”” 20px;=”” color:=”” rgba(27,=”” 31,=”” 35,=”” 0.3);=”” text-align:=”” right;=”” white-space:=”” nowrap;=”” vertical-align:=”” top;=”” cursor:=”” pointer;=”” user-select:=”” none;”=””&gt;</td>&lt;td id=”LC89” class=”blob-code blob-code-inner js-file-line” style=”padding-right: 10px; padding-left: 10px; position: relative; line-height: 20px; vertical-align: top; overflow: visible; font-family: SFMono-Regular, Consolas, “ liberation=”” mono”,=”” menlo,=”” courier,=”” monospace;=”” font-size:=”” 12px;=”” word-wrap:=”” normal;=”” white-space:=”” pre;”=””&gt;<p><span class="pl-c" style="color: rgb(106, 115, 125);"><br></span></p><p><span class="pl-c" style="color: rgb(106, 115, 125);"><br></span></p></td></tr></tbody></table>&lt;p style=”outline: 0px; padding: 0px; margin-bottom: 16px; font-size: 16px; color: rgb(79, 79, 79); line-height: 26px; text-align: justify; word-break: break-all; font-family: -apple-system, “ sf=”” ui=”” text”,=”” arial,=”” “pingfang=”” sc”,=”” “hiragino=”” sans=”” gb”,=”” “microsoft=”” yahei”,=”” “wenquanyi=”” micro=”” hei”,=”” sans-serif;=”” font-variant-ligatures:=”” common-ligatures;”=””&gt;完整代码:<a href="https://github.com/lenghonglin/openLuat_Air800/tree/master/OneNet" rel="nofollow" target="_blank" style="outline: 0px; color: rgb(103, 149, 181); cursor: pointer; word-break: break-all;">https://github.com/lenghonglin/openLuat_Air800/tree/master/OneNet</a></p>
                    </p>

</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/439/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/437/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © chenxuuu 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
