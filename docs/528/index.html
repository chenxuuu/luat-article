<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>物联网卡十年简史 [ Luat doc 社区文章静态页面 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="https://doc.luatos.wiki/wiki/">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">物联网卡十年简史</h1>
<article class="post markdown-style">
  <p>摘自：http://www.tmtpost.com/3605949.html
 物联网卡十年简史</p><p>如果从上帝视角看，互联网是一个喧嚣的世界，数十亿的人节点，通过无数看不见的数据链，交互着自己的生活和工作，信息丰富而多彩，充满着创意和活力、欢乐和哀愁。</p><p>在这之下，还有一张庞大的暗网。</p><p>数十亿节点都是没有生命的设备，一丝不苟的传递着传感数据，冷冷的执行着各种命令，这个无声而古板的网络，不断的把物理世界的信息转成数字放进虚拟世界，把虚拟世界的指令变成物理世界真实的动作，它让共享单车、无人驾驶、扫码零售等等很酷的应用成为了可能。</p><p>它，就是物联网，可能是未来自动化世界的基石。</p><p>在越来越多的物联网节点中，出现了一张小小的SIM卡片，正是这个不起眼的卡，赋予了无数设备进入虚拟世界的能力，驱动着一个更加数字化、自动化的世界。</p><p>物联网卡以及它的CP们的成长历程，正影响着我们的现在和未来。</p><h2><strong>孕育</strong><strong>&nbsp;</strong></h2><p>2002年，刚刚经历PC互联网泡沫的腾讯、新浪、网易们还没缓过气来，而移动通信市场正在疯狂爆发，不少人刚刚拥有第一部手机，诺基亚的8310、摩托罗拉V60、索爱T68这些经典机型火爆一时。</p><p>这一年的5月17日，电信日，中国移动悄然推出了GPRS业务，由于手机应用的匮乏、网络速度的缓慢，在当时并没有对人们产生太大影响，当年最潮的群体还在比拼短信发送速度，但使用SIM卡就能连接数据网络，却开启了一个崭新的时代，万物互联变得触手可及。</p><p>最早成规模的应用是电网的远程监控。</p><p>电网当年极有前瞻性的采用移动通信的方式进行电网数据的采集和远程控制，由于项目规模庞大、要求高、方案全，电网项目无可争议的成为中国蜂窝物联网的完美摇篮，培养了早期物联网产业链的第一批人，从无线通信模组、DTU到运营商、应用平台商。</p><p>物联网卡在这个时期仓促诞生，这时候名字还很多，最常见的名字叫M2M卡，有些也叫APN卡、行业卡、机器卡。彼时M2M卡无论是外观和功能，都与个人使用的SIM卡没太大区别。</p><p>这时期还没有太多面向物联网的硬件设备，这一年，后来一度成为国内通信模组老大的芯讯通，才刚刚在上海成立，当时市场上能买到的模组，还都是国外的，wavecom和西门子等后来消失的牌子，还特别的贵。</p><p>基础设施的蛮荒之地，要孵化出应用真不容易。</p><p>所以最初几年，除了电网远程监控应用有点规模外，其他市场都还一片寂静，不过寂静中也冒出了一些闪光应用，这些应用都成为后来大发展的雏形。</p><blockquote><p>早在03、04年，银联就推出了无线POS，非常超前，可谓最早的移动支付。当年申请一台普通的POS机手续非常复杂，还要用专门的电话线拨号联网，当时能想到用无线方式来解决POS安全接入的方法，真的是一大创新。</p><p>过后十年无线POS一路蓬勃生长，衍生出各种眼花缭乱的智能支付终端，让国内成为全球规模最大的无线智能pos市场，便利程度远远超越发达国家。</p><p>顺丰也在物流很原始的时代，开始采用移动巴枪和货车监控，尤其是移动巴枪顺丰小哥人手必备，一扫快递单就签收或者进入下一个物流环节，在网购起步阶段就花大价钱配备上了智能设备，让人不得不佩服。现在，顺丰配的设备据说已经到第七、八代了，已经成为其运营的关键要素。</p><p>还有一些比较零散的车辆监控应用，比如在公交、出租车上安装可以回传数据的GPS，就可以看到车到哪里了，可以进行集中调度。</p><p>那个时候，手机都还没有GPS功能，GPS还是一些发烧友的玩具，一台GPS设备动则上千。而现在，各种专车、快递小哥的电动车乃至共享单车全都装上了定位，其实整个应用的原型和当初无异。</p></blockquote><p>蛮荒地上埋下的种子已经发芽，正在静待春天的到来。</p><h2><strong>成型</strong><strong>&nbsp;</strong></h2><p>这个不被大多数人关注的领域，就这么缓慢的发展了七年。</p><p>2009年，3G牌照发放，诞生两年的iPhone正式引入国内。中国开启了辉煌的移动互联网时代，手机上网开始了超越PC上网的征程，新的智能手机平台引爆了移动应用的发展。</p><p>同年，高层提出“感知中国”，物联网被正式列为国家五大新兴战略性产业之一，并开始在无锡建立物联网相关的产学研基地，政策上前所未有的重视。</p><p>这一年，由于三个契机，也成为了车联网发展的元年，庞大的产业链从这一年萌发，成为往后几年推动物联网卡发展的最主要动力。</p><blockquote><p>一是从iPhone3G开始，手机标配内置GPS模块（你还能想象最早智能手机没有GPS吗！？），基于位置的应用随之爆发，GPS从小众产品一跃成为各类方案板的标配，人们开始习惯用终端定位来获得服务，各种纸质地图、交通图开始淡出；</p><p>二是3G牌照发布后，外资品牌汽车开始把基于3G的车联网产品带入国内，如通用的安吉星、丰田的GBOOk等，配联网的中控大屏成为新宠，珠三角一大批原来做车辆影音娱乐的车辆后装公司纷纷转型做带联网功能的后装产品；</p><p>三是交通部这一年开始建设营运车辆联网联控系统，要求全国所有运营车辆都必须安装定位设备，定位数据分级上传，统一管理。带有无线数据通信能力的定位器因此而兴起，大量方案商开始进入原来车辆后装公司的地盘，不断创新出有意思的产品。</p></blockquote><p>车联网这一波的高速发展，和深圳紧紧相联。</p><p>深圳这时刚经历完一波山寨机的崛起和洗牌，山寨机产业留下了一个完整的生态体系，从元器件提供、方案板设计再到产品组装，每个环节都有成千上万的企业，深圳这片土壤让电子产品的创新变得容易，也为后来物联网的发展埋下了伏笔。</p><p>这个时期，通信模组产业开始了密集重组。</p><blockquote><p>08年，Sierra收购Wavecom成为业界老大，是的，Sierra是借Wavecom才上位的。</p><p>10年，Gemalto收了西门子的模组业务紧跟其后。还是，Gemalto那么知名，跟西门子老厂出品息息相关。</p><p>06年，中兴的一波人出来成立了有方，同年，龙尚科技在上海成立</p><p>09年，广和通开始进入模组产业</p><p>10年，芯姆通的一波人出来成立了移远，移字辈好几家公司，追溯上去都有点渊源，说芯姆通是模组界黄埔军校真不过分</p><p>10年，中兴开始推出模组产品，并在11年成立中兴物联</p></blockquote><p>自此，国内模组产业六大金刚芯讯通、移远、广和通、中兴物联、有方、龙尚均告成立，只是后来上市之路又各奔金主。</p><p>产业逐步热闹起来，也让物联网卡的发展开始进入正式轨道。</p><p>运营商这一时期开始成立独立机构。</p><blockquote><p>电信在09年率先在无锡成立物联网应用和推广中心，以基地形式支持全国物联网业务发展，并在14年挂牌成立中国电信物联网公司。</p><p>移动于10年在重庆成立物联网基地，并以更快的速度，于12年挂牌成立中移物联网公司。</p><p>联通的步伐相对慢，于14年底在南京成立物联网运营支撑中心，17年底挂牌成立物联网公司。</p></blockquote><p>这个时期物联网卡开始有了新的号段，号码上与我们普通熟知的13x、15x不一样，工信部专门为物联网分配了13位号段，以适应比人更多的物的需要，移动申请了10648/10647号段，联通申请了10646号段，电信申请了10649号段。</p><p>跟随着机构的成立，物联网卡才开始真正成为一个专门定制的产品。</p><p>三大运营商这时也开始投入巨资建设专用平台。移动在成立物联网基地后就开始着手建立自有的管理平台，一直做到现在改名叫OneLink；联通则于15年引入国际知名的Jasper平台，中间有多次说到期，但Jasper是头牌，始终割舍不掉；电信在经历了一段多个厂家建设的混乱期后，选择了华为的OC平台。</p><p>随着物联网卡产品的正规化，尤其是Jasper的引入带来的各种新鲜的玩法，让业内俗称卡商的群体开始兴起，更深行业的需求被逐步挖掘，更多行业的方案开始使用物联网卡，供给侧方案的日益完善，正等待着需求侧的引爆。</p><h2><strong>爆发</strong></h2><p>2012年，Pebble和谷歌眼镜两个产品横空出世，开启了智能硬件时代。</p><p>虽然两位先行者后来的发展让人唏嘘，但硬件数字化、联网化趋势一发不可收，智能穿戴、智能手表、智能家居、智能音箱、无人机、VR……让人眼花缭乱的产品不断涌现。</p><p>但智能硬件的火热，并没有让物联网卡的市场立刻就爆发，产品价格、功耗、尺寸等等一系列的影响，让大部分智能硬件方案选择了蓝牙、wifi，只有必须脱离手机、路由器使用的智能硬件，才会考虑蜂窝网络方案，所以，车联网产品成为了智能硬件时代早期物联网卡江湖的主角。</p><p>发展到这个时期，车联网产品已经和上一个时代不一样了。</p><p>最早期，车联网产品是以车机、中控屏的形态出现，是汽车原厂把控的产业链体系的一个环节，早期做的厂家往往是做汽车精品电子、汽车音响的，主要依托4S店、维修店来销售，一般都要拆装。</p><p>但智能硬件产业的兴起，让外行人有了染指汽车联网的机会。深圳强大的硬件产业链，不断创新出各种花样的硬件，绕过车厂、4S店等体系，以消费硬件的方式进入了汽车，也开启了智能硬件厂家与汽车原厂争夺汽车联网主导权的胶着之战。</p><blockquote><p>最早的所谓车联网智能硬件其实很low，大概是12年左右，一度兴起云电子狗，在电子狗基础上有了联网能力后，各种路上的信息更加及时，虽然low，但产品深受欢迎。</p><p>13年的时候，云狗还没热多久，OBD产品开始出现，OBD从最初只有4S店才能接入汽车的专用设备，一下成为消费级随时可以读取汽车数据的利器，由于OBD能获得大量汽车使用信息，而且能将数据汇聚到云端，一度让具有互联网思维的人很兴奋，OBD最期待的应用是UBI，也就是把车辆大数据与车辆保险结合在一起。</p><p>这些潜在的应用前景，让腾讯都动了心，14年腾讯推出了路宝，不过UBI应用始终没有成气候，OBD想卖行车数据的变现尝试几经曲折都不太顺利，所以14年以后OBD就开始没落。</p><p>但紧接着另一个产品——行车记录仪又开始兴起，至今仍受欢迎，行车记录仪的形态也有很多变种，其中最重要的分支就是智能后视镜，这个巧妙的设计可以套到汽车后视镜上，除了行车记录，还拥有了屏幕，有了屏幕就有了一切，安装便利度和价格秒杀改中控大屏，后视镜坐稳了车联网江湖好多年，上面叠加了越来越多功能，前后车监测、辅助驾驶、甚至司机困不困的监测。</p><p>这些外围的各种创新最终也让车辆本身发生了变化，从特斯拉到蔚来、小鹏、理想等一众造成新势力，直接动手把车本身联网了，这些创新功能直接原装于车之中，越来越多的原厂也都加入这个阵营，车内的屏幕也越做越夸张。</p><p>外围智能硬件厂商与汽车原厂之争，仍在继续。</p></blockquote><p>车联网各种硬件创新，慢慢的把国内物联网卡规模推送到了几千万的级别。</p><p>但让市场真正引爆的，是另一个疯狂的智能硬件。</p><p>2016年，第一辆带智能锁的摩拜自行车在上海街头上路，这个绝妙的创意，把蜂窝物联与产品运营结合在一起，自动开锁、关锁计费、定位、红包车……基于联网能力产生的无穷应用价值被不断挖掘。智能锁迅速成为共享单车的标配，OFO小黄车也逐步从机械锁转换成智能锁。</p><p>2017年的共享单车大战，让物联网卡市场获得了难以置信的增长。</p><p>短短一年，市场规模翻了一倍达到3亿的规模，需求量的激增竟然让SIM卡制造都供应不足，从上游芯片到下游封装各大厂商都得加班加点开足马力生产。芯讯通、移远等模组厂商也获益匪浅，拿到共享单车的订单就等于翻倍式增长。</p><p>共享单车引发的物联网卡市场爆发，彻底激活了整个产业链，没有做过蜂窝物联的方案商都不好意思开门做生意，方案商产业链的成熟，让更多智能化硬件的出现更加便利。</p><p>于是，沿用这种远程控制加硬件服务的思路，各种新的应用场景被不断挖掘，共享充电宝、共享按摩椅、共享纸巾、共享雨伞……越来越多的场景被这些有趣的硬件所占据。</p><p>运营商也被这气势如虹的增长震撼了，当人口红利已经达到极限饱和的时候，一块新的天地让人有了无限遐想，三家运营商的各种论坛上，开始频频出现“万物互联”的字眼，万物连接被寄予厚望。</p><p>不过令三家运营商始料不及的是，物联网卡市场刚刚爆发就引来了惨烈的竞争，物联网卡的供应方构成错综复杂，各地运营商、各路供卡渠道、甚至小米和阿里等互联网公司都参与其中。</p><p>但各类渠道价格、质量、能力各不相同，当年低价买卡的十有八九都遭遇过供应商跑路导致后续无法使用的问题。这个野蛮生长时埋下的雷，后来爆发出黑卡的问题。</p><h2><strong>插曲</strong><strong>&nbsp;</strong></h2><p>物联网卡的种种套路，最早源起Jasper平台提供的能力。</p><p>15年Jasper被引入国内后，极为强悍的开放能力迅速被众多第三方物联网卡供应商运用到极致，而其中最核心的能力就是组池和按实际使用量付费。</p><p>故事是这样的。</p><p>第三方供应商以比较大的规模组池，卡可以按各种套餐销售，并且可以远远低于市场价格，当规模大到一定程度，就会发现相当多的物联网卡实际是没有使用的，通过组池后，实际需要支付的流量，远远低于总套餐流量，相当于办低档套餐卖高档套餐。</p><p>但这样的方式仍然存在bug，当用户都过预期使用的时候，就会出现爆池风险，爆池后供应商不愿亏本支付，用户最终就无法使用。于是，这又导致一些更悲伤的故事，有些干脆就欺诈式销售，大规模低价销售然后跑路，用户用了两个月发现用不了了，这种案例数不胜数。</p><p>还有一个很有情怀但是结局悲伤的故事。</p><p>大约15年的时候，当时正是互联网免费思维盛行的时候，市场上出现了一种微x卡，可以免费使用500M，免费的东西谁不爱用？一时间，车联网产品商纷纷使用，但是和互联网免费边际成本趋向于0不同，实体商品的免费带来的成本巨大，又没有带来预想中的价值变现，微x据坊间传一度欠费数千万，最后免费模式无法持续，也让众多发出去使用的车联网厂商一地鸡毛。</p><p>对行业带来更大伤害的是“黑卡”。</p><p>15年以后，电话实名制力度非常大，但作为主要面向上游产业的产品，物联网卡很难做到个人实名，在供卡商层层转售之后，已经难以追溯卡的去向，变成了所谓“黑卡“，而黑卡一旦落入电信诈骗者之手后危害巨大。</p><p>16年徐玉玉案让人悲伤，这个标志性事件让业界意识到，不解决黑卡问题将让整个行业难以发展。</p><p>解决黑卡的核心是怎样分辨物联网卡是用到了该用的地方，并且让用的人实名，于是三大运营商纷纷推出机卡捆绑、定向流量、实名制加强等诸多措施，对存量卡也进行大规模清理，供卡商江湖也因此发生剧烈震荡，不少供卡商因为涉及黑卡损失惨重，不少供卡商下游客户也被殃及池鱼。</p><p>每个行业的成长历程总伴随着各种混乱，流量虚标、跑路、免费、黑卡这一段段插曲，不断的让市场开始意识到，在物联网上，安全大于一切。</p><p>随着物联网越来越介入到各行各业的关键设备、关键环节，安全必然成为越来越重要的考量因素，试想，有一天，这个不起眼的连接控制着我们的车、电、水、气、支付，如果一旦出现问题影响会有多大？好莱坞大片中那些被远程控制导致各种混乱的场景也许距离现实并不遥远。</p><h2><strong>新的开始</strong></h2><p>2016年6月，3GPP NB-IoT R13版本冻结。这是一个划时代的里程碑。</p><p>从最早普通个人卡兼职的产品，到面对产业定制的产品，再到独立网络制式的产品，这十余年的历史见证了物联网从孕育到正式出生的过程。</p><p>这一次，网络设备厂商成为了推广的急先锋，华为成了NB-IOT最积极的布道者，一时间各大展会、各大论坛、各种政策规划的探讨中，都能感受到NB的声势已经远远压过另一项技术eMTC。</p><p>eMTC也是专为物联网设计的技术，技术层面各有千秋，但在制式主导权的角力之下，NB-IOT在中国占据了明显的上风。</p><p>运营商层面的角力也颇有意思。</p><blockquote><p>在2G/3G上只有CDMA的电信，成为NB-IoT最积极、最坚定的支持者，原因很简单，在低速率物联网领域，几乎没有CDMA产业链的生存空间，电信要进入物联网市场，只能ALL in。</p><p>电信另外一个优势是拥有800MHZ低频FDD资源，完全没有政策障碍，只需要在现网4G基站上升级即可支持，因此投入也最没有顾虑。到17年5月17日，电信宣布NB网络建成，成为首个宣布商用的运营商。</p><p>对移动而言，最初NB的选择显得有些犹豫。原先庞大而完善的2G网络，成就了移动在物联网领域的霸主地位，在升级LPWA方面并没有那么迫切，最为关键的是移动4G是TD-LTE，缺少FDD牌照，始终存在政策障碍。</p><p>转机在17年6月，工信部批准在已分配的GSM或FDD方式频段上，可以部署NB-IoT。拿到政策后，移动也迅速抛出NB网络采购大单，全面建设FDD900M站点，并在11月宣布NB商用。</p><p>声音最小的是联通。在前物联网时代，因为有Jasper平台加持，加上拥有成熟的GSM和WCDMA，高端应用领域联通占据领先的份额，但在窄带网络建设上，联通更加的纠结，原因在于联通900M频段资源少，而1800M的NB-IOT并不成熟，虽然联通在17年也同样宣布试商用，但实际影响却不大。</p></blockquote><p>无论投入大小，这都是三大运营商在物联网支持上发出的最强音，与过去产业自然生长不同，NB产业在诸多超级力量的精心培育下，成长速度惊人，这其中最为大手笔的就是在终端产业的支持上。</p><p>网络可以有实力雄厚的运营商先建，但是在终端产业上，只要价格贵就很难有需求，没有需求量又很难降低终端价格，这是个鸡生蛋、蛋生鸡的问题。</p><p>在终端市场上，GSM制式的模块只需要20元，而NB模块要80，这个价格几乎没有市场，必须要有人能启动市场。</p><blockquote><p>第一个出手的是电信，17年号称NB宇宙第一标出炉，电信采购50万片模组每片补贴30元，让模组市场供货价格直接杀到36元。</p><p>随后移动抛出更大的橄榄枝，在17年11月全球合作伙伴大会上移动宣布对NB-IOT模组补贴10亿元。</p><p>到18年8月，联通也推出了采购计划，采购规模预期为300万片，限价35元/片。</p></blockquote><p>就这样，NB通信模组市场，在整个需求侧还没启动、需求量还不大时，就给硬生生的迅速催熟，价格迅速接近2G。</p><p>在这些大单背后，模组公司也在经历一场洗牌，这一轮洗牌叫上市。</p><p>市场空间的迅速扩大，原先并不起眼的上游电子器件厂商成为资本的香饽饽，格局之争也要求借助资本市场的力量。</p><p>于是，17年成为模组产业资本变局一年。</p><blockquote><p>17年4月，广和通首先上市，虽然不算业内龙头，但上市过程却最顺。</p><p>17年9月，日海通讯发布公告，以1.2亿收购龙尚科技68%股份，首度进入模组产业。</p><p>半年之后，日海通讯宣布以5.18亿元收购曾经的龙头芯讯通100%股权，日海通过资本方式成为模组的最大供应商。</p><p>17年12月，高新兴发布公告，宣布历经一年的中兴物联收购终于完成，高新兴也成为上述电信NB宇宙第一标的中标厂商。</p><p>17年6月，有方提交创业板IPO申请，不过18年3月主动撤回。</p><p>18年7月，最后一个主要玩家移远也提交上市申请，静待上会。</p></blockquote><p>风雨十余年，分的分，卖的卖，合的合，模组公司们在资本市场上算是会师了。</p><p>这一次，物联网的网络和终端产业，都完成了各自的飞跃。</p><p>物联网已经不是那个蛮荒之地，不再是为了实现需要左拼右凑起来的产品，它已经成为了一个泛在覆盖的基础设施，一切物品皆有可能低成本的接入这个庞大的网络，继而形成一个真正意义上的Internet of things，它所能驱动的未来不可限量。</p><p>而原来野蛮生长着的分散杂乱的物联网应用提供商们，也面临着一场新选手入场的变革。</p><p>这个变革的号角叫做“产业互联网”，众多移动互联网时代的巨头和独角兽们，在收割完人口红利之后，也开始进场收割产业红利，入局工业互联网、智慧城市、新零售、新制造……，这些也许将会构成一个以物、以产业为主体的新生态。</p><p>……</p><p>十年前，3G网络和智能手机终端开始成型，一众应用兴起，经过五年发展，移动互联网巨头们纷纷拿到船票登船，再过五年，格局已定，上半场结束。</p><p>当下，蹒跚十多年的物联网，也走到了新的开始，又是熟悉的配方、熟悉的味道。</p><p>看上去，更大的历史，才刚刚开始。</p><p><br></p>
</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/529/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/527/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
				
				<li>
					<a href="https://doc.luatos.wiki/wiki/" title="stack-overflow" target="_self">
					<i class="fa fa-stack-overflow"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © 仅供搜索引擎收录使用 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
