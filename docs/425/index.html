<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  
  <title>合宙Luat WiFi模块AT指令手册及示例（三） [ Luat doc 社区文章静态页面 ]</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/iLiKE.css">
    
  
  
  
<meta name="generator" content="Hexo 5.3.0"></head>
<body>
    <div class="header">
        <div class="container">
    <div class="menu">
      <div class="menu-left">
        <a href="/">
          <img src="https://iot.openluat.com/assets/img/logo.jpg"></img>
        </a>
      </div>
      <div class="menu-right">
        
          
          
          
          
          
          
          <a href="/">首页</a>
        
          
          
          
          
          
          
          <a href="/archives">归档</a>
        
          
          
          
          
          
          
          <a href="">关于</a>
        
      </div>
    </div>
</div>
    </div>
    <div class="container">
        <h1 class="post-title">合宙Luat WiFi模块AT指令手册及示例（三）</h1>
<article class="post markdown-style">
  <h4><span style="font-weight:700;"><span style="font-size:12pt;">2.2.3.13<span style="font-size:7pt;font-family:'Times New Roman';">          </span></span><span style="font-size:12pt;font-family:'黑体';">获取指定的</span><span style="font-size:12pt;">socket</span><span style="font-size:12pt;font-family:'黑体';">状态：</span><span style="font-size:12pt;">AT+SKSTT</span></span></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l <span style="font-size:7pt;font-family:'Times New Roman';"> </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">获取指定的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">状态，返回值的第一行表示的是用户指定的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">的状态信息，如果该</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">类型为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP</span><span style="font-size:10.5pt;font-family:'宋体';">服务器，那么从下一行开始每一行表示一个接入的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">client</span><span style="font-size:10.5pt;font-family:'宋体';">的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">状态。</span> </p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-Crsy8gle5b8f33335793f.jpg" class="img-responsive" alt="attachments-2018-09-Crsy8gle5b8f33335793f.jpg" style="width:596px;" /></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span></span><br /></p>

<p><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;"> socket</span><span style="background-color:transparent;font-size:10.5pt;font-family:'宋体';">：</span><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="background-color:transparent;font-size:10.5pt;font-family:'宋体';">号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> status</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">状态</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-q3mZPxK75b8f389948d28.jpg" class="img-responsive" style="width:583.5px;" alt="attachments-2018-09-q3mZPxK75b8f389948d28.jpg" /></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">host</span><span style="font-size:10.5pt;font-family:'宋体';">：对端</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ip</span><span style="font-size:10.5pt;font-family:'宋体';">地址</span><br /></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">HostPort</span><span style="font-size:10.5pt;font-family:'宋体';">：对端端口号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">LocalPort</span><span style="font-size:10.5pt;font-family:'宋体';">：本地端口号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">rx_data</span><span style="font-size:10.5pt;font-family:'宋体';">：接收</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">buffer</span><span style="font-size:10.5pt;font-family:'宋体';">中数据长度</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l <span style="font-size:7pt;font-family:'Times New Roman';"> </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">示例</span></span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-family:Arial, sans-serif;font-size:10.5pt;"> </span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">→</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKSTT=1</span></p></td></tr><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">←</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK=1,2,"36.7.87.100",6100,59749,0</span></p></td></tr></table>

<h4><b><span style="font-size:12pt;"><br /></span></b></h4>

<h4><b><span style="font-size:12pt;">2.2.3.14<span style="font-size:7pt;font-family:'Times New Roman';">        </span></span><span style="font-size:12pt;font-family:'黑体';">关闭指定的</span><span style="font-size:12pt;">socket </span><span style="font-size:12pt;font-family:'黑体';">：</span><span style="font-size:12pt;">AT+SKCLS</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">关闭指定的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">格式（</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">）：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKCLS=&lt;socket&gt;&lt;CR&gt;</span></p><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p></td></tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">号</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">示例：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">→</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKCLS=1</span></p></td></tr><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">←</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK</span></p></td></tr></table>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.3.15<span style="font-size:7pt;font-family:'Times New Roman';">          </span></span><span style="font-size:12pt;font-family:'黑体';">设置系统默认发送的</span><span style="font-size:12pt;">socket </span><span style="font-size:12pt;font-family:'黑体';">：</span><span style="font-size:12pt;">AT+SKSDF</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">设置系统默认发送的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">。当用户需要在命令模式下进入透明传输模式时，使用本命令可以指定将串口的透明数据发送的目的地。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">格式（</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">）：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKSDF=&lt;socket&gt;&lt;CR&gt;</span></p><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p></td></tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">号</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-family:'宋体';">示例：</span></p>

<p><span style="font-family:'宋体';">请参考<a>串口进入透传模式：AT+ENTM</a>示例</span></p>

<p> </p>

<h4><b><span style="font-size:12pt;">2.2.3.16<span style="font-size:7pt;font-family:'Times New Roman';">          </span></span><span style="font-size:12pt;font-family:'黑体';">获取当前</span><span style="font-size:12pt;">socket</span><span style="font-size:12pt;font-family:'黑体';">收到数据的源</span><span style="font-size:12pt;">IP</span><span style="font-size:12pt;font-family:'黑体';">地址：</span><span style="font-size:12pt;">AT+SKSRCIP</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">获取当前</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">收到数据的源</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">格式（</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">）：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKSRCIP=?&lt;CR&gt;</span></p><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK=[host]&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p></td></tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Host</span><span style="font-size:10.5pt;font-family:'宋体';">：数据的源</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">示例：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">→</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKSRCIP=?</span></p></td></tr><tr><td><p><span style="font-size:10.5pt;font-family:'宋体';">←</span></p></td><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK=36.7.87.10</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span></p></td></tr></table>

<p> </p>

<h4><b><span style="font-size:12pt;">2.2.3.17<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-size:12pt;">socket</span><span style="font-size:12pt;font-family:'黑体';">主动上报接收数据</span><span style="font-size:10.5pt;font-family:'黑体';">：</span><span style="font-size:12pt;">AT+SKRPTM</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">打开和关闭</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">主动上报接收数据功能</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">格式（</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">）：</span></span></p>

<table class="MsoNormalTable"><tr><td><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKRPTM=&lt;mode&gt;&lt;CR&gt;</span></p><p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p></td></tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></span><span style="font-weight:700;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> Mode</span><span style="font-size:10.5pt;font-family:'宋体';">：</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-yDmHAa7n5b8f3a17e6fc8.jpg" class="img-responsive" style="width:526.5px;" alt="attachments-2018-09-yDmHAa7n5b8f3a17e6fc8.jpg" /></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">示例：</span></b></p>



<table class="MsoNormalTable"><tr><td>
  <p><span style="font-size:10.5pt;font-family:'宋体';">→</span></p>
  </td>
  <td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> SKRPTM=</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span></p>
  </td>
 </tr><tr><td>
  <p><span style="font-size:10.5pt;font-family:'宋体';">←</span></p>
  </td>
  <td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK</span></p>
  </td>
 </tr></table>

<p><b> </b></p>



<h4><b><span style="font-size:12pt;">2.2.3.18<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">一键配置功能：</span><span style="font-size:12pt;">AT+ONESHOT</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b></p>



<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span><span style="font-size:10.5pt;font-family:'宋体';">打开和关闭一键配置功能</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><span style="font-size:10.5pt;font-family:'宋体';">格式（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span><span style="font-size:10.5pt;font-family:'宋体';">）：</span></p>

<table class="MsoNormalTable"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+ONESHOT=&lt;status&gt;&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">   </span></b></p>





<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> status</span><span style="font-size:10.5pt;font-family:'宋体';">：</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-khJNYAKG5b8f3ac7e0ab4.jpg" class="img-responsive" style="width:527px;" alt="attachments-2018-09-khJNYAKG5b8f3ac7e0ab4.jpg" /><span style="font-size:10.5pt;font-family:'宋体';"><span style="font-family:Wingdings;">l</span><span style="font-size:7pt;font-family:'Times New Roman';">  </span><b><span style="font-size:10.5pt;">示例：</span></b><br /></span><img src="http://oldask.openluat.com/image/show/attachments-2018-09-k9CmKck75b8f3baa644d8.jpg" class="img-responsive" style="width:623px;" alt="attachments-2018-09-k9CmKck75b8f3baa644d8.jpg" /></p>

<h4><b><span style="font-size:12pt;"><br /></span></b></h4>

<h4><b><span style="font-size:12pt;">2.2.3.19<span style="font-size:7pt;font-family:'Times New Roman';">         </span></span><span style="font-size:12pt;">HTTP</span><span style="font-size:12pt;font-family:'黑体';">客户端</span><span style="font-size:12pt;">post get</span><span style="font-size:12pt;font-family:'黑体';">功能：</span><span style="font-size:12pt;">AT+HTTPC</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b></p>



<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">http</span><span style="font-size:10.5pt;font-family:'宋体';">客户端</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">post get</span><span style="font-size:10.5pt;font-family:'宋体';">功能</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">格式（</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></b><b><span style="font-size:10.5pt;font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+HTTPC=&lt;url&gt;,&lt;verb&gt;,&lt;postdata&gt;&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">   </span></b></p>



<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  url</span><span style="font-size:10.5pt;font-family:'宋体';">：远程</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">http</span><span style="font-size:10.5pt;font-family:'宋体';">服务器端地址；</span></p>



<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  verb</span><span style="font-size:10.5pt;font-family:'宋体';">：</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-zr8Wfk7T5b8f3d6b3a986.jpg" class="img-responsive" style="width:528px;" alt="attachments-2018-09-zr8Wfk7T5b8f3d6b3a986.jpg" /><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">       post data</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">verb</span><span style="font-size:10.5pt;font-family:'宋体';">为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">、</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">时使用，为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">http</span><span style="font-size:10.5pt;font-family:'宋体';">上传数据。</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">       </span><span style="font-size:10.5pt;font-family:'宋体';">备注：使用</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">httpc</span><span style="font-size:10.5pt;font-family:'宋体';">指令前需要打开</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">主动上报功能</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SKRPTM=1</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h3><b><span style="font-size:12pt;font-family:Arial, sans-serif;">2.2.4<span style="font-size:7pt;font-family:'Times New Roman';">        </span></span><span style="font-size:12pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:12pt;font-family:'宋体';">指令</span></b></h3>

<h4><b><span style="font-size:12pt;">2.2.4.1<span style="font-size:7pt;font-family:'Times New Roman';">    </span></span><span style="font-size:12pt;font-family:'黑体';">设置</span><span style="font-size:12pt;">MQTT</span><span style="font-size:12pt;font-family:'黑体';">服务器：</span><span style="font-size:12pt;">AT+MSERVER</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">服务器</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址和端口。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MSERVER=&lt;port&gt;,&lt;ipaddr&gt;</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;port&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">服务器端口号，不用加双引号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;ipaddr&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">服务器</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址（暂不支持域名地址），不用加双引号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.2<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">设置登录账号和密码：</span><span style="font-size:12pt;">AT+MLOGIN</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">用户名和密码。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MLOGIN=&lt;user&gt;,&lt;password&gt;</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;user&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：用户名，不用加双引号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;password&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：密码，不用加双引号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.3<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">设置</span><span style="font-size:12pt;">client
id</span><span style="font-size:12pt;font-family:'黑体';">：</span><span style="font-size:12pt;">AT+MID</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">client id</span><span style="font-size:10.5pt;font-family:'宋体';">。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MID=&lt;client_id&gt;</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;client_id&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">client id</span><span style="font-size:10.5pt;font-family:'宋体';">，不用加双引号</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.4<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">连接</span><span style="font-size:12pt;">MQTT</span><span style="font-size:12pt;font-family:'黑体';">服务器：</span><span style="font-size:12pt;">AT+MCONNECT</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">连接</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">服务器。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MCONNECT</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  <p><span style="background-color:transparent;font-size:10.5pt;font-family:'宋体';">成功：</span><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;">+MQTT:CONNECTED </span><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span><br /></p>
  <p><span style="font-size:10.5pt;font-family:'宋体';">失败：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+MQTT:FAIL</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">无</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.5<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">订阅一个主题：</span><span style="font-size:12pt;">AT+MSUB</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">订阅一个主题。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MSUB=&lt;topics&gt;,&lt;qos&gt;</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span><span style="background-color:transparent;font-size:10.5pt;font-family:'宋体';">成功：</span><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;">+MSUB:OK</span></p>
  <p><span style="font-size:10.5pt;font-family:'宋体';">失败：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+MSUB:&lt;result&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;result&gt;</span><span style="font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:'宋体';">结果码</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.6<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">发布一条消息：</span><span style="font-size:12pt;">AT+MPUB</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">发布一条消息。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MPUB=&lt;topics&gt;,&lt;qos&gt;,&lt; retatin&gt;,&lt;mssage&gt;&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span><span style="background-color:transparent;font-size:10.5pt;font-family:'宋体';">成功：</span><span style="background-color:transparent;font-size:10.5pt;font-family:Arial, sans-serif;">+MPUB:OK</span></p>
  <p><span style="font-size:10.5pt;font-family:'宋体';">失败：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+MPUB:&lt;result&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;result&gt;</span><span style="font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:'宋体';">结果码</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.7<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;font-family:'黑体';">收到一条消息：</span><span style="font-size:12pt;">AT+MTOPIC,AT+MQD</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">收到一条消息。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+MTOPIC:&lt;topiclen&gt;,&lt;topic&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+MQD:&lt;len&gt;,&lt;data&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;topiclen&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：主题长度</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;topic&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：主题内容</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;len&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：消息内容的长度</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;data&gt;</span><span style="font-size:10.5pt;font-family:'宋体';">：消息内容</span></p>



<p><b> </b></p>



<h4><b><span style="font-size:12pt;">2.2.4.8<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-size:12pt;font-family:'黑体';">关闭</span><span style="font-size:12pt;">MQTT</span><span style="font-size:12pt;font-family:'黑体';">服务器：</span><span style="font-size:12pt;">AT+MCLOSE</span></b></h4>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">功能：</span></b><span style="font-size:10.5pt;font-family:'宋体';">关闭</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT</span><span style="font-size:10.5pt;font-family:'宋体';">服务器。</span></p>

<p><span style="font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';"> 
</span></span><b><span style="font-family:'宋体';">格式（</span><span>ASCII</span></b><b><span style="font-family:'宋体';">）：</span></b></p>



<table class="MsoNormalTable" width="605"><tr><td>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MCLOSE</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">&lt;CR&gt;</span></p>
  <p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">+OK&lt;CR&gt;&lt;LF&gt;&lt;CR&gt;&lt;LF&gt;</span></p>
  </td>
 </tr></table>

<p><span style="font-size:10.5pt;font-family:Wingdings;">l<span style="font-size:7pt;font-family:'Times New Roman';">  </span></span><b><span style="font-size:10.5pt;font-family:'宋体';">参数：</span></b><span style="font-family:'宋体';font-size:10.5pt;">无</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<h4><b><span style="font-size:12pt;">2.2.4.9<span style="font-size:7pt;font-family:'Times New Roman';">    </span></span>MQTT<span style="font-size:12pt;font-family:'宋体';">结果码</span></b></h4>





<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-rKhbjMrn5b8f40121f371.jpg" class="img-responsive" style="width:651.5px;" alt="attachments-2018-09-rKhbjMrn5b8f40121f371.jpg" /><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><span> </span></p>

<h4><b><span style="font-size:12pt;">2.2.4.10<span style="font-size:7pt;font-family:'Times New Roman';">         
</span></span><span style="font-size:12pt;">MQTT</span><span style="font-size:12pt;font-family:'黑体';">使用方法示例</span></b></h4>

<p><span style="font-size:10.5pt;font-family:'宋体';">注意：目前</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MSERVER</span><span style="font-size:10.5pt;font-family:'宋体';">命令中</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MQTT </span><span style="font-size:10.5pt;font-family:'宋体';">服务器地址暂不支持域名，只支持</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-KXe1E71d5b8f41e120a96.jpg" class="img-responsive" style="width:653.5px;" alt="attachments-2018-09-KXe1E71d5b8f41e120a96.jpg" /><img src="http://oldask.openluat.com/image/show/attachments-2018-09-0JdBg0yD5b8f41e8b031a.jpg" class="img-responsive" style="width:653.5px;" alt="attachments-2018-09-0JdBg0yD5b8f41e8b031a.jpg" /></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h1><b><font><span style="font-size:21.3333px;">3</span></font><span style="font-family:'Times New Roman';font-size:7pt;">         </span><span style="font-size:16pt;font-family:'宋体';">常用操作</span></b></h1>

<h2><b><span style="font-size:14pt;">3.1<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:14pt;font-family:'黑体';">创建</span><span style="font-size:14pt;">SoftAP</span><span style="font-size:14pt;font-family:'黑体';">流程</span></b></h2>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（1）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WPRT</span><span style="font-size:10.5pt;font-family:'宋体';">设置无线网卡工作模式为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WPRT=2</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（2）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">APSSID</span><span style="font-size:10.5pt;font-family:'宋体';">设置无线网卡对于</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">STA</span><span style="font-size:10.5pt;font-family:'宋体';">的网络名称</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MyAp</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SSID=MyAp</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（3）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">APENCRY</span><span style="font-size:10.5pt;font-family:'宋体';">设置无线网卡安全模式为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP64</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ENCRY=1</span></p>

<p>            <span style="font-size:10.5pt;font-family:'宋体';">参数：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">open</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0</span><span style="font-size:10.5pt;font-family:'宋体';">，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP64</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP128</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（4）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">APKEY</span><span style="font-size:10.5pt;font-family:'宋体';">设置无线网卡密钥</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">KEY=1,1,12345</span></p>

<p>            <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">：密钥格式，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">HEX</span><span style="font-size:10.5pt;font-family:'宋体';">，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></p>

<p>            <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">index: </span><span style="font-size:10.5pt;font-family:'宋体';">密钥索引号，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">～</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">用于</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP</span><span style="font-size:10.5pt;font-family:'宋体';">加密密钥，其它加密方式固定为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0 </span></p>

<p>            <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">：无线密钥。例如：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（5）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">APNIP</span><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ip</span><span style="font-size:10.5pt;font-family:'宋体';">地址和子网掩码</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+APNIP=1,192.168.1.1,255.255.255.0,192.168.1.1,192.168.1.1</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">：地址类型，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0</span><span style="font-size:10.5pt;font-family:'宋体';">表示使用</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">DHCP</span><span style="font-size:10.5pt;font-family:'宋体';">动态分配，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">表示静态地址</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ip:192.168.1.1</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">netmask</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">255.255.255.0</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">gateway</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">192.168.1.1</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">5</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">dns</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">192.168.1.1</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">PMTF</span><span style="font-size:10.5pt;font-family:'宋体';">保存</span><span style="font-size:10.5pt;font-family:'宋体';">上述</span><span style="font-size:10.5pt;font-family:'宋体';">参数到</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">spi flash</span><span style="font-size:10.5pt;font-family:'宋体';">，下次开机只需从第</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">7</span><span style="font-size:10.5pt;font-family:'宋体';">步开始</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+PMTF</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">7</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  <span>WJOIN</span></span><span style="font-size:10.5pt;font-family:'宋体';">创建无线网络</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">MyAp</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WJOIN</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">8</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  SLIST      </span><span style="font-size:10.5pt;font-family:'宋体';">查询</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span><span style="font-size:10.5pt;font-family:'宋体';">连接的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">STA</span><span style="font-size:10.5pt;font-family:'宋体';">信息</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SLIST</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span><span style="font-family:inherit;font-size:14pt;background-color:rgb(255,255,255);">3.2<span style="font-size:7pt;font-family:'Times New Roman';">        </span></span><span style="font-family:'黑体';font-size:14pt;background-color:rgb(255,255,255);">扫描</span><span style="color:inherit;font-family:inherit;font-size:14pt;">AP</span><span style="color:inherit;font-size:14pt;font-family:'黑体';">流程</span></b></p>



<p><span style="font-family:'宋体';">无线网卡扫</span><span style="font-size:10.5pt;font-family:'宋体';">描</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT</span><span style="font-size:10.5pt;font-family:'宋体';">指令为：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WSCAN</span></p>



<p> </p>

<h2><b><span style="font-size:14pt;">3.3<span style="font-size:7pt;font-family:'Times New Roman';">        </span></span><span style="font-size:14pt;">STA</span><span style="font-size:14pt;font-family:'黑体';">加入</span><span style="font-size:14pt;">AP</span><span style="font-size:14pt;font-family:'黑体';">流程</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WPRT
</span><span style="font-size:10.5pt;font-family:'宋体';">设置工作模式为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">STA</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WPRT=0</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SSID  </span><span style="font-size:10.5pt;font-family:'宋体';">设置需要加入的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">名称如</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SSID=</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  <span>KEY   </span></span><span style="font-size:10.5pt;font-family:'宋体';">设置需要加入的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">的无线密钥</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+KEY=1,0,12345678</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">：密钥格式，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">HEX</span><span style="font-size:10.5pt;font-family:'宋体';">，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">index:
</span><span style="font-size:10.5pt;font-family:'宋体';">密钥索引号，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">～</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">用于</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP</span><span style="font-size:10.5pt;font-family:'宋体';">加密密钥，其它加密方式固定为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0
</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">：无线密钥。例如：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345678</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">NIP   </span><span style="font-size:10.5pt;font-family:'宋体';">启用</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">DHCP</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+NIP=0</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">5</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">PMTF
</span><span style="font-size:10.5pt;font-family:'宋体';">保存</span><span style="font-size:10.5pt;font-family:'宋体';">上述</span><span style="font-size:10.5pt;font-family:'宋体';">参数到</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">spi flash</span><span style="font-size:10.5pt;font-family:'宋体';">，下次开机只需从第</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span><span style="font-size:10.5pt;font-family:'宋体';">步开始</span></p>

<p>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+PMTF</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  <span>WJOIN</span></span><span style="font-size:10.5pt;font-family:'宋体';">加入无线网络</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WJOIN</span></p>



<p> </p>

<h2><b><span style="font-size:14pt;">3.4<span style="font-size:7pt;font-family:'Times New Roman';">         </span></span><span style="font-size:14pt;font-family:'黑体';">创建</span><span style="font-size:14pt;">APSTA</span><span style="font-size:14pt;font-family:'黑体';">流程</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WPRT
</span><span style="font-size:10.5pt;font-family:'宋体';">设置工作模式为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">APSTA</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WPRT=3</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SSID   </span><span style="font-size:10.5pt;font-family:'宋体';">设置需要加入的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">名称如</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+SSID=</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  <span>KEY    </span></span><span style="font-size:10.5pt;font-family:'宋体';">设置需要加入的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">的无线密钥</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+KEY=1,0,12345678</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">：密钥格式，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">HEX</span><span style="font-size:10.5pt;font-family:'宋体';">，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">表示</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">index:
</span><span style="font-size:10.5pt;font-family:'宋体';">密钥索引号，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;font-family:'宋体';">～</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">用于</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WEP</span><span style="font-size:10.5pt;font-family:'宋体';">加密密钥，其它加密方式固定为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">0
</span></p>

<p>           <span style="font-size:10.5pt;font-family:'宋体';">参数</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">：无线密钥。例如：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">12345678</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  <span>APSSID </span></span><span style="font-size:10.5pt;font-family:'宋体';">设置创建的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SOFTAP</span><span style="font-size:10.5pt;font-family:'宋体';">的网络名称</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SSID=”MYSoftAP”</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">5</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  APENCRY      </span><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span><span style="font-size:10.5pt;font-family:'宋体';">的加密类型</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">(</span><span style="font-size:10.5pt;font-family:'宋体';">如</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WPA2-TKIP)</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+APENCRY=5</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  APKEY    </span><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span><span style="font-size:10.5pt;font-family:'宋体';">的密码</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">(</span><span style="font-size:10.5pt;font-family:'宋体';">如</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ASCII</span><span style="font-size:10.5pt;font-family:'宋体';">码</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">87654321)</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+APKEY=1,0,87654321</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">7</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  APNIP     </span><span style="font-size:10.5pt;font-family:'宋体';">设置</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">IP</span><span style="font-size:10.5pt;font-family:'宋体';">地址和子网掩码</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+APNIP=1,192.168.1.1,255.255.255.0,192.168.1.1,192.168.1.1</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">8</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">PMTF </span><span style="font-size:10.5pt;font-family:'宋体';">保存</span><span style="font-size:10.5pt;font-family:'宋体';">上述</span><span style="font-size:10.5pt;font-family:'宋体';">参数到</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">spi flash</span><span style="font-size:10.5pt;font-family:'宋体';">，下次开机只需从第</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">9</span><span style="font-size:10.5pt;font-family:'宋体';">步开始</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+PMTF</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">9</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WJOIN </span><span style="font-size:10.5pt;font-family:'宋体';">加入无线网络</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TEST_AP</span></p>

<p>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WJOIN</span></p>



<p> </p>

<h2><b><span style="font-size:14pt;">3.5<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-size:14pt;">STA</span><span style="font-size:14pt;font-family:'黑体';">如何断开连接的</span><span style="font-size:14pt;">AP</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">无线网卡断开</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AP</span><span style="font-size:10.5pt;font-family:'宋体';">的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT</span><span style="font-size:10.5pt;font-family:'宋体';">指令为：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WLEAV</span></p>

<h2><b><span style="font-size:14pt;">3.6<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-size:14pt;">SoftAP</span><span style="font-size:14pt;font-family:'黑体';">断网</span></b></h2>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span><span style="font-size:10.5pt;font-family:'宋体';">断网的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT</span><span style="font-size:10.5pt;font-family:'宋体';">指令为：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+WLEAV=2</span></p>



<p> </p>

<h2><b><span style="font-size:14pt;">3.7<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-size:14pt;">STA</span><span style="font-size:14pt;font-family:'黑体';">如何查看当前状态</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">无线网卡查看当前网卡的状态的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT</span><span style="font-size:10.5pt;font-family:'宋体';">指令为：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+LKSTT</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h2><b><span style="font-size:14pt;">3.8<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-size:14pt;font-family:'黑体';">查看当前</span><span style="font-size:14pt;">SoftAP</span><span style="font-size:14pt;font-family:'黑体';">状态</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">查看当前</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SoftAP</span><span style="font-size:10.5pt;font-family:'宋体';">状态的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT</span><span style="font-size:10.5pt;font-family:'宋体';">指令为：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+APLKSTT</span></p>

<p><span> </span></p>

<h2><b><span style="font-size:14pt;">3.9<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-size:14pt;font-family:'黑体';">如何使用</span><span style="font-size:14pt;">socket</span><span style="font-size:14pt;font-family:'黑体';">功能</span></b></h2>

<p><span style="font-size:10.5pt;font-family:'宋体';">









































































































































































<p><span style="font-size:10.5pt;">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1</span><span style="font-size:10.5pt;">）</span><span style="font-size:10.5pt;">建立一个</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">PC</span><span style="font-size:10.5pt;">端的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP server</span><span style="font-size:10.5pt;">，如使用</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP</span><span style="font-size:10.5pt;">调试助手，</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP server</span><span style="font-size:10.5pt;">地址为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">192.168.1.100</span><span style="font-size:10.5pt;">，监听端口为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">1000</span><span style="font-size:10.5pt;">。</span></span></p></p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-ncE91qEw5b8f44c3efd9a.png" class="img-responsive" alt="attachments-2018-09-ncE91qEw5b8f44c3efd9a.png" /><span style="font-size:10.5pt;font-family:'宋体';"><span style="font-size:10.5pt;"><br /></span></span></p>

<p style="text-align:center;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">2</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:'宋体';">建立</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Socket</span><span style="font-size:10.5pt;font-family:'宋体';">：</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TX:      AT+SKCT=0,0,192.168.1.100,1000,1000</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">RX:      +OK=1     ---&gt; 1</span><span style="font-size:10.5pt;font-family:'宋体';">为</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">号</span></p>

<p><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Note</span></b><b><span style="font-size:10.5pt;font-family:'宋体';">：在发送</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">SKCT</span></b><b><span style="font-size:10.5pt;font-family:'宋体';">之前，请先保证模块已经连接了有</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">INTERNET</span></b><b><span style="font-size:10.5pt;font-family:'宋体';">连接的</span></b><b><span style="font-size:10.5pt;font-family:Arial, sans-serif;">WIFI</span></b><b><span style="font-size:10.5pt;font-family:'宋体';">热点。</span></b></p>

<p><b><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></b></p>





<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-cw9tOzhW5b8f44fa21e4c.png" class="img-responsive" alt="attachments-2018-09-cw9tOzhW5b8f44fa21e4c.png" /><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<p style="text-align:center;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">3</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span><span style="font-size:10.5pt;font-family:'宋体';">发送数据：</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TX:       AT+SKSND=1,5</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">kevin</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">RX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">    +OK=5</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-95MirnFS5b8f46137aadd.png" class="img-responsive" alt="attachments-2018-09-95MirnFS5b8f46137aadd.png" /></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP server</span><span style="font-size:10.5pt;font-family:'宋体';">接收到数据界面为：</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-zOIKAU2l5b8f463a5a267.png" class="img-responsive" alt="attachments-2018-09-zOIKAU2l5b8f463a5a267.png" /></p>

<p style="text-align:center;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">4</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:'宋体';">接收数据：</span></p>



<p><span style="font-size:10.5pt;font-family:'宋体';">在</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TCP</span><span style="font-size:10.5pt;font-family:'宋体';">调试助手界面输入发送数据</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">hello</span><span style="font-size:10.5pt;font-family:'宋体';">，点击发送。</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-iOP3df7m5b8f4713b5153.png" class="img-responsive" alt="attachments-2018-09-iOP3df7m5b8f4713b5153.png" /><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">      AT+SKRCV=1,5</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">RX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">      +OK=5</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">hello</span></p>





<p><br /></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-I1Cr6r275b8f4746cdfca.png" class="img-responsive" alt="attachments-2018-09-I1Cr6r275b8f4746cdfca.png" /><br /></p>



<p style="text-align:center;"><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">5</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:'宋体';">查询</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Socket</span><span style="font-size:10.5pt;font-family:'宋体';">状态：</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">   AT+SKSTT=1</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">RX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  +OK=1,2,"192.168.1.100",1000,1024,0</span></p>





<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-p9bvkgdX5b8f47d08ab6d.png" class="img-responsive" alt="attachments-2018-09-p9bvkgdX5b8f47d08ab6d.png" /></p>

<p><span style="font-size:10.5pt;font-family:'宋体';">（</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">6</span><span style="font-size:10.5pt;font-family:'宋体';">）</span><span style="font-size:10.5pt;font-family:'宋体';">关闭</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Socket</span><span style="font-size:10.5pt;font-family:'宋体';">连接</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">TX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">   AT+SKCLS=1</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">RX</span><span style="font-size:10.5pt;font-family:'宋体';">：</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  +OK</span></p>

<p><img src="http://oldask.openluat.com/image/show/attachments-2018-09-dSzTkDrh5b8f47f386302.png" class="img-responsive" alt="attachments-2018-09-dSzTkDrh5b8f47f386302.png" /></p>

<p><br /></p>



<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;"> </span></p>

<h3><b><span>3.10<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-family:'黑体';">自动工作模式下的透传应用</span></b></h3>

<p><span style="font-family:Arial, sans-serif;">（1）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-family:Arial, sans-serif;">WPRT </span><span style="font-family:'宋体';">设置无线网卡工作模式为</span><span style="font-family:Arial, sans-serif;">STA</span></p>

<p>            <span style="font-family:Arial, sans-serif;">AT+WPRT=0</span></p>

<p><span style="font-family:Arial, sans-serif;">（2）<span style="font-size:7pt;font-family:'Times New Roman';">     </span></span><span style="font-family:Arial, sans-serif;">SSID </span><span style="font-family:'宋体';">设置需要加入的</span><span style="font-family:Arial, sans-serif;">AP</span><span style="font-family:'宋体';">名称如</span><span style="font-family:Arial, sans-serif;">airm2m_wifi</span></p>

<p>            <span style="font-family:Arial, sans-serif;">AT+SSID=</span><span style="font-family:Arial, sans-serif;">airm2m_wifi</span></p>

<p><span style="font-family:Arial, sans-serif;">（3）<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-family:Arial, sans-serif;">KEY  </span><span style="font-family:'宋体';">设置需要加入的</span><span style="font-family:Arial, sans-serif;">AP</span><span style="font-family:'宋体';">的无线密钥</span><span style="font-family:Arial, sans-serif;">12345678</span></p>

<p>            <span style="font-family:Arial, sans-serif;">AT+KEY=1,0,12345678</span></p>

<p><span style="font-family:Arial, sans-serif;">（4）<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-family:Arial, sans-serif;">NIP   </span><span style="font-family:'宋体';">启用</span><span style="font-family:Arial, sans-serif;">DHCP</span></p>

<p><span style="font-family:Arial, sans-serif;"> </span>            <span style="font-family:Arial, sans-serif;">AT+NIP=0</span></p>

<p><span style="font-family:Arial, sans-serif;">（5）<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-family:Arial, sans-serif;">ATM  </span><span style="font-family:'宋体';">设置为自动工作模式</span></p>

<p><span style="font-family:Arial, sans-serif;"> </span>            <span style="font-family:Arial, sans-serif;">AT+ATM=0</span></p>

<p><span style="font-family:Arial, sans-serif;">（6）<span style="font-size:7pt;font-family:'Times New Roman';">      </span></span><span style="font-family:Arial, sans-serif;">ATRM </span><span style="font-family:'宋体';">设置自动工作模式下的</span><span style="font-family:Arial, sans-serif;">socket</span><span style="font-family:'宋体';">连接</span></p>

<p><span style="font-family:Arial, sans-serif;"> </span>            <span style="font-family:Arial, sans-serif;">AT+</span><span style="font-family:Arial, sans-serif;">ATRM</span><span style="font-family:Arial, sans-serif;">=0,0,192.168.1.100,1000</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（7）<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-family:Arial, sans-serif;">PMTF</span><span style="font-size:10.5pt;font-family:'宋体';">保存参数到</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">spi
flash</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span>            <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+PMTF</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">（8）<span style="font-size:7pt;font-family:'Times New Roman';">       </span></span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">Z  </span><span style="font-size:10.5pt;font-family:'宋体';">复位无线网卡使配置生效</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">  </span>           <span style="font-size:10.5pt;font-family:Arial, sans-serif;">AT+Z</span></p>

<p><span style="font-size:10.5pt;font-family:Arial, sans-serif;">             </span><span style="font-size:10.5pt;font-family:'宋体';">复位后，模块自动建立</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">ATRM</span><span style="font-size:10.5pt;font-family:'宋体';">设置的</span><span style="font-size:10.5pt;font-family:Arial, sans-serif;">socket</span><span style="font-size:10.5pt;font-family:'宋体';">连接。如果使用过程中断链，会自动重连。</span></p>

<p><span style="font-size:10.5pt;font-family:'宋体';"><br /></span></p>

<h4><span style="font-weight:bold;">相关文章：</span></h4>

<p style="color:rgb(51,51,51);"><a href="http://oldask.openluat.com/article/42" target="_blank" rel="noreferrer noopener">合宙Luat WiFi模块AT指令手册及示例（二）</a></p>

<p style="color:rgb(51,51,51);"><a href="http://oldask.openluat.com/article/40" target="_blank" rel="noreferrer noopener">合宙Luat WiFi模块AT指令手册及示例（一）</a></p>

<p style="color:rgb(51,51,51);"><br /></p>

<p style="color:rgb(51,51,51);"><br /><br /></p>




</article>

    <div class="pagenator post-pagenator">
    
    
        <a class="extend prev post-prev" href="/426/">上一篇</a>
    

    
    <p>上次更新 2021-01-28</p>
    
    
        <a class="extend next post-next" href="/424/">下一篇</a>
    
    </div>

    </div>
    <div class="footer">
        <div class="container">
    <div class="social">
	<ul class="social-list">
		
			
		
			
		
			
		
			
		
			
		
			
		
			
				
				<li>
					<a href="https://github.com/openluat" title="github" target="_self">
					<i class="fa fa-github"></i>
					</a>
				</li>
			
		
			
		
			
		
			
		
			
		
			
		
			
		
			
		
	</ul>
</div>
    <div class="copyright">
        <span>
            
            
            
                © 仅供搜索引擎收录使用 2017 - 2021
            
        </span>
    </div>
    <div class="power">
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> & <a target="_blank" rel="noopener" href="https://github.com/CaiChenghan/iLiKE">iLiKE Theme</a>
        </span>
    </div>
    <script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
    <!--page counter part-->
<script>
function addCount (Counter) {
    url=$('.article-date').attr('href').trim();
    title = $('.article-title').text().trim();
    var query = new AV.Query(Counter);
    //use url as unique idnetfication
    query.equalTo("url",url);
    query.find({
        success: function(results) {
            if (results.length>0) {
                var counter=results[0];
                counter.fetchWhenSave(true); //get recent result
                counter.increment("time");
                counter.save();
            } else {
                var newcounter=new Counter();
                newcounter.set("title",title);
                newcounter.set("url",url);
                newcounter.set("time",1);
                newcounter.save(null,{
                    success: function(newcounter) {
                        //alert('New object created');
                    }, error: function(newcounter,error) {
                        alert('Failed to create');
                    }
                })
            }
        },
        error: function(error) {
            //find null is not a error
            alert('Error:'+error.code+" "+error.message);
        }
    });
}
$(function() {
    var Counter=AV.Object.extend("Counter");
    //only increse visit counting when intering a page
    if ($('.article-title').length == 1) {
       addCount(Counter);
    }
    var query=new AV.Query(Counter);
    query.descending("time");
    // the sum of popular posts
    query.limit(10); 
    query.find({
        success: function(results) {
                for(var i=0;i<results.length;i++) {
                    var counter=results[i];
                    title=counter.get("title");
                    url=counter.get("url");
                    time=counter.get("time");
                    // add to the popularlist widget
                    showcontent=title+" ("+time+")";
                    //notice the "" in href
                    $('.popularlist').append('<li><a href="'+url+'">'+showcontent+'</a></li>');
                }
            },
        error: function(error) {
            alert("Error:"+error.code+" "+error.message);
        }
    });
});
</script>
</div>
    </div>
</body>
</html>
