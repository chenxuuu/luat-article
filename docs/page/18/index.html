<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/18/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-1354" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/14/1354/" class="article-date">
  <time class="dt-published" datetime="2020-08-14T00:13:14.000Z" itemprop="datePublished">2020-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/14/1354/"> LuatOS@Air302 发行版：V0003 预览测试版(202000908)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/14/1354/" data-id="ckkfmdg9a000evkcg43qz8xl2" data-title=" LuatOS@Air302 发行版：V0003 预览测试版(202000908)" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1353" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/14/1353/" class="article-date">
  <time class="dt-published" datetime="2020-08-13T23:55:45.000Z" itemprop="datePublished">2020-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/14/1353/">Luat_Lua_Air724U 介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>源处：<a href="https://gitee.com/openLuat/Luat_Lua_Air724U" target="_blank"><font color="#000000" style="background-color: rgb(255, 255, 0);">https://gitee.com/openLuat/Luat_Lua_Air724U</font></a></p><p>诚挚欢迎每一位使用合宙模块的朋友！</p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);">介绍</h2><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;">Air724U Lua语言项目, 源码开放, 自由扩展!! 支持 合宙4G cat.1系列模块, 性能卓越!</p><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200807131012759_lvgl.gif" alt="" style="box-sizing: content-box; max-width: 100%; cursor: pointer; display: inline-block !important;"></p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="开发" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#%E5%BC%80%E5%8F%91" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>开发</h2><h3 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.25em; position: relative; color: rgb(64, 72, 91);"><a id="1-准备开发工具" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#1-%E5%87%86%E5%A4%87%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>1. 准备开发工具</h3><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><a target="_blank" rel="noopener" href="https://wiki.openluat.com/doc/tools/" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luatools工具下载&amp;介绍</a></p><h3 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.25em; position: relative; color: rgb(64, 72, 91);"><a id="2-下载core" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#2-%E4%B8%8B%E8%BD%BDcore" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>2. 下载core</h3><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><span style="font-weight: 600;">V19版本，更新时间2020-08-05</span></p><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;">新增LittleVGL库,自带超炫动画效果</p><ul style="padding-left: 2em; margin-bottom: 16px; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><li style="list-style: initial;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200803200044_Luat_V0019_RDA8910.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910</a></p></li><li style="list-style: initial; margin-top: 0.25em;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200803200230_Luat_V0019_RDA8910_FLOAT.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910_FLOAT</a></p></li><li style="list-style: initial; margin-top: 0.25em;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200803200816_Luat_V0019_RDA8910_TTS.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910_TTS</a></p></li><li style="list-style: initial; margin-top: 0.25em;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200803200949_Luat_V0019_RDA8910_TTS_FLOAT.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910_TTS_FLOAT</a></p></li><li style="list-style: initial; margin-top: 0.25em;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200805140018_Luat_V0019_RDA8910_LVGL.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910_LVGL</a></p></li><li style="list-style: initial; margin-top: 0.25em;"><p style="margin: 16px 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200805135752_Luat_V0019_RDA8910_LVGL_FLOAT.zip" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Luat_RDA8910_LVGL_FLOAT</a></p></li></ul><h3 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.25em; position: relative; color: rgb(64, 72, 91);"><a id="3-运行demo" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#3-%E8%BF%90%E8%A1%8Cdemo" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>3. 运行demo</h3><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;">用Luatools工具下载core文件和Lua工程目录中的<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">lib和相应demo文件</code>就可以运行了。</p><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><a target="_blank" rel="noopener" href="https://wiki.openluat.com/doc/luatGuide/#lua" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Lua脚本开发介绍</a></p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="相关链接" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#%E7%9B%B8%E5%85%B3%E9%93%BE%E6%8E%A5" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>相关链接</h2><ul style="padding-left: 2em; margin-bottom: 16px; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><li style="list-style: initial;"><a target="_blank" rel="noopener" href="http://www.openluat.com/" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">合宙官网</a></li><li style="list-style: initial; margin-top: 0.25em;"><a target="_blank" rel="noopener" href="http://m.openluat.com/" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">合宙商城</a>&nbsp;模块,开发板,外设,均有销售</li><li style="list-style: initial; margin-top: 0.25em;"><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1246/0" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">Lua版本LittleVGL开发介绍</a></li></ul><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="授权协议" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U#%E6%8E%88%E6%9D%83%E5%8D%8F%E8%AE%AE" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>授权协议</h2><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px; margin-bottom: 0px !important;"><a target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U/blob/master/LICENSE" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">MIT License</a></p><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px; margin-bottom: 0px !important;"><br></p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-weight: 600; line-height: 1.25; margin: 24px 0em 16px; font-size: 1.5em; padding: 0em; position: relative;"><span style="color: rgb(64, 72, 91);">更多联系：王正伟 </span><font color="#000000" style="background-color: rgb(255, 255, 0);">13959192997</font><font color="#40485b">（微信）</font></h2>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/14/1353/" data-id="ckkfmdge800cavkcg6nxy2hkx" data-title="Luat_Lua_Air724U 介绍" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1352" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/14/1352/" class="article-date">
  <time class="dt-published" datetime="2020-08-13T23:50:17.000Z" itemprop="datePublished">2020-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/14/1352/">Luat_CSDK_Air724U 介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>源处：<a href="https://gitee.com/openLuat/Luat_CSDK_Air724U" target="_blank">https://gitee.com/openLuat/Luat_CSDK_Air724U</a></p><p>诚挚欢迎每一位使用合宙模块的朋友！</p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="一简介" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E4%B8%80%E7%AE%80%E4%BB%8B" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>一、简介</h2><blockquote style="margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word;">Luat_CSDK_Air724U是针对使用合宙Air724U(展锐8910芯片)模块而准备的一套C语言的软件开发环境，可以让客户像开发单片机一下，使用合宙的无线通信模块</p></blockquote><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="二软件架构" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E4%BA%8C%E8%BD%AF%E4%BB%B6%E6%9E%B6%E6%9E%84" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>二、软件架构</h2><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><img src="https://images.gitee.com/uploads/images/2020/0707/090924_c101da41_1221708.png" alt="软件架构" title="luat_iot_sdk_arch.png" style="box-sizing: content-box; max-width: 100%; cursor: pointer; display: inline-block !important;"></p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="三最小系统" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E4%B8%89%E6%9C%80%E5%B0%8F%E7%B3%BB%E7%BB%9F" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>三、最小系统</h2><div class="white" style="color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><div class="highlight" style="margin-bottom: 16px;"><pre style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-size: 13.6px; margin-bottom: 0px; overflow-wrap: normal; padding: 16px; line-height: 1.45; background-color: rgb(246, 248, 250); border-radius: 3px; word-break: normal; tab-size: 4; color: rgb(51, 51, 51);"><span id="LC1" class="line">//最小系统</span>
<span id="LC2" class="line">static VOID demo_task_main(PVOID pParameter)</span>
<span id="LC3" class="line">{</span>
<span id="LC4" class="line">    while(1)</span>
<span id="LC5" class="line">    {</span>
<span id="LC6" class="line">        iot_os_sleep(1000);</span>
<span id="LC7" class="line">        iot_debug_print("demo_task_main");</span>
<span id="LC8" class="line">    }</span>
<span id="LC9" class="line">}</span>
<span id="LC10" class="line"></span>
<span id="LC11" class="line">int appimg_enter(void *param)</span>
<span id="LC12" class="line">{   </span>
<span id="LC13" class="line">    iot_debug_print("appimg_enter");</span>
<span id="LC14" class="line">    iot_os_create_task(demo_task_main, NULL, </span>
<span id="LC15" class="line">        2048, 1, OPENAT_OS_CREATE_DEFAULT, "task");</span>
<span id="LC16" class="line">    return 0;</span>
<span id="LC17" class="line">}</span>
<span id="LC18" class="line"></span>
<span id="LC19" class="line">void appimg_exit(void)</span>
<span id="LC20" class="line">{</span>
<span id="LC21" class="line">    iot_debug_print("appimg_exit");</span>
<span id="LC22" class="line">}</span></pre></div></div><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="四固件下载工具" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E5%9B%9B%E5%9B%BA%E4%BB%B6%E4%B8%8B%E8%BD%BD%E5%B7%A5%E5%85%B7" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>四、固件下载工具</h2><blockquote style="margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/luatoolsV2-redirect.html" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">LuatTools</a></p></blockquote><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="五如何编译" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E4%BA%94%E5%A6%82%E4%BD%95%E7%BC%96%E8%AF%91" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>五、如何编译</h2><blockquote style="margin-bottom: 16px; padding: 0px 1em; color: rgb(106, 115, 125); border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;"><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word;">在命令行模式下，进入代码路径。 例如需要编译demo_socket项目，就进入project下，运行demo_socket.bat。 编译成功后将会在目录<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">hex\Air720U_CSDK_demo_socket\</code>生成两个个pac文件：<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">Air720U_CSDK_demo_socket.pac</code>和<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">Air720U_CSDK_demo_socket_APP.pac</code>。其中<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">Air720U_CSDK_demo_socket.pac</code>包含底层和csdk层固件，<code style="font-family: SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; padding: 0.2em 0.4em; color: rgba(0, 0, 0, 0.8); background-color: rgba(27, 31, 35, 0.05); border: 0px; font-size: 13.6px; margin: 0px; border-radius: 3px;">Air720U_CSDK_demo_socket_APP.pac</code>仅包含csdk层固件。</p></blockquote><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="六应用可用空间" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E5%85%AD%E5%BA%94%E7%94%A8%E5%8F%AF%E7%94%A8%E7%A9%BA%E9%97%B4" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>六、应用可用空间</h2><table style="margin-top: 0px; margin-bottom: 16px; display: block; width: 942px; overflow: auto; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><thead><tr style="border-top: 1px solid rgb(198, 203, 209);"><th align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">项目</th><th align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">可用大小</th></tr></thead><tbody><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">FLASH</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">1.5M字节</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">RAM</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">1M字节</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">文件系统</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">1.375M字节</td></tr></tbody></table><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="七支持例程" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E4%B8%83%E6%94%AF%E6%8C%81%E4%BE%8B%E7%A8%8B" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>七、支持例程</h2><p style="margin-right: 0em; margin-bottom: 16px; margin-left: 0em; line-height: 1.6; word-break: break-word; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px;">所有支持demo的编译都放在project目录下，运行对应bat就可以编译出对应demo应用</p><table style="margin-top: 0px; margin-bottom: 16px; display: block; width: 942px; overflow: auto; color: rgb(64, 72, 91); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px; background-color: rgb(255, 255, 255);"><thead><tr style="border-top: 1px solid rgb(198, 203, 209);"><th align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">例程</th><th align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">说明</th></tr></thead><tbody><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_audio</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">录音、通道设置等功能演示</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_capture</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">拍照功能演示</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_datetime</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">系统时间设置</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_fota</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">远程升级示例</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_fs</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">文件系统操作示例</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_ftp</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">FTP功能示例</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_http</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">HTTP功能示例</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_mqtt</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">mqtt功能示例</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_socket</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">套接字接口示例</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_ssl</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">ssl加密套接字示例</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_tts</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">语音播报示例</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_wifiloc</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">wifi定位示例</td></tr><tr style="border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_zbar</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">二维码扫码示例</td></tr><tr style="background-color: rgb(246, 248, 250); border-top: 1px solid rgb(198, 203, 209);"><td align="left" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">demo_lvgl</td><td align="center" style="padding: 6px 13px; border: 1px solid rgb(223, 226, 229);">littleVGL UI框架示例</td></tr></tbody></table><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; line-height: 1.25; margin: 24px 0em 16px; font-weight: 600; padding: 0em; font-size: 1.5em; position: relative; color: rgb(64, 72, 91);"><a id="八官方应用" class="anchor" target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U#%E5%85%AB%E5%AE%98%E6%96%B9%E5%BA%94%E7%94%A8" style="color: rgb(9, 94, 171); overflow-wrap: break-word; float: left; padding-right: 4px; margin-left: -20px; line-height: 1; display: block; padding-left: 30px; position: absolute; top: 0px; left: 0px; bottom: 0px;"></a>八、官方应用</h2><blockquote style="padding: 0px 1em; color: rgb(106, 115, 125); border-left-width: 0.25em; border-left-color: rgb(223, 226, 229); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-size: 16px; margin-bottom: 0px !important;"><p style="margin-right: 0em; margin-left: 0em; line-height: 1.6; word-break: break-word;"><a target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_CSDK_Air724U/blob/master/app/elua/LUA%E8%A7%A3%E6%9E%90%E5%99%A8%E5%BC%80%E6%BA%90%E6%96%87%E6%A1%A3.md" style="color: rgb(9, 94, 171); overflow-wrap: break-word;">lua解析器</a></p></blockquote><p><br></p><h2 style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, &quot;Hiragino Sans GB&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, SimSun, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif; font-weight: 600; line-height: 1.25; margin: 24px 0em 16px; font-size: 1.5em; padding: 0em; position: relative;"><span style="color: rgb(64, 72, 91);">更多联系：王正伟&nbsp;</span><font color="#000000" style="background-color: rgb(255, 255, 0);">13959192997</font><font color="#40485b">（微信）</font></h2>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/14/1352/" data-id="ckkfmdge800c9vkcg19w39nsf" data-title="Luat_CSDK_Air724U 介绍" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1350" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/13/1350/" class="article-date">
  <time class="dt-published" datetime="2020-08-13T13:01:55.000Z" itemprop="datePublished">2020-08-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/13/1350/">4、RDA8910(4GCAT1)CSDK二次开发：期待已久的ADC采集</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<p>&emsp;&emsp;本系列博客所述资料<code>均来自合宙官方</code>，并不是本人原创（只有博客是自己写的），csdk只是得到了<code>口头的允许公开授权</code>。出于热心，本人将自己的所学笔记整理并推出相对应的使用教程，方面其他人学习。为国内的物联网事业发展尽自己的一份绵薄之力，<code>没有为自己谋取私利的想法</code>。若出现侵权现象，请告知本人，本人会立即停止更新，并删除相应的文章和代码。</p>
<p>&emsp;&emsp;本系列博客基于紫光展锐的<code>RDA8910  LTE Cat 1</code> bis芯片平台开发。理论上适用于合宙的Air720U、Air724U、广和通L610以及安信可的cat-01模块。</p>
<p>&emsp;&emsp;各个厂家的部分配置文件可能不一样，也许会导致设备出现奇怪的问题，其他的模块我也不确定能不能用，自行测试。但是有一点<code>编译下载和监视流程基本一样</code>，可供参考。</p>
<p>&emsp;&emsp;先不管支不支持，如果你用的模块是是紫光展锐的RDA8910，那都不妨一试，也许会有意外收获（<code>也有可能变砖，慎重！！！</code>）。</p>
<p>&emsp;&emsp;我使用的是<code>Air724UG</code>开发板，如果在其他模块上不能用，那也不要强怼，也许是开发包不兼容吧。这里的代码是没有问题的。例程仅供参考！</p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>&emsp;&emsp;在很长的一个时间内。我的rda8910二次开发系列的的文章中第四小节是处于<code>暂时没有</code>的情况。有的人可能会很纳闷，没有就没有，你别写呗。没事把位置占着干嘛。搞得大家都很好奇，这里到底会是个什么东西呢，竟然搞了几个月都没有搞出来。</p>
<p><img src="https://img-blog.csdnimg.cn/2020081319302954.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;本来这一篇文章应该要在5月份发布的，当时准备写一篇adc的教程。查了下硬件手册。看到模组只有adc2和adc3，分别引出到了63和64引脚。知道adc的编号后就可以开始写测试程序了。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813195854320.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;写完测试程序后编译一看发现ADC例程编译不过，提示找不到函数。这我暂时也就没办法了，就一直没写放在那里没有发。后来大概在7月初的时候我又试了一下adc可以编译通过了。当我准备再次尝试一波的时候，我找了半天都没有找到adc2和adc3的插针，后来拿到原理图一看，发现这两个引脚，只是在外围焊了几个电阻。没有引出到插针上。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813193936491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;我们如果想在开发板上测试一波adc，那就只能自己飞线了。我一看，乖乖这线不好焊啊，焊不好的话开发板就报废了。当时就怂了，果断收起开发板，于是这事又被搁置了一个月。</p>
<p>&emsp;&emsp;看到前一段时间合宙新出的开发板自带mic和sd卡，正好想买个新的开发板玩玩。想着坏就坏了吧，旧的不去新的不来，今天下定决心。拿起我的电烙铁，上来就干。（别学下图妹子拿烙铁，否则ʘᴗʘ）</p>
<p><img src="https://img-blog.csdnimg.cn/2020081319472949.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;下午废了九牛二虎之力，终于把这两个线焊上去了。焊的过程中，差点把焊盘都给怼掉。这玩意实在不好焊。靠的太紧了，容易连锡。最重要的是这锡哪里都沾（旁边的焊盘沾一堆），就是不沾线，怎么搞都焊不上，当时给我气的（我承认是我菜）。这玩意确实有点不好焊，没弄过的热建议不要轻易去尝试！！！</p>
<p><img src="https://img-blog.csdnimg.cn/20200813195257445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;硬件准备好后，我们可以一起来看看测试程序怎么写。</p>
<h1 id="二、相关的库函数"><a href="#二、相关的库函数" class="headerlink" title="二、相关的库函数"></a>二、相关的库函数</h1><p>&emsp;&emsp;官方提供的adc库函数有两个。分别是初始化adc通道和读取adc通道的数据。只要传入需要操作的adc通道就可以得到相应的运行结果。</p>
<blockquote>
<p>/*<em>ADC初始化<br>*@param        channel:        adc通道<br>*@param     mode:       adc模式<br>*@return    TRUE:         成功<br>&emsp;&emsp;&emsp;&emsp;FALSE:      失败<br>*</em>/</p>
</blockquote>
<ul>
<li>BOOL <code>iot_adc_init</code>(channel，mode);</li>
</ul>
<blockquote>
<p>/*<em>读取ADC数据<br>*@note ADC值，可以为空, 电压值，可以为空<br>*@param        channel:        adc通道<br>*@param        adcValue:    ADC值，可以为空<br>*@param        voltage:    电压值，可以为空<br>*@return    TRUE:         成功<br>&emsp;&emsp;&emsp;&emsp;FALSE:      失败<br>*</em>/</p>
</blockquote>
<ul>
<li>BOOL <code>iot_adc_read</code>(channel，adcValue，voltage);</li>
</ul>
<h1 id="三、编写程序"><a href="#三、编写程序" class="headerlink" title="三、编写程序"></a>三、编写程序</h1><h2 id="3-1、编写adc2测试程序"><a href="#3-1、编写adc2测试程序" class="headerlink" title="3.1、编写adc2测试程序"></a>3.1、编写adc2测试程序</h2><p>&emsp;&emsp;测试程序的逻辑很简单。我们在主函数创建了一个测试任务，任务开始时首先初始化adc的通道。</p>
<p>&emsp;&emsp;如果初始化返回false（也就是说初始化失败）。那我们就没必要继续执行下去了。这时候可以直接删除任务。但是！这里是测试，如果直接删除了，我们自己可能什么都看不到，所以我选择循环打印初始化失败的消息。</p>
<p>&emsp;&emsp;如果初始化成功就进入另一个死循环，每隔1s读取一下adc2的数值。读取成功就打印读取到的adc数据，读取失败就打印失败信息。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ADC2</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL err = iot_adc_init(OPENAT_ADC_2, OPENAT_ADC_MODE_MAX);</span><br><span class="line">	<span class="keyword">while</span> (!err)</span><br><span class="line">	&#123;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC2 Init FALSE&quot;</span>);</span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	UINT32 adcValue = <span class="number">0</span>, voltage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		err = iot_adc_read(OPENAT_ADC_2, &amp;adcValue, &amp;voltage);</span><br><span class="line">		<span class="keyword">while</span> (!err)</span><br><span class="line">		&#123;</span><br><span class="line">			iot_debug_print(<span class="string">&quot;ADC2 read FALSE&quot;</span>);</span><br><span class="line">			osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC2 read adcValue:%d,voltage:%d&quot;</span>, adcValue, voltage);</span><br><span class="line">		<span class="comment">//线程休眠500ms</span></span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-2、编写adc3测试程序"><a href="#3-2、编写adc3测试程序" class="headerlink" title="3.2、编写adc3测试程序"></a>3.2、编写adc3测试程序</h2><p>&emsp;&emsp;模组上一共有两个adc的引脚，那么干脆我们就把两个引脚一起都测试了。反正测试程序的逻辑是一样的，也就改个编号的事情。没有什么太大的区别。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ADC3</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL err = iot_adc_init(OPENAT_ADC_3, OPENAT_ADC_MODE_MAX);</span><br><span class="line">	<span class="keyword">while</span> (!err)</span><br><span class="line">	&#123;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC3 Init FALSE&quot;</span>);</span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	UINT32 adcValue = <span class="number">0</span>, voltage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		err = iot_adc_read(OPENAT_ADC_3, &amp;adcValue, &amp;voltage);</span><br><span class="line">		<span class="keyword">while</span> (!err)</span><br><span class="line">		&#123;</span><br><span class="line">			iot_debug_print(<span class="string">&quot;ADC3 read FALSE&quot;</span>);</span><br><span class="line">			osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC3 read adcValue:%d,voltage:%d&quot;</span>, adcValue, voltage);</span><br><span class="line">		<span class="comment">//线程休眠500ms</span></span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	osiThreadExit();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="3-2、完整程序"><a href="#3-2、完整程序" class="headerlink" title="3.2、完整程序"></a>3.2、完整程序</h2><p>&emsp;&emsp;完整的demo在这里，可以复制直接用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * @Author: your name</span></span><br><span class="line"><span class="comment"> * @Date: 2020-05-19 14:05:32</span></span><br><span class="line"><span class="comment"> * @LastEditTime: 2020-05-20 15:38:37</span></span><br><span class="line"><span class="comment"> * @LastEditors: Please set LastEditors</span></span><br><span class="line"><span class="comment"> * @Description: In User Settings Edit</span></span><br><span class="line"><span class="comment"> * @FilePath: \RDA8910_CSDK\USER\user_main.c</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;string.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;cs_types.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;osi_log.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;osi_api.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_uart.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_os.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_gpio.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_pmd.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_adc.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ADC2</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL err = iot_adc_init(OPENAT_ADC_2, OPENAT_ADC_MODE_MAX);</span><br><span class="line">	<span class="keyword">while</span> (!err)</span><br><span class="line">	&#123;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC2 Init FALSE&quot;</span>);</span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	UINT32 adcValue = <span class="number">0</span>, voltage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		err = iot_adc_read(OPENAT_ADC_2, &amp;adcValue, &amp;voltage);</span><br><span class="line">		<span class="keyword">while</span> (!err)</span><br><span class="line">		&#123;</span><br><span class="line">			iot_debug_print(<span class="string">&quot;ADC2 read FALSE&quot;</span>);</span><br><span class="line">			osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC2 read adcValue:%d,voltage:%d&quot;</span>, adcValue, voltage);</span><br><span class="line">		<span class="comment">//线程休眠500ms</span></span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ADC3</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	BOOL err = iot_adc_init(OPENAT_ADC_3, OPENAT_ADC_MODE_MAX);</span><br><span class="line">	<span class="keyword">while</span> (!err)</span><br><span class="line">	&#123;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC3 Init FALSE&quot;</span>);</span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	UINT32 adcValue = <span class="number">0</span>, voltage = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		err = iot_adc_read(OPENAT_ADC_3, &amp;adcValue, &amp;voltage);</span><br><span class="line">		<span class="keyword">while</span> (!err)</span><br><span class="line">		&#123;</span><br><span class="line">			iot_debug_print(<span class="string">&quot;ADC3 read FALSE&quot;</span>);</span><br><span class="line">			osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">		&#125;</span><br><span class="line">		iot_debug_print(<span class="string">&quot;ADC3 read adcValue:%d,voltage:%d&quot;</span>, adcValue, voltage);</span><br><span class="line">		<span class="comment">//线程休眠500ms</span></span><br><span class="line">		osiThreadSleep(<span class="number">1000</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	osiThreadExit();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//main函数</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">appimg_enter</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	osiThreadCreate(<span class="string">&quot;ADC2&quot;</span>, ADC2, <span class="literal">NULL</span>, OSI_PRIORITY_NORMAL, <span class="number">2048</span>, <span class="number">0</span>);</span><br><span class="line">	osiThreadCreate(<span class="string">&quot;ADC3&quot;</span>, ADC3, <span class="literal">NULL</span>, OSI_PRIORITY_NORMAL, <span class="number">2048</span>, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//退出提示</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">appimg_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	OSI_LOGI(<span class="number">0</span>, <span class="string">&quot;application image exit&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h1 id="四、下载测试"><a href="#四、下载测试" class="headerlink" title="四、下载测试"></a>四、下载测试</h1><p>&emsp;&emsp;分别把adc2和adc3的飞线，接到0v、1.8v和VBAT(3.8v)。查看打印结果。数据走向是正确的，逐渐递增。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813203343658.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200813202916897.png#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;这一看好像就1.8v误差大了点。但是我的直觉告诉我，不应该误差这么大，都干到了2.2V了。于是拿来了万用表测试了一下，好像输出的就是2.2V。那说明模块测试的结果还是挺准的。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813203935213.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;就是这里测试adc2的时候要<code>注意下</code>，之前我测试的时候没有仔细看原理图。发现adc2无论接什么电压，它量出来的都是3.8V。接0v的话就直接断电了。后来看了下原理图，发现adc2的引脚通过了一个<code>0</code>欧的电阻直接拉到了<code>VBAT（3.8V）</code>。这样的话adc2那就不能被比3.8V低的电平有效的拉低。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813204310343.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;我不太清楚这个电阻有什么其他的作用。为了测试，我就直接把它卸掉了。让adc2浮空，这样测试就正常了，电阻就在这。我这里还是建议大家最好不要卸掉这个电阻，别到时候板子出问题了，跑过来找我。我没钱赔ʘᴗʘ。</p>
<p><img src="https://img-blog.csdnimg.cn/20200813204815887.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的<code>RDA8910 CSDK二次开发入门教程</code>专题第一篇博文<code>1、RDA8910CSDK二次开发：环境搭建</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/13/1350/" data-id="ckkfmdg9a000dvkcg8zwlh3ri" data-title="4、RDA8910(4GCAT1)CSDK二次开发：期待已久的ADC采集" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1349" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/13/1349/" class="article-date">
  <time class="dt-published" datetime="2020-08-13T12:25:08.000Z" itemprop="datePublished">2020-08-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/13/1349/">Air820UG_模块硬件设计手册_V1.0</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>@[TOC]</p>
<h1 id="1-绪论"><a href="#1-绪论" class="headerlink" title="1. 绪论"></a>1. 绪论</h1><p>本文档定义了Air820UG模块及其硬件接口规范，电气特性和机械细节，通过此文档的帮助，结合我们的应用手册和用户指导书，客户可以快速应用Air820UG模块于无线应用。</p>
<h1 id="2-综述"><a href="#2-综述" class="headerlink" title="2.综述"></a>2.综述</h1><p>Air820UG 是一款 CAT1 + GPS 二合一模块，非常适合用于定位器或类似的应用场景。</p>
<h2 id="2-1-型号信息"><a href="#2-1-型号信息" class="headerlink" title="2.1 型号信息"></a>2.1 型号信息</h2><table>
<thead>
<tr>
<th>型号</th>
<th>Air820UG-NFM</th>
<th>Air820UG-NFC</th>
<th>Air820UG-MFM</th>
<th>Air820UG-MFC</th>
</tr>
</thead>
<tbody><tr>
<td>LTE-FDD</td>
<td>B1/B3/B5/B8</td>
<td>B1/B3/B5/B8</td>
<td>B1/B3/B5/B8</td>
<td>B1/B3/B5/B8</td>
</tr>
<tr>
<td>LTE-TDD</td>
<td>B34/B38/B39/B40/B41</td>
<td>B34/B38/B39/B40/B41</td>
<td>B34/B38/B39/B40/B41</td>
<td>B34/B38/B39/B40/B41</td>
</tr>
<tr>
<td>GPS/北斗</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>VOLTE</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>Camera</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>模拟语音</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
</tr>
<tr>
<td>模块尺寸</td>
<td>20*32.6mm</td>
<td>20*32.6mm</td>
<td>20*32.6mm</td>
<td>20*32.6mm</td>
</tr>
<tr>
<td>贴片SIM卡</td>
<td>无内置贴片SIM卡</td>
<td>无内置贴片SIM卡</td>
<td>内置移动贴片SIM卡</td>
<td>内置移动贴片SIM卡</td>
</tr>
<tr>
<td>蓝牙/WiFi scan</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>不支持</td>
</tr>
</tbody></table>
<h2 id="2-2-主要性能"><a href="#2-2-主要性能" class="headerlink" title="2.2 主要性能"></a>2.2 主要性能</h2><table>
<thead>
<tr>
<th>特征</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>支持频段</td>
<td>见表2模块型号信息介绍</td>
</tr>
<tr>
<td>发射功率</td>
<td>• LTE-TDD：Class3(23dBm+1/-3dB) • LTE-FDD：Class3(23dBm+-2dB)</td>
</tr>
<tr>
<td>供电</td>
<td>• VBAT 3.3V ~ 4.3V，典型值3.8V</td>
</tr>
<tr>
<td>LTE特性</td>
<td>• 最大支持non-CA CAT1 • 支持VOLTE • 支持1.4~20MHz射频带宽 • LTE-FDD：最大上行速率 5Mbps，最大下行速率 10Mbps • LTE-TDD：上下行配置2 最大上行速率 2Mbps，最大下行速率 8Mbps • LTE-TDD：上下行配置1 最大上行速率 4Mbps，最大下行速率 6Mbps</td>
</tr>
<tr>
<td>网路协议特性</td>
<td>• 已支持 TCP/UDP/PPP/FTP/HTTP/NITZ/CMUX/NDIS/NTP/HTTPS/PING/FTPS/FILE/MQTT/SMS/DTMF</td>
</tr>
<tr>
<td>USIM卡接口</td>
<td>• 支持USIM/SIM卡：1.8V和3V</td>
</tr>
<tr>
<td>USB接口</td>
<td>• 兼容 USB 2.0（只支持从模式），数据传输速率最大到 480Mbps • 用于AT指令、数据传输、软件调试、软件升级 • USB 虚拟串口驱动：支持Windows 7/8.1/10，Linux 2.6.x/3.x/4.1， Android 4.x/5.x/6.x/7.x 等操作系统下的 USB 驱动</td>
</tr>
<tr>
<td>串口</td>
<td>UART1： • 用于AT命令和数据传输 • 最大波特率921600bps，默认波特率自适应1200-115200bps • 支持硬件流控（CTS/RTS） UART2： • 用于下载软件和射频校准，同时还用于和内部蓝牙通信 HOST UART： • 用于输出调试信息 ZSP UART： • 用于输出调试信息</td>
</tr>
<tr>
<td>SPI Camera</td>
<td>• 支持</td>
</tr>
<tr>
<td>SPI LCD</td>
<td>• 支持</td>
</tr>
<tr>
<td>键盘</td>
<td>• 支持6*4扫描键盘</td>
</tr>
<tr>
<td>卫星定位</td>
<td>• 支持GPS/Beidou/GLONASS</td>
</tr>
<tr>
<td>WiFi</td>
<td>• 支持WiFi Scan</td>
</tr>
<tr>
<td>蓝牙</td>
<td>• 支持（软件开发中）</td>
</tr>
<tr>
<td>天线接口</td>
<td>• 特性阻抗50欧姆</td>
</tr>
<tr>
<td>物理特性</td>
<td>• 尺寸：20mmX32.6mmX2.3mm • 重量：约3.2g</td>
</tr>
<tr>
<td>温度范围</td>
<td>• 正常工作温度：-35°C～+70°C • 极限工作温度：-40°C～+85°C</td>
</tr>
<tr>
<td>RoHS</td>
<td>• 所有器件完全符合RoHS标准</td>
</tr>
<tr>
<td>封装</td>
<td>• 146个管脚，实际可用管脚详见管脚图</td>
</tr>
</tbody></table>
<h2 id="2-3-功能框图"><a href="#2-3-功能框图" class="headerlink" title="2.3 功能框图"></a>2.3 功能框图</h2><p>下图为Air820UG模块功能框图，阐述了其主要功能：<br>• 射频部分<br>• 电源管理<br>• GPS<br>• 接口部分</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201030101024306_Air820UG_%E6%A1%86%E5%9B%BE.png"><br>图表1：功能框图</p>
<h1 id="3-应用接口"><a href="#3-应用接口" class="headerlink" title="3.应用接口"></a>3.应用接口</h1><p>模块采用LCC + LGA 封装，146个SMT焊盘管脚，以下章节将详细阐述Air820UG各接口的功能。</p>
<h2 id="3-1-管脚描述"><a href="#3-1-管脚描述" class="headerlink" title="3.1 管脚描述"></a>3.1 管脚描述</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814182156255_%E7%AE%A1%E8%84%9A%E5%9B%BE.png"><br>图表2：Air820UG管脚排列图（正视图）</p>
<p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201030101346382_Air820UG_%E7%AE%A1%E8%84%9A%E5%9B%BE.pdf"><strong>点击查看 Air820UG 高清管脚图</strong></a></p>
<p>表格2：管脚描述</p>
<table>
<thead>
<tr>
<th>电源</th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>VBAT</td>
<td>25,26</td>
<td></td>
<td>PI</td>
<td>模块主电源 VBAT=3.3V~4.3V</td>
<td>VBAT</td>
<td>1.模块在突发模式下的最大负载电流有1A 2.电压低于3.3V时射频指标会恶化</td>
</tr>
<tr>
<td>V_GLOBAL_1V8</td>
<td>54</td>
<td>ON</td>
<td>PO</td>
<td>输出1.8V IOmax=50mA</td>
<td>V_GLOBAL_1V8</td>
<td>1.如果不用则悬空 2.如果用这个管脚给外部供电， 推荐并联一个2~4.7uF的去耦电容， 负载电流不要超过50mA</td>
</tr>
<tr>
<td>VMMC</td>
<td>45</td>
<td>ON</td>
<td>PO</td>
<td>输出1.6-3.2V， 默认电压是3.1V, IOmax=150mA</td>
<td>VMMC</td>
<td>给MMC供电; 如果不用则悬空</td>
</tr>
<tr>
<td>VCC_CAMA</td>
<td>137</td>
<td>OFF</td>
<td>PO</td>
<td>输出1.6-3.2V， 给Camera 提供模拟电压， 默认是1.8V, IOmax=100mA</td>
<td>VCC_CAMA</td>
<td>给Camera供电; 如果不用则悬空</td>
</tr>
<tr>
<td>VCC_CAMD</td>
<td>144</td>
<td>OFF</td>
<td>PO</td>
<td>输出1.4-2.1V， 给Camera 提供数字电压， 默认是1.8V, IOmax=100mA</td>
<td>VCC_CAMD</td>
<td>给Camera供电; 如果不用则悬空</td>
</tr>
<tr>
<td>VCC_LCD</td>
<td>70</td>
<td>OFF</td>
<td>PO</td>
<td>输出1.6-3.3V， 默认电压是1.8V, IOmax=200mA</td>
<td>VCC_LCD</td>
<td>给LCD供电; 如果不用则悬空</td>
</tr>
<tr>
<td>GND</td>
<td>6 11 15 24 27 28 33 34 36 56 58 72 73 75 76 79 82 83 86 88 90 91 94 95 103 145 146</td>
<td></td>
<td></td>
<td></td>
<td>GND</td>
<td>模块地</td>
</tr>
<tr>
<td>开关机</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>PWRKEY</td>
<td>23</td>
<td>INPUT PULL_UP</td>
<td>I</td>
<td>模块开机/关机控制脚， 内部上拉到VBAT</td>
<td>VBAT</td>
<td>1. 关机状态下把管脚拉低1.5s以上模块开机  2. 开机状态下把管脚拉低1.5s以上模块关机</td>
</tr>
<tr>
<td>复位</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>RESET_IN_N</td>
<td>22</td>
<td>INPUT PULL_UP</td>
<td>I</td>
<td>模块复位； 内部上拉到VBAT</td>
<td>VBAT</td>
<td>1. 请注意此复位管脚内部上拉到VBAT， 而不是上拉到V_Globale_1V8 2. 内部上拉，把管脚拉低1s以上模块复位  3.如果不使用，建议加1uf电容到地</td>
</tr>
<tr>
<td>模块状态指示</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>NET_STATUS  (GPIO_1)</td>
<td>68</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>网络状态指示</td>
<td>VCC_LCD</td>
<td>注意电压域是VCC_LCD;  不用则悬空</td>
</tr>
<tr>
<td>NET_MODE (GPIO_4)</td>
<td>65</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>4G网络指示</td>
<td>VCC_LCD</td>
<td>注意电压域是VCC_LCD;  不用则悬空</td>
</tr>
<tr>
<td>MODULE_STATUS (GPIO_5)</td>
<td>71</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>模块运行状态指示</td>
<td>V_GLOBAL_1V8</td>
<td>在开机400ms 后输出高电平；不用则悬空</td>
</tr>
<tr>
<td>USB接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>USB_VBUS</td>
<td>12</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>USB电源， USB插入检测, Vmax=5.25V Vmin=3.3V Vnorm=5.0V</td>
<td>VBUS</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>USB_DP</td>
<td>14</td>
<td></td>
<td>IO</td>
<td>USB差分信号线正极</td>
<td></td>
<td>USB2.0， 走线控制90欧姆差分阻抗</td>
</tr>
<tr>
<td>USB_DM</td>
<td>13</td>
<td></td>
<td>IO</td>
<td>USB差分信号线负极</td>
<td></td>
<td>USB2.0， 走线控制90欧姆差分阻抗</td>
</tr>
<tr>
<td>USB_ID</td>
<td>102</td>
<td></td>
<td>I</td>
<td>USB工作模式识别， 目前只支持USB slaver模式</td>
<td></td>
<td>保持悬空</td>
</tr>
<tr>
<td>主串口UART1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>UART1_TXD</td>
<td>61</td>
<td></td>
<td>O</td>
<td>模块发送数据</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>UART1_RXD</td>
<td>62</td>
<td></td>
<td>I</td>
<td>模块接收数据</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>UART1_RTS (GPIO_19)</td>
<td>60</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>DTE请求发送数据给模块</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>UART1_CTS (GPIO_18)</td>
<td>59</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>模块清除发送</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>辅串口UART2， 用于射频校准， 同时与内部蓝牙相连</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>UART2_TXD (GPIO_21)</td>
<td>50</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>模块发送数据</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>UART2_RXD (GPIO_20)</td>
<td>51</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>模块接收数据</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>调试串口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>HOST_TXD</td>
<td>53</td>
<td></td>
<td>O</td>
<td>输出AP log</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HOST_RXD</td>
<td>52</td>
<td></td>
<td>I</td>
<td>接收调试指令</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>ZSP_UART_TXD (GPIO_22)</td>
<td>49</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>输出CP log</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>I2C</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>I2C2_SCL (GPIO_14)</td>
<td>1</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>I2C接口时钟信号</td>
<td>V_GLOBAL_1V8</td>
<td>用作I2C时需外部1.8V上拉; 不用则悬空</td>
</tr>
<tr>
<td>I2C2_SDA (GPIO_15)</td>
<td>2</td>
<td>INPUT PULL_DOWN</td>
<td>IO</td>
<td>I2C接口数据信号</td>
<td>V_GLOBAL_1V8</td>
<td>用作I2C时需外部1.8V上拉; 不用则悬空</td>
</tr>
<tr>
<td>模拟语音</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>SPK+</td>
<td>18</td>
<td></td>
<td>O</td>
<td>Speaker差分信号输出， 可以直接驱动8欧姆Speaker， 最大输出功率1W</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SPK-</td>
<td>19</td>
<td></td>
<td>O</td>
<td>Speaker差分信号输出， 可以直接驱动8欧姆Speaker， 最大输出功率1W</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>EAR_P</td>
<td>122</td>
<td></td>
<td>O</td>
<td>听筒输出</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>EAR_N</td>
<td>123</td>
<td></td>
<td>O</td>
<td>听筒输出</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HP_R</td>
<td>118</td>
<td></td>
<td>O</td>
<td>耳机右声道输出</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HP_L</td>
<td>119</td>
<td></td>
<td>O</td>
<td>耳机左声道输出</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MIC+</td>
<td>16</td>
<td></td>
<td>I</td>
<td>麦克输入， 已内置偏置电路</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MIC-</td>
<td>17</td>
<td></td>
<td>I</td>
<td>麦克输入， 已内置偏置电路</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HEADMIC_P</td>
<td>133</td>
<td></td>
<td>I</td>
<td>麦克输入， 需要加外部偏置电路</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HEADMIC_N</td>
<td>134</td>
<td></td>
<td>I</td>
<td>麦克输入， 需要加外部偏置电路</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HEADMIC_BIAS</td>
<td>126</td>
<td></td>
<td>O</td>
<td>给HEADMIC 提供偏置电压</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HEADMIC_IN_DET</td>
<td>127</td>
<td></td>
<td>I</td>
<td>耳机按键检测</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>HP_DET</td>
<td>135</td>
<td></td>
<td>I</td>
<td>耳机插入检测</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>I2S 接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>I2S2_LRCK</td>
<td>131</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>用于切换左右声道的数据。LRCK为“0”表示正在传输的是左声道的数据，为“1”则表示正在传输的是右声道的数据。</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>I2S2_BCK</td>
<td>138</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>I2S 时钟输出</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>I2S2_SDAT_OUT</td>
<td>139</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>I2S 数据输出</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>I2S2_SDAT_IN</td>
<td>132</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>I2S 数据输入</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SIM卡接口0</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>USIM_VDD</td>
<td>10</td>
<td>OFF</td>
<td>PO</td>
<td>SIM0供电</td>
<td>USIM_VDD</td>
<td>模块可以自动识别1.8V 或者3V(U)SIM卡</td>
</tr>
<tr>
<td>USIM_DATA</td>
<td>8</td>
<td></td>
<td>I/O</td>
<td>SIM0数据线</td>
<td>USIM_VDD</td>
<td>模块可以自动识别1.8V 或者3V(U)SIM卡</td>
</tr>
<tr>
<td>USIM_CLK</td>
<td>7</td>
<td></td>
<td>O</td>
<td>SIM0时钟线</td>
<td>USIM_VDD</td>
<td>模块可以自动识别1.8V 或者3V(U)SIM卡</td>
</tr>
<tr>
<td>USIM_RST_N</td>
<td>9</td>
<td></td>
<td>O</td>
<td>SIM0复位线</td>
<td>USIM_VDD</td>
<td>模块可以自动识别1.8V 或者3V(U)SIM卡</td>
</tr>
<tr>
<td>USIM_CD (GPIO_23)</td>
<td>48</td>
<td></td>
<td>I</td>
<td>SIM卡0在位检测</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SIM卡接口1</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>VSIM1</td>
<td>115</td>
<td>OFF</td>
<td>PO</td>
<td>SIM1供电</td>
<td>VSIM1</td>
<td>模块可以自动识别1.8V或者3V(U)SIM卡， 请注意因为Air820UG-MA已经在SIM1接口上内置了贴片SIM卡， 故SIM1 接口不可再外接SIM卡， 也不可用作GPIO</td>
</tr>
<tr>
<td>SIM1_DATA (GPIO_30)</td>
<td>111</td>
<td>INPUT PULL_DOWN</td>
<td>I/O</td>
<td>SIM1数据线</td>
<td>VSIM1</td>
<td>模块可以自动识别1.8V或者3V(U)SIM卡,请注意因为Air820UG-MA已经在SIM1接口上内置了贴片SIM卡，故SIM1 接口不可再外接SIM卡，也不可用作GPIO</td>
</tr>
<tr>
<td>SIM1_CLK (GPIO_29)</td>
<td>110</td>
<td>OUTPUT LOW</td>
<td>O</td>
<td>SIM1时钟线</td>
<td>VSIM1</td>
<td>模块可以自动识别1.8V或者3V(U)SIM卡,请注意因为Air820UG-MA已经在SIM1接口上内置了贴片SIM卡，故SIM1 接口不可再外接SIM卡，也不可用作GPIO</td>
</tr>
<tr>
<td>SIM1_RST (GPIO_31)</td>
<td>114</td>
<td>OUTPUT LOW</td>
<td>O</td>
<td>SIM1复位线</td>
<td>VSIM1</td>
<td>模块可以自动识别1.8V或者3V(U)SIM卡,请注意因为Air820UG-MA已经在SIM1接口上内置了贴片SIM卡，故SIM1 接口不可再外接SIM卡，也不可用作GPIO</td>
</tr>
<tr>
<td>ADC</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>ADC2</td>
<td>20</td>
<td></td>
<td>I</td>
<td>模数转换器, 输入范围0~VBAT</td>
<td></td>
<td>ADC分辨率12bits,  不用则悬空</td>
</tr>
<tr>
<td>ADC3</td>
<td>21</td>
<td></td>
<td>I</td>
<td>模数转换器, 输入范围0~VBAT</td>
<td></td>
<td>ADC分辨率12bits,  不用则悬空</td>
</tr>
<tr>
<td>射频接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>LTE_ANT</td>
<td>74</td>
<td></td>
<td>I/O</td>
<td>LTE天线接口</td>
<td></td>
<td>50欧姆特性阻抗</td>
</tr>
<tr>
<td>WiFi_ANT</td>
<td>57</td>
<td></td>
<td>I/O</td>
<td>WiFi天线接口</td>
<td></td>
<td>50欧姆特性阻抗</td>
</tr>
<tr>
<td>GPS_ANT</td>
<td>35</td>
<td></td>
<td>I/O</td>
<td>GPS天线接口</td>
<td></td>
<td>50欧姆特性阻抗</td>
</tr>
<tr>
<td>USB_BOOT</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>USB_BOOT KEYIN0</td>
<td>55</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>在开机之前上拉到V_GLOBAL_1V8， 模块会强行进入USB下载模式</td>
<td>V_GLOBAL_1V8</td>
<td>为了方便升级固件， 建议预留测试点</td>
</tr>
<tr>
<td>LCD 接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>LCD_CS WAKEUP_OUT (GPIO_3)</td>
<td>66</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 片选</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_CLK AP_WAKEUP_MODULE (GPIO_2)</td>
<td>67</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 时钟信号</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_DATA (GPIO_0)</td>
<td>69</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 数据信号</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_FMARK</td>
<td>64</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 帧同步信号</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_RST</td>
<td>63</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 复位信号</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_SEL NET_MODE (GPIO_4)</td>
<td>65</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 选择</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>LCD_DC NET_STATUS (GPIO_1)</td>
<td>68</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI LCD 数据命令选择</td>
<td>VCC_LCD</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>键盘阵列</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>KEYIN0 USB_BOOT</td>
<td>55</td>
<td></td>
<td>I</td>
<td>扫描键盘输入0</td>
<td>V_GLOBAL_1V8</td>
<td>为了方便升级固件，建议预留测试点</td>
</tr>
<tr>
<td>KEYIN1</td>
<td>108</td>
<td></td>
<td>I</td>
<td>扫描键盘输入1</td>
<td>V_GLOBAL_1V8</td>
<td>上电的时候不要上拉到1.8V，否则会进入测试模式，不正常开机，不用则悬空</td>
</tr>
<tr>
<td>KEYIN2</td>
<td>109</td>
<td></td>
<td>I</td>
<td>扫描键盘输入2</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYIN3</td>
<td>104</td>
<td></td>
<td>I</td>
<td>扫描键盘输入3</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYIN4</td>
<td>105</td>
<td></td>
<td>I</td>
<td>扫描键盘输入4</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYIN5</td>
<td>100</td>
<td></td>
<td>I</td>
<td>扫描键盘输入5</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYOUT0</td>
<td>101</td>
<td></td>
<td>O</td>
<td>扫描键盘输出0</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYOUT1</td>
<td>96</td>
<td></td>
<td>O</td>
<td>扫描键盘输出1</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYOUT2</td>
<td>97</td>
<td></td>
<td>O</td>
<td>扫描键盘输出2</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>KEYOUT3</td>
<td>89</td>
<td></td>
<td>O</td>
<td>扫描键盘输出3</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>Camera 接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>CAM_PWDN</td>
<td>120</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>关闭Camera</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAM_RST</td>
<td>116</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>重启Camera</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAM_REFCLK</td>
<td>112</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>Camera 基准时钟</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAM_SCK</td>
<td>113</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>SPI Camera 时钟输入</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAM_SI0</td>
<td>117</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>SPI Camer数据输入0</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAM_SI1</td>
<td>121</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>SPI Camer数据输入1</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAMI2C_SDA1 (GPIO_17)</td>
<td>4</td>
<td>INPUT PULL_UP</td>
<td>I/O</td>
<td>Camera I2C DATA</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CAMI2C_SCL1</td>
<td>3</td>
<td>INPUT PULL_UP</td>
<td>O</td>
<td>Camera I2C CLK</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SPI</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>SPI1_DOUT （GPIO_11）</td>
<td>32</td>
<td>INPUT PULL_DOWN</td>
<td>IO</td>
<td>SPI 数据输出</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SPI1_DIN （GPIO_12）</td>
<td>30</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>SPI 数据输入</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SPI1_CLK （GPIO_9）</td>
<td>29</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI 时钟输出</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>SPI1_CS （GPIO_10）</td>
<td>31</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>SPI 片选</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC 接口</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>MMC1_DAT2 （GPIO_27）</td>
<td>39</td>
<td>INPUT PULL_UP</td>
<td>IO</td>
<td>数据线2</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC1_DAT3 （GPIO_28）</td>
<td>40</td>
<td>INPUT PULL_UP</td>
<td>IO</td>
<td>数据线3</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC1_CMD （GPIO_24）</td>
<td>41</td>
<td>INPUT PULL_UP</td>
<td>IO</td>
<td>命令信号</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC1_CLK</td>
<td>42</td>
<td>OUTPUT CLK</td>
<td>IO</td>
<td>时钟信号</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC1_DAT0 （GPIO_25）</td>
<td>43</td>
<td>INPUT PULL_UP</td>
<td>IO</td>
<td>数据线0</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>MMC1_DAT1 （GPIO_26）</td>
<td>44</td>
<td>INPUT PULL_UP</td>
<td>IO</td>
<td>数据线1</td>
<td>VMMC</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>GPIO</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>AP_WAKEUP_MODULE LCD_CLK (GPIO_2)</td>
<td>67</td>
<td>INPUT PULL_DOWN</td>
<td>I</td>
<td>唤醒模块</td>
<td>VCC_LCD</td>
<td>拉低唤醒模块</td>
</tr>
<tr>
<td>WAKEUP_OUT LCD_CS (GPIO_3)</td>
<td>66</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>唤醒AP</td>
<td>VCC_LCD</td>
<td>具体功能参阅 3.10 WAKEUP_OUT</td>
</tr>
<tr>
<td>GPIO_7</td>
<td>106</td>
<td>INPUT PULL_DOWN</td>
<td>IO</td>
<td>通用GPIO</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>CLIB_EN （GPIO_13）</td>
<td>5</td>
<td>INPUT PULL_DOWN</td>
<td>IO</td>
<td>请注意上电的时候不要把GPIO_13 拉高到V_GLOBAL_1V8， 如果上电的时候拉高到V_GLOBAL_1V8， 模块会进入校准模式， 不正常开机</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>背光控制</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>FLASH_IB</td>
<td>140</td>
<td></td>
<td>O</td>
<td>开漏输出，最大支持300mA</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>RGB_IB0</td>
<td>136</td>
<td></td>
<td>O</td>
<td>开漏输出，最大支持100mA</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>RGB_IB1</td>
<td>141</td>
<td></td>
<td>O</td>
<td>开漏输出，最大支持100mA</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>RGB_IB2</td>
<td>142</td>
<td></td>
<td>O</td>
<td>开漏输出，最大支持100mA</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>RGB_IB3</td>
<td>143</td>
<td></td>
<td>O</td>
<td>开漏输出，最大支持100mA</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>充电控制</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>ISENSE</td>
<td>129</td>
<td></td>
<td>I</td>
<td>配合精密电阻来检测充电电流</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>VDRV</td>
<td>128</td>
<td></td>
<td>O</td>
<td>控制充电MOSFET，调节充电电流</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>PWM</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>PWM_PWT_OUT GPIO_5</td>
<td>71</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>可以输出频率和占空比可调的PWM波形</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>PWM_LPG_OUT GPIO_13</td>
<td>5</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>可以输出频率和占空比固定的波形</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>PWM_PWL_OUT_0</td>
<td>99</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>输出频率不固定（一直在变化）但是占空比固定（可以调节）的波形</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>PWM_PWL_OUT_1 GPIO_7</td>
<td>106</td>
<td>INPUT PULL_DOWN</td>
<td>O</td>
<td>输出频率不固定（一直在变化）但是占空比固定（可以调节）的波形</td>
<td>V_GLOBAL_1V8</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>时钟输出</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>CLK_26M</td>
<td>107</td>
<td></td>
<td>O</td>
<td>输出26M 时钟</td>
<td></td>
<td>不用则悬空</td>
</tr>
<tr>
<td>GPS</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>1PPS</td>
<td>37</td>
<td></td>
<td>O</td>
<td>每秒输出一个脉冲， 用于GPS授时</td>
<td>VDD_GPS</td>
<td>不用则悬空</td>
</tr>
<tr>
<td>VDD_GPS</td>
<td>38</td>
<td></td>
<td></td>
<td>模块内部3.3V供电，保持悬空</td>
<td>VDD_GPS</td>
<td>保持悬空</td>
</tr>
<tr>
<td>UART3_RXD GPS_TXD</td>
<td>46</td>
<td></td>
<td></td>
<td>GPS数据输出， 模块内部连接到UIS8910的UART3_RXD</td>
<td>VDD_GPS</td>
<td>保持悬空</td>
</tr>
<tr>
<td>UART3_TXD GPS_RXD</td>
<td>47</td>
<td></td>
<td></td>
<td>GPS数据输入， 模块内部连接到UIS8910的UART3_TXD</td>
<td>VDD_GPS</td>
<td>保持悬空</td>
</tr>
<tr>
<td>保留管脚</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>管脚名</td>
<td>管脚号</td>
<td>上电状态</td>
<td>I/O</td>
<td>管脚描述</td>
<td>电压域</td>
<td>备注</td>
</tr>
<tr>
<td>RESERVED</td>
<td>77 78 80 81 84 85 87 92 93 124 130</td>
<td></td>
<td></td>
<td>悬空处理</td>
<td></td>
<td>悬空处理</td>
</tr>
<tr>
<td>PSM_EXT_INT</td>
<td>98</td>
<td></td>
<td></td>
<td>模块内部使用，悬空处理</td>
<td></td>
<td>悬空处理</td>
</tr>
</tbody></table>
<h2 id="3-2-工作模式"><a href="#3-2-工作模式" class="headerlink" title="3.2 工作模式"></a>3.2 工作模式</h2><p>下表简要的叙述了接下来几章提到的各种工作模式。<br>表格3：工作模式</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>状态</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>正常工作</td>
<td>SLEEP</td>
<td>在模块没有任何任务处理则会自动进入睡眠模式。睡眠模式下，模块的功耗会降到非常低，但模块仍然能够收发数据、短消息和来电。</td>
</tr>
<tr>
<td>正常工作</td>
<td>IDLE</td>
<td>软件正常运行。模块注册上网络，没有数据，语音和短信交互。</td>
</tr>
<tr>
<td>正常工作</td>
<td>TALK/Data</td>
<td>连接正常工作。有数据或者语音或者短信交互。此模式下，模块功耗取决于环境信号的强弱，动态DRX控制以及射频工作频率。</td>
</tr>
<tr>
<td>关机模式</td>
<td></td>
<td>此模式下PMU停止给基带和射频供电，软件停止工作，串口不通，但VBAT管脚依然通电</td>
</tr>
<tr>
<td>最少功能模式(保持供电电压）</td>
<td></td>
<td>此模式下，射频和SIM卡都不工作，但是串口仍然可以访问</td>
</tr>
<tr>
<td>飞行模式</td>
<td></td>
<td>AT+CFUN=4可以将模块设置为飞行模式，此模式下模块射频不工作</td>
</tr>
</tbody></table>
<h2 id="3-3-电源供电"><a href="#3-3-电源供电" class="headerlink" title="3.3 电源供电"></a>3.3 电源供电</h2><h3 id="3-3-1-模块电源工作特性"><a href="#3-3-1-模块电源工作特性" class="headerlink" title="3.3.1 模块电源工作特性"></a>3.3.1 模块电源工作特性</h3><p>在模块应用设计中，电源设计是很重要的一部分。由于射频发射时会在短时间有一个较大电流的的突发脉冲。在突发脉冲阶段内，电源必须能够提供高的峰值电流，不然有可能会引起供电电压的跌落。</p>
<h3 id="3-3-2-减小电压跌落"><a href="#3-3-2-减小电压跌落" class="headerlink" title="3.3.2 减小电压跌落"></a>3.3.2 减小电压跌落</h3><p>模块电源VBAT电压输入范围为3.3V~4.3V，但是模块在射频发射时通常会在VBAT电源上产生电源电压跌落现象，这是由于电源或者走线路径上的阻抗导致，一般难以避免。因此在设计上要特别注意模块的电源设计，。在VBAT输入端，建议并联一个低ESR(ESR=0.7Ω)的100uF的钽电容，以及100nF、33pF、10pF滤波电容（0603封装），VBAT输入端参考电路如图4所示。并且建议VBAT的PCB走线尽量短且足够宽，减小VBAT走线的等效阻抗，确保在最大发射功率时大电流下不会产生太大的电压跌落。建议VBAT走线宽度不少于1.5mm，并且走线越长，线宽越宽。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814152306393_VBAT.jpg"><br>图表5：VBAT输入参考电路</p>
<h3 id="3-3-3-供电参考电路"><a href="#3-3-3-供电参考电路" class="headerlink" title="3.3.3 供电参考电路"></a>3.3.3 供电参考电路</h3><p>电源设计对模块的供电至关重要，必须选择能够提供至少1A电流能力的电源。若输入电压跟模块的供电电压的压差不是很大，可以选择LDO作为供电电源。若输入输出之间存在比较大的压差，则使用开关电源转换器。<br>LDO供电：<br>下图是5V供电的参考设计，采用了Micrel公司的LDO，型号为MIC29302WU。它的输出电压是4.16V，负载电流峰值到3A。为确保输出电源的稳定，建议在输出端预留一个稳压管，并且靠近模块VBAT管脚摆放。建议选择反向击穿电压为5.1V，耗散功率为1W以上的稳压管。</p>
<h2 id="3-4-开关机"><a href="#3-4-开关机" class="headerlink" title="3.4 开关机"></a>3.4 开关机</h2><h3 id="3-4-1-开机"><a href="#3-4-1-开机" class="headerlink" title="3.4.1 开机"></a>3.4.1 开机</h3><p>Air820UG 模块可以通过PWRKEY管脚开机。关机状态下长按开机键一段时间以上，模块会进入开机流程，软件会检测VBAT管脚电压若VBAT管脚电压大于软件设置的开机电压（3.1V），会继续开机动作直至系统开机完成；否则，会停止执行开机动作，系统会关机。</p>
<p>3.4.1.1 PWRKEY管脚开机<br>VBAT上电后，PWRKEY管脚可以启动模块，把PWRKEY管脚拉低1.5秒之后开机，开机成功后PWRKEY管脚可以释放。可以通过检测 V_GLOBAL_1V8 管脚的电平来判别模块是否开机。推荐使用开集驱动电路来控制PWRKEY管脚。下图为参考电路：</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814155735408_%E5%BC%80%E6%9C%BA.jpg"></p>
<p>图表7：开集驱动参考开机电路</p>
<p>另一种控制PWRKEY管脚的方法是直接使用一个按钮开关。按钮附近需放置一个TVS管用以ESD保护。下图为参考电路</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814155921457_%E5%BC%80%E6%9C%BA2.jpg"></p>
<p>图表8：按键开机参考电路</p>
<p>3.4.1.2 上电开机<br>将模块的PWRKEY直接接地可以实现上电自动开机功能。需要注意，在上电开机模式下，将无法关机，只要VBAT管脚的电压大于开机电压即使软件调用关机接口，模块仍然会再开机起来。另外，在此模式下，要想成功开机起来VBAT管脚电压仍然要大于软件设定的开机电压值（3.1V），如果不满足，模块会关闭，就会出现反复开关机的情况。</p>
<p>由于 PWRKEY 管脚内部有上拉电阻，一直把 PWRKEY 拉低会增加大概200uA 的漏电流，如果要减少这个漏电流，可以将上电开机的电路改成下图中的方式：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814191705668_%E4%B8%8A%E7%94%B5%E5%BC%80%E6%9C%BA.png"></p>
<p>3.4.2 关机<br>以下的方式可以关闭模块：<br>• 正常关机：使用PWRKEY管脚关机<br>• 正常关机：通过AT指令AT+CPOWD关机<br>• 低压自动关机：模块检测到低压（3.1V以下）时关机</p>
<p>3.4.2.1 PWRKEY管脚关机<br>PWRKEY管脚拉低1.5s以上时间，模块会执行关机动作。<br>关机过程中，模块需要注销网络，注销时间与当前网络状态有关，经测定用时约2s~12s，因此建议延长12s后再进行断电或重启，以确保在完全断电之前让软件保存好重要数据。</p>
<p>3.4.2.2 低电压自动关机<br>模块在运行状态时当VBAT管脚电压低于软件设定的关机电压时（默认设置3V），软件会执行关机动作关闭模块，以防低电压状态下运行出现各种异常。</p>
<p>3.4.3 复位<br>RESET_IN_N引脚可用于使模块复位。 拉低 RESET_IN_N 引脚 150ms 以上可使模块复位。 RESET_IN_N信号对干扰比较敏感， 因此建议在模块接口板上的走线应尽量的短，且需包地处理。<br>参考电路：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200715145301948_5.jpg"></p>
<p>备注：<br>复位功能建议仅在AT+CPOWD和PWRKEY关机失败后使用。<br>确保PWRKEY和RESET_IN_N引脚没有大负载电容。<br>如果不使用RESET_IN_N，建议并联1uf电容到地。</p>
<h2 id="3-5-省电功能"><a href="#3-5-省电功能" class="headerlink" title="3.5 省电功能"></a>3.5 省电功能</h2><p>根据系统需求，有两种方式可以使模块进入到低功耗的状态。对于AT版本使用“AT+CFUN”命令可以使模块进入最少功能状态。</p>
<h3 id="3-5-1-最少功能模式-飞行模式"><a href="#3-5-1-最少功能模式-飞行模式" class="headerlink" title="3.5.1 最少功能模式/飞行模式"></a>3.5.1 最少功能模式/飞行模式</h3><p>最少功能模式可以将模块功能减少到最小程度，此模式可以通过发送“AT+CFUN=<fun>”命令来设置。<fun>参数可以选择0，1，4。<br>• 0：最少功能（关闭RF和SIM卡）；<br>• 1：全功能（默认）；<br>• 4：关闭RF发送和接收功能；<br>如果使用“AT+CFUN=0”将模块设置为最少功能模式，射频部分和SIM卡部分的功能将会关闭。而串口依然有效，但是与射频部分以及SIM卡部分相关的AT命令则不可用。<br>如果使用“AT+CFUN=4”设置模块，RF部分功能将会关闭，而串口依然有效。所有与RF部分相关的AT命令不可用。<br>模块通过“AT+CFUN=0”或者“AT+CFUN=4”设置以后，可以通过“AT+CFUN=1”命令设置返回到全功能状态。</p>
<h3 id="3-5-2-睡眠模式（慢时钟模式）"><a href="#3-5-2-睡眠模式（慢时钟模式）" class="headerlink" title="3.5.2 睡眠模式（慢时钟模式）"></a>3.5.2 睡眠模式（慢时钟模式）</h3><p>对于LUAT版本，模块开机默认启动自动睡眠控制，在系统空闲的情况下会自动进入睡眠模式，可以通过定时器，IO中断，网络消息中chu断，闹钟中断等来唤醒。</p>
<p>对于标准AT版本，对于睡眠模式的控制方法如下：</p>
<h4 id="3-5-2-1-串口应用"><a href="#3-5-2-1-串口应用" class="headerlink" title="3.5.2.1 串口应用"></a>3.5.2.1 串口应用</h4><p>串口应用下支持两种睡眠模式：</p>
<p>睡眠模式1：通过AP_WAKEUP_MODULE管脚电平控制模块是否进入睡眠<br>睡眠模式2：模块在串口空闲一段时间后自动进入睡眠</p>
<h5 id="3-5-2-1-1-睡眠模式1"><a href="#3-5-2-1-1-睡眠模式1" class="headerlink" title="3.5.2.1.1 睡眠模式1"></a>3.5.2.1.1 睡眠模式1</h5><p>开启条件：<br>发送AT指令AT+CSCLK=1<br>模块进入睡眠：<br>控制AP_WAKEUP_MODULE脚拉高，模块会进入睡眠模式1<br>模块退出睡眠：<br>拉低AP_WAKEUP_MODULE脚50ms以上，模块会退出睡眠模式可以接受AT指令<br>模块在睡眠模式1时的软件功能：<br>不响应AT指令，但是收到数据/短信/来电会有URC上报<br>HOST睡眠时，模块收到数据/短信/来电如何唤醒HOST：<br>WAKEUP_OUT 信号</p>
<h5 id="3-5-2-1-2-睡眠模式2"><a href="#3-5-2-1-2-睡眠模式2" class="headerlink" title="3.5.2.1.2 睡眠模式2"></a>3.5.2.1.2 睡眠模式2</h5><p>开启条件：<br>发送AT指令AT+CSCLK=2<br>模块进入睡眠：<br>串口空闲超过AT+WAKETIM配置的时间（默认5s），模块自动进入睡眠模式2<br>模块退出睡眠：<br>串口连续发送AT直到模块回应时即退出睡眠模式2<br>模块在睡眠模式2时的软件功能：<br>不响应AT指令，但是收到数据/短信/来电会有URC上报<br>HOST睡眠时，模块收到数据/短信/来电如何唤醒HOST：<br>WAKEUP_OUT信号</p>
<h4 id="3-5-2-1-串口应用-1"><a href="#3-5-2-1-串口应用-1" class="headerlink" title="3.5.2.1 串口应用"></a>3.5.2.1 串口应用</h4><p>开启条件：<br>HOST USB必须支持USB suspend/resume<br>模块进入睡眠：<br>HOST发起USB suspend<br>模块退出睡眠：<br>HOST发起USB resume<br>HOST睡眠时，模块收到数据/短信/来电如何唤醒HOST：<br>WAKEUP_OUT信号</p>
<h2 id="3-6-模式切换汇总"><a href="#3-6-模式切换汇总" class="headerlink" title="3.6 模式切换汇总"></a>3.6 模式切换汇总</h2><p>表格4：模式切换汇总</p>
<table>
<thead>
<tr>
<th>当前模式</th>
<th>下一模式</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td>关机</td>
<td>正常模式</td>
<td>睡眠模式</td>
</tr>
<tr>
<td>关机</td>
<td></td>
<td>使用PWRKEY开机</td>
<td></td>
</tr>
<tr>
<td>正常模式</td>
<td>使用PWRKEY管脚，或VBAT电压低于关机电压</td>
<td></td>
<td>软件调用睡眠接口，AT版本不做动作30s自动休眠</td>
</tr>
<tr>
<td>睡眠模式</td>
<td>使用PWRKEY或VBAT电压低于关机电压</td>
<td>GPIO管脚中断、定时器、接收短信或网络数据</td>
<td></td>
</tr>
</tbody></table>
<h2 id="3-7-串口"><a href="#3-7-串口" class="headerlink" title="3.7 串口"></a>3.7 串口</h2><p>模块提供了五个通用异步收发器：主串口UART1、下载和校准串口UART2、通用串口UART3、调试串口HOST UART和ZSP UART。</p>
<h3 id="3-7-1-UART1"><a href="#3-7-1-UART1" class="headerlink" title="3.7.1 UART1"></a>3.7.1 UART1</h3><table>
<thead>
<tr>
<th>名称</th>
<th>管脚</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>UART1_TXD</td>
<td>61</td>
<td>发送数据到DTE设备的RXD端</td>
</tr>
<tr>
<td>UART1_RXD</td>
<td>62</td>
<td>从DTE设备TXD端接收数据</td>
</tr>
<tr>
<td>UART1_RTS</td>
<td>60</td>
<td>DTE请求发送数据给DCE</td>
</tr>
<tr>
<td>UART1_CTS</td>
<td>59</td>
<td>清除发送</td>
</tr>
</tbody></table>
<p>表格5：UART1管脚定义</p>
<p>UART1通常用来和模块进行AT指令通讯。UART1支持固定波特率和自适应波特率。自适应波特率支持范围9600bps到115200bps。</p>
<p>在默认情况下，模块的硬件流控是关闭的。当客户需要硬件流控时，管脚RTS,CTS必须连接到客户端，AT命令“AT+IFC=2,2”可以用来打开硬件流控。AT命令“AT+IFC=0,0”可以用来关闭流控。具体请参考《AirM2M无线模块AT命令手册》。</p>
<p>UART1的特点如下：<br>• 包括数据线TXD和RXD，硬件流控控制线RTS和CTS。<br>• 8个数据位，无奇偶校验，一个停止位。<br>• 硬件流控默认关闭。<br>• 用以AT命令传送，数传等。<br>• 支持波特率如下：1200,2400,4800,9600,14400,19200,28800,38400,57600,115200,230400,460800,921600bps<br>• AT指令版本默认情况下模块是自适应波特率(AT+IPR=0)，在自适应波特率模式下，开机后初始化信息（开头是“RDY”）会以115200波特率回发给主控机。在模块开机2-3秒后，可以给模块发送AT命令。主控机需首先发送AT命令，命令正常返回后表示训练成功。用户可以发送一个“AT+IPR=x;&amp;W”命令给模块（x是波特率，比如9600），此命令的作用是设置一个固定的波特率并保存，在完成这些配置之后，每次模块开机以后，会自动串口返回URC初始化信息（开头是“RDY”）。</p>
<p>为了更好的使用自适应波特率功能，以下的使用条件需要注意：</p>
<p>模块和上位机之间同步：<br>自适应波特率功能开启情况下，当模块上电，在发送“AT”字符前最好等待 2~3秒钟。当模块上报开机初始化信息，表明波特率训练成功，和上位机完成了同步。<br>自适应波特率操作配置：<br>• 串口配置为8位数据位，无奇偶校验位，1位停止位（出厂配置）<br>• 波特率训练成功后，可以识别大写、小写或大小写组合的AT命令。</p>
<h3 id="3-7-2-UART2"><a href="#3-7-2-UART2" class="headerlink" title="3.7.2 UART2"></a>3.7.2 UART2</h3><table>
<thead>
<tr>
<th>名称</th>
<th>管脚</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>UART2_RXD</td>
<td>51</td>
<td>从DTE设备TXD端接收数据</td>
</tr>
<tr>
<td>UART2_TXD</td>
<td>50</td>
<td>发送数据到DTE设备的RXD端</td>
</tr>
</tbody></table>
<p>表格6：UART2管脚定义</p>
<p>UART2 可以用来下载软件和射频校准，同时UART2 还用来和内部的蓝牙进行通讯，如果用到了蓝牙功能，则UART2 不可用作其他用途。</p>
<p><strong>注意：UART2 在开机后会自动打印一段LOG，波特率921600，这段LOG不能通过修改软件来关闭，推荐优先使用UART3</strong></p>
<p>UART2开机自动打印的Log如下：</p>
<blockquote>
<p>RDA8910m Boot_ROM V1.0-17b887ec<br>HW_CFG: 36<br>SW_CFG: 0<br>SE_CFG: 0<br>check flash img<br>load complete! checking……<br>Security Disabled<br>Check uImage Done<br>Run …</p>
</blockquote>
<h3 id="3-7-3-UART3"><a href="#3-7-3-UART3" class="headerlink" title="3.7.3 UART3"></a>3.7.3 UART3</h3><p>UART3 已经在模块内部连接到GPS芯片。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>管脚</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>UART3_RXD</td>
<td>46</td>
<td>内部连接到GPS芯片的TXD</td>
</tr>
<tr>
<td>UART3_TXD</td>
<td>47</td>
<td>内部连接到GPS芯片的RXD</td>
</tr>
</tbody></table>
<h3 id="3-7-4-HOST-UART"><a href="#3-7-4-HOST-UART" class="headerlink" title="3.7.4 HOST UART"></a>3.7.4 HOST UART</h3><table>
<thead>
<tr>
<th>名称</th>
<th>管脚</th>
<th>IO</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>HOST_TXD</td>
<td>53</td>
<td>O</td>
<td>发送数据到DTE设备的RXD端</td>
</tr>
<tr>
<td>HOST_RXD</td>
<td>52</td>
<td>I</td>
<td>从DTE设备TXD端接收数据</td>
</tr>
</tbody></table>
<p>HOST UART 用来软件调试时输出AP trace</p>
<h3 id="3-7-5-ZSP-UART"><a href="#3-7-5-ZSP-UART" class="headerlink" title="3.7.5 ZSP UART"></a>3.7.5 ZSP UART</h3><table>
<thead>
<tr>
<th>名称</th>
<th>管脚</th>
<th>IO</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>ZSP_UART_TXD</td>
<td>49</td>
<td>O</td>
<td>发送数据到DTE设备的RXD端</td>
</tr>
</tbody></table>
<p>ZSP UART 用来软件调试时输出CP trace</p>
<h3 id="3-7-6-串口连接方式"><a href="#3-7-6-串口连接方式" class="headerlink" title="3.7.6 串口连接方式"></a>3.7.6 串口连接方式</h3><p>串口的连接方式较为灵活，如下是三种常用的连接方式。</p>
<p>三线制的串口请参考如下的连接方式：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200806225845383_UART1.png"><br>图表9：串口三线制连接方式示意图</p>
<p>带流控的串口连接请参考如下电路连接，此连接方式可提高大数据量传输的可靠性，防止数据丢失。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200806230222657_%E6%B5%81%E6%8E%A7.png"><br>图表10：带流控的串口连接方式示意图</p>
<p>3.7.7 串口电压转换<br>模块的串口电平都是1.8V的，如果要和3.3V/5V 的MCU通信，必须要加电平转换电路：</p>
<p>电平转换电路如下：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200806230416831_%E7%94%B5%E5%B9%B3%E8%BD%AC%E6%8D%A2.png"><br>V_GLOBAL_1V8是模块输出的I/O电平电压。VDD_MCU是客户端的I/O电平电压。D2 选低导通压降的肖特基二极管。</p>
<p>也可以通过外加电平转换芯片来实现电压转换。</p>
<h2 id="3-8-USB接口"><a href="#3-8-USB接口" class="headerlink" title="3.8 USB接口"></a>3.8 USB接口</h2><p>Air820UG的USB符合USB2.0规范，支持高速（480Mbps）和全速（12Mbps）模式。该接口可用于AT命令传送，数据传输，软件调试和软件升级</p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>VBUS</td>
<td>12</td>
<td>USB电源，用于USB插入检测</td>
</tr>
<tr>
<td>USB_DP</td>
<td>14</td>
<td>USB差分数据正，需要控制到90欧姆差分阻抗</td>
</tr>
<tr>
<td>USB_DM</td>
<td>13</td>
<td>USB差分数据负，需要控制到90欧姆差分阻抗</td>
</tr>
<tr>
<td>USB_ID</td>
<td>102</td>
<td>暂不支持USB master模式，只支持USB slaver，ID管脚保持悬空</td>
</tr>
<tr>
<td>GND</td>
<td>15</td>
<td>地</td>
</tr>
</tbody></table>
<p>表格7：USB管脚定义</p>
<p>USB接口参考设计电路如下：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200806222527958_USB.png" alt="USB 参考设计" title="USB 参考设计"></p>
<p>注意事项如下：</p>
<ol>
<li>USB走线需要严格按照差分线控制，做到平行和等长；</li>
<li>USB走线的阻抗需要控制到差分90欧姆；</li>
<li>需要尽可能的减少USB走线的stubs，减少信号反射；</li>
<li>在靠近USB连接器或者测试点的地方添加TVS保护管，由于USB的速率较高，需要注意TVS管的选型，保证选用的TVS保护管的寄生电容小于1pF</li>
<li>VBUS作为USB插入检测，必须连接USB电源或者外接电源，否则USB无法被检测到，另外VBUS的检测电压要大于3.3V</li>
</ol>
<h2 id="3-9-SIM卡接口"><a href="#3-9-SIM卡接口" class="headerlink" title="3.9 SIM卡接口"></a>3.9 SIM卡接口</h2><p>SIM卡接口支持ETSI和IMT-2000卡规范，支持1.8V和3.0V USIM卡。</p>
<h3 id="3-9-1-SIM接口"><a href="#3-9-1-SIM接口" class="headerlink" title="3.9.1 SIM接口"></a>3.9.1 SIM接口</h3><p>下表介绍了SIM的接口管脚定义。</p>
<p><strong>SIM0卡接口定义:</strong></p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>USIM_VDD</strong></td>
<td>10</td>
<td>USIM卡供电电源。自动侦测SIM卡工作电压。 精度3.0V±10%和1.8V±10%。最大供电电流10mA。</td>
</tr>
<tr>
<td><strong>USIM_RST_N</strong></td>
<td>9</td>
<td>USIM卡复位脚</td>
</tr>
<tr>
<td><strong>USIM_DATA</strong></td>
<td>8</td>
<td>USIM卡数据线</td>
</tr>
<tr>
<td><strong>USIM_CLK</strong></td>
<td>7</td>
<td>USIM卡时钟线</td>
</tr>
<tr>
<td><strong>USIM_CD</strong></td>
<td>48</td>
<td>USIM卡插拔检测</td>
</tr>
</tbody></table>
<p><strong>SIM1卡接口定义:</strong></p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td><strong>VSIM1</strong></td>
<td>72</td>
<td>SIM1卡供电电源。自动侦测SIM卡工作电压。 精度3.0V±10%和1.8V±10%。最大供电电流10mA。</td>
</tr>
<tr>
<td><strong>SIM1_RST_N</strong></td>
<td>71</td>
<td>SIM1卡复位脚</td>
</tr>
<tr>
<td><strong>SIM1_DATA</strong></td>
<td>70</td>
<td>SIM1卡数据线</td>
</tr>
<tr>
<td><strong>SIM1_CLK</strong></td>
<td>69</td>
<td>SIM1卡时钟线</td>
</tr>
</tbody></table>
<h3 id="3-9-2-SIM0-和-SIM1（或者内置贴片SIM卡）切换逻辑-待开发"><a href="#3-9-2-SIM0-和-SIM1（或者内置贴片SIM卡）切换逻辑-待开发" class="headerlink" title="3.9.2 SIM0 和 SIM1（或者内置贴片SIM卡）切换逻辑(待开发)"></a>3.9.2 SIM0 和 SIM1（或者内置贴片SIM卡）切换逻辑(待开发)</h3><p>Air820UG-NA 支持SIM0 和 SIM1双卡单待；<br>Air820UG-MA 由于模块内部已经在SIM1接口上内置了贴片SIM卡，故SIM1 接口不可再外接SIM卡，也不可用作GPIO；</p>
<p>模块开机后首先会去查询SIM0 接口上是否有插入SIM卡，如果检测到SIM0接口上的SIM卡，就会读取SIM0接口的卡信息去连接网络；如果SIM0接口上没有检测到SIM卡，则会再去检测SIM1 接口上是否有SIM卡（或者是内置贴片SIM卡），如果检测到SIM1接口上的SIM卡（或者是内置贴片SIM卡），就会读取SIM1接口的卡信息去连接网络；如果SIM1接口上也没有检测到SIM卡，则会报错，未插入SIM卡；</p>
<p>SIM0 接口和SIM1 接口如果同时插入了SIM卡，默认会使用SIM0接口上的SIM卡，同时也可以通过AT+SIMCROSS 这个指令来切换；</p>
<table>
<thead>
<tr>
<th></th>
<th><strong>SIM0</strong></th>
<th><strong>SIM1</strong></th>
<th><strong>默认使用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>Air820UG-NA</strong></td>
<td>插入SIM卡0</td>
<td>插入SIM卡1</td>
<td>SIM0</td>
</tr>
<tr>
<td></td>
<td>插入SIM卡0</td>
<td>未插入SIM卡</td>
<td>SIM0</td>
</tr>
<tr>
<td></td>
<td>未插入SIM卡</td>
<td>插入SIM卡1</td>
<td>SIM1</td>
</tr>
<tr>
<td></td>
<td>未插入SIM卡</td>
<td>未插入SIM卡</td>
<td>报错，未插入SIM卡</td>
</tr>
<tr>
<td><strong>Air820UG-MA</strong></td>
<td>插入SIM卡0</td>
<td>有内置贴片SIM卡，不可以再外接，否则会出错！</td>
<td>SIM0</td>
</tr>
<tr>
<td></td>
<td>未插入SIM卡</td>
<td>同上</td>
<td>内部贴片SIM卡</td>
</tr>
</tbody></table>
<h3 id="3-9-3-SIM接口参考电路"><a href="#3-9-3-SIM接口参考电路" class="headerlink" title="3.9.3 SIM接口参考电路"></a>3.9.3 SIM接口参考电路</h3><p>下图是SIM接口的参考电路，使用6pin的SIM卡座。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200521162008118_5.png"></p>
<p>如果需要用到sim卡在位检测，推荐电路如下。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200521162307522_6.png"></p>
<p>在SIM卡接口的电路设计中，为了确保SIM卡的良好的功能性能和不被损坏，在电路设计中建议遵循以下设计原则：<br>• SIM卡座与模块距离摆件不能太远，越近越好，尽量保证SIM卡信号线布线不超过20cm。<br>• SIM卡信号线布线远离RF线和VBAT电源线。。<br>• 为了防止可能存在的USIM_CLK信号对USIM_DATA信号的串扰，两者布线不要太靠近，在两条走线之间增加地屏蔽。且对USIM_RST_N信号也需要地保护。<br>• 为了保证良好的ESD保护，建议加TVS管，并靠近SIM卡座摆放。选择的ESD器件寄生电容不大于50pF。在模块和SIM卡之间也可以串联22欧姆的电阻用以抑制杂散EMI，增强ESD防护。SIM卡的外围电路必须尽量靠近SIM卡座。</p>
<h2 id="3-10-WAKEUP-OUT"><a href="#3-10-WAKEUP-OUT" class="headerlink" title="3.10 WAKEUP_OUT"></a>3.10 WAKEUP_OUT</h2><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>WAKEUP_OUT</td>
<td>66</td>
<td>唤醒AP</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>状态</th>
<th>WAKEUP_OUT应答</th>
</tr>
</thead>
<tbody><tr>
<td>待机</td>
<td>高电平</td>
</tr>
<tr>
<td>语音呼叫</td>
<td>变为低电平，之后： （1） 通话建立时变为高电平 （2） 使用AT命令 ATH挂断语音，WAKEUP_OUT变为高电平 （3） 呼叫方挂断，WAKEUP_OUT首先变为高电平，然后拉为低电平持续 120ms，收到自动回复 URC信息 “NO CARRIER”，之后再变为高电平 （4） 收到短信时变为高电平</td>
</tr>
<tr>
<td>数据传输</td>
<td>变为低电平，之后： （1） 数据连接建立时变为高电平 （2） 使用AT命令 ATH挂断数据连接，WAKEUP_OUT变为高电平 （3） 呼叫方挂断，WAKEUP_OUT首先变为高电平，然后拉为低电平持续 120ms，收到自动回复 URC信息 “NO CARRIER”，之后再变为高电平 （4） 收到短信时变为高电平</td>
</tr>
<tr>
<td>短信</td>
<td>当收到新的短信，WAKEUP_OUT变为低电平，持续 120ms，再变为高电平</td>
</tr>
<tr>
<td>URC</td>
<td>某些 URC信息可以触发WAKEUP_OUT拉低 120ms</td>
</tr>
</tbody></table>
<h2 id="3-11-网络状态指示"><a href="#3-11-网络状态指示" class="headerlink" title="3.11 网络状态指示"></a>3.11 网络状态指示</h2><p>Air820UG 分别用两个管脚信号来指示网络的状态。如下两表分别描述了管脚定义和不同网络状态下的逻辑电平变化：</p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>NET_MODE</td>
<td>65</td>
<td>指示模块的4G网络状态</td>
</tr>
<tr>
<td>NET_STATUS</td>
<td>68</td>
<td>指示模块的网络运行状态</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>状态</th>
<th>管脚工作状态</th>
<th>网络状态</th>
</tr>
</thead>
<tbody><tr>
<td>NET_MODE</td>
<td>高</td>
<td>注册LTE网络</td>
</tr>
<tr>
<td></td>
<td>低</td>
<td>其他</td>
</tr>
<tr>
<td>NET_STATUS</td>
<td>亮0.2秒，灭1.8秒</td>
<td>搜网状态</td>
</tr>
<tr>
<td></td>
<td>亮1.8秒，灭0.2秒</td>
<td>待机</td>
</tr>
<tr>
<td></td>
<td>亮0.125秒，灭0.125秒</td>
<td>数据传输状态 注意：该状态提示仅限于PPP拨号成功或者AT指令主动激活PDP成功，RNDIS联网成功</td>
</tr>
</tbody></table>
<p><strong>参考电路如下图:</strong><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814171751085_LED.jpg"></p>
<h2 id="3-12-音频接口"><a href="#3-12-音频接口" class="headerlink" title="3.12 音频接口"></a>3.12 音频接口</h2><p>模块提供了两路模拟音频输入通道和三路模拟输出通道，支持通话、录音和播放等功能。</p>
<table>
<thead>
<tr>
<th>接口</th>
<th>接口名</th>
<th>接口号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>麦克模拟输入</td>
<td>MIC+</td>
<td>16</td>
<td>音频输入通道1，已内置麦克偏置电路</td>
</tr>
<tr>
<td></td>
<td>MIC-</td>
<td>17</td>
<td></td>
</tr>
<tr>
<td>耳机麦克模拟输入</td>
<td>HEADMIC_P</td>
<td>133</td>
<td>耳机麦克输入通道，需要外加麦克偏置电路</td>
</tr>
<tr>
<td></td>
<td>HEADMIC_N</td>
<td>134</td>
<td></td>
</tr>
<tr>
<td>耳机输出</td>
<td>HP_R</td>
<td>118</td>
<td>耳机右声道输出</td>
</tr>
<tr>
<td></td>
<td>HP_L</td>
<td>119</td>
<td>耳机左声道输出</td>
</tr>
<tr>
<td>听筒输出</td>
<td>EAR_P</td>
<td>122</td>
<td>听筒输出正端</td>
</tr>
<tr>
<td></td>
<td>EAR_N</td>
<td>123</td>
<td>听筒输出负端</td>
</tr>
<tr>
<td>喇叭输出</td>
<td>SPK+</td>
<td>18</td>
<td>喇叭输出正端</td>
</tr>
<tr>
<td></td>
<td>SPK-</td>
<td>19</td>
<td>喇叭输出负端</td>
</tr>
</tbody></table>
<p>AIN可以用作麦克风输入或模拟音频信号输入。麦克风通常选用驻极体麦克风。AIN是差分输入。<br>AOUT通道可以直接驱动8欧姆的喇叭。AOUT通道为差分输出。</p>
<h3 id="3-12-1-防止TDD噪声和其它噪声"><a href="#3-12-1-防止TDD噪声和其它噪声" class="headerlink" title="3.12.1 防止TDD噪声和其它噪声"></a>3.12.1 防止TDD噪声和其它噪声</h3><p>手持话柄及免提的麦克风建议采用内置射频滤波双电容（如10pF和33pF）的驻极体麦克风，从干扰源头滤除射频干扰，会很大程度改善耦合TDD噪音。33pF电容用于滤除模块工作在900MHz频率时的高频干扰。如果不加该电容，在通话时候有可能会听到TDD噪声。同时10pF的电容是用以滤除工作在1800MHz频率时的高频干扰。需要注意的是，由于电容的谐振点很大程度上取决于电容的材料以及制造工艺，因此选择电容时，需要咨询电容的供应商，选择最合适的容值来滤除高频噪声。</p>
<p>PCB板上的射频滤波电容摆放位置要尽量靠近音频器件或音频接口，走线尽量短，要先经过滤波电容再到其他点<br>天线的位置离音频元件和音频走线尽量远，减少辐射干扰，电源走线和音频走线不能平行，电源线尽量远离音频线。</p>
<p>差分音频走线必须遵循差分信号的Layout规则。</p>
<h3 id="3-12-2-麦克风接口参考电路"><a href="#3-12-2-麦克风接口参考电路" class="headerlink" title="3.12.2 麦克风接口参考电路"></a>3.12.2 麦克风接口参考电路</h3><p>AIN1通道内置偏置电路。麦克风通道参考电路下图所示：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814174553336_micphone.png"></p>
<h3 id="3-12-3-耳机接口参考电路"><a href="#3-12-3-耳机接口参考电路" class="headerlink" title="3.12.3 耳机接口参考电路"></a>3.12.3 耳机接口参考电路</h3><p><strong>耳机参考电路一：</strong><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210125231126919_Earphone1.png" alt="undefined" title="undefined"><br>上图是目前Air724UG 的开发板上采用的耳机接口电路：<br><code>HEADMIC_BIAS 给耳机麦克提供偏置电压；</code><br><code>HEADMIC_IN_DET 用来检测耳机按键，HEADMIC_IN_DET 内部是一个ADC，故 HEADMIC_IN_DET 还可以支持多功能按键；</code><br><code>HP_DET 用来检测耳机插入，当耳机插入时为低，当耳机拔出时为高；</code></p>
<p>这个耳机电路存在一个弊端，由于耳机拔出后需要给22uF电容充电后HP_DET 才能为高，导致耳机拔出检测会延迟6-10秒左右的时间，故推荐将耳机电路修改成下面的参考电路二</p>
<p><strong>耳机参考电路二：</strong><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210125231617210_Earphone2.png" alt="undefined" title="undefined"><br>更换了耳机插座的型号，换成检测管脚是常开类型的耳机插座；<br><code>未插入耳机时，耳机插座的 Pin3 和 Pin4 之间处于断开状态，HP_DET 由内部拉高，为高电平；</code><br><code>插入耳机后，耳机插座的 Pin3 和 Pin4 之间导通，并连接到左声道的耳机喇叭，左声道的耳机喇叭等效于32欧姆的接地电阻，故 HP_DET 被拉低变成低电平；</code><br><code>拔出耳机后，耳机插座的 Pin3 和 Pin4 之间断开，因为不需要给22uF 的电容充电，HP_DET 马上变成了高电平，不会出现耳机拔出检测过慢的问题。</code></p>
<p>耳机根据第3段和第4段的接线定义不同可以分为 国标OMTP 和 美标CTIA 两种，在设计耳机插座的电路后需要选择相应的耳机。<br>上面的两个耳机参考电路是按照国标OMTP设计的，故只能使用 OMTP标准的耳机。如果要使用美标CTIA的耳机，则需要把第3段、第4段的接线对换一下。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201230180631973_%E8%80%B3%E6%9C%BA%E5%88%86%E7%B1%BB.png" alt="undefined" title="undefined"></p>
<h3 id="3-12-4-音频输出接口参考电路"><a href="#3-12-4-音频输出接口参考电路" class="headerlink" title="3.12.4 音频输出接口参考电路"></a>3.12.4 音频输出接口参考电路</h3><p>SPK音频输出接口可以直接与驱动8欧姆喇叭。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814175100417_Speaker.png"></p>
<h2 id="3-13-GPS"><a href="#3-13-GPS" class="headerlink" title="3.13 GPS"></a>3.13 GPS</h2><p>Air820UG 模块内部集成了一颗高性能、高集成度的多模卫星定位芯片，支持GPS/Beidou/GLONASS</p>
<h3 id="3-13-1-模块内部连接图"><a href="#3-13-1-模块内部连接图" class="headerlink" title="3.13.1 模块内部连接图"></a>3.13.1 模块内部连接图</h3><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201105141330626_Air820UG_GPS.png"></p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>电压域</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>GPS_ANT</td>
<td>35</td>
<td></td>
<td>GPS 天线接口，走线需要控制到50欧姆</td>
</tr>
<tr>
<td>1PPS</td>
<td>37</td>
<td>3.3V</td>
<td>每秒输出一个脉冲， 用于GPS授时</td>
</tr>
<tr>
<td>VDD_GPS</td>
<td>38</td>
<td>3.3V</td>
<td>由模块内部的VIB 输出3.3V给GPS供电，外部保持悬空</td>
</tr>
<tr>
<td>GPS_TXD</td>
<td>46</td>
<td>3.3V</td>
<td>GPS数据输出， 模块内部连接到UIS8910的UART3_RXD， 内部已做电平转换</td>
</tr>
<tr>
<td>GPS_RXD</td>
<td>47</td>
<td>3.3V</td>
<td>GPS数据输入， 模块内部连接到UIS8910的UART3_TXD， 内部已做电平转换</td>
</tr>
</tbody></table>
<h3 id="3-13-2-有源GPS天线参考电路图"><a href="#3-13-2-有源GPS天线参考电路图" class="headerlink" title="3.13.2 有源GPS天线参考电路图"></a>3.13.2 有源GPS天线参考电路图</h3><p>如果用的是GPS无源天线，可以直接连接到模块的第35脚GPS_ANT；<br>如果用的是3.3V供电的GPS有源天线，由于模块内部已经有3.3V偏置电路，故可以直接连接到模块的第35脚GPS_ANT；<br>参考电路图如下：</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201105145318117_3V%E6%9C%89%E6%BA%90%E5%A4%A9%E7%BA%BF.png"><br>Air820UG模块内部集成了3.3V有源天线供电电路和检测电路， 可以给外部有源天线馈电。并根据馈电电流的大小，指示有源天线的状态。有源天线检测电路还提供了短路保护，通过限制给有源天线馈电的电流，保护芯片和有源天线不被损坏。检测电路定义了三种状态，当电流小于设定值时，指示天线开路；当电流大于设定值时，指示天线正常；当电流过大或者发生短路时，指示天线过流。<br>天线接入的默认最小检测电流为 2.5mA，短路保护的限流电流默认为 50mA。</p>
<p>如果用的是5V供电的GPS有源天线，则需要给有源天线另外加5V供电，此时需串接一颗47nH电感，并联一颗1000pF的电容，同时还需要加一颗100pF 的隔直电容，<br>参考电路如下所示：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201105145344674_5V%E6%9C%89%E6%BA%90%E5%A4%A9%E7%BA%BF.png"></p>
<h3 id="3-13-3-GPS设计注意事项"><a href="#3-13-3-GPS设计注意事项" class="headerlink" title="3.13.3 GPS设计注意事项"></a>3.13.3 GPS设计注意事项</h3><ol>
<li><p>模块供电<br>优先推荐采用LDO给Air820UG模块供电，建议LDO的输出能力要达到1.2A以上。<br>某些DC-DC的开关频率的多次谐波会对GPS的搜星效果产生非常严重的干扰，需要谨慎选择。</p>
</li>
<li><p>USB对GPS的干扰<br>在测试中发现USB信号有可能会干扰GPS的搜星效果，故推荐在USB信号线上串联EMI滤波器，请注意Air820UG 支持USB 2.0 High Speed，在EMI Filter 选型时需要先确认是否支持USB high speed。推荐采用 PCMF1USB3S<br>参考电路如下：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201217144319885_USB_EMI_Filter.png" alt="undefined" title="undefined"><br>在layout 走线时务必注意不要出现stub，否则有可能会影响USB的正常通信。</p>
</li>
</ol>
<h3 id="3-13-4-性能"><a href="#3-13-4-性能" class="headerlink" title="3.13.4 性能"></a>3.13.4 性能</h3><table>
<thead>
<tr>
<th>类别</th>
<th>指标项</th>
<th>典型值</th>
<th>单位</th>
</tr>
</thead>
<tbody><tr>
<td>定位时间 [测试条件1]</td>
<td>纯硬件冷启动</td>
<td>32</td>
<td>s</td>
</tr>
<tr>
<td></td>
<td>纯硬件热启动</td>
<td>&lt;1</td>
<td>s</td>
</tr>
<tr>
<td></td>
<td>纯硬件重新捕获</td>
<td>&lt;1</td>
<td>s</td>
</tr>
<tr>
<td></td>
<td>软件辅助A-GNSS（秒定位）</td>
<td>&lt;5</td>
<td>s</td>
</tr>
<tr>
<td>灵敏度 [测试条件2]</td>
<td>冷启动</td>
<td>-148</td>
<td>dBm</td>
</tr>
<tr>
<td></td>
<td>热启动</td>
<td>-156</td>
<td>dBm</td>
</tr>
<tr>
<td></td>
<td>重新捕获</td>
<td>-160</td>
<td>dBm</td>
</tr>
<tr>
<td></td>
<td>跟踪</td>
<td>-162</td>
<td>dBm</td>
</tr>
<tr>
<td>精度 [测试条件3]</td>
<td>水平定位精度</td>
<td>2.5</td>
<td>m</td>
</tr>
<tr>
<td></td>
<td>速度精度</td>
<td>0.1</td>
<td>m/s</td>
</tr>
<tr>
<td></td>
<td>授时精度</td>
<td>30</td>
<td>ns</td>
</tr>
</tbody></table>
<p>注：以上结果为GPS/北斗双模工作模式</p>
<p>测试条件1：接收卫星个数大于6，所有卫星信号强度为-130dBm，测试10次取平均值，定位误差小于10米。<br>测试条件2：外接LNA噪声系数0.8，接收卫星个数大于6，五分钟之内锁定或者不失锁条件下的接收信号强度值。<br>测试条件3：开阔没有遮挡环境，连续24小时开机测试，50%CEP。<br>测试条件4：接收卫星个数大于6，所有卫星信号强度为-130dBm。</p>
<h1 id="4-射频接口"><a href="#4-射频接口" class="headerlink" title="4.射频接口"></a>4.射频接口</h1><p>天线接口管脚定义如下：</p>
<table>
<thead>
<tr>
<th>管脚名称</th>
<th>管脚号</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>LTE_ANT</td>
<td>74</td>
<td>LTE天线接口</td>
</tr>
<tr>
<td>WiFi_ANT</td>
<td>57</td>
<td>WiFi 天线接口</td>
</tr>
<tr>
<td>GPS_ANT</td>
<td>35</td>
<td>GPS 天线接口</td>
</tr>
</tbody></table>
<h2 id="4-1-射频参考电路"><a href="#4-1-射频参考电路" class="headerlink" title="4.1 射频参考电路"></a>4.1 射频参考电路</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814175842755_antenna.png"><br>注意：<br>• 图中R34 C43 C44 是一个预留的Π型匹配电路，方便调阻抗匹配；R34默认贴0欧姆，C43 C44 空贴；<br>• 连接到模块RF天线焊盘的RF走线必须使用微带线或者其他类型的 RF走线，阻抗必须控制在50欧姆左右。</p>
<h2 id="4-2-RF输出功率"><a href="#4-2-RF输出功率" class="headerlink" title="4.2 RF输出功率"></a>4.2 RF输出功率</h2><table>
<thead>
<tr>
<th>频段</th>
<th>最大</th>
<th>最小</th>
</tr>
</thead>
<tbody><tr>
<td>LTE FDD B1/B3/B5/B8</td>
<td>23dBm +-2dB</td>
<td>&lt;-44dBm</td>
</tr>
<tr>
<td>LTE TDD B34/B38/B39/B40/B41</td>
<td>23dBm +-2dB</td>
<td>&lt;-42dBm</td>
</tr>
</tbody></table>
<p>表格17：RF传导功率</p>
<h2 id="4-3-RF传导灵敏度"><a href="#4-3-RF传导灵敏度" class="headerlink" title="4.3 RF传导灵敏度"></a>4.3 RF传导灵敏度</h2><table>
<thead>
<tr>
<th>频段</th>
<th>接收灵敏度</th>
</tr>
</thead>
<tbody><tr>
<td>LTE FDD B1(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE FDD B3(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE FDD B5(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE FDD B8(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE TDD B34(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE TDD B38(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE TDD B39(10M)</td>
<td>&lt; -99dBm</td>
</tr>
<tr>
<td>LTE TDD B40(10M)</td>
<td>&lt; -99Bm</td>
</tr>
<tr>
<td>LTE TDD B41(10M)</td>
<td>&lt; -99dBm</td>
</tr>
</tbody></table>
<p>表格18：RF传导灵敏度</p>
<h2 id="4-4-推荐RF焊接方式"><a href="#4-4-推荐RF焊接方式" class="headerlink" title="4.4 推荐RF焊接方式"></a>4.4 推荐RF焊接方式</h2><p>如果连接外置天线的射频连接器是通过焊接方式与模块相连的，请务必注意连接线的剥线方式及焊接方法，尤其是地要焊接充分，请按照下图中正确的焊接方式进行操作，以避免因焊接不良引起线损增大。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814180439213_%E7%84%8A%E6%8E%A5.png"><br>图表22：射频焊接方式建议</p>
<h1 id="5-电器特性，可靠性，射频特性"><a href="#5-电器特性，可靠性，射频特性" class="headerlink" title="5.电器特性，可靠性，射频特性"></a>5.电器特性，可靠性，射频特性</h1><h2 id="5-1-绝对最大值"><a href="#5-1-绝对最大值" class="headerlink" title="5.1 绝对最大值"></a>5.1 绝对最大值</h2><p>下表所示是模块数字、模拟管脚的电源供电电压电流最大耐受值。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>最小</th>
<th>最大</th>
<th>单位</th>
</tr>
</thead>
<tbody><tr>
<td>VBAT</td>
<td>-0.3</td>
<td>4.7</td>
<td>V</td>
</tr>
<tr>
<td>USB_VBUS</td>
<td>-0.3</td>
<td>5.5</td>
<td>V</td>
</tr>
<tr>
<td>电源供电峰值电流</td>
<td>0</td>
<td>1</td>
<td>A</td>
</tr>
<tr>
<td>电源供电平均电流（TDMA一帧时间）</td>
<td>0</td>
<td>0.7</td>
<td>A</td>
</tr>
<tr>
<td>数字管脚处电压</td>
<td>-0.3</td>
<td>VDDIO+0.3</td>
<td>V</td>
</tr>
</tbody></table>
<p>表格19：绝对最大值</p>
<h2 id="5-2-推荐工作条件"><a href="#5-2-推荐工作条件" class="headerlink" title="5.2 推荐工作条件"></a>5.2 推荐工作条件</h2><table>
<thead>
<tr>
<th>参数</th>
<th>最小</th>
<th>典型</th>
<th>最大</th>
<th>单位</th>
</tr>
</thead>
<tbody><tr>
<td>VBAT</td>
<td>3.3</td>
<td>3.8</td>
<td>4.3</td>
<td>V</td>
</tr>
<tr>
<td>USB_VBUS</td>
<td>3.3</td>
<td>5.0</td>
<td>5.25</td>
<td>V</td>
</tr>
<tr>
<td>电源供电峰值电流</td>
<td></td>
<td>0.7</td>
<td>1</td>
<td>A</td>
</tr>
</tbody></table>
<p>表格20：推荐工作条件</p>
<h2 id="5-3-工作温度"><a href="#5-3-工作温度" class="headerlink" title="5.3 工作温度"></a>5.3 工作温度</h2><table>
<thead>
<tr>
<th>温度</th>
<th>最低</th>
<th>典型</th>
<th>最高</th>
<th>单位</th>
</tr>
</thead>
<tbody><tr>
<td>正常工作温度</td>
<td>-35</td>
<td>25</td>
<td>75</td>
<td>℃</td>
</tr>
<tr>
<td>受限工作温度</td>
<td>-40~-35</td>
<td></td>
<td>75~85</td>
<td>℃</td>
</tr>
<tr>
<td>存储温度</td>
<td>-45</td>
<td></td>
<td>90</td>
<td>℃</td>
</tr>
</tbody></table>
<p>表格21：工作温度</p>
<h2 id="5-4-功耗"><a href="#5-4-功耗" class="headerlink" title="5.4 功耗"></a>5.4 功耗</h2><h2 id="5-5-静电防护"><a href="#5-5-静电防护" class="headerlink" title="5.5 静电防护"></a>5.5 静电防护</h2><p>在模块应用中，由于人体静电，微电子间带电摩擦等产生的静电，通过各种途径放电给模块，可能会对模块造成一定的损坏，所以 ESD保护必须要重视，不管是在生产组装、测试，研发等过程，尤其在产品设计中，都应采取防 ESD保护措施。如电路设计在接口处或易受 ESD点增加 ESD保护，生产中带防ESD手套等。<br>下表为模块重点PIN脚的ESD耐受电压情况。</p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>接触放电</th>
<th>空气放电</th>
</tr>
</thead>
<tbody><tr>
<td>VBAT,GND</td>
<td>±5KV</td>
<td>±10KV</td>
</tr>
<tr>
<td>ANT_MAIN</td>
<td>±5KV</td>
<td>±10KV</td>
</tr>
<tr>
<td>Others</td>
<td>±0.5KV</td>
<td>±1KV</td>
</tr>
</tbody></table>
<p>表格23：ESD性能参数（温度：25℃, 湿度：45%）</p>
<h1 id="6-机械尺寸"><a href="#6-机械尺寸" class="headerlink" title="6 机械尺寸"></a>6 机械尺寸</h1><p>该章节描述模块的机械尺寸以及客户使用该模块设计的推荐封装尺寸。</p>
<h2 id="6-1-模块机械尺寸"><a href="#6-1-模块机械尺寸" class="headerlink" title="6.1 模块机械尺寸"></a>6.1 模块机械尺寸</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200817152236627_%E5%B0%BA%E5%AF%B8%E5%9B%BE.png"></p>
<p>图表23：Air820UG尺寸图（单位：毫米）</p>
<h2 id="6-2-推荐PCB封装"><a href="#6-2-推荐PCB封装" class="headerlink" title="6.2 推荐PCB封装"></a>6.2 推荐PCB封装</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200817152254670_%E5%B0%81%E8%A3%85.png"></p>
<p>图表24：正视图，Air820UG PCB封装（单位：毫米）<br>注意：PCB板上模块和其他元器件之间的间距建议至少3mm；</p>
<p>下载Air820原理图&amp;PCB封装<br><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201224164022137_Air820UG_%E5%8E%9F%E7%90%86%E5%9B%BE&PCB%E5%B0%81%E8%A3%85.zip">Air820UG_原理图&amp;PCB封装.zip</a></p>
<h1 id="7-存储和生产"><a href="#7-存储和生产" class="headerlink" title="7 存储和生产"></a>7 存储和生产</h1><h2 id="7-1-存储"><a href="#7-1-存储" class="headerlink" title="7.1 存储"></a>7.1 存储</h2><p>Air820UG以真空密封袋的形式出货。模块的存储需遵循如下条件：<br>环境温度低于40摄氏度，空气湿度小于90%情况下，模块可在真空密封袋中存放12个月。<br>当真空密封袋打开后，若满足以下条件，模块可直接进行回流焊或其它高温流程：<br>• 模块环境温度低于30摄氏度，空气湿度小于60%，工厂在72小时以内完成贴片。<br>• 空气湿度小于10%</p>
<p>若模块处于如下条件，需要在贴片前进行烘烤：<br>• 当环境温度为23摄氏度（允许上下5摄氏度的波动）时，湿度指示卡显示湿度大于10%<br>• 当真空密封袋打开后，模块环境温度低于30摄氏度，空气湿度小于60%，但工厂未能在72小时以内完成贴片<br>• 当真空密封袋打开后，模块存储空气湿度大于10%<br>如果模块需要烘烤，请在125摄氏度下（允许上下5摄氏度的波动）烘烤48小时。<br>注意：模块的包装无法承受如此高温，在模块烘烤之前，请移除模块包装。如果只需要短时间的烘烤，请参考IPC/JEDECJ-STD-033规范。</p>
<h2 id="7-2-生产焊接"><a href="#7-2-生产焊接" class="headerlink" title="7.2 生产焊接"></a>7.2 生产焊接</h2><p>用印刷刮板在网板上印刷锡膏，使锡膏通过网板开口漏印到 PCB上，印刷刮板力度需调整合适，为保证模块印膏质量，Air820UG模块焊盘部分对应的钢网厚度应为 0.2mm。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814181326049_solder.png"><br>图表27：印膏图</p>
<p>为避免模块反复受热损伤，建议客户 PCB板第一面完成回流焊后再贴模块。推荐的炉温曲线图如下图所示：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200814181405797_%E7%82%89%E6%B8%A9.png"><br>图表28：炉温曲线</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/13/1349/" data-id="ckkfmdgfl00epvkcg46pr9xi2" data-title="Air820UG_模块硬件设计手册_V1.0" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1334" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/11/1334/" class="article-date">
  <time class="dt-published" datetime="2020-08-11T03:49:14.000Z" itemprop="datePublished">2020-08-11</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/11/1334/">合宙Air720U&amp;724U&amp;722U Lua 固件更新说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><code>Lua固件更新说明如下：</code></p>
<p>@<a href="%E7%9B%AE%E5%BD%95%E5%90%8D%E7%A7%B0">TOC</a></p>
<ul>
<li><strong>空间说明</strong><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Luat二次开发使用的Flash空间有两部分：脚本区和文件系统区</span><br><span class="line"></span><br><span class="line">脚本区：</span><br><span class="line">通过Luatools烧写的所有文件，都存放在此区域</span><br><span class="line">非TTS版本为720KB，TTS版本为426KB；如果烧录时，超过此限制，Luatools会报错</span><br><span class="line">不同版本的core可能会有差异，以版本每次的更新记录为准</span><br><span class="line"></span><br><span class="line">文件系统区：</span><br><span class="line">程序运行过程中实时创建的文件都会存放在此区域</span><br><span class="line">总空间为1.2MB</span><br><span class="line">不同版本的core可能会有差异，可通过rtos.get_fs_free_size()查询剩余的文件系统可用空间</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Luat二次开发可用的ram空间有1.36MB</span><br><span class="line">可通过collectgarbage(&quot;count&quot;)查询已经使用的内存空间（返回值单位为KB）,总的1.36MB减去使用的内存，就是当前剩余的Lua运行可用内存</span><br></pre></td></tr></table></figure></li>
<li><strong>底层固件功能列表</strong></li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>LCD</th>
<th>字库</th>
<th>图片</th>
<th>扫码</th>
<th>二维码生成</th>
<th>摄像头</th>
<th>TTS</th>
<th>WIFI Scan</th>
<th>蓝牙</th>
<th>SD卡</th>
<th>littleVGL</th>
<th>VOLTE</th>
<th>脚本文件</th>
<th>文件系统空间</th>
<th>RAM空间</th>
</tr>
</thead>
<tbody><tr>
<td>Luat_RDA8910</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>720KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_FLOAT</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>720KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_TTS</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>426KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_TTS_FLOAT</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>426KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_TTS_NOLVGL</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>426KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_TTS_NOVOLTE_FLOAT</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>不支持</td>
<td>426KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_TTS_NOLVGL_FLOAT</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>不支持</td>
<td>不支持</td>
<td>支持</td>
<td>426KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
<tr>
<td>Luat_RDA8910_BT_FLOAT</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>支持</td>
<td>不支持</td>
<td>720KB</td>
<td>1.3MB</td>
<td>1.36MB</td>
</tr>
</tbody></table>
<h3 id="底层core下载地址"><a href="#底层core下载地址" class="headerlink" title="底层core下载地址"></a>底层core下载地址</h3><ul>
<li>最新版本：<ul>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201030145113567_core_V0022.zip">CORE_V0022</a></li>
</ul>
</li>
<li>历史版本：<ul>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210113175605790_CORE_V0019.rar">CORE_V0019</a></li>
</ul>
</li>
</ul>
<p><code>注：  .pac后缀的是本地烧录固件； .bin后缀的是空中升级文件</code></p>
<h3 id="上层软件下载地址"><a href="#上层软件下载地址" class="headerlink" title="上层软件下载地址"></a>上层软件下载地址</h3><ul>
<li>最新版本：<br><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210127105045913_script_LuaTask_V2.3.7.zip">上层软件LuaTask_V2.3.7（demo+lib)</a></li>
<li>历史版本：</li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201222164107696_script_LuaTask_V2.3.6.zip">上层软件LuaTask_V2.3.6（demo+lib）</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201030144159021_script_LuaTask_V2.3.5.zip">上层软件LuaTask_V2.3.5（demo+lib）</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/openLuat/Luat_4G_RDA_8910/tree/master/script_LuaTask">上层软件LuaTask _V2.3.4  (demo+lib)</a></li>
</ul>
<hr>
<h3 id="底层core固件更新说明"><a href="#底层core固件更新说明" class="headerlink" title="底层core固件更新说明"></a>底层core固件更新说明</h3><ul>
<li><p><strong>0022底层固件更新说明</strong><br>1:添加rtos.setTransData<br>2:添加Socket Options参数设置接口sock_setopt,lua通过设置opt实现保活功能<br>3:添加AT+TCPUSERPARAM<br>4:新接口接口lua otp接口<br>5:支持关机充电功能 ，lua项目打开充电开机功能<br>6:添加des_encrypt和des_decrypt接口<br>7:添加AT*USB=HOTPLUG,0/1</p>
</li>
<li><p><strong>0019底层固件更新说明</strong><br>1:升级到19<br>2:支持应用层更新audio校准参数<br>3:开发通用工厂测试<br>4:同时建大于3路ssl tcp时会死机<br>5:升级到W20.30.1<br>6:多中断设置后触发中断会导致死机<br>7:vbus插入消息上报<br>8:耳机通道等级3的音量不正常<br>9:8910平台LUA版本增加读取客户版本号的AT指令，兼容之前1802平台的“AT+LUAINFO?”<br>10:NAT PPP拨号之后无法PING外网<br>11:添加GPIO 测试AT 命令<br>12:阿里云OTA升级失败<br>13:重启开机原因值不对的问题<br>14:解决speex流播放出现的死机问题<br>15:修改注网太快，lua task还没跑起来的时候就已经注册上网，会有很多主动上报丢掉的问题<br>16:ui字库错位，显示出来的文字不正确<br>17:ui分辨率设置为320会重启<br>18:添加camera 预览放缩和反转接口<br>19:使用充电头供电，1s刷新界面，一段时间后不刷新了<br>20:mqtt 挂测死机<br>21:1. 添加VGA拍照功能，不支持VGA扫码<br>22:无法dhcp 获取IP 问题<br>23:添加disp.camerawritereg，设置camera sensor的寄存器<br>24:模块下载断电变砖<br>25:camera 户外拍照很白的问题<br>26:添加nv项，控制usbrst中的延时时间，AT*USB=RSTDELAY,xxx<br>27:有些主控开机太慢导致识别不到模块的usb<br>28:V0018 wifi扫描得到的ap mac地址有的丢了0<br>29:fota升级后,升级文件没有清除，导致文件系统空间变少<br>30:修改反复open / close uart会内存泄漏的问题<br>31:修改注网太快，lua task还没跑起来的时候就已经注册上网，会有很多主动上报丢掉的问题</p>
</li>
</ul>
<hr>
<h3 id="上层脚本更新说明"><a href="#上层脚本更新说明" class="headerlink" title="上层脚本更新说明"></a>上层脚本更新说明</h3><ul>
<li><p><strong>2.3.7上层脚本更新说明</strong><br>发布时间：2021/01/27 09:50<br>修改记录：<br>  一、lib脚本修改<br>lib脚本版本号：2.3.7<br>(1)mqtt.lua：修正“subscribe订阅，服务器返回订阅失败时，代码逻辑无法检测到失败”的问题<br>(2)aLiYun.lua：支持最新的阿里云公共实例和企业版示例的MQTT直连方式<br>(3)audio.lua：新增“设置mic增益”的功能接口audio.setMicGain<br>(4)audio.lua：支持“audio.setChannel接口设置输入mic通道”的功能<br>(5)patch.lua：修正“2.3.6版本中spi.send_recv接口，接收不到数据”的问题<br>  二、demo脚本修改<br>(1)i2c：新增mpu6xxx、aht10驱动文件<br>(2)rtmp：新增rtmp demo<br>(3)aLiYun：公共实例和企业版示例的MQTT直连方式demo<br>(4)call：新增mic增益设置功能演示<br>(5)call：新增mic增益设置和mic通道选择功能演示<br>(6)txiot：新增腾讯云demo<br>(7)modbus：新增modbus demo<br>(8)bluetooth：新增beacon功能演示</p>
</li>
<li><p><strong>2.3.6上层脚本更新说明</strong><br>发布时间：2020/12/22 10:45<br>修改记录：<br>  一、lib脚本修改<br>lib脚本版本号：2.3.6<br>(1)audio.lua：支持“多mp3文件拼接播放”功能<br>(2)http.lua：支持HEAD操作<br>(3)sys.lua：修正“某个task中如果有sys.waitUntil，并且这个task循环的创建和销毁，造成内存泄漏”的问题<br>(4)net.lua:修正“core升级为0022之后，2g卡不能上网”的问题<br>(5)aLiYun.lua：mqtt直连方式，增加获取username和password的函数设置功能<br>  二、demo脚本修改<br>(1)bluetooth：新增蓝牙demo，需要配合Luat_V3开头的core固件才能使用，此类core固件还没有发布<br>(2)crypto：新增des和des3功能示例<br>(3)ftp：新增ftp demo</p>
</li>
</ul>
<ul>
<li><p><strong>2.3.5上层脚本更新说明</strong><br>1:aLiYun.lua：新增setConnectMode接口，可设置为MQTT-TCP直连模式、直连域名、直连端口、clientid生成规则<br>2：aLiYun.lua：新增setRegion接口，可设置地域id<br>3：aLiYun.lua：支持连接状态下的主题订阅功能<br>4：audio.lua：play接口支持一次传入多文件连续拼接播放功能<br>5：nvm.lua：init接口支持“本地烧录软件时是否擦除nvm中已有的参数”功能<br>6：cc.lua：修正“通话中发送dtmf失败”的问题<br>7：net.lua：修正“core概率性不上报^MODE: %d,%d，导致网络逻辑异常”的问题<br>8：gpsZkw.lua、agpsZkw.lua：支持Air820UX系列模块的gps以及agps功能</p>
</li>
<li><p><strong>2.3.2上层脚本更新说明</strong><br>发布时间：2020/05/31 10:10<br>修改记录：<br>  一、lib脚本修改<br>  lib脚本版本号：2.3.2<br>  (1)scanCode：支持摄像头拍照和扫码功能<br>  (2)record：支持流式录音功能<br>  (3)wifiScan：支持wifi热点扫描功能<br>  (4)audio：支持通话音量调节功能<br>  (5)http：修正“transfer-encoding区分大小写导致的chunk编码数据无法正常解析”的问题<br>  二、demo脚本修改<br>  (1)完善或者支持camera、record、wifi、audio、call demo</p>
</li>
</ul>
<ul>
<li><strong>2.3.1上层脚本更新说明</strong><br>发布时间：2020/05/04 22:48<br>修改记录：<br>  一、lib脚本修改<br>  lib脚本版本号：2.3.1<br>  (1)audio.lua：修正“TTS速度设置错误”的问题<br>  (2)record.lua：新增录音功能<br>  二、demo脚本修改<br>  (1)alarm：新增闹钟demo<br>  (2)record：新增录音demo</li>
</ul>
<ul>
<li><strong>2.3.0上层脚本更新说明</strong><br>发布时间：2020/04/23 15:03<br>修改记录：<br>  一、lib脚本修改<br>  lib脚本版本号：2.3.0<br>  (1)audio.lua：新增audio.setChannel接口，可以设置音频输出通道</li>
</ul>
<ul>
<li><strong>2.2.9上层脚本更新说明</strong><br>发布时间：2020/04/11 23:43<br>修改记录：<br>  lib脚本版本号：2.2.9<br>  (1)支持tts、call功能<br>  (2)添加GPIO ldo电压域的控制说明<br>  (3)修改开发板默认netLed的控制方式，ldo电压域的控制放到main.lua去控制，不再写在netLed.lua中去控制</li>
</ul>
<ul>
<li><strong>2.2.8上层脚本更新说明</strong><br>发布时间：2020/04/09 23:37<br>修改记录：<br>  lib脚本版本号：2.2.8<br>  (1)支持ui、audio、qrcode功能<br>  (2)修正“部分sim卡无法触发上网逻辑”的问题<br>  (3)修正“网络指示灯不亮”的问题</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/11/1334/" data-id="ckkfmdg99000cvkcgem1ado59" data-title="合宙Air720U&amp;724U&amp;722U Lua 固件更新说明" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1277" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/06/1277/" class="article-date">
  <time class="dt-published" datetime="2020-08-06T02:47:38.000Z" itemprop="datePublished">2020-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/06/1277/">docker远程访问和证书配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#dockerd远程访问和证书配置</p>
<p>systemd现在广泛被使用，假设docker服务是通过systemd启动的。</p>
<p>docker的systemd配置在：</p>
<pre><code>/lib/systemd/system/docker.socket
/lib/systemd/system/docker.service
</code></pre>
<ol>
<li><p>把<code>ExecStart=/usr/bin/dockerd</code>这一行替换为<code>ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://xxx.xxx.xxx:xxx</code><br>填上自己的ip和端口</p>
</li>
<li><p>sytemd重启docker（注意容器都会停止）</p>
<pre><code>sudo systemctl daemon-reload
sudo systemctl restart docker.service
</code></pre>
</li>
</ol>
<p>这样已经可以通过ip端口来远程访问了<br>例如</p>
<pre><code>docker -H tcp://xxx.xxx.xxx:xxx images
curl http://xxx.xxx.xxx:xxx/version
</code></pre>
<hr>
<h3 id="裸连不安全。需要验证客户端。"><a href="#裸连不安全。需要验证客户端。" class="headerlink" title="裸连不安全。需要验证客户端。"></a>裸连不安全。需要验证客户端。</h3><p>参考官网<a target="_blank" rel="noopener" href="https://docs.docker.com/engine/security/https/">https://docs.docker.com/engine/security/https/</a></p>
<p>生成证书和key的步骤：</p>
<ol>
<li><p><code>openssl genrsa -aes256 -out ca-key.pem 4096</code><br>生成ca的key。输入密码。得到ca-key.pem</p>
</li>
<li><p><code>openssl req -new -x509 -days 2000 -key ca-key.pem -sha256 -out ca.pem -subj &quot;/CN=hz&quot;</code><br>创建自签署ca证书。输入刚才的密码。得到ca.pem</p>
</li>
<li><p>创建server用的cert和key<br>(如果只需认证客户端的合法性，可以跳过server端cert和key的创建，从8开始)<br><code>openssl genrsa -out server-key.pem 4096</code><br>生成server的key</p>
</li>
<li><p><code>openssl req -sha256 -new -key server-key.pem -out server.csr -subj &quot;/CN=hz&quot;</code><br>创建证书签名请求文件csr。得到server.csr</p>
</li>
<li><p><code>echo subjectAltName = IP:0.0.0.0 &gt; extfile.cnf</code></p>
</li>
<li><p><code>echo extendedKeyUsage = serverAuth &gt;&gt; extfile.cnf</code><br>Set the Docker daemon key’s extended usage attributes to be used only for server authentication:</p>
</li>
<li><p><code>openssl x509 -req -days 2000 -sha256 -in server.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out server-cert.pem -extfile extfile.cnf</code><br>签名。输密码。得到server-cert.pem</p>
</li>
<li><p>创建client用的cert和key（请求时交给服务器进行验证。只有服务器签名的合法证书才能通过验证）<br><code>openssl genrsa -out client-key.pem 4096</code></p>
</li>
<li><p><code>openssl req -subj &#39;/CN=hz&#39; -new -key client-key.pem -out client.csr</code></p>
</li>
<li><p><code>echo subjectAltName = IP:0.0.0.0 &gt; extfile-client.cnf</code></p>
</li>
<li><p><code>echo extendedKeyUsage = clientAuth &gt; extfile-client.cnf</code></p>
</li>
<li><p><code>openssl x509 -req -days 2000 -sha256 -in client.csr -CA ca.pem -CAkey ca-key.pem -CAcreateserial -out client-cert.pem -extfile extfile-client.cnf</code></p>
</li>
<li><p>修改systemd配置并重启docker<br>配置生成的ca、客户端的cert和key<br><code>ExecStart=/usr/bin/dockerd -H fd:// --containerd=/run/containerd/containerd.sock -H tcp://xxx.xxx.xxx:xxx --tlsverify --tlscacert=/xxx/docker_cert/ca.pem --tlscert=/xxx/docker_cert/client-cert.pem --tlskey=/xxx/docker_cert/client-key.pem</code></p>
</li>
</ol>
<hr>
<p>开启–tls后</p>
<pre><code>docker -H tcp://xxx.xxx.xxx:xxx images
</code></pre>
<p>已无法连接，必须要传证书进行验证：</p>
<pre><code>docker --tlsverify --tlscacert=./ca.pem --tlscert=./client-cert.pem --tlskey=./client-key.pem -H tcp://xxx.xxx.xxx:xxx images
</code></pre>
<p>http要改为https并传证书：</p>
<p>例如：python的requests</p>
<pre><code>requests.get(dockerd.address + &#39;:%d/info&#39; % int(dockerd.port), verify = False, cert = (config.DOCKER_CERT_PATH + dockerd.client_cert, config.DOCKER_CERT_PATH + dockerd.client_key))
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/06/1277/" data-id="ckkfmdg99000bvkcg290xanhm" data-title="docker远程访问和证书配置" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1265" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/04/1265/" class="article-date">
  <time class="dt-published" datetime="2020-08-04T13:56:23.000Z" itemprop="datePublished">2020-08-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/04/1265/">15、RDA8910(4GCAT1)CSDK二次开发：通过OneWire驱动库获取DS18B20/DHT11的数据</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<p>&emsp;&emsp;本系列博客所述资料<code>均来自合宙官方</code>，并不是本人原创（只有博客是自己写的），csdk只是得到了<code>口头的允许公开授权</code>。出于热心，本人将自己的所学笔记整理并推出相对应的使用教程，方面其他人学习。为国内的物联网事业发展尽自己的一份绵薄之力，<code>没有为自己谋取私利的想法</code>。若出现侵权现象，请告知本人，本人会立即停止更新，并删除相应的文章和代码。</p>
<p>&emsp;&emsp;本系列博客基于紫光展锐的<code>RDA8910  LTE Cat 1</code> bis芯片平台开发。理论上适用于合宙的Air720U、Air724U、广和通L610以及安信可的cat-01模块。</p>
<p>&emsp;&emsp;各个厂家的部分配置文件可能不一样，也许会导致设备出现奇怪的问题，其他的模块我也不确定能不能用，自行测试。但是有一点<code>编译下载和监视流程基本一样</code>，可供参考。</p>
<p>&emsp;&emsp;先不管支不支持，如果你用的模块是是紫光展锐的RDA8910，那都不妨一试，也许会有意外收获（<code>也有可能变砖，慎重！！！</code>）。</p>
<p>&emsp;&emsp;我使用的是<code>Air724UG</code>开发板，如果在其他模块上不能用，那也不要强怼，也许是开发包不兼容吧。这里的代码是没有问题的。例程仅供参考！</p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>&emsp;&emsp;大概在一个月之前吧，群里就有小伙伴问：“咱们的CAT1能不能读取到单总线数据啊？比如说DS18B20这些传感器”。当时我就说这些传感器对时序的要求比较高，都是us级别的。驱动放在lua层还真不一定行，csdk的问题应该不大。</p>
<p>&emsp;&emsp;又问：“那小哥哥什么时候安排一波呢？”</p>
<p>&emsp;&emsp;答：“别别别，我可是钢铁直男，对男的没兴趣。要不这样吧，我周末看看吧，有时间的话搞一下”<br><img src="https://img-blog.csdnimg.cn/20200804194239534.png" alt="在这里插入图片描述"><br>&emsp;&emsp;然而这一个周末看看，就鸽了将近一个月。<br><img src="https://img-blog.csdnimg.cn/20200804194615124.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;想了想就这么一直鸽下去也不是个事情。于是乎最近几天抽时间看了下，虽然中间也遇到了一点波折。但是这都不影响结果，好在是搞出来了。既然搞出来了那好东西就要和大家分享。</p>
<h1 id="二、单总线时序"><a href="#二、单总线时序" class="headerlink" title="二、单总线时序"></a>二、单总线时序</h1><p>&emsp;&emsp;虽然DS18B20和DHT11都叫做单总线通讯，但是他们的时序要求却不太一样，包括读时序的位置也不一样。不过好在它们基本的交互逻辑都是差不多的，这里就拿ds18b20的驱动时序随便讲一下。</p>
<h2 id="2-1、初始化时序"><a href="#2-1、初始化时序" class="headerlink" title="2.1、初始化时序"></a>2.1、初始化时序</h2><p>&emsp;&emsp;在初始化序列期间，总线控制器拉低总线并保持 480us 以发出（TX）一个复位脉冲，然后释放总线，进入接收状态（RX）。单总线由 5K 上拉电阻拉到高电平。当DS18B20 探测到 I/O 引脚上的上升沿后，等待 15-60us,然后发出一个由 60-240us低电平信号构成的存在脉冲。<br><img src="https://img-blog.csdnimg.cn/20200804200324467.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200804202911671.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-2、写时序"><a href="#2-2、写时序" class="headerlink" title="2.2、写时序"></a>2.2、写时序</h2><p>&emsp;&emsp;ds18b20的写时序又分为写0时序和写1时序，总线控制器通过写 1 时序写逻辑 1 到DS18B20，写 0 时序写逻辑 0 到 DS18B20。所有写时序必须最少持续 60us，包括两个写周期之间至少1us 的恢复时间。当总线控制器（单片机）把数据线从逻辑高电平拉到低电平的时候，写时序开始。</p>
<p>&emsp;&emsp;总控制器要生成一个写 0 时序，必须把数据线拉到低电平并持续保持（至少 60us）。然后释放。</p>
<p>&emsp;&emsp;总控制器要生成一个写 1时序，必须把数据线拉到低电平，然后在15us内释放总线，并持续保持（至少 60us）。然后释放。<br><img src="https://img-blog.csdnimg.cn/20200804203552685.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200804203443309.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="2-3、读时序"><a href="#2-3、读时序" class="headerlink" title="2.3、读时序"></a>2.3、读时序</h2><p>&emsp;&emsp;ds18b20的读时序又分为读0时序和读1时序，总线控制器在发出读暂存器指令[BEh]或读电源模式指令[B4H]后必须立刻开始读时序。所有读时序必须最少 60us,包括两个读周期间至少 1us 的恢复时间。当总线控制器把数据线从高电平拉到低电平时（数据线必须至少保持 1us），读时序开始。</p>
<p>&emsp;&emsp;当传输逻辑 0 结束后，总线将被释放，通过上拉电阻回到上升沿状态。从 DS18B20 输出的数据在读时序的下降沿出现后 15us 内有效。因此，总线控制器在读时序开始后必须停止把 I/O 脚驱动为低电平 15us,以读取I/O 脚状态。<br><img src="https://img-blog.csdnimg.cn/20200804203957992.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p><img src="https://img-blog.csdnimg.cn/20200804204133850.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="三、OneWire驱动库"><a href="#三、OneWire驱动库" class="headerlink" title="三、OneWire驱动库"></a>三、OneWire驱动库</h1><p>&emsp;&emsp;学习完ds18b20的读时序后，介绍下本文开头提到的OneWire库。</p>
<p>&emsp;&emsp;在编写DS18B20和DHT11驱动后，发现类似这种的单总线传感器。都有一个共同的特点，想要完成它们的读取过程，那就需要有us级别的延时，需要能够快速切换gpio的输入/输出状态以及读取/设置gpio的状态。单个操作都必须在极短的时间内完成。整个读取过程中除了需要操作gpio就不依赖任何其他的库函数。</p>
<h2 id="3-1、基础库"><a href="#3-1、基础库" class="headerlink" title="3.1、基础库"></a>3.1、基础库</h2><p>&emsp;&emsp;我将这些共同点整理了下，提供了OneWire库，其中包含基础库函数6个，分别是：</p>
<blockquote>
<p>/**<br> @description: 输出调试信息<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_printf</code>(fmt,…);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 设置单总线信号线为输入。默认上拉<br> *@param :pin{uint8}：要操作的引脚<br> *@return: TRUE：正确<br>&emsp;&emsp;&emsp;&emsp;FALSE：引脚不在允许范围<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_IO_IN</code>(uint8 pin);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 设置单总线信号线为输出。默认输出高定平<br> *@param :pin{uint8}：要操作的引脚<br> *@return: 无<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_IO_OUT</code>(uint8 pin);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 单总线输出高低电平<br> *@param : pin{uint8}：要操作的引脚<br>&emsp;&emsp;&emsp;&emsp;level{uint8} }：要输出的电平。0或者1<br> *@return: 无<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_DQ_OUT</code>(uint8 pin, uint8 level);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 读取单总线的高低电平信号<br> *@param : pin{uint8}：要操作的引脚<br> *@return: 0或者1<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_DQ_IN</code>(uint8 pin);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 单总线1us延时函数<br> *@param : us{uint32}：调用的次数。<br> *@return: 无<br> */</p>
</blockquote>
<ul>
<li><code>OneWire_Delay_1us</code>(volatile uint32 us);</li>
</ul>
<h2 id="3-2、扩展库"><a href="#3-2、扩展库" class="headerlink" title="3.2、扩展库"></a>3.2、扩展库</h2><p>&emsp;&emsp;然后又在RDA8910平台上，基于OneWire库开发了DS18B20的驱动以及DHT11的驱动。这两个驱动完全依赖于OneWire库函数，不依赖其他文件，整个驱动基于platform提供的6个函数制作。<br><img src="https://img-blog.csdnimg.cn/20200804210117886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;移植在不同的平台只需要修改这上图所示的六个函数，即可直接调用扩展库中提供的ds18b20和dht11的驱动。</p>
<h3 id="3-2-1、DS18B20"><a href="#3-2-1、DS18B20" class="headerlink" title="3.2.1、DS18B20"></a>3.2.1、DS18B20</h3><p>&emsp;&emsp;其中DS18B20提供了两个读取函数，分别是：</p>
<blockquote>
<p>/**<br> *@description: 从ds18b20得到温度值数字，精确到0.0625。结果被扩大10000倍<br> *@param : pin{uint8}:要操作的引脚<br>&emsp;&emsp;&emsp;&emsp;TempNum{int *}:输出温度值<br> *@return  0:正常获取<br>&emsp;&emsp;&emsp;&emsp;2:传入的pin不在允许范围<br>&emsp;&emsp;&emsp;&emsp;3:未检测到ds18b20<br> */</p>
</blockquote>
<ul>
<li>uint8 <code>DS18B20_GetTemp_Num</code>(uint8 pin, int *TempNum);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 从ds18b20得到温度值字符串<br> *@param : pin{uint8}:要操作的引脚<br>&emsp;&emsp;&emsp;&emsp;TempNum{char *}:输出温度字符串<br> *@return  0:正常获取<br>&emsp;&emsp;&emsp;&emsp;1:TempStr=NULL<br>&emsp;&emsp;&emsp;&emsp;2:传入的pin不在允许范围<br>&emsp;&emsp;&emsp;&emsp;3:未检测到ds18b20<br> */</p>
</blockquote>
<ul>
<li>uint8 <code>DS18B20_GetTemp_String</code>(uint8 pin, char *TempStr);</li>
</ul>
<h3 id="3-2-2、DHT11"><a href="#3-2-2、DHT11" class="headerlink" title="3.2.2、DHT11"></a>3.2.2、DHT11</h3><p>&emsp;&emsp;其中DHT11提供了两个读取函数，分别是：</p>
<blockquote>
<p>/**<br> *@description: 从dht11得到温/湿度值数字<br> *@param : pin{uint8}:要操作的引脚<br>&emsp;&emsp;&emsp;&emsp;HumNum{uint8 *}:输出温度值<br>&emsp;&emsp;&emsp;&emsp;TemNum{uint8 *}:输出湿度值<br> *@return  0:正常获取<br>&emsp;&emsp;&emsp;&emsp;2:传入的pin不在允许范围<br>&emsp;&emsp;&emsp;&emsp;3:未检测到dht11<br>&emsp;&emsp;&emsp;&emsp;4:数据校验错误<br> */</p>
</blockquote>
<ul>
<li>uint8 <code>DHT11_GetData_Num</code>(uint8 pin, uint8 *HumNum, uint8 *TemNum);</li>
</ul>
<blockquote>
<p>/**<br> *@description: 从dht11得到温/湿度值字符串<br> *@param : pin{uint8}:要操作的引脚，可选范围0、1、2、3、7<br>&emsp;&emsp;&emsp;&emsp;HumStr{char *}:输出温度值字符串<br>&emsp;&emsp;&emsp;&emsp;TemStr{char *}:输出湿度值字符串<br> *@return  0:正常获取<br>&emsp;&emsp;&emsp;&emsp;1:HumStr == NULL || TemStr == NULL<br>&emsp;&emsp;&emsp;&emsp;2:传入的pin不在允许范围<br>&emsp;&emsp;&emsp;&emsp;3:未检测到dht11<br>&emsp;&emsp;&emsp;&emsp;4:数据校验错误<br> */</p>
</blockquote>
<ul>
<li>uint8 <code>DHT11_GetData_String</code>(uint8 pin, char *HumStr, char *TemStr);</li>
</ul>
<p>&emsp;&emsp;主要是我手上就只有这两种传感器，只能在初始版本内置两个驱动的具体实现。有兴趣的同学可以一起来参与此仓库的贡献。</p>
<p>&emsp;&emsp;上述OneWire操作库，已经在码云开源，获取地址：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https:<span class="comment">//gitee.com/chenxiahuaxu/onewire_driver_library</span></span><br></pre></td></tr></table></figure>

<h1 id="四、测试DS18B20驱动"><a href="#四、测试DS18B20驱动" class="headerlink" title="四、测试DS18B20驱动"></a>四、测试DS18B20驱动</h1><h2 id="4-1、编写程序"><a href="#4-1、编写程序" class="headerlink" title="4.1、编写程序"></a>4.1、编写程序</h2><p>&emsp;&emsp;这一部分是本例程的核心，目的是读取DS18B20的值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ds18b20_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DS18B20_GetTemp_Num(<span class="number">7</span>, &amp;TempNum) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[ds18b20]DS18B20_GetTemp_Num : %d&quot;</span>, TempNum);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">if</span> (DS18B20_GetTemp_String(<span class="number">7</span>, &amp;TempStr[<span class="number">0</span>]) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[ds18b20]DS18B20_GetTemp_String : %s&quot;</span>, TempStr);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;这一部分是本例程的彩蛋，将读取到的值显示在OLED-SSD1306上。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">oled_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (OLED_Init() == FALSE) <span class="comment">//初始化OLED</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[oled]OLED_Init FALSE!&quot;</span>);</span><br><span class="line">            iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;LUAT CSDK&quot;</span>, <span class="number">24</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">24</span>, <span class="string">&quot;DEMO DS18B20&quot;</span>, <span class="number">16</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">40</span>, <span class="string">&quot;Tempera:&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">52</span>, <span class="string">&quot;num:&quot;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        OLED_ShowString(<span class="number">50</span>, <span class="number">40</span>, TempStr, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_ShowNum(<span class="number">50</span>, <span class="number">52</span>, TempNum, <span class="number">6</span>, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_Refresh_Gram();                  <span class="comment">//更新显示到OLED</span></span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        iot_debug_print(<span class="string">&quot;[oled]demo_oled run!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2、完整程序"><a href="#4-2、完整程序" class="headerlink" title="4.2、完整程序"></a>4.2、完整程序</h2><p>&emsp;&emsp;完整的demo在这里，可以复制直接用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***************</span></span><br><span class="line"><span class="comment">	demo_ds18b20</span></span><br><span class="line"><span class="comment">****************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_os.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;am_openat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;ds18b20.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">int</span> TempNum = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">char</span> TempStr[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">oled_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (OLED_Init() == FALSE) <span class="comment">//初始化OLED</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[oled]OLED_Init FALSE!&quot;</span>);</span><br><span class="line">            iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;LUAT CSDK&quot;</span>, <span class="number">24</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">24</span>, <span class="string">&quot;DEMO DS18B20&quot;</span>, <span class="number">16</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">40</span>, <span class="string">&quot;Tempera:&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">52</span>, <span class="string">&quot;num:&quot;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        OLED_ShowString(<span class="number">50</span>, <span class="number">40</span>, TempStr, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_ShowNum(<span class="number">50</span>, <span class="number">52</span>, TempNum, <span class="number">6</span>, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_Refresh_Gram();                  <span class="comment">//更新显示到OLED</span></span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        iot_debug_print(<span class="string">&quot;[oled]demo_oled run!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ds18b20_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DS18B20_GetTemp_Num(<span class="number">7</span>, &amp;TempNum) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[ds18b20]DS18B20_GetTemp_Num : %d&quot;</span>, TempNum);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        <span class="keyword">if</span> (DS18B20_GetTemp_String(<span class="number">7</span>, &amp;TempStr[<span class="number">0</span>]) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[ds18b20]DS18B20_GetTemp_String : %s&quot;</span>, TempStr);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">appimg_enter</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">2000</span>);</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[oled]appimg_enter&quot;</span>);</span><br><span class="line"></span><br><span class="line">    iot_os_create_task(oled_task, <span class="literal">NULL</span>, <span class="number">1024</span>, <span class="number">1</span>, OPENAT_OS_CREATE_DEFAULT, <span class="string">&quot;oled_task&quot;</span>);</span><br><span class="line">    iot_os_create_task(ds18b20_task, <span class="literal">NULL</span>, <span class="number">1024</span>, <span class="number">1</span>, OPENAT_OS_CREATE_DEFAULT, <span class="string">&quot;ds18b20_task&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">appimg_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[oled]appimg_exit&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-3、下载测试"><a href="#4-3、下载测试" class="headerlink" title="4.3、下载测试"></a>4.3、下载测试</h2><p>&emsp;&emsp;传感器信号线接在了GPIO7。可以通过程序设定。</p>
<p><img src="https://img-blog.csdnimg.cn/20200804214129720.gif" alt="在这里插入图片描述"></p>
<h1 id="五、测试DHT11驱动"><a href="#五、测试DHT11驱动" class="headerlink" title="五、测试DHT11驱动"></a>五、测试DHT11驱动</h1><h2 id="4-1、编写程序-1"><a href="#4-1、编写程序-1" class="headerlink" title="4.1、编写程序"></a>4.1、编写程序</h2><p>&emsp;&emsp;这一部分是本例程的核心，目的是读取DHT11的值。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dht11_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DHT11_GetData_String(<span class="number">7</span>, &amp;HumStr, &amp;TemStr) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[dht11]HumStr: %s,TemStr: %s&quot;</span>, HumStr, TemStr);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="4-2、完整程序-1"><a href="#4-2、完整程序-1" class="headerlink" title="4.2、完整程序"></a>4.2、完整程序</h2><p>&emsp;&emsp;完整的demo在这里，可以复制直接用。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***************</span></span><br><span class="line"><span class="comment">	demo_dht11</span></span><br><span class="line"><span class="comment">****************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_os.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;am_openat.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;oled.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;dht11.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">char</span> HumStr[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"><span class="keyword">char</span> TemStr[<span class="number">10</span>] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">oled_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (OLED_Init() == FALSE) <span class="comment">//初始化OLED</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[oled]OLED_Init FALSE!&quot;</span>);</span><br><span class="line">            iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&quot;LUAT CSDK&quot;</span>, <span class="number">24</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">24</span>, <span class="string">&quot;DEMO DHT11&quot;</span>, <span class="number">16</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">40</span>, <span class="string">&quot;Humidity:&quot;</span>, <span class="number">12</span>);</span><br><span class="line">    OLED_ShowString(<span class="number">0</span>, <span class="number">52</span>, <span class="string">&quot;Tempera:&quot;</span>, <span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">    uint8 t = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        OLED_ShowString(<span class="number">60</span>, <span class="number">40</span>, HumStr, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_ShowString(<span class="number">60</span>, <span class="number">52</span>, TemStr, <span class="number">12</span>); <span class="comment">//显示ASCII字符</span></span><br><span class="line">        OLED_Refresh_Gram();                 <span class="comment">//更新显示到OLED</span></span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">        iot_debug_print(<span class="string">&quot;[oled]demo_oled run!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">dht11_task</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (DHT11_GetData_String(<span class="number">7</span>, &amp;HumStr, &amp;TemStr) == <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            iot_debug_print(<span class="string">&quot;[dht11]HumStr: %s,TemStr: %s&quot;</span>, HumStr, TemStr);</span><br><span class="line">        &#125;</span><br><span class="line">        iot_os_sleep(<span class="number">3000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">appimg_enter</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_os_sleep(<span class="number">2000</span>);</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[oled]appimg_enter&quot;</span>);</span><br><span class="line"></span><br><span class="line">    iot_os_create_task(oled_task, <span class="literal">NULL</span>, <span class="number">1024</span>, <span class="number">1</span>, OPENAT_OS_CREATE_DEFAULT, <span class="string">&quot;oled_task&quot;</span>);</span><br><span class="line">    iot_os_create_task(dht11_task, <span class="literal">NULL</span>, <span class="number">1024</span>, <span class="number">1</span>, OPENAT_OS_CREATE_DEFAULT, <span class="string">&quot;dht11_task&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">appimg_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[oled]appimg_exit&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="4-3、下载测试-1"><a href="#4-3、下载测试-1" class="headerlink" title="4.3、下载测试"></a>4.3、下载测试</h2><p>&emsp;&emsp;传感器信号线也接在了GPIO7。可以通过程序设定。</p>
<p><img src="https://img-blog.csdnimg.cn/20200804215050781.gif" alt="在这里插入图片描述"></p>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的<code>RDA8910 CSDK二次开发入门教程</code>专题第一篇博文<code>1、RDA8910CSDK二次开发：环境搭建</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/04/1265/" data-id="ckkfmdge700c8vkcg3uqke0jt" data-title="15、RDA8910(4GCAT1)CSDK二次开发：通过OneWire驱动库获取DS18B20/DHT11的数据" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1247" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/01/1247/" class="article-date">
  <time class="dt-published" datetime="2020-08-01T13:56:53.000Z" itemprop="datePublished">2020-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/01/1247/">14、RDA8910CSDK二次开发：CSDK程序死机了怎么办？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<p>&emsp;&emsp;本系列博客所述资料<code>均来自合宙官方</code>，并不是本人原创（只有博客是自己写的），csdk只是得到了<code>口头的允许公开授权</code>。出于热心，本人将自己的所学笔记整理并推出相对应的使用教程，方面其他人学习。为国内的物联网事业发展尽自己的一份绵薄之力，<code>没有为自己谋取私利的想法</code>。若出现侵权现象，请告知本人，本人会立即停止更新，并删除相应的文章和代码。</p>
<p>&emsp;&emsp;本系列博客基于紫光展锐的<code>RDA8910  LTE Cat 1</code> bis芯片平台开发。理论上适用于合宙的Air720U、Air724U、广和通L610以及安信可的cat-01模块。</p>
<p>&emsp;&emsp;各个厂家的部分配置文件可能不一样，也许会导致设备出现奇怪的问题，其他的模块我也不确定能不能用，自行测试。但是有一点<code>编译下载和监视流程基本一样</code>，可供参考。</p>
<p>&emsp;&emsp;先不管支不支持，如果你用的模块是是紫光展锐的RDA8910，那都不妨一试，也许会有意外收获（<code>也有可能变砖，慎重！！！</code>）。</p>
<p>&emsp;&emsp;我使用的是<code>Air724UG</code>开发板，如果在其他模块上不能用，那也不要强怼，也许是开发包不兼容吧。这里的代码是没有问题的。例程仅供参考！</p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>&emsp;&emsp;前几天米总直播iic遇到了死机的问题。哎，怎么找都找不到死在哪里。俗话说的好，解决bug的办法就是删除bug，于是乎米总就开始了删代码找bug之旅。<br><img src="https://img-blog.csdnimg.cn/20200725175952607.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;直播结束后，我也想到了之前我用csdk写代码的时候。那时遇到了错误，手上又没有什么有效的调试手段。只能采用<code>printf</code>调试大法，每一行执行结束都往串口打印一个数字，这样就能看到程序死机死在了哪里，变量信息也可以使用这个办法打印出来看。这仅限于代码量少的情况，可以尝试使用这个办法调试找bug。如果代码量多，这个办法根本就行不通。</p>
<p>&emsp;&emsp;那么今天，当你看到这篇文章的时候。这个问题又将不复存在。</p>
<p><img src="https://img-blog.csdnimg.cn/20200725180356963.png" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;你猜的没错，我又带着解决办法来了，让你有办法能够轻松找到程序在什么地方发生了宕机。让你能够轻松的看到程序中的全局变量和局部变量的信息。让你找bug时不再是那么的费力！</p>
<h1 id="二、编写程序"><a href="#二、编写程序" class="headerlink" title="二、编写程序"></a>二、编写程序</h1><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/***************</span></span><br><span class="line"><span class="comment">	demo_hello_Debug</span></span><br><span class="line"><span class="comment">****************/</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_debug.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&quot;iot_os.h&quot;</span></span></span><br><span class="line"></span><br><span class="line">HANDLE demo_hello_Debug_task;</span><br><span class="line"><span class="keyword">int</span> demo_hello_Debug_num = <span class="number">0</span>;</span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">demo_hello_Debug</span><span class="params">(PVOID pParameter)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[hello]demo_hello_Debug&quot;</span>);</span><br><span class="line">    <span class="comment">//关闭看门狗，死机不会重启。默认打开</span></span><br><span class="line">    iot_debug_set_fault_mode(OPENAT_FAULT_HANG);</span><br><span class="line">    <span class="comment">//打开调试信息，默认关闭</span></span><br><span class="line">    iot_vat_send_cmd(<span class="string">&quot;AT^TRACECTRL=0,1,3\r\n&quot;</span>, <span class="keyword">sizeof</span>(<span class="string">&quot;AT^TRACECTRL=0,1,3\r\n&quot;</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">volatile</span> <span class="keyword">int</span> n = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; <span class="number">15</span>; n++)</span><br><span class="line">    &#123;</span><br><span class="line">        demo_hello_Debug_num++;</span><br><span class="line">        iot_debug_print(<span class="string">&quot;[debug]hello world %d&quot;</span>, n);</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    n++;</span><br><span class="line">    OPENAT_assert(<span class="number">0</span>, __func__, __LINE__);</span><br><span class="line">    iot_os_delete_task(demo_hello_Debug_task);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">appimg_enter</span><span class="params">(<span class="keyword">void</span> *param)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[hello]appimg_enter&quot;</span>);</span><br><span class="line"></span><br><span class="line">    demo_hello_Debug_task = iot_os_create_task(demo_hello_Debug, <span class="literal">NULL</span>, <span class="number">1024</span>, <span class="number">1</span>, OPENAT_OS_CREATE_DEFAULT, <span class="string">&quot;hello_Debug&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">appimg_exit</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    iot_debug_print(<span class="string">&quot;[hello]appimg_exit&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;看到这段代码时，是不是感觉有点眼熟。没想到它又是helloworld，上篇博客也是，这篇博客还是。我就和helloworld杠上了！<br><img src="https://img-blog.csdnimg.cn/20200725175411189.png" alt="在这里插入图片描述"><br>&emsp;&emsp;上面的代码中用到了三个陌生的函数，它们分别是：</p>
<p>&emsp;&emsp;<code>724内部自带软件看门狗，默认处于开启状态。只要程序运行异常，就会自动重启</code>。重启后异常信息就会丢失，那就没办法读取异常的堆栈信息了，所以在调试阶段推荐使用下面的命令<code>关闭软件看门狗</code>。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**设置软件异常时，设备模式</span></span><br><span class="line"><span class="comment">*@param	  mode:   OPENAT_FAULT_RESET 重启模式</span></span><br><span class="line"><span class="comment">				  OPENAT_FAULT_HANG  调试模式</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>VOID <code>iot_debug_set_fault_mode</code>(E_OPENAT_FAULT_MODE mode)</li>
</ul>
<p>&emsp;&emsp;724默认关闭调试信息输出。一般情况下，设备运行后可以在通过串口调试助手发送AT命令<code>AT^TRACECTRL=0,1,3</code>来开启调试信息，每次下载后都需要重新开启。很麻烦，所以程序调试阶段推荐使用虚拟AT通道通过软件自动发送AT命令，达到自动打开调试信息输出的功能。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**用来发送AT命令</span></span><br><span class="line"><span class="comment">*@param		cmdStr:  AT命令字符串</span></span><br><span class="line"><span class="comment">*@param   	cmdLen:  AT命令长度</span></span><br><span class="line"><span class="comment">*@return	TRUE: 成功   FALSE: 失败</span></span><br><span class="line"><span class="comment">*@note      注意，AT命令字符串cmdStr中需要包含&quot;\r\n&quot;或者&quot;\r&quot;结尾</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>BOOL <code>iot_vat_send_cmd</code>(UINT8* cmdStr, UINT16 cmdLen);</li>
</ul>
<p>&emsp;&emsp;这一句代码就是搞事情的，它唯一的就是能让你的程序死机。本例程就是利用它创造了一个死机现场，用于演示。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**assert断言</span></span><br><span class="line"><span class="comment">*@param		condition:	断言条件</span></span><br><span class="line"><span class="comment">*@param		func:	    断言函数</span></span><br><span class="line"><span class="comment">*@param		line:	    断言位置</span></span><br><span class="line"><span class="comment">*@return	TURE: 	    成功</span></span><br><span class="line"><span class="comment">*           FALSE:      失败</span></span><br><span class="line"><span class="comment">**/</span></span><br></pre></td></tr></table></figure>
<ul>
<li>VOID <code>iot_debug_assert</code>( BOOL condition, CHAR *func,UINT32 line)</li>
</ul>
<p>&emsp;&emsp;然后程序中还分别使用了一个全局变量和一个局部变量，等会死机时可以查看死机时的变量值，看看是不是符合预期。</p>
<h1 id="三、下载验证"><a href="#三、下载验证" class="headerlink" title="三、下载验证"></a>三、下载验证</h1><p>&emsp;&emsp;运行一切正常，没有问题。<br><img src="https://img-blog.csdnimg.cn/2020080120403767.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/2020080120425334.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;等等，好像觉得有什么不对，怎么打印个helloworld就没了。以前的教程到了下载验证确实就没了，但是今天才刚刚开始。<br><img src="https://img-blog.csdnimg.cn/20200801204454986.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;只要等到了上面这样两个东西，那我们今天的内容就正式开始！（没有等到继续等，大概也就15s时间）。</p>
<h1 id="四、启动调试"><a href="#四、启动调试" class="headerlink" title="四、启动调试"></a>四、启动调试</h1><h2 id="4-1、GDB读取堆栈信息"><a href="#4-1、GDB读取堆栈信息" class="headerlink" title="4.1、GDB读取堆栈信息"></a>4.1、GDB读取堆栈信息</h2><h3 id="4-1-1、点击Tools标签下面的GDB-Launcher。"><a href="#4-1-1、点击Tools标签下面的GDB-Launcher。" class="headerlink" title="4.1.1、点击Tools标签下面的GDB Launcher。"></a>4.1.1、点击<code>Tools</code>标签下面的<code>GDB Launcher</code>。</h3><p><img src="https://img-blog.csdnimg.cn/2020080120482662.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="4-1-2、在打开的小窗中选择相应的文件。"><a href="#4-1-2、在打开的小窗中选择相应的文件。" class="headerlink" title="4.1.2、在打开的小窗中选择相应的文件。"></a>4.1.2、在打开的小窗中选择相应的文件。</h3><p><img src="https://img-blog.csdnimg.cn/2020080120511991.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;ELF框内选择工程目录下<code>~\iot_sdk_4g_8910Main\hex\Air720U_CSDK_demo_Debug_map\CSDK_RDA8910.elf</code>文件不要选错了！！！</p>
<p><img src="https://img-blog.csdnimg.cn/20200801205334162.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;Mode框内选择<code>8910 AP</code>选项。然后点击Launch。<br><img src="https://img-blog.csdnimg.cn/20200801215153581.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="4-1-3、加载app的elf文件"><a href="#4-1-3、加载app的elf文件" class="headerlink" title="4.1.3、加载app的elf文件"></a>4.1.3、加载app的elf文件</h3><p>&emsp;&emsp;正常情况你会看到这么一个界面。<br><img src="https://img-blog.csdnimg.cn/20200801205807969.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;下面这几个按钮等会会用到先介绍一下。从左到右分别为：【寄存器信息】，【内<br>存信息】，【调用栈】，【查看全局变量】，【局部变量】，【不知道是什么】，【gdb控制台】。<br><img src="https://img-blog.csdnimg.cn/20200801210122442.png" alt="在这里插入图片描述"><br>&emsp;&emsp;点击一下第三个按钮看看效果。看到一个<code>OPENAT_assert</code>，而它的上面就只有几个问号。我们的程序中调用的是<code>iot_debug_assert</code>，它们都有一个关键字那就是<code>assert</code>。实际上<code>iot_debug_assert</code>调用的就是底层提供的<code>OPENAT_assert</code>接口。那为什么调试工具能找到<code>OPENAT_assert</code>而找不到<code>iot_debug_assert</code>呢。<br><img src="https://img-blog.csdnimg.cn/20200801210502622.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;上面的现象就是因为刚才加载的实际上是底层的elf文件，现在还没有加载用户编译的<code>app.elf</code>文件。想要加载用户的elf文件，只需要点击一下最后一个按钮（gdb控制台），然后在打开的窗口中输入下面这段命令<code>source D:\AirJob\RDA8910CSDK\iot_sdk_4g_8910Main\start.gdb</code>。这个命令不是固定的，需要根据你工程存放的实际位置修改。<br><img src="https://img-blog.csdnimg.cn/20200801211140202.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><code>注意</code>：输入之前先检查一下工程的根目录下是不是生成了一个<code>start.gdb</code>文件。这个文件是编译结束后<code>自动生成的</code>，需要在gdb控制台里面执行一下。<br><img src="https://img-blog.csdnimg.cn/20200801211419497.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;输入结束后控制台会答应一段乱七八糟的数据，只要找一下里面有没有<code>demo_Debug.c</code>这个字段，如果找到了那就成功一半了。<br><img src="https://img-blog.csdnimg.cn/2020080121155665.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;加载成功之后再次点击第三个按钮（需要将之前打开的Stack窗口关闭，重新打开）。这时发现之前的？？被换成了函数。中间的一个<code>demo_hello_Debug</code>就是我们刚才编写的测试任务，在左边也看到了死机位置。<br><img src="https://img-blog.csdnimg.cn/20200801211944353.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h2 id="4-2、查看变量信息"><a href="#4-2、查看变量信息" class="headerlink" title="4.2、查看变量信息"></a>4.2、查看变量信息</h2><p>&emsp;&emsp;在demo中我们写了一个<code>demo_hello_Debug_num</code>的全局变量还有一个局部变量用来测试。这里看看能不能在死机时把变量的信息读取出来。</p>
<h3 id="4-2-1、通过内存信息读取（这个方法只适用于全局变量！！！"><a href="#4-2-1、通过内存信息读取（这个方法只适用于全局变量！！！" class="headerlink" title="4.2.1、通过内存信息读取（这个方法只适用于全局变量！！！"></a>4.2.1、通过内存信息读取（<code>这个方法只适用于全局变量！！！</code></h3><p>）<br>&emsp;&emsp;打开<code>~\iot_sdk_4g_8910Main\hex\Air720U_CSDK_demo_Debug_map\app.map</code>文件，搜索<code>demo_hello_Debug_num</code>记住它前面的地址<code>0x80f00620</code>。<img src="https://img-blog.csdnimg.cn/20200801212701297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;点击第三个按钮，输入地址信息，读取<code>0x80f00620</code>为首的四个字节<code>0x0000000f</code>。<br><img src="https://img-blog.csdnimg.cn/2020080121291210.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;分析一下程序，全局变量int类型为4个字节。从0开始，在for循环内自加<code>15</code>次。退出循环，然后死机，那么<code>demo_hello_Debug_num</code>的结果为<code>15</code>，而<code>15</code>等于十六进制的<code>0x0f</code>。又因为int是四个字节，所以15应该等于<code>0x0000000f</code>，看一下是不是和上面读取到的数据一样。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> demo_hello_Debug_num = <span class="number">0</span>;</span><br><span class="line">.....</span><br><span class="line">&#123;</span><br><span class="line">.....</span><br><span class="line">    <span class="keyword">for</span> (n = <span class="number">0</span>; n &lt; <span class="number">15</span>; n++)</span><br><span class="line">    &#123;</span><br><span class="line">        demo_hello_Debug_num++;</span><br><span class="line">        iot_debug_print(<span class="string">&quot;[debug]hello world %d&quot;</span>, n);</span><br><span class="line">        iot_os_sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    n++;</span><br><span class="line">    iot_debug_assert(<span class="number">0</span>, __func__, __LINE__);</span><br><span class="line">.....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="4-2-2、通过Watch读取（局部变量也可以）"><a href="#4-2-2、通过Watch读取（局部变量也可以）" class="headerlink" title="4.2.2、通过Watch读取（局部变量也可以）"></a>4.2.2、通过Watch读取（局部变量也可以）</h3><p>&emsp;&emsp;有人讲，哎呦这好麻烦啊。还要看map里面的地址，自己去内存找。那么简单的方法来了。<br><img src="https://img-blog.csdnimg.cn/20200801213926258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>&emsp;&emsp;如上图所示，点击第4个按钮，在输入框分别输入<code>demo_hello_Debug_num</code>和<code>n</code>，最后窗口就会显示出变量的信息。<br><code>注意</code>：这里只能查看没有被编译器优化的局部变量值。如果被优化了那就看不了！定义变量时加上<code>volatile</code>关键词可防止被优化。<br><img src="https://img-blog.csdnimg.cn/2020080121430493.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="4-2-3、简单残暴直接看"><a href="#4-2-3、简单残暴直接看" class="headerlink" title="4.2.3、简单残暴直接看"></a>4.2.3、简单残暴直接看</h3><p>&emsp;&emsp;鼠标悬停在对应的变量上面稍等片刻，变量值就出来了 ̑̑ฅ( ˃̶˙ω˙˂̶ ฅ) ​​​<br><img src="https://img-blog.csdnimg.cn/20200801214810628.png" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20200801214820380.png" alt="在这里插入图片描述"></p>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的<code>RDA8910 CSDK二次开发入门教程</code>专题第一篇博文<code>1、RDA8910CSDK二次开发：环境搭建</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/01/1247/" data-id="ckkfmdg98000avkcgazs019fm" data-title="14、RDA8910CSDK二次开发：CSDK程序死机了怎么办？" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1246" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/08/01/1246/" class="article-date">
  <time class="dt-published" datetime="2020-08-01T12:24:09.000Z" itemprop="datePublished">2020-08-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/08/01/1246/">Lua版本LVGL(LittleVGL)开发介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>@[TOC]</p>
<h2 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a>一、介绍</h2><ul>
<li>LittlevGL是一个免费的开源图形库，提供了创建嵌入式GUI所需的一切，具有易于使用的图形元素、漂亮的视觉效果和低内存占用。</li>
<li>目前官方的LittleVGL只支持C语言和MicroPython两种开发语言，合宙在保留了官方接口的同时，推出了支持Lua语言的LittleVGL版本，方便开发者使用Lua语言在Air724U系列模块中开发图形界面</li>
</ul>
<h2 id="二、目的"><a href="#二、目的" class="headerlink" title="二、目的"></a>二、目的</h2><p>本文重点介绍了如何用Lua版本的LittleVGL来做UI界面开发。</p>
<h2 id="三、环境准备"><a href="#三、环境准备" class="headerlink" title="三、环境准备"></a>三、环境准备</h2><ul>
<li>1， Air724U开发板</li>
<li>2， LCD显示屏</li>
<li>3， Lua版本的LittleVGL固件</li>
<li>4， Luatools开发工具</li>
</ul>
<h2 id="四、运行官方示例"><a href="#四、运行官方示例" class="headerlink" title="四、运行官方示例"></a>四、运行官方示例</h2><p>官方固件支持图片显示和简单的button控件，没有按键和触摸屏的处理逻辑。采用定时器方式切换界面。交互逻辑用户可以通过驱动按键或者触摸屏自行添加。</p>
<ul>
<li>1, 下载固件–<a target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U">开源Lua代码地址</a></li>
</ul>
<p><strong>core</strong></p>
<blockquote>
<p>注意：选择支持蓝牙版本的core固件进行下载，core之间的差异可以参考<a target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U">开源Lua代码地址首页说明</a></p>
</blockquote>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201015170517477_core.png"></p>
<p><strong>lua demo</strong><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200807131708219_demo.png" alt="lua demo" title="lua demo"></p>
<ul>
<li>2, 显示效果<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200807131012759_lvgl.gif" alt="lvgl" title="lvgl"></li>
</ul>
<h2 id="五、控件使用"><a href="#五、控件使用" class="headerlink" title="五、控件使用"></a>五、控件使用</h2><h3 id="5-1-常用控件"><a href="#5-1-常用控件" class="headerlink" title="5.1 常用控件"></a>5.1 常用控件</h3><p>目前Lua版本的LittleVGL由于空间有限，并未支持所有控件，已支持的常用控件：<br><code>button,image button, image, label, page, container, list, checkbox, slider, window, switch, Arc, spinbox, Animations</code>，<br>各种控件的使用和参考代码可以参考官方的<a target="_blank" rel="noopener" href="https://docs.lvgl.io/v6/en/html/object-types/index.html#">控件介绍文档。</a></p>
<h3 id="5-2-利用控件搭建窗口"><a href="#5-2-利用控件搭建窗口" class="headerlink" title="5.2 利用控件搭建窗口"></a>5.2 利用控件搭建窗口</h3><p>所有的窗口都是通过控件组成的，这里涉及到如下信息：</p>
<ul>
<li>1, 控件</li>
</ul>
<p>控件是窗口的基本组成单元，所以在创建窗口的时候需要确定使用哪些控件。所有控件都是基于lv中的基础类<code>lv_obj</code>派生而来，所以<code>lv_obj</code>中的所有接口和方法都可以在各个基本控件中使用</p>
<ul>
<li>2, 位置</li>
</ul>
<p>确定好控件后，就需要确认控件在窗口中的具体位置，位置可以通过如下函数来设置</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lvgl.obj_set_x</span><br><span class="line">lvgl.obj_set_y</span><br><span class="line">或者</span><br><span class="line">lvgl.obj_set_pos</span><br></pre></td></tr></table></figure>
<ul>
<li>3, 样式</li>
</ul>
<p>样式属性决定了对象的外观形象，但是样式又相对来说是比较麻烦的，因为我们描绘一个对象的外观的维度是非常多的，比如我们可以设置对象的背景，文本样式，填充样式，线条样式等等，不过我们刚开始学习自带的控件样式就足够我们使用了.</p>
<h3 id="5-3-控件对用事件处理"><a href="#5-3-控件对用事件处理" class="headerlink" title="5.3 控件对用事件处理"></a>5.3 控件对用事件处理</h3><p>在窗口中组织好控件后，据需要对具体的业务逻辑进行处理。最典型的就是按钮事件，按钮按下后需要启动新的逻辑，画新的窗口或者后台进行相应的业务处理。<br>一般控件事件可以通过<code>lv.obj_set_event_cb</code>函数来设置相应事件触发的回调函数</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">my_event_cb</span><span class="params">(obj, event)</span></span></span><br><span class="line">    <span class="keyword">if</span> event == lvgl.EVENT_PRESSED <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Pressed\n&quot;</span>);</span><br><span class="line">    <span class="keyword">elseif</span> event == lvgl.EVENT_SHORT_CLICKED <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Short clicked\n&quot;</span>)</span><br><span class="line">    <span class="keyword">elseif</span> event == lvgl.EVENT_CLICKED <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Clicked\n&quot;</span>)</span><br><span class="line">    <span class="keyword">elseif</span> event == lvgl.EVENT_LONG_PRESSED <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Long press\n&quot;</span>)</span><br><span class="line">    <span class="keyword">elseif</span> event == lvgl.EVENT_RELEASED <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Released\n&quot;</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">btn = lv.btn_create(lv.scr_act(), NULL);</span><br><span class="line">lv_obj_set_event_cb(btn, my_event_cb);   /*Assign an event callback*/</span><br></pre></td></tr></table></figure>
<h2 id="六、LittleVGL编程"><a href="#六、LittleVGL编程" class="headerlink" title="六、LittleVGL编程"></a>六、LittleVGL编程</h2><h3 id="6-1-函数接口介绍"><a href="#6-1-函数接口介绍" class="headerlink" title="6.1 函数接口介绍"></a>6.1 函数接口介绍</h3><p>lua版本的littlevgl继承了C语言版本的大部分接口，既能满足嵌入式UI界面开发，又能减少内存使用，详细的接口介绍可以参考<a target="_blank" rel="noopener" href="https://docs.lvgl.io/v6/en/html/overview/index.html">《官方文档API部分》</a>，中文翻译版本<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201230172710111_LVGL%E4%B8%AD%E6%96%87%E6%89%8B%E5%86%8C.pdf">LVGL中文手册.pdf</a>，只要将其中的<code>lv_或者LV_开头</code>去掉，换成<code>lvgl.开头</code>就可以直接使用，例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;button创建c接口</span><br><span class="line">lv_obj_t *lv_btn_create(lv_obj_t *par, constlv_obj_t *copy)</span><br><span class="line">&#x2F;&#x2F;button创建Lua接口</span><br><span class="line">lv_obj_t lvgl.btn_create(par, copy)</span><br></pre></td></tr></table></figure>
<p>以其中按钮创建为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;C语言</span><br><span class="line">void lv_ex_btn_1(void)</span><br><span class="line">&#123;</span><br><span class="line">    lv_obj_t * label;</span><br><span class="line"></span><br><span class="line">    lv_obj_t * btn1 &#x3D; lv_btn_create(lv_scr_act(), NULL);</span><br><span class="line">    lv_obj_set_event_cb(btn1, event_handler);</span><br><span class="line">    lv_obj_align(btn1, NULL, LV_ALIGN_CENTER, 0, -40);</span><br><span class="line"></span><br><span class="line">    label &#x3D; lv_label_create(btn1, NULL);</span><br><span class="line">    lv_label_set_text(label, &quot;Button&quot;);</span><br><span class="line"></span><br><span class="line">    lv_obj_t * btn2 &#x3D; lv_btn_create(lv_scr_act(), NULL);</span><br><span class="line">    lv_obj_set_event_cb(btn2, event_handler);</span><br><span class="line">    lv_obj_align(btn2, NULL, LV_ALIGN_CENTER, 0, 40);</span><br><span class="line">    lv_btn_set_toggle(btn2, true);</span><br><span class="line">    lv_btn_toggle(btn2);</span><br><span class="line">    lv_btn_set_fit2(btn2, LV_FIT_NONE, LV_FIT_TIGHT);</span><br><span class="line"></span><br><span class="line">    label &#x3D; lv_label_create(btn2, NULL);</span><br><span class="line">    lv_label_set_text(label, &quot;Toggled&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">--Lua语言</span><br><span class="line">function lv_ex_btn_1()</span><br><span class="line">    act_src &#x3D; lvgl.scr_act()</span><br><span class="line">    btn1 &#x3D; lv.btn_create(act_src, nil)</span><br><span class="line">    lvgl.obj_set_event_cb(btn1, event_handler)</span><br><span class="line">    lvgl.obj_align(btn1, nil, LVGL.ALIGN_CENTER, 0, -40)</span><br><span class="line"></span><br><span class="line">    label &#x3D; lvgl.label_create(btn1, nil)</span><br><span class="line">    lvgl.label_set_text(label, &quot;Button&quot;)</span><br><span class="line"></span><br><span class="line">    btn2 &#x3D; lvgl.btn_create(act_src, nil)</span><br><span class="line">    lvgl.obj_set_event_cb(btn2, event_handler)</span><br><span class="line">    lvgl.obj_align(btn2, nil, lvgl.ALIGN_CENTER, 0, 40)</span><br><span class="line">    lvgl.btn_set_toggle(btn2, true)</span><br><span class="line">    lvgl.btn_toggle(btn2)</span><br><span class="line">    lvgl.btn_set_fit2(btn2, lvgl.FIT_NONE, lvgl.FIT_TIGHT)</span><br><span class="line"></span><br><span class="line">    label &#x3D; lvgl.label_create(btn2, nil)</span><br><span class="line">    lvgl.label_set_text(label, &quot;Toggled&quot;)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h3 id="6-2-替换字体"><a href="#6-2-替换字体" class="headerlink" title="6.2 替换字体"></a>6.2 替换字体</h3><p><em>待完善</em></p>
<h3 id="6-3-添加按键处理"><a href="#6-3-添加按键处理" class="headerlink" title="6.3 添加按键处理"></a>6.3 添加按键处理</h3><p>littleVGL支持的事件由以下几种：</p>
<ul>
<li>1, 控件事件</li>
</ul>
<p>控件按下、控件拖拽、控件值改变等，这些控件时间可以通过<code>lvgl.obj_set_event_cb</code>函数设置回调函数来捕获这类事件。</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>事件功能</th>
</tr>
</thead>
<tbody><tr>
<td>lvgl.EVENT_PRESSED</td>
<td>对象已被按下</td>
</tr>
<tr>
<td>lvgl.EVENT_LONG_PRESSED</td>
<td>对象长按后发布该事件</td>
</tr>
<tr>
<td>lvgl.EVENT_CLICKED</td>
<td>对象被按下（不管是否长按）</td>
</tr>
<tr>
<td>lvgl.EVENT_RELEASED</td>
<td>对象按下后被抬起</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<p>其他事件也可以通过<a target="_blank" rel="noopener" href="https://docs.lvgl.io/v6/en/html/overview/event.html">《官方文档event部分》</a></p>
<ul>
<li>2, 输入事件</li>
</ul>
<p>这类事件是通过键盘、按钮、触控笔等触发。</p>
<table>
<thead>
<tr>
<th>事件名</th>
<th>事件功能</th>
</tr>
</thead>
<tbody><tr>
<td>lvgl.EVENT_DRAG_BEGIN</td>
<td>开始拖拽</td>
</tr>
<tr>
<td>lvgl.EVENT_DRAG_END</td>
<td>对象长按后发布该事件</td>
</tr>
<tr>
<td>lvgl.EVENT_DRAG_THROW_BEGIN</td>
<td>对象被按下（不管是否长按）</td>
</tr>
<tr>
<td>lvgl.EVENT_KEY</td>
<td>对象按下后被抬起</td>
</tr>
<tr>
<td>…</td>
<td>…</td>
</tr>
</tbody></table>
<h3 id="6-4-触摸屏处理"><a href="#6-4-触摸屏处理" class="headerlink" title="6.4 触摸屏处理"></a>6.4 触摸屏处理</h3><p><em>待完善</em></p>
<h2 id="七、代码例程"><a href="#七、代码例程" class="headerlink" title="七、代码例程"></a>七、代码例程</h2><p>利用Lua Littlevgl实现的例程代码可以通过<a target="_blank" rel="noopener" href="https://gitee.com/openLuat/Luat_Lua_Air724U">合宙码云开源平台–Luat_Lua_Air724U</a>获取。<br>完整的<code>demo\lvgl</code>完成了lvgl支持的所有常用控件的列举、通过窗口切换来完成展示。具体代码和效果如下：</p>
<blockquote>
<p>注意：因为下方图片通过直接dump内存来显示的，经过工具转换后颜色显示不正常。正常颜色以实际显示效果为准！！！！</p>
</blockquote>
<h3 id="7-1-image控件"><a href="#7-1-image控件" class="headerlink" title="7.1 image控件"></a>7.1 image控件</h3><p>image空间主要用来存放已经导入lua的图片资源文件，对应代码在<code>demo\lvgl\widget.lua</code>文件</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905193837165_iamge.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">local</span> <span class="function"><span class="keyword">function</span> <span class="title">empty</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--创建容器（非必需）</span></span><br><span class="line">	c = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">	<span class="comment">--创建image控件</span></span><br><span class="line">	img = lvgl.img_create(c, <span class="literal">nil</span>)</span><br><span class="line">	<span class="comment">--设置image文件</span></span><br><span class="line">	lvgl.img_set_src(img, <span class="string">&quot;/lua/logo.png&quot;</span>)</span><br><span class="line">	<span class="comment">--设置显示位置</span></span><br><span class="line">	lvgl.obj_align(img, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	<span class="comment">--显示容器</span></span><br><span class="line">	lvgl.disp_load_scr(c)</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>显示效果如下：</p>
<h3 id="7-2-Canvas控件"><a href="#7-2-Canvas控件" class="headerlink" title="7.2 Canvas控件"></a>7.2 Canvas控件</h3><p>Canvas（画布）控件类似于image控件，用户可以在这个控件上画任何内容、包括绘制图片、绘制线条、绘制文字等。lua中用该控件显示了二维码。</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905193901278_qr.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">    <span class="comment">--创建容器（非必需）</span></span><br><span class="line">    scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    <span class="comment">--创建画布控件</span></span><br><span class="line">    cv = lvgl.canvas_create(scr, <span class="literal">nil</span>)</span><br><span class="line">	lvgl.canvas_set_buffer(cv, <span class="number">100</span>, <span class="number">100</span>)</span><br><span class="line">    lvgl.obj_align(cv, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    layer_id = lvgl.canvas_to_disp_layer(cv)</span><br><span class="line">    <span class="comment">--设置当前画布的图层</span></span><br><span class="line">    disp.setactlayer(layer_id)</span><br><span class="line">    <span class="comment">--根据数据生成二维码</span></span><br><span class="line">    width, data = qrencode.encode(<span class="string">&#x27;http://www.openluat.com&#x27;</span>)</span><br><span class="line">    l_w, l_h = disp.getlayerinfo()</span><br><span class="line">    displayWidth = <span class="number">100</span></span><br><span class="line">    <span class="comment">--设置二维码显示位置</span></span><br><span class="line">    disp.putqrcode(data, width, displayWidth, (l_w-displayWidth)/<span class="number">2</span>, (l_h-displayWidth)/<span class="number">2</span>)</span><br><span class="line">    <span class="comment">--显示画布图层</span></span><br><span class="line">    disp.update()</span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="7-3-button控件"><a href="#7-3-button控件" class="headerlink" title="7.3 button控件"></a>7.3 button控件</h3><p>button控件比较好理解，可以相应用户在屏幕上的按下操作，并做出相应动作</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905193917552_button.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">    scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    style = lvgl.style_t()</span><br><span class="line">    lvgl.style_copy(style, lvgl.style_plain)</span><br><span class="line">    style.line.color = lvgl.color_hex(<span class="number">0x800000</span>)</span><br><span class="line">    style.line.width = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    btn = lvgl.btn_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    btn_label = lvgl.label_create(btn, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.label_set_text(btn_label, <span class="string">&quot;按钮&quot;</span>)</span><br><span class="line">    lvgl.obj_align(btn, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">40</span>)</span><br><span class="line">    lvgl.obj_set_size(btn, <span class="number">60</span>, <span class="number">60</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-4-Arc控件（加载器）"><a href="#7-4-Arc控件（加载器）" class="headerlink" title="7.4 Arc控件（加载器）"></a>7.4 Arc控件（加载器）</h3><p>加载器用一个圆圈的来表示一个任务的处理进程，处理完成后圆圈便完整显示出来<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905193929280_acr.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">    scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    style = lvgl.style_t()</span><br><span class="line">    lvgl.style_copy(style, lvgl.style_plain)</span><br><span class="line">    style.line.color = lvgl.color_hex(<span class="number">0x800000</span>)</span><br><span class="line">    style.line.width = <span class="number">4</span></span><br><span class="line"></span><br><span class="line">    arc = lvgl.arc_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.arc_set_style(arc, lvgl.ARC_STYLE_MAIN, style)</span><br><span class="line">    lvgl.arc_set_angles(arc, <span class="number">180</span>, <span class="number">180</span>)</span><br><span class="line">    lvgl.obj_set_size(arc, <span class="number">40</span>, <span class="number">40</span>)</span><br><span class="line">    lvgl.obj_align(arc, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">-30</span>, <span class="number">-30</span>)</span><br><span class="line">    arc_label = lvgl.label_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.label_set_text(arc_label, <span class="string">&quot;加载器&quot;</span>)</span><br><span class="line">    lvgl.obj_align(arc_label, arc, lvgl.ALIGN_OUT_RIGHT_MID, <span class="number">4</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">    sys.timerLoopStart(arc_loader, <span class="number">100</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-5-page控件"><a href="#7-5-page控件" class="headerlink" title="7.5 page控件"></a>7.5 page控件</h3><p>page控件本身是一个容器，可以设置这个容器的大小，容器内部也可以放置其他的子控件。并且随着page的增大减小，page根据里面的内容来决定是否可以滑动显示</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905193952368_label.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">	black = lvgl.color_make(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">	white = lvgl.color_make(<span class="number">0xff</span>, <span class="number">0xff</span>, <span class="number">0xff</span>)</span><br><span class="line">    scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    style_sb = lvgl.style_t()</span><br><span class="line">    style_sb.body.main_color = black</span><br><span class="line">    style_sb.body.grad_color = black</span><br><span class="line">    style_sb.body.border.color = white</span><br><span class="line">    style_sb.body.border.width = <span class="number">1</span></span><br><span class="line">    style_sb.body.border.opa = lvgl.OPA_70</span><br><span class="line">    style_sb.body.radius = lvgl.RADIUS_CIRCLE</span><br><span class="line">    style_sb.body.opa = lvgl.OPA_60</span><br><span class="line">    style_sb.body.padding.right = <span class="number">3</span></span><br><span class="line">    style_sb.body.padding.bottom = <span class="number">3</span></span><br><span class="line">    style_sb.body.padding.inner = <span class="number">8</span></span><br><span class="line"></span><br><span class="line">    page = lvgl.page_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.obj_set_size(page, <span class="number">100</span>, <span class="number">150</span>)</span><br><span class="line">    lvgl.obj_align(page, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    lvgl.page_set_style(page, lvgl.PAGE_STYLE_SB, style_sb)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-6-label控件"><a href="#7-6-label控件" class="headerlink" title="7.6 label控件"></a>7.6 label控件</h3><p>标签控件一般用来显示一段文字，也可以显示多行文字<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905194004081_label.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">    ...</span><br><span class="line">    label = lvgl.label_create(page, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.label_set_long_mode(label, lvgl.LABEL_LONG_BREAK)</span><br><span class="line">    lvgl.obj_set_width(label, lvgl.page_get_fit_width(page))</span><br><span class="line">    lvgl.label_set_recolor(label, <span class="literal">true</span>)</span><br><span class="line">    lvgl.label_set_text(label, <span class="string">[[</span></span><br><span class="line"><span class="string">    	Air722UG</span></span><br><span class="line"><span class="string">    	Air724UG</span></span><br><span class="line"><span class="string">    	行1</span></span><br><span class="line"><span class="string">    	行2</span></span><br><span class="line"><span class="string">    	行3]]</span>)</span><br><span class="line">    <span class="comment">-- lvgl.disp_load_scr(scr)</span></span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h3 id="7-7-Slider控件"><a href="#7-7-Slider控件" class="headerlink" title="7.7 Slider控件"></a>7.7 Slider控件</h3><p>滑动条类似进度条，但本身滑动条上有一个圈可以根据需要进行拖动。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905194015399_sli.png"></p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">    scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">    style_bg = lvgl.style_t()</span><br><span class="line">    style_indic = lvgl.style_t()</span><br><span class="line">    style_knob = lvgl.style_t()</span><br><span class="line"></span><br><span class="line">    lvgl.style_copy(style_bg, lvgl.style_pretty)</span><br><span class="line">    style_bg.body.main_color = lvgl.color_hex(<span class="number">0x00ff00</span>)</span><br><span class="line">    style_bg.body.grad_color = lvgl.color_hex(<span class="number">0x000080</span>)</span><br><span class="line">    style_bg.body.radius = lvgl.RADIUS_CIRCLE</span><br><span class="line">    style_bg.body.border.color = lvgl.color_hex(<span class="number">0xffffff</span>)</span><br><span class="line"></span><br><span class="line">    lvgl.style_copy(style_indic, lvgl.style_pretty_color)</span><br><span class="line">    style_indic.body.radius = lvgl.RADIUS_CIRCLE</span><br><span class="line">    style_indic.body.shadow.width = <span class="number">8</span></span><br><span class="line">    style_indic.body.shadow.color = style_indic.body.main_color</span><br><span class="line">    style_indic.body.padding.left = <span class="number">3</span></span><br><span class="line">    style_indic.body.padding.right = <span class="number">3</span></span><br><span class="line">    style_indic.body.padding.top = <span class="number">3</span></span><br><span class="line">    style_indic.body.padding.bottom = <span class="number">3</span></span><br><span class="line"></span><br><span class="line">    lvgl.style_copy(style_knob, lvgl.style_pretty)</span><br><span class="line">    style_knob.body.radius = lvgl.RADIUS_CIRCLE</span><br><span class="line">    style_knob.body.opa = lvgl.OPA_70</span><br><span class="line">    style_knob.body.padding.top = <span class="number">10</span></span><br><span class="line">    style_knob.body.padding.bottom = <span class="number">10</span></span><br><span class="line">    <span class="comment">--创建滑动条</span></span><br><span class="line">    slider = lvgl.slider_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.obj_set_size(slider, <span class="number">100</span>, <span class="number">20</span>)</span><br><span class="line">    lvgl.slider_set_style(slider, lvgl.SLIDER_STYLE_BG, style_bg)</span><br><span class="line">    lvgl.slider_set_style(slider, lvgl.SLIDER_STYLE_INDIC, style_indic)</span><br><span class="line">    lvgl.slider_set_style(slider, lvgl.SLIDER_STYLE_KNOB, style_knob)</span><br><span class="line">    lvgl.obj_align(slider, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="comment">-- lvgl.disp_load_scr(scr)</span></span><br><span class="line"></span><br><span class="line">    label = lvgl.label_create(scr, <span class="literal">nil</span>)</span><br><span class="line">    lvgl.label_set_text(label, <span class="string">&quot;滑动条&quot;</span>)</span><br><span class="line">    lvgl.obj_align(label, slider, lvgl.ALIGN_OUT_BOTTOM_MID, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> scr</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<h3 id="7-8-switch控件"><a href="#7-8-switch控件" class="headerlink" title="7.8 switch控件"></a>7.8 switch控件</h3><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200905194027548_switch.png"><br>开关控件用来表示业务的状态开或者关。</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span><span class="params">()</span></span></span><br><span class="line">	scr = lvgl.cont_create(<span class="literal">nil</span>, <span class="literal">nil</span>)</span><br><span class="line">	...</span><br><span class="line">	sw = lvgl.sw_create(scr, <span class="literal">nil</span>)</span><br><span class="line">	lvgl.obj_align(sw, <span class="literal">nil</span>, lvgl.ALIGN_CENTER, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">	lvgl.sw_set_style(sw, lvgl.SW_STYLE_BG, bg_style)</span><br><span class="line">	lvgl.sw_set_style(sw, lvgl.SW_STYLE_INDIC, indic_style)</span><br><span class="line">	lvgl.sw_set_style(sw, lvgl.SW_STYLE_KNOB_ON, knob_on_style)</span><br><span class="line">	lvgl.sw_set_style(sw, lvgl.SW_STYLE_KNOB_OFF, knob_off_style)</span><br><span class="line"></span><br><span class="line">	label = lvgl.label_create(scr, <span class="literal">nil</span>)</span><br><span class="line">	lvgl.label_set_text(label, <span class="string">&quot;开关&quot;</span>)</span><br><span class="line">	lvgl.obj_align(label, sw, lvgl.ALIGN_OUT_BOTTOM_MID, <span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">	sys.timerStart(sw_toggle, <span class="number">1000</span>, <span class="literal">true</span>)</span><br><span class="line">	<span class="keyword">return</span> scr</span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/08/01/1246/" data-id="ckkfmdg970009vkcg1r9uaf2u" data-title="Lua版本LVGL(LittleVGL)开发介绍" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/17/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/16/">16</a><a class="page-number" href="/page/17/">17</a><span class="page-number current">18</span><a class="page-number" href="/page/19/">19</a><a class="page-number" href="/page/20/">20</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/19/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>