<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/27/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-706" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/05/706/" class="article-date">
  <time class="dt-published" datetime="2020-03-05T06:04:36.000Z" itemprop="datePublished">2020-03-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/05/706/">7、合宙Air模块Luat开发：定时器的使用方法</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<blockquote>
<p>本系列博客，理论上适用于合宙的Air202、Air268、Air720x、Air720S以及最近发布的Air720U（我还没拿到样机，应该也能支持）。</p>
</blockquote>
<blockquote>
<p>先不管支不支持，如果你用的是合宙的模块，那都不妨一试，也许会有意外收获<br>我使用的是Air720SL模块，如果在其他模块上不能用，那就是底层core固件暂时还没有支持，这里的代码是没有问题的。例程仅供参考！</p>
</blockquote>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>一日不见如隔三秋，距离发布上篇博客<code>又是一种新的外设之ADC模数转换，现在我们可以采集模拟量数据了</code>已然过去了半个月，最近事情比较多，没有时间写博客，今天抽出一点时间写一篇有关Air720SL定时器的使用方法</p>
</blockquote>
<ul>
<li>那么什么是定时器呢？</li>
</ul>
<blockquote>
<p>定时器通俗的讲就相当于一个闹钟。<br>我们的手机里面都有闹钟，每天早上负责叫醒我们上班不要迟到。我们只要在手机里面设置好时间，然后可以按需选择每天都响，或者选择只响一次。作用是打断正在做的事（睡觉）。<br><img src="https://img-blog.csdnimg.cn/20200305135611222.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>在单片机系统中也是有定时器的。<br>而 定时器又分为两种，分别是硬件定时器和软件定时器<br>不管是51系列、stm32系列、avr系列、亦或是其他的单片机，它们在裸机编程上都是拥有硬件定时器的，一般硬件定时器数量有几个到十几个不等，占用的是硬件资源，</p>
</blockquote>
<ul>
<li> 硬件定时器：一般硬件定时器集成在CPU的内部，有的可以使用外置的硬件定时器芯片，其使用的时基是系统内部的高速时钟源经过分频得到的，高速时钟源又是由外部晶振倍频得到，精度非常高，但是依赖硬件，能使用的数量有限</li>
</ul>
<blockquote>
<p>如果涉及到了操作系统编程，软件定时器那就必不可少。</p>
</blockquote>
<ul>
<li>软件定时器：一般软件定时器都是利用的是操作系统的延时阻塞性，在定时器启动和触发时记录下当前的系统时间，每隔一个时间片去查询下有没有到指定的定时时间，有的话就触发软件回调，精度相对硬件定时器要差得多，理论上是没有使用数量限制的，内存有多大，定时器就可以有多少</li>
</ul>
<blockquote>
<p>我翻过Air720SL的硬件手册和API手册好像是没有看到有关硬件定时器的说明。<code>我没看到不代表没有，只是我不知道</code>，这里我就不多说了，本片博客主要是讲Air720SL模组Luat二次开发的软件定时器怎么使用</p>
</blockquote>
<h1 id="二、了解软件API"><a href="#二、了解软件API" class="headerlink" title="二、了解软件API"></a>二、了解软件API</h1><blockquote>
<p>Luat官方给出的定时器相关API是包含在sys驱动库文件下的。也就是说想要使用软件定时器那就必须要先<code>require &quot;sys&quot;</code>。</p>
</blockquote>
<blockquote>
<p>在4G模块上只能选择LuaTask框架<br><img src="https://img-blog.csdnimg.cn/2020030513125958.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>但是在2G模块上，有另外一个选择，官方推荐的是使用LuaTask。如果用户使用的是第一版旧版本驱动库，是不能使用本篇博客所说的软件定时器的<br><img src="https://img-blog.csdnimg.cn/20200305131225688.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>接下来我会依次对Luat的软件定时器库做相应的讲解</p>
</blockquote>
<ul>
<li> <code>sys.timerStart(timer0_Task, 15000)</code>  –开启一个定时器，这个定时器只会触发一次，分别传入定时回调函数和定时时间，就可以启用定时器</li>
<li><code>time1 = sys.timerLoopStart(timer_Loop_Task, 2000)</code>  –开启一个循环定时器，开启成功会返回定时器句柄，可用于关闭定时器</li>
<li><code>sys.timerStop(time1)</code>–使用time1的ID关闭time1，关闭某一个定时器</li>
<li><code>sys.timerStopAll(timer_Loop_Task)</code>–timerStopAll关闭回调函数绑定的所有定时器</li>
</ul>
<h1 id="三、编写测试程序"><a href="#三、编写测试程序" class="headerlink" title="三、编写测试程序"></a>三、编写测试程序</h1><blockquote>
<p>我这里就直接在main函数里面创建一个单次定时器，再创建四个循环定时器共用一个回调函数</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">user_main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    sys.<span class="title">taskInit</span><span class="params">(Test_Task)</span></span></span><br><span class="line"><span class="function">    sys.<span class="title">timerStart</span><span class="params">(timer0_Task, <span class="number">15000</span>)</span></span></span><br><span class="line"><span class="function">    time1 </span>= sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">1</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">2</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">3</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">4</span>)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>最后在定时器循环回调函数中，使用timerStop和 timerStopAll 进行分批关闭定时器</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">function <span class="title">timer_Loop_Task</span><span class="params">(time_num)</span></span></span><br><span class="line"><span class="function">    <span class="built_in">log</span>.<span class="title">info</span><span class="params">(<span class="string">&quot;timer_Loop_Task当前的时间戳是:&quot;</span>, time_num, os.time())</span></span></span><br><span class="line"><span class="function">    <span class="keyword">if</span> num </span>== <span class="number">5</span> then</span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Close time1 with time1&#x27;s ID&quot;</span>)</span><br><span class="line">        sys.timerStop(time1)--使用time1的ID关闭time1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">10</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;Close time2 with callback function and parameters:&quot;</span>)</span><br><span class="line">            sys.timerStop(timer_Loop_Task, <span class="number">2</span>)--以回调函数加参数关闭time2</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">if</span> num == <span class="number">15</span> then</span><br><span class="line">                <span class="built_in">log</span>.info(<span class="string">&quot;timerStopAll closes all timers bound to the callback function&quot;</span>)</span><br><span class="line">                sys.timerStopAll(timer_Loop_Task)--timerStopAll关闭回调函数绑定的所有定时器</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    <span class="keyword">if</span> time_num == <span class="number">4</span> then</span><br><span class="line">        num = num + <span class="number">1</span></span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<h1 id="四、下载完整的代码到Air720Sl开发板"><a href="#四、下载完整的代码到Air720Sl开发板" class="headerlink" title="四、下载完整的代码到Air720Sl开发板"></a>四、下载完整的代码到Air720Sl开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line">--[[</span><br><span class="line">如果使用UART输出日志，打开这行注释的代码<span class="string">&quot;--log.openTrace(true,1,115200)&quot;</span>即可，根据自己的需求修改此接口的参数</span><br><span class="line">如果要彻底关闭脚本中的输出日志（包括调用<span class="built_in">log</span>模块接口和Lua标准print接口输出的日志），执行<span class="built_in">log</span>.openTrace(<span class="literal">false</span>,第二个参数跟调用openTrace接口打开日志的第二个参数相同)，例如：</span><br><span class="line"><span class="number">1</span>、没有调用过sys.opntrace配置日志输出端口或者最后一次是调用<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,nil,<span class="number">921600</span>)配置日志输出端口，此时要关闭输出日志，直接调用<span class="built_in">log</span>.openTrace(<span class="literal">false</span>)即可</span><br><span class="line"><span class="number">2</span>、最后一次是调用<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,<span class="number">1</span>,<span class="number">115200</span>)配置日志输出端口，此时要关闭输出日志，直接调用<span class="built_in">log</span>.openTrace(<span class="literal">false</span>,<span class="number">1</span>)即可</span><br><span class="line">]]</span><br><span class="line">--<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,<span class="number">1</span>,<span class="number">115200</span>)</span><br><span class="line">local function Test_Task()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        sys.wait(<span class="number">5000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">function timer0_Task()</span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;timer0_Task当前的时间戳是:&quot;</span>, os.time())</span><br><span class="line">end</span><br><span class="line">num = <span class="number">0</span>;</span><br><span class="line">time1 = <span class="number">0</span>;</span><br><span class="line"><span class="function">function <span class="title">timer_Loop_Task</span><span class="params">(time_num)</span></span></span><br><span class="line"><span class="function">    <span class="built_in">log</span>.<span class="title">info</span><span class="params">(<span class="string">&quot;timer_Loop_Task当前的时间戳是:&quot;</span>, time_num, os.time())</span></span></span><br><span class="line"><span class="function">    <span class="keyword">if</span> num </span>== <span class="number">5</span> then</span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Close time1 with time1&#x27;s ID&quot;</span>)</span><br><span class="line">        sys.timerStop(time1)--使用time1的ID关闭time1</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> num == <span class="number">10</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;Close time2 with callback function and parameters:&quot;</span>)</span><br><span class="line">            sys.timerStop(timer_Loop_Task, <span class="number">2</span>)--以回调函数加参数关闭time2</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">if</span> num == <span class="number">15</span> then</span><br><span class="line">                <span class="built_in">log</span>.info(<span class="string">&quot;timerStopAll closes all timers bound to the callback function&quot;</span>)</span><br><span class="line">                sys.timerStopAll(timer_Loop_Task)--timerStopAll关闭回调函数绑定的所有定时器</span><br><span class="line">            end</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">    <span class="keyword">if</span> time_num == <span class="number">4</span> then</span><br><span class="line">        num = num + <span class="number">1</span></span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line">    sys.timerStart(timer0_Task, <span class="number">15000</span>)</span><br><span class="line">    time1 = sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">1</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">2</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">3</span>)</span><br><span class="line">    sys.timerLoopStart(timer_Loop_Task, <span class="number">2000</span>, <span class="number">4</span>)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序后，打开Trace监视</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">05.074</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">1</span> <span class="number">1388505608</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">05.104</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505608</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">05.108</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505608</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">05.111</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505608</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">06.785</span>]:</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">06.790</span>]: SMS READY</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">07.053</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">1</span> <span class="number">1388505610</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">07.068</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505610</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">07.082</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505610</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">07.091</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505610</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">08.830</span>]: [I]-[Test_Task_run]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.055</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">1</span> <span class="number">1388505612</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.068</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505612</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.077</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505612</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.084</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505612</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.812</span>]:</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">09.814</span>]: +MPBK: <span class="number">1</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.041</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">1</span> <span class="number">1388505614</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.051</span>]: [I]-[Close time1 with time1<span class="number">&#x27;</span>s ID]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.065</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505614</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.076</span>]: [I]-[Close time1 with time1<span class="number">&#x27;</span>s ID]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.090</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505614</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.101</span>]: [I]-[Close time1 with time1<span class="number">&#x27;</span>s ID]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.104</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505614</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">11.106</span>]: [I]-[Close time1 with time1<span class="number">&#x27;</span>s ID]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">13.024</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505616</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">13.036</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505616</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">13.048</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505616</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">13.802</span>]: [I]-[Test_Task_run]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">13.805</span>]: [I]-[timer0_Task当前的时间戳是:] <span class="number">1388505617</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">15.013</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505618</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">15.026</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505618</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">15.038</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505618</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">17.000</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505620</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">17.012</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505620</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">17.022</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505620</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">18.786</span>]: [I]-[Test_Task_run]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">18.985</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505622</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">18.995</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505622</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">19.008</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505622</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">20.988</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">2</span> <span class="number">1388505624</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">21.002</span>]: [I]-[Close time2 with callback function <span class="keyword">and</span> parameters:]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">21.009</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505624</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">21.016</span>]: [I]-[Close time2 with callback function <span class="keyword">and</span> parameters:]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">21.022</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505624</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">21.028</span>]: [I]-[Close time2 with callback function <span class="keyword">and</span> parameters:]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">22.969</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505626</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">22.983</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505626</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">23.758</span>]: [I]-[Test_Task_run]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">24.966</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505628</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">24.980</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505628</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">26.962</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505630</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">26.978</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505630</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">28.741</span>]: [I]-[Test_Task_run]</span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">28.942</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505632</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">28.956</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">4</span> <span class="number">1388505632</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">30.941</span>]: [I]-[timer_Loop_Task当前的时间戳是:] <span class="number">3</span> <span class="number">1388505634</span></span><br><span class="line">[<span class="number">2020</span><span class="number">-03</span><span class="number">-05</span> <span class="number">13</span>:<span class="number">47</span>:<span class="number">30.956</span>]: [I]-[timerStopAll closes all timers bound to the callback function]</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<ul>
<li>发现timer0 <code>[2020-03-05 13:47:13.805]: [I]-[timer0_Task当前的时间戳是:] 1388505617</code>       仅出现了一次，和程序里面写的一样，单次运行</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>在此处出现关闭id为1的定时器提示，ID1便停止输出，验证了<code>timerStop</code>正常执行<br><img src="https://img-blog.csdnimg.cn/20200305135007146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>在最后出现关闭所有定时器的提示<code>[2020-03-05 13:47:30.956]: [I]-[timerStopAll closes all timers bound to the callback function]</code>，后面便停止输出，验证了<code>timerStopAll</code>执行正确</li>
</ul>
</blockquote>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/05/706/" data-id="ckkfmdgd700avvkcg0x1w1p25" data-title="7、合宙Air模块Luat开发：定时器的使用方法" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-704" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/28/704/" class="article-date">
  <time class="dt-published" datetime="2020-02-28T10:57:13.000Z" itemprop="datePublished">2020-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/28/704/">Air系列模块Luat版本如何使用http.request接口</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">一、概述</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">开发者在使用<span lang="EN-US">http.lua</span>提供的<span lang="EN-US">http.request</span>接口时，经常遇到“不知道如何填写<span lang="EN-US">request</span>接口参数”的问题，首先我们来看下<span lang="EN-US">http.request</span>的接口描述<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">request(method,url,cert,head,body,timeout,cbFnc,rcvFileName)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method,url,cert,timeout,cbFnc,rcvFileName</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">相对来说比较简单，可参考<span lang="EN-US">api</span>和<span lang="EN-US">demo</span>使用<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">接下来，本文以<span lang="EN-US">postman</span>的<span lang="EN-US">http</span>请求为例，来详细说明<span lang="EN-US">postman</span>可以正常<span lang="EN-US">http</span>访问时配置的参数，如何填充到<span lang="EN-US">http.request</span>接口的参数中。如果不会使用<span lang="EN-US">postman</span>工具，可百度搜索<span lang="EN-US">postman</span>自行下载了解<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">二、</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">postman</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">工具</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">Params</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">标签下配置的参数</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">以访问<span lang="EN-US">http://iot.openluat.com/api/site/firmware_upgrade</span>为例，<span lang="EN-US">Params</span>标签下不配置任何参数时，如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-nXnMaEtX5e58f089ec266.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">当<span lang="EN-US">Params</span>标签下配置两个参数，如下图所示：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-ByUpw4EI5e58f09fbc52a.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">可以看出，配置的两个参数以某种格式添加到了<span lang="EN-US">http</span>的<span lang="EN-US">url</span>中，成为<span lang="EN-US">url</span>的一部分<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">所以在<span lang="EN-US">Params</span>标签下配置参数后，把自动生成的<span lang="EN-US">url</span>直接复制到<span lang="EN-US">http.request(method,url,cert,head,body,timeout,cbFnc,rcvFileName)</span>中的<span lang="EN-US">url</span>参数即可，例如上图中的<span lang="EN-US">url</span>参数为：<span lang="EN-US">http://iot.openluat.com/api/site/firmware_upgrade?id=123456&amp;name=test<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "GET",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade?id=123456&amp;name=test",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">三、</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">postman</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">工具</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">Authorization</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">标签下配置的参数</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此标签下配置的参数为<span lang="EN-US">http</span>请求时的认证凭证，可以简单的认为是用户名和密码<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">以访问<span lang="EN-US">http://iot.openluat.com/api/site/firmware_upgrade</span>为例，<span lang="EN-US">Authorization</span>标签下选择<span lang="EN-US">Basic Auth</span>认证方式，用户名配置为<span lang="EN-US">123</span>，密码配置为<span lang="EN-US">456</span>，然后点击<span lang="EN-US">Send</span>按钮发送<span lang="EN-US">http</span>请求，如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-CVNY5F8r5e58f0be586be.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">点击<span lang="EN-US">Send</span>按钮之后，可以发现<span lang="EN-US">Headers</span>标签下多了几个自动生成的<span lang="EN-US">header</span>，如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-YWcPm4fz5e58f0dd461a6.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">其中有一个<span lang="EN-US">header</span>：<span lang="EN-US">KEY</span>为<span lang="EN-US">Authorization</span>，<span lang="EN-US">VALUE</span>为<span lang="EN-US">Basic MTIzOjQ1Ng==</span>，这个<span lang="EN-US">header</span>实际上就是<span lang="EN-US">postman</span>工具根据<span lang="EN-US">Authorization</span>标签页下的认证参数自动生成的<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">所以<span lang="EN-US">Authorization</span>标签页下的参数，实际上对应<span lang="EN-US">http</span>请求的一个<span lang="EN-US">header</span>，把自动生成的<span lang="EN-US">header</span>直接填充到<span lang="EN-US">http.request(method,url,cert,head,body,timeout,cbFnc,rcvFileName)</span>中的<span lang="EN-US">head</span>参数即可，例如本示例对应的<span lang="EN-US">head</span>参数为<span lang="EN-US">{ ["Authorization"] = "Basic MTIzOjQ1Ng==" }<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">问题又来了，我明明在<span lang="EN-US">Authorization</span>标签页下选择了<span lang="EN-US">Basic Auth</span>认证方式，用户名为<span lang="EN-US">123</span>，密码为<span lang="EN-US">456</span>，如何根据<span lang="EN-US">Basic Auth</span>、<span lang="EN-US">123</span>、<span lang="EN-US">456</span>就生成了<span lang="EN-US">Basic MTIzOjQ1Ng==</span>呢？<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">其实，<span lang="EN-US">Basic MTIzOjQ1Ng==</span>中的<span lang="EN-US">Basic</span>表示<span lang="EN-US">Basic Auth</span>认证方式，之后跟一个空格（这是协议要求），最后的<span lang="EN-US">MTIzOjQ1Ng==</span>为<span lang="EN-US">123:456</span>的<span lang="EN-US">base64</span>编码字符串<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例对应<span lang="EN-US">http.request(method,url,cert,head,body,timeout,cbFnc,rcvFileName)</span>中的<span lang="EN-US">head</span>参数，最终可以填充为<span lang="EN-US">{ ["Authorization"]
= "Basic "..crypto.base64_encode("123:456", ("123:456"):len())
}<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "GET",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Authorization"]
  = "Basic "..crypto.base64_encode("123:456", ("123:456"):len())<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本章节仅介绍了常见的<span lang="EN-US">Basic Auth</span>认证方式，对于其他认证方式没做介绍，如果开发者用到其他认证方式，可以先在百度上搜索所用认证方式最终会修改<span lang="EN-US">http</span>请求的哪个字段，是<span lang="EN-US">header</span>还是<span lang="EN-US">url</span>，然后填充<span lang="EN-US">http.request</span>接口中的<span lang="EN-US">head</span>或者<span lang="EN-US">url</span>参数即可<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">四、</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">postman</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">工具</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">Headers</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">标签下配置的参数</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此标签页下配置的参数，直接填充到<span lang="EN-US">http.request</span>接口中的<span lang="EN-US">head</span>参数即可，例如下图，在<span lang="EN-US">Headers</span>标签页下手动输入了两个<span lang="EN-US">header<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-ZtfOA0QH5e58f0f77437e.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "GET",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["myKey1"]="myValue1",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["myKey2"]="myValue2",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">五、</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">postman</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">工具</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt">Body</span></b><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">标签下配置的参数</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">Body</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">标签下有<span lang="EN-US">form-data</span>、<span lang="EN-US">x-www-form-urlencoded</span>、<span lang="EN-US">raw</span>、<span lang="EN-US">binary</span>几种格式，下文将分别介绍<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">5.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">form-data</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">form-data</span>格式配置了<span lang="EN-US">4</span>个参数，<span lang="EN-US">2</span>个<span lang="EN-US">text</span>字符串，<span lang="EN-US">2</span>个文件<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-wi6n6TBy5e58f10e81c48.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种<span lang="EN-US">body</span>参数，无法直接对<span lang="EN-US">http.request</span>的参数进行填充，可使用如下二次封装的接口<span lang="EN-US">httpRequestFormData</span>接口来填充参数：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">local function httpRequestFormData(method,url,cert,formData,timeout,cbFnc,rcvFileName)<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; local
  boundary,body,k,v,kk,vv =
  "--------------------------"..os.time()..rtos.tick(),{}<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; for k,v in
  pairs(formData) do<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if
  k=="texts" then<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; local bodyText
  = ""<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for kk,vv in pairs(v)
  do<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; bodyText =
  bodyText.."--"..boundary.."\r\nContent-Disposition: form-data;
  name=\""..kk.."\"\r\n\r\n"..vv.."\r\n"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; body[#body+1]
  = bodyText<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; elseif
  k=="files" then<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; local
  contentType =<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jpg =
  "image/jpeg",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; jpeg =
  "image/jpeg",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; png =
  "image/png",&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; for kk,vv in
  pairs(v) do<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  print(kk,vv)<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  body[#body+1] =
  "--"..boundary.."\r\nContent-Disposition: form-data;
  name=\""..kk.."\";
  filename=\""..vv:match("([^/]+)$").."\"\r\nContent-Type:
  "..(contentType[vv:match("%.(%w+)$")] or
  "application/octet-stream").."\r\n\r\n"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;body[#body+1] = {file = vv}<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  body[#body+1] = "\r\n"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; end<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; end&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; body[#body+1] =
  "--"..boundary.."--\r\n"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; method,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; url,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cert,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["Content-Type"] = "multipart/form-data;
  boundary="..boundary,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["Connection"] = "keep-alive"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; body,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cbFnc,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; rcvFileName<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">end<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">httpRequestFormData</span>接口的形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">httpRequestFormData(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; texts = <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["myTextKey1"] = "myTextValue1",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["myTextKey2"] = "myTextValue2"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; files =<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["myFileKey1"] = "/ldata/file.txt", --</span><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处填写文件的完整路径</span><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  ["myFileKey2"] = "/ldata/file.jpg", --</span><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处填写文件的完整路径</span><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">5.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">x-www-form-urlencoded</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">x-www-form-urlencoded</span></span>格式配置了<span lang="EN-US">2</span>个参数<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-DepaGuAJ5e58f12608d2b.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="application/x-www-form-urlencoded"</span>，<span lang="EN-US">body</span>参数可使用如下接口<span lang="EN-US">httpRequestFormData</span>接口来生成：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">local function urlencodeTab(params)<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; local msg = {}<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; for k, v in
  pairs(params) do<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; table.insert(msg,
  string.urlEncode(k) .. '=' .. string.urlEncode(v))<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; table.insert(msg,
  '&amp;')<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; end<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; table.remove(msg)<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; return
  table.concat(msg)<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">end<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="application/x-www-form-urlencoded",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; urlencodeTab({["myKey1"]="myValue1",
  ["myKey2"]="myValue2"}),<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">5.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">raw</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;
mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">raw</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">又可分为<span lang="EN-US">Text</span>、<span lang="EN-US">JavaScript</span>、<span lang="EN-US">Json</span>、<span lang="EN-US">HTML</span>、<span lang="EN-US">XML</span>几种，下文将分别介绍<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="_Toc25142510"><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.3.1</span></b></a><b><span style="font-size:11.5pt;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;mso-hansi-font-family:inherit;
mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">Text</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">raw Text</span>格式配置了<span lang="EN-US">1</span>个字符串<span lang="EN-US">123456<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-scsaSikA5e58f13a41ce6.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="text/plain"</span>，<span lang="EN-US">body</span>参数直接填充<span lang="EN-US">123456</span>：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="text/plain",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "123456",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.3.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">JavaScript</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">raw JavaScript</span>格式配置了<span lang="EN-US">1</span>个字符串<span lang="EN-US">123456<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-SOWzn10j5e58f14d78860.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="application/javascript</span>"</span>，<span lang="EN-US">body</span>参数直接填充<span lang="EN-US">123456</span>：<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="application/javascript</span>",<o:p></o:p></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "123456",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.3.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">Json</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">raw Json</span>格式配置了<span lang="EN-US">2</span>个参数<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-s1PDUEby5e58f160c8e68.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="application/json"</span>，
<span lang="EN-US">body</span>参数可使用如下代码来生成：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">json.encode(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["code"]
  = 25,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["msg"]
  = "test"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; }<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="application/json",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; json.encode(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;{<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;["code"] = 25,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;["msg"] = "test"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;}<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; ),<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.3.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">HTML</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">raw HTML</span>格式配置了<span lang="EN-US">1</span>个字符串<span lang="EN-US">123456<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-MeDmTXlI5e58f1711b1e9.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="text/html"</span>，<span lang="EN-US">body</span>参数直接填充<span lang="EN-US">123456</span>：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="text/html",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "123456",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 5.3.5</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">XML</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;
mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">raw XML</span>格式配置了<span lang="EN-US">1</span>个字符串<span lang="EN-US">123456<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-MsEYINjw5e58f17fe00c7.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US">["Content-Type"]="text/xml"</span>，<span lang="EN-US">body</span>参数直接填充<span lang="EN-US">123456</span>：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="text/xml",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "123456",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">5.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">binary</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">格式</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">如下图所示，以<span lang="EN-US">binary</span>格式配置了<span lang="EN-US">1</span>个文件<span lang="EN-US">file.jpg<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="https://oldask.openluat.com/image/show/attachments-2020-02-yfUcLepB5e58f190e7e8f.png" class="img-responsive" style="width: 100%;"><br></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">此种格式的<span lang="EN-US">body</span>参数，需要对<span lang="EN-US">http.request</span>的<span lang="EN-US">head</span>和<span lang="EN-US">body</span>参数进行填充，<span lang="EN-US">head</span>参数需要添加<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Connection"]
= "keep-alive" <o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="xxx"</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">，此处的<span lang="EN-US">xxx</span>和文件类型有关，例如<span lang="EN-US">jpg</span>文件为<span lang="EN-US">image/jpeg</span>，可自行百度搜索<span lang="EN-US">Content-Type</span>了解更多，最简单的一种方式是<span lang="EN-US">postman</span>点击<span lang="EN-US">Send</span>按钮后，会自动在<span lang="EN-US">Headers</span>标签下生成<span lang="EN-US">Content-Type</span>这个请求头，可直接使用<span lang="EN-US">Content-Type</span>这个请求头的值，如下图所示<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><img src="https://oldask.openluat.com/image/show/attachments-2020-02-ZgPfXH5b5e58f1a437309.png" class="img-responsive" style="width: 100%;"></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; body</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参数填充文件路径即可<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本示例调用<span lang="EN-US">http.request</span>接口形式如下：<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">http.request(<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; "POST",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  "http://iot.openluat.com/api/site/firmware_upgrade",<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; nil,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Content-Type"]="image/jpeg</span>",<o:p></o:p></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ["Connection"]
  = "keep-alive"<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; {<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; [1]={["file"]
  = "/ldata/file.jpg"}--</span><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">此处填写文件的完整路径</span><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; },<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; 60000,<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; cbFnc<o:p></o:p></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">)<o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p>









































































































































































































</p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt"><o:p>&nbsp;</o:p></span></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/28/704/" data-id="ckkfmdgg400f9vkcg9o9yg5vw" data-title="Air系列模块Luat版本如何使用http.request接口" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-703" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/28/703/" class="article-date">
  <time class="dt-published" datetime="2020-02-28T09:44:14.000Z" itemprop="datePublished">2020-02-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/28/703/">如何批量下载lua固件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="本文内容"><a href="#本文内容" class="headerlink" title="本文内容"></a>本文内容</h2><p>介绍一下如何使用 LuaTools 工具生成量产文件，并用夹具批量升级。</p>
<h2 id="2G模块量产文件脚本合成（Air2xx系列、Air8xx系列）："><a href="#2G模块量产文件脚本合成（Air2xx系列、Air8xx系列）：" class="headerlink" title="2G模块量产文件脚本合成（Air2xx系列、Air8xx系列）："></a>2G模块量产文件脚本合成（Air2xx系列、Air8xx系列）：</h2><ol>
<li>首先打开LuaTools工具，点击右上方的批量升级按钮，如下图：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_69305.png"></li>
</ol>
<p>我们以core-v0038-8955为例，脚本文件以202的demo为例：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_63176.png"><br>设置加密lua 的密码，选择导出文件夹的位置，最后合并生成量产文件；</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_21572.png"></p>
<p>打开导出的文件夹，我们看下导出的文件：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_22760.png"></p>
<p>接下来，我们用量产工具烧录刚刚合并的文件：<br>首先，请准备一个可外接供电的usb-hub（建议选择质量过硬的品牌，这样可以保证下载过程中稳定运行），然后将usb-hub接到电脑上，待电脑自动安装好该usb-hub驱动后，把下载夹具的所有usb线插到usb-hub上，给夹具的的gnd和vbat需要接3.4~4.2v直流供电，以给模块供电；然后将夹具的开关拨到“ON”位置：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_98210.png"></p>
<p>接下来，打开电脑的“设备管理器”，查看是否发现串口线。如果正确识别，则无需安装驱动。如果出现下图所示的“叹号”，则需要安装串口线PL2303驱动。下载地址：</p>
<p><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/others/batdl.html">http://www.openluat.com/Product/others/batdl.html</a></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_52314.png"><br>成功安装后，电脑端的“设备管理器”即可识别所有的串口线（如果未识别，请检查连线是否正确，驱动有没有装好）。<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_75019.jpg"></p>
<p>下一步，打开“RDA平台lod升级工具”所在目录，把刚刚生成的量产用LOD文件拷贝进去。如果您还没有“RDA平台lod升级工具”呢，请到我们的产品中心（<a target="_blank" rel="noopener" href="http://www.openluat.com/Product%EF%BC%89%E4%B8%8B%E8%BD%BD">http://www.openluat.com/Product）下载</a><br>如图所示，将文件拷贝到该目录（只要是lod文件可以本工具下载，包括LuaDB工具合成或加密合成的lod）<br>注：下图随便以一个lod为举例，用户实际下载的时候需要下载哪个，就放哪个！）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57965.png"><br>继续，修改config目录下的param.ini文件：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_84595.jpg"></p>
<p>修改lod参数改为将要下载的lod文件的名称，此lod文件即是第一步放到工具软件目录根目录下的那个lod文件：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_80088.png"></p>
<p>修改Auto_restart = true，则下载完成后自动重启模块。只要不为true，则下载完成不重启模块。本参数大小写不敏感。<br>Download_number = 8 可设置一次最多下载数目。<br>双击main.exe，点击“设置”按钮。随后弹出的窗口中，勾选复选框，并选择正确的对应串口（可以从“设备管理器”查看哦）。设置完成后，点击“ok”按钮：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_71424.png"></p>
<p>然后将模块正确的放置在夹具中，使host_tx / host_rx / gnd 和夹具准确接触：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_39477.jpg"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_19060.jpg"></p>
<p>最后，点击软件的“开始”按钮，就可以愉快的进行批量下载啦！</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_79214.png"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_68822.png"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_81818.png"><br>如果 param.ini 设置 auto_restart 为非True，直接把模块取下，换上新的模块，软件即可自动开始下载，无需人工干预。</p>
<h4 id="请注意："><a href="#请注意：" class="headerlink" title="请注意："></a>请注意：</h4><p>1、如果下载过程中出现错误，文本框内会有相应提示：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_33053.png"><br>请根据提示进行故障排除。</p>
<p>2、请尽量使用最新版的 luaTools 生成量产用LOD文件，使用最新版 RDA平台lod升级工具进行批量下载。如果二者不是最新版，则生成的量产用LOD文件可能存在兼容性问题，导致“RDA平台lod升级工具”下载失败，或者出现下载后模块无法正常工作的情况。<br>3、如果更改配置文件param.ini的auto_restart参数为非True时，则无需再点击“开始”按钮，对应串口的模块下载好后，直接手动替换为新的待下载模块，即可自动开始下载。<br>4、外接供电的usb-hub，可以保证下载过程稳定性，避免因usb口供电不足导致的异常情况。<br>5、不同模块间的host_uart不同，所以夹具并不通用，望悉知。<br>6、luaTools、RDA平台lod升级工具、串口线驱动，均可从 <a target="_blank" rel="noopener" href="http://www.openluat.com/Product%E4%B8%8B%E8%BD%BD%E3%80%82">http://www.openluat.com/Product下载。</a><br>7、夹具的vbat和gnd电压应为3.4~4.2v，反接、电压超高可能导致模块烧毁；电压过低则模块无法正常开机下载。<br>8、下载任务进行时，无法关闭软件，只有点击“停止”按钮，才能关闭软件（为防止意外关闭软件，导致下载中断）<br>9、如果模块放入夹具，却始终提示“等待模块放入”，请检查模块摆放是否正确，触点是否接触良好。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/28/703/" data-id="ckkfmdgd700auvkcg2pwbhttu" data-title="如何批量下载lua固件" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-702" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/27/702/" class="article-date">
  <time class="dt-published" datetime="2020-02-27T10:19:31.000Z" itemprop="datePublished">2020-02-27</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/27/702/">合宙通信科技招聘信息</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ul>
<li>有意向者请将简历发如下邮箱地址：<br><a href="mailto:&#x68;&#114;&#x40;&#x6f;&#112;&#101;&#110;&#108;&#117;&#x61;&#x74;&#x2e;&#x63;&#x6f;&#x6d;">&#x68;&#114;&#x40;&#x6f;&#112;&#101;&#110;&#108;&#117;&#x61;&#x74;&#x2e;&#x63;&#x6f;&#x6d;</a></li>
</ul>
<hr>
<ul>
<li>###技术支持工程师（硬件）<ul>
<li><strong>工作地点</strong>：上海</li>
<li><strong>招聘人数</strong>：1到2人</li>
<li><strong>薪资</strong>：面议</li>
<li><strong>岗位职责</strong>：</li>
<li>1.负责线上客户技术支持。包括但不限于审核客户前期设计的原理图和PCB；解答客户测试问题和进一步产品调试；跟进客户需求至产品量产等。</li>
<li>2.负责线下客户技术支持。包括但不限于不良主板或模块产品的问题分析，提出整改建议等。</li>
<li>3.负责客户产品的现场处理、技术指导和调试。包括但不限于产品异常处理，提供现场设计指导、调试和解决方案等。</li>
<li>4.负责编写、维护和优化产品资料。包括但不限于模块产品的规格说明书、产品教程资料等。</li>
<li>5.负责客户定制项目的硬件设计开发。包括但不限于原理图PCB设计，BOM，试产调试和制定生产测试流程等。</li>
<li><strong>任职要求</strong>：</li>
</ul>
</li>
</ul>
<p> 1.全日制本科及以上学历，有嵌入式硬件开发2年以上经验或有手机或通信系统方面经验者优先。<br>2.了解电子元器件特性，了解SMT生产流程，有完整的项目硬件设计开发经验。<br>3.掌握各种仪器仪表如示波器，万用表，高速电源，综测仪器等。<br>4.了解电磁兼容，具备高速信号基本知识和相关调试方法。<br>5.熟悉通信硬件的调试和测试方法，能够独立解决普通硬件问题。<br>6.熟悉485/232/TLL串口,USB，SPI, I2C等嵌入式常用接口的原理以及传输协议。<br>7.吃苦耐劳，能接受省外出差。</p>
<hr>
<ul>
<li>###技术支持工程师<ul>
<li><strong>工作地点</strong>：深圳</li>
<li><strong>招聘人数</strong>：1到2人</li>
<li><strong>薪资</strong>：面议</li>
<li><strong>岗位职责</strong>：</li>
<li>1.负责线上客户技术支持。包括但不限于审核客户前期设计的原理图和PCB；解答客户测试问题和进一步产品调试；跟进客户需求至产品量产等。</li>
<li>2.负责深圳及周边地区客户现场配合研发分析和解决客户现场问题，给出技术指导。</li>
<li>4.负责编写、维护和优化产品资料。包括但不限于模块产品的规格说明书、产品教程资料等。</li>
<li>5.给客户编写简单的脚本DEMO，支持客户调试。</li>
<li><strong>任职要求</strong>：</li>
</ul>
</li>
</ul>
<p> 1.全日制本科及以上学历，有嵌入式开发经验者优先。<br>2.了解电子元器件特性，了解SMT生产流程。<br>3.掌握各种仪器仪表如示波器，万用表，高速电源等。<br>4.掌握SMT器件的焊接技能，能够对主板进行整改。<br>5.有对产品bug的排除分析能力，能够独立解决一些简单问题。<br>6.有嵌入式常用接口，协议知识，有软件编程方面基础。<br>7.吃苦耐劳，能接受省外出差。</p>
<hr>
<ul>
<li><h3 id="嵌入式软件开发工程师"><a href="#嵌入式软件开发工程师" class="headerlink" title="嵌入式软件开发工程师"></a>嵌入式软件开发工程师</h3><ul>
<li><strong>工作地点</strong>：合肥</li>
<li><strong>招聘人数</strong>：1到2人</li>
<li><strong>薪资</strong>：面议</li>
<li><strong>岗位职责</strong>：<br>1，4G通信模块产品软件开发。<br>2，协助FAE支持客户遇到的问题。<br>3，编写软件技术文档。<br>4，解决客户或者测试部反馈的问题。</li>
<li><strong>任职要求</strong>：<br>1，计算机软件或网络通信类相关专业本科及以上学历，两年以上工作经验，条件优秀可放宽。<br>2，精通C语言，有扎实的C语言基础。<br>3，熟悉Linux或者其他嵌入式操作系统优先。<br>4，熟悉TCP/IP或者常用HTTP等常用IOT通信协议。<br>5，有通信行业2G、3G、4G等通信产品开发经验优先。<br>6，有ARM平台开发经验优先。</li>
</ul>
</li>
</ul>
<hr>
<ul>
<li><h3 id="测试工程师"><a href="#测试工程师" class="headerlink" title="测试工程师"></a>测试工程师</h3><ul>
<li><strong>工作地点</strong>：上海</li>
<li><strong>招聘人数</strong>：1到2人</li>
<li><strong>薪资</strong>：面议</li>
<li><strong>岗位职责</strong>：<br>1、负责软件功能、性能、稳定性、场测等方面的测试工作。<br>2、负责根据产品需求，编写测试计划、测试用例，并完成测试报告。<br>3、负责对测试bug进行分析与总结，编写测试报告，并提出改进意见。<br>4、负责对缺陷的状态进行跟踪与维护，协助开发人员找到缺陷的原因。</li>
<li><strong>任职要求</strong>：<br>1、 全日制本科学历，计算机或通信相关专业，<br>2、 1年以上测试工作经验，优秀应届毕业生亦可。<br>3、 熟悉软件测试原理、流程和相关规范。<br>4、 熟悉并能操作Linux、Windows系统的相关测试工具；<br>5、 工作积极主动、认真仔细，有责任心，思维缜密，善于沟通，注重团队合作。</li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/27/702/" data-id="ckkfmdgd700atvkcg4t42btrr" data-title="合宙通信科技招聘信息" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-36" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/36/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:03:56.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/36/">X、Air720SL模块Luat开发：全网首发，通过iic直接驱</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>这里我把博客标题设置为X，是因为本系列教程按照正常的学习顺序，不应该先发OLED驱动，还有好多基础知识都还没讲到，本系列教程截至今日，才讲到模拟量采集，所以看本篇博客大家可能会有点不知所云<br><img src="https://img-blog.csdnimg.cn/20200225142340236.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>用过2g模块的同志，应该知道2g模块官方支持disp驱动库，直接调用库函数就可以很简单实现oled或者lcd驱动</p>
<p>但是！！！4g模块暂时还没有disp驱动（后续应该会支持），所以现在是无法直接调用库函数驱动OLED的！！！！！<br><img src="https://img-blog.csdnimg.cn/20200225142458600.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>所谓没有条件那就创造条件，正好这几天闲的没事干，研究了一下通过iic直接驱动OLED，在逻辑分析仪没有带回来的情况下，运气好到爆竟然把驱动调试出来了这里要感谢社区大神<code>Miuser</code>没有他帮助调试那么今天就见不到这篇文章了，既然驱动开发出来了本着开源的思想，就把OLED驱动分享出来，独乐乐不如众乐乐<br><img src="https://img-blog.csdnimg.cn/20200225142203906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>这里我提供<code>两种</code>驱动OLED的方式，</p>
</blockquote>
<ul>
<li>第一种驱动是实时从字库读取字模，用到谁就读谁，然后直接通过iic找到对应的地址写入，实时读写。这种驱动没有缓存，所占用的内存极小，同时刷屏速度也较低，刷屏速度取决与读取字库的速度，只要文件没有读取出来，就算iic速度再快也不行，这就是传说中的木桶短板效应<br><img src="https://img-blog.csdnimg.cn/20200225122128636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><blockquote>
<p>木桶定律是讲一只水桶能装多少水取决于它最短的那块木板 。一只木桶想盛满水，必须每块木板都一样平齐且无破损，如果这只桶的木板中有一块不齐或者某块木板下面有破洞，这只桶就无法盛满水。<br><img src="https://img-blog.csdnimg.cn/20200225142917102.png" alt="在这里插入图片描述"></p>
</blockquote>
</li>
<li>第二种驱动方式是建立一个128*64  bit的缓存区，所需要的缓存是1K字节ram，这种方法刷新速度理论上要比第一种驱动要快，虽然第二种驱动流程多了一步，但是用户只能在最后一步能感受到刷屏已经开始，所以第二种驱动方式给人的感觉刷屏是更快的<br><img src="https://img-blog.csdnimg.cn/20200225122552131.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><blockquote>
<p>但是第二种驱动方式是全屏刷新，每次刷新数据都较多，所以在低速iic上，刷新速度优势不是特别明显，高速iic刷新速度是低速iic的刷新速度的四倍<br><img src="https://img-blog.csdnimg.cn/20200225122503330.png" alt="在这里插入图片描述"><br>我现在使用的是测试版本v0009，<code>目前官方发布的版本是v0008，很不幸v0008的iic驱动时序有问题，并不能点亮oled</code>，据内部消息近期应该会更新v0009到时候小伙伴们就能愉快的玩耍了<br>我现在使用的v0009其实也有问题，高速iic并不能点亮oled，所以我这里第二种驱动方式优势并不明显，想体验丝滑般流畅，还得等等</p>
</blockquote>
</li>
</ul>
<h1 id="二、编写第1版测试程序（不带缓存）"><a href="#二、编写第1版测试程序（不带缓存）" class="headerlink" title="二、编写第1版测试程序（不带缓存）"></a>二、编写第1版测试程序（不带缓存）</h1><blockquote>
<p> 第一版测试程序实际我只做了英文字库驱动，也不支持多字库兼容，也不支持画图形。后来因为改写第二版驱动，个人时间有限，第一版驱动中文字库支持还是由社区大神<code>Miuser</code>实现的，不过目前的功能也比较简单，<code>只支持16X16的中文和16X8的ascii字库</code>，后面我也懒得改了，就暂时这样</p>
</blockquote>
<h2 id="1、目录说明"><a href="#1、目录说明" class="headerlink" title="1、目录说明"></a>1、目录说明</h2><blockquote>
<p>文章末尾我会提供库文件以及字库的下载地址</p>
</blockquote>
<blockquote>
<p>第1版测试程序目录结构如下<br><img src="https://img-blog.csdnimg.cn/20200225130206623.png" alt="在这里插入图片描述"></p>
</blockquote>
<ul>
<li><code>ASCII_lib.bin</code>：                        16*8            Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_lib.bin</code>：                    16*16          GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>i2c_ssd1306_oled.lua</code>：        IIC   ssd1306    OLED屏驱动库</li>
<li><code>main.lua</code>：                            DEMO文件</li>
</ul>
<p>注意：文件名不建议更改，如果更改了文件名，需要把驱动库中的用户配置区也一并更改，此字库<code>不兼容第二版oled驱动程序</code>，不要随意替换，<code>不支持第三方字库</code></p>
<h2 id="2、用户配置"><a href="#2、用户配置" class="headerlink" title="2、用户配置"></a>2、用户配置</h2><p>本驱动支持2g模块和4g模块，需要用户改动的库文件如下，只要把字库文件地址改下就行了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------用户配置区域------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--local fontfile_ascii = <span class="string">&quot;/ldata/ASCII_lib.bin&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line">--local fontfile_gb2312 = <span class="string">&quot;/ldata/GB2312_lib.bin&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line"></span><br><span class="line">local fontfile_ascii = <span class="string">&quot;/lua/ASCII_lib.bin&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line">local fontfile_gb2312 = <span class="string">&quot;/lua/GB2312_lib.bin&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line"></span><br><span class="line">local iicspeed = i2c.SLOW --iic速度，<span class="number">100</span>K</span><br><span class="line">--local iicspeed = i2c.FAST --iic速度，<span class="number">400</span>K。在<span class="number">720</span>sl上点不亮，<span class="number">2</span>g模块可以使用高速iic</span><br><span class="line"></span><br><span class="line">local i2cid = <span class="number">0</span> --iicid，需要根据接线而定，默认iic1</span><br><span class="line">local i2cslaveaddr = <span class="number">0x3C</span> --从机地址，如果是八位地址，需要向右移动一位。我这个模块说明书给的地址是<span class="number">0x78</span>，右移动一位就是<span class="number">0x3c</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3、函数说明"><a href="#3、函数说明" class="headerlink" title="3、函数说明"></a>3、函数说明</h2><p>接下来我做一下函数说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------函数说明---------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--[[</span><br><span class="line">* @description: 清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Clear()</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 初始化OLED，</span><br><span class="line">* @param &#123;type&#125; :无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Init()</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定位置显示一个字符,包括部分字符</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">0</span>~<span class="number">127</span></span><br><span class="line">----------------------y:<span class="number">0</span>~<span class="number">6</span></span><br><span class="line">---------------------<span class="number">-0</span>第一行，<span class="number">2</span>第二行，<span class="number">4</span>第三行，<span class="number">6</span>第四行</span><br><span class="line">----------------------Show_char:要显示的字符</span><br><span class="line">----------------------isChinese:是中文就填入<span class="number">1</span>，英文就忽略</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowChar(x, y, Show_char, isChinese)</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示字符串</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">0</span>~<span class="number">127</span></span><br><span class="line">----------------------y:<span class="number">0</span>~<span class="number">6</span></span><br><span class="line">---------------------<span class="number">-0</span>第一行，<span class="number">2</span>第二行，<span class="number">4</span>第三行，<span class="number">6</span>第四行</span><br><span class="line">----------------------Show_char:要显示的字符串，支持中文</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowString(x, y, ShowStr)</span><br><span class="line">]]</span><br></pre></td></tr></table></figure>
<h2 id="4、编写测试程序代码"><a href="#4、编写测试程序代码" class="headerlink" title="4、编写测试程序代码"></a>4、编写测试程序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">require <span class="string">&quot;common&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line">local oled = require <span class="string">&quot;i2c_ssd1306_oled&quot;</span>--包含库文件</span><br><span class="line">local function Test_Task()</span><br><span class="line">	oled.OLED_Init()</span><br><span class="line">    oled.OLED_Clear()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        oled.OLED_ShowChar(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;6&#x27;</span>,<span class="number">0</span>)--显示一个asill字符</span><br><span class="line">        oled.OLED_ShowString(<span class="number">40</span>, <span class="number">0</span>, <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)--显示英文字符串,超出一行会自动换行</span><br><span class="line">        oled.OLED_ShowString(<span class="number">0</span>, <span class="number">4</span>, common.utf8ToGb2312(<span class="string">&quot;合宙，你好&quot;</span>) )--显示中文字符串</span><br><span class="line">        sys.wait(<span class="number">2000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    --显示内容</span><br><span class="line">    sys.wait(<span class="number">10000</span>)</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5、下载程序到开发板"><a href="#5、下载程序到开发板" class="headerlink" title="5、下载程序到开发板"></a>5、下载程序到开发板</h2><p>实验效果如下<br><img src="https://img-blog.csdnimg.cn/20200225124705910.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="二、编写第2版测试程序（带缓存）"><a href="#二、编写第2版测试程序（带缓存）" class="headerlink" title="二、编写第2版测试程序（带缓存）"></a>二、编写第2版测试程序（带缓存）</h1><blockquote>
<p> 第2版驱动，支持在任意地方画矩形。<br> 支持显示不同大小的中文和英文字库，目前做了<code>12X6、16X8、24X12的ascii字库支持 和12X12、16X16、24X24的中文字库显示</code><br>近期不打算改了，后续可能还会增加二维码显示，有能力朋友可以先试试，搞出来跟我讲下，顺便学习学习</p>
</blockquote>
<h2 id="1、目录说明-1"><a href="#1、目录说明-1" class="headerlink" title="1、目录说明"></a>1、目录说明</h2><blockquote>
<p>文章末尾我会提供库文件以及字库的下载地址</p>
</blockquote>
<blockquote>
<p>第2版测试程序目录结构如下<br><img src="https://img-blog.csdnimg.cn/2020022513205237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<ul>
<li><code>ASCII_12X6.bin</code>：         12*6                Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>ASCII_16X8.bin</code>：        16*8                Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>ASCII_24X12.bin</code>：        24*12            Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_12X12.bin</code>：    12*12              GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_16X16.bin</code>：    16*16              GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_24X24.bin</code>：    24*24              GB2312字库二进制文件，直接随同lua脚本一起下载即可，这个文件过大，全部下载就会超出了脚本区大小，单独下载应该没问题（我没有测试），也就是说只能下载这一个字库，其他的五个字库可以一同下载</li>
<li><code>i2c_ssd1306_oled.lua</code>：IIC   ssd1306    OLED屏驱动库</li>
<li><code>main.lua</code>：DEMO文件</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200225132632653.png" alt="在这里插入图片描述"><br>注意：文件名不建议更改，如果更改了文件名，需要把驱动库中的用户配置区也一并更改，此字库<code>不兼容第一版oled驱动程序</code>，不要随意替换，<code>不支持第三方字库</code></p>
<h2 id="2、用户配置-1"><a href="#2、用户配置-1" class="headerlink" title="2、用户配置"></a>2、用户配置</h2><p>本驱动支持2g模块和4g模块，需要改动的库文件如下，只要把字库文件地址改下就行了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------用户配置区域------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--local Size_address = <span class="string">&quot;ldata&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line">local Size_address = <span class="string">&quot;lua&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line"></span><br><span class="line">local Size_12X6_name = <span class="string">&quot;ASCII_12X6.bin&quot;</span> --ascll字库名称</span><br><span class="line">local Size_16X8_name = <span class="string">&quot;ASCII_16X8.bin&quot;</span></span><br><span class="line">local Size_24X12_name = <span class="string">&quot;ASCII_24X12.bin&quot;</span></span><br><span class="line"></span><br><span class="line">--通过Luatools烧写的所有文件，都存放在此区域，目前总空间为<span class="number">524</span>KB，所以中文字库不能三个全部一起下载</span><br><span class="line">local FontSize_12X12_name = <span class="string">&quot;GB2312_12X12.bin&quot;</span> --GB2312中文字库名称</span><br><span class="line">local FontSize_16X16_name = <span class="string">&quot;GB2312_16X16.bin&quot;</span></span><br><span class="line">local FontSize_24X24_name = <span class="string">&quot;GB2312_24X24.bin&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local iicspeed = i2c.SLOW --iic速度，<span class="number">100</span>K</span><br><span class="line">--local iicspeed = i2c.FAST --iic速度，<span class="number">400</span>K。在<span class="number">720</span>sl上点不亮，<span class="number">2</span>g模块可以使用高速iic</span><br><span class="line"></span><br><span class="line">local i2cid = <span class="number">0</span> --iicid，需要根据接线而定，默认iic1</span><br><span class="line">local i2cslaveaddr = <span class="number">0x3C</span> --从机地址，如果是八位地址，需要向右移动一位。我这个模块说明书给的地址是<span class="number">0x78</span>，右移动一位就是<span class="number">0x3c</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3、函数说明-1"><a href="#3、函数说明-1" class="headerlink" title="3、函数说明"></a>3、函数说明</h2><p>接下来我做一下函数说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------函数说明---------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--[[</span><br><span class="line">* @description: 更新缓存数据，到oled，操作后，必须更新，否则不会生效</span><br><span class="line">* @param &#123;type&#125; ：无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Refresh_Gram()</span><br><span class="line">*]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 开启OLED显示</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Display_On()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 关闭OLED显示</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Display_Off()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Clear()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 画矩形</span><br><span class="line">* @param &#123;type&#125; :确保x1&lt;=x2 y1&lt;=y2 <span class="number">1</span>&lt;=x1&lt;=<span class="number">128</span> <span class="number">1</span>&lt;=y1&lt;=<span class="number">64</span></span><br><span class="line">dot:<span class="number">0</span>,清空 <span class="number">1</span>,填充</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Fill(x1, y1, x2, y2, dot)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定位置显示一个字符,包括部分字符</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">----------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">----------------------Show_char:要显示的字符</span><br><span class="line">----------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">----------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowChar(x, y, Show_char, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示字符串</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------ShowStr:要显示的字符串</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowString(x, y, ShowString, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示一个汉字</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------UTF8_ShowFont:要显示的字符串</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowFont(x, y, UTF8_ShowFont, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示一堆汉字</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------UTF8_ShowFonts:要显示的一堆汉字,</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowFonts(x, y, UTF8_ShowFonts, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 初始化OLED，</span><br><span class="line">* @param &#123;type&#125; :无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Init()</span><br><span class="line">]]</span><br></pre></td></tr></table></figure>
<h2 id="4、编写测试程序代码-1"><a href="#4、编写测试程序代码-1" class="headerlink" title="4、编写测试程序代码"></a>4、编写测试程序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local oled = require <span class="string">&quot;i2c_ssd1306_oled&quot;</span></span><br><span class="line">local function Test_Task()</span><br><span class="line">    oled.OLED_Init()--初始化</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        oled.OLED_ShowString(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>, <span class="number">12</span>, <span class="number">1</span>)--正常显示一堆<span class="number">12</span>*<span class="number">6</span>的ascii字符，会自动换行</span><br><span class="line">        oled.OLED_ShowChar(<span class="number">50</span>, <span class="number">20</span>, <span class="string">&#x27;6&#x27;</span>, <span class="number">16</span>, <span class="number">0</span>)--反白显示一个<span class="number">16</span>*<span class="number">8</span>的ascii字符</span><br><span class="line">        oled.OLED_ShowFont(<span class="number">90</span>, <span class="number">20</span>, <span class="string">&quot;哈&quot;</span>, <span class="number">16</span>, <span class="number">1</span>)--正常显示一个<span class="number">16</span>*<span class="number">16</span>的中文汉字</span><br><span class="line">        oled.OLED_ShowFonts(<span class="number">1</span>, <span class="number">40</span>, <span class="string">&quot;合宙，你好&quot;</span>, <span class="number">12</span>, <span class="number">0</span>)--反白显示一堆<span class="number">12</span>*<span class="number">12</span>的中文汉字，会自动换行</span><br><span class="line">        oled.OLED_Fill(<span class="number">70</span>, <span class="number">40</span>, <span class="number">90</span>, <span class="number">60</span>, <span class="number">1</span>)--画一个正方形</span><br><span class="line">        oled.OLED_Refresh_Gram()--更新显存</span><br><span class="line">        sys.wait(<span class="number">2000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    --显示内容</span><br><span class="line">    sys.wait(<span class="number">10000</span>)</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5、下载程序到开发板-1"><a href="#5、下载程序到开发板-1" class="headerlink" title="5、下载程序到开发板"></a>5、下载程序到开发板</h2><p>实验效果如下<br><img src="https://img-blog.csdnimg.cn/2020022513513421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><h2 id="1、本片博客涉及到的OLED驱动"><a href="#1、本片博客涉及到的OLED驱动" class="headerlink" title="1、本片博客涉及到的OLED驱动"></a>1、本片博客涉及到的OLED驱动</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://download.csdn.net/download/weixin_44570083/12190546">点击这里</a><br>开发不易，收5个积分，望理解</p>
<h2 id="2、第1种驱动能用的库函数"><a href="#2、第1种驱动能用的库函数" class="headerlink" title="2、第1种驱动能用的库函数"></a>2、第1种驱动能用的库函数</h2><ul>
<li><code>OLED_Clear()</code>：清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</li>
<li><code>OLED_Init()</code>：初始化OLED</li>
<li><code>OLED_ShowChar(x, y, Show_char, isChinese)</code>：在指定位置显示一个字符,包括部分字符</li>
<li><code>OLED_ShowString(x, y, ShowStr)</code>：在指定坐标起始处显示字符串</li>
</ul>
<p>优点：占用内存极小，没有缓存，功能简单<br>缺点：速度慢</p>
<h2 id="3、第2种驱动能用的库函数"><a href="#3、第2种驱动能用的库函数" class="headerlink" title="3、第2种驱动能用的库函数"></a>3、第2种驱动能用的库函数</h2><ul>
<li><code>OLED_Refresh_Gram()</code>：更新缓存数据，到oled，操作后，必须更新，否则不会生效</li>
<li><code>OLED_Display_On()</code>：开启OLED显示</li>
<li><code>OLED_Display_Off()</code>：关闭OLED显示</li>
<li><code>OLED_Clear()</code>：清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</li>
<li><code>OLED_Fill(x1, y1, x2, y2, dot)</code>：画矩形</li>
<li><code>OLED_ShowChar(x, y, Show_char, size, mode)</code>：在指定位置显示一个字符,包括部分字符</li>
<li><code>OLED_ShowString(x, y, ShowString, size, mode)</code>：在指定坐标起始处显示字符串</li>
<li><code>OLED_ShowFont(x, y, UTF8_ShowFont, size, mode)</code>：在指定坐标起始处显示一个汉字</li>
<li><code>OLED_ShowFonts(x, y, UTF8_ShowFonts, size, mode)</code>：在指定坐标起始处显示一堆汉字</li>
<li><code>OLED_Init()</code>：初始化OLED</li>
</ul>
<p>优点：速度快，比第一种驱动多一个功能，后续会继续增加新的功能<br>缺点：占用1k内存，有缓存</p>
<h2 id="3、再次提醒"><a href="#3、再次提醒" class="headerlink" title="3、再次提醒"></a>3、再次提醒</h2><ul>
<li> 现在时间使2020年2月25日，到目前位置官方的720sl固件只发布到v0008版本，因为v0008版本iic时序有问题，所以并不能通过本固件点亮OLED。我使用的v0009版本，近期会发布，静等即可</li>
<li>目前我使用的v0009内测版本，只能通过低速iic点亮oled，高速iic并不能点亮，所以速度快的优势体现不出来。我不清楚正式版本会不会修复这个问题。</li>
<li> 按照官方手册说明，高速iic比低速iic速度块4倍，修复这个问题后，oled刷新应该是丝滑般流畅</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/36/" data-id="ckkfmdgeb00clvkcg3bms9523" data-title="X、Air720SL模块Luat开发：全网首发，通过iic直接驱" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-35" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/35/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:03:41.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/35/">6、Air720SL模块Luat开发：又是一种新的外设之ADC模</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>GPIO的输入和输出我们已经讲完了，大家只要认真看过我的前几篇博客，相信掌握GPIO是使用方法不是什么难事</p>
</blockquote>
<blockquote>
<p>上篇博文我们讲到了，数字量输入采集<code>也就是GPIO输入</code>，数字量采集只能采集一些开关量，这可以解决绝大部分的问题，但是数字量采集也不是万能的，在遇到某些特殊的传感器时，也会感到无能为力<br><img src="https://img-blog.csdnimg.cn/20200217083126903.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>不是所有的传感器都是数字量输出的，也是有很多传感器是模拟量输出的，那到底什么是模拟量呢</p>
</blockquote>
<ul>
<li>模拟量传感器发出的是连续信号，用电压、电流、电阻等表示被测参数的大小。比如<code>温度传感器、压力传感器、光敏电阻、声敏电阻</code>等都是常见的模拟量传感器<br><img src="https://img-blog.csdnimg.cn/2020021710535543.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20200217105637363.png" alt="在这里插入图片描述"></li>
</ul>
<blockquote>
<p>既然这类模拟量传感器输出的是模拟信号，那么就不能使用常规的数字量输入功能进行采集，需采用新的功能<code>ADC模数转换</code>进行采集</p>
</blockquote>
<ul>
<li>ADC是Analog-to-Digital Converter的缩写。指模/数转换器或者模拟/数字转换器。是指将连续变量的模拟信号转换为离散的数字信号的器件。</li>
<li>典型的模拟数字转换器将模拟信号转换为表示一定比例电压值的数字信号。</li>
</ul>
<blockquote>
<p>在单片机上实现模拟量采集有如下两种方法</p>
</blockquote>
<ul>
<li>在某些单片机上没有ADC硬件接口，比如STC89C51就没有硬件ADC接口。如果想要实现模拟量采集就需要用AD采集芯片，ADC0804就是一种逐次比较型的A/D转换器，它可以把模拟量信号转化为数字量信号，被单片机读取，而不需要单片机具有硬件ADC功能。不过这种ADC采用并口通讯，比较占用普通IO口，GPIO不足的情况还可以使用ET2046采集，这款芯片通讯占用IO较少，价格也相对较高。<br><img src="https://img-blog.csdnimg.cn/20200217133705708.png" alt="在这里插入图片描述"></li>
<li>还有一种就是硬件ADC功能，比如我们的合宙AIR720SL就带了两路硬件ADC采集功能，如果两路不够用的话，还可以使用ET2046进扩充，至于怎么扩充这里就不做讲解了，大家自行了解，下面我们开始来重点讲Air720SL的硬件ADC使用功能<h1 id="二、了解Air720SL硬件设计手册adc部分"><a href="#二、了解Air720SL硬件设计手册adc部分" class="headerlink" title="二、了解Air720SL硬件设计手册adc部分"></a>二、了解Air720SL硬件设计手册adc部分</h1><blockquote>
<p>打开Air720Sl硬件设计手册找到如下部分<br><img src="https://img-blog.csdnimg.cn/20200217135814264.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>这里要注意的是，Air720SL系列芯片ADC和Air720x系列芯片这两者的电气特性不一样，测量范围也不一样，不要搞错了，否者会烧坏芯片<br>因为我现在还在老家出不去，没有设备供我具体测试，所以等会我就只测量GND看是否有反应，精度也没法测试，测量结果不具有代表性<br>具体使用的话，还是需要自己参考设计手册另行测试的</p>
</blockquote>
<h1 id="三、编写测试程序"><a href="#三、编写测试程序" class="headerlink" title="三、编写测试程序"></a>三、编写测试程序</h1><blockquote>
<p>Air720SL拥有两路硬件ADC功能，分别是GPIO62对应ADC0，GPIO63对应ADC1，两者的电气特性完全一致，分辨率也都是12位</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>首先使用前我们需要包含官方提供的adc驱动库<code>require &quot;adc&quot;</code>，然后才可以使用相关库函数</p>
</blockquote>
<blockquote>
<p>ADC0的测试程序如下</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">ADC0_Task</span><span class="params">()</span></span></span><br><span class="line">    local adcValue, voltValue = 0, 0</span><br><span class="line">    local result = adc.open(<span class="number">0</span>)--打开ADC通道<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;ADC0_Task&quot;</span>, <span class="string">&quot;ADC0_Task_run&quot;</span>)</span><br><span class="line">        adcValue, voltValue = adc.read(<span class="number">0</span>)--读取通道<span class="number">0</span>的值</span><br><span class="line">        --adc.read接口返回的voltval放大了<span class="number">3</span>倍，所以需要除以<span class="number">3</span>还原成原始电压</span><br><span class="line">        <span class="keyword">if</span> adcValue ~= <span class="number">0xffff</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;ADC 0的原始测量数据和电压值:&quot;</span>, adcValue, voltValue)</span><br><span class="line">        end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)</span><br><span class="line">    end</span><br><span class="line">    adc.close(<span class="number">0</span>)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ADC1的测试程序如下</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">ADC1_Task</span><span class="params">()</span></span></span><br><span class="line">    local adcValue, voltValue = 0, 0</span><br><span class="line">    local result = adc.open(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;ADC1_Task&quot;</span>, <span class="string">&quot;ADC1_Task_run&quot;</span>)</span><br><span class="line">        adcValue, voltValue = adc.read(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> adcValue ~= <span class="number">0xffff</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;ADC 1的原始测量数据和电压值:&quot;</span>, adcValue, voltValue)</span><br><span class="line">        end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)</span><br><span class="line">    end</span><br><span class="line">    adc.close(<span class="number">1</span>)</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>可以看出来，官方的库封装的很简洁，只需要三个函数就能实现模拟量采集<br>ADC0的测试代码和ADC1的测试代码几乎完全一样，没有什么区别，下面我们直接下载完整的测试程序进行测试</p>
</blockquote>
<h1 id="四、下载完整的代码到Air720Sl开发板"><a href="#四、下载完整的代码到Air720Sl开发板" class="headerlink" title="四、下载完整的代码到Air720Sl开发板"></a>四、下载完整的代码到Air720Sl开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line">--[[</span><br><span class="line">如果使用UART输出日志，打开这行注释的代码<span class="string">&quot;--log.openTrace(true,1,115200)&quot;</span>即可，根据自己的需求修改此接口的参数</span><br><span class="line">如果要彻底关闭脚本中的输出日志（包括调用<span class="built_in">log</span>模块接口和Lua标准print接口输出的日志），执行<span class="built_in">log</span>.openTrace(<span class="literal">false</span>,第二个参数跟调用openTrace接口打开日志的第二个参数相同)，例如：</span><br><span class="line"><span class="number">1</span>、没有调用过sys.opntrace配置日志输出端口或者最后一次是调用<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,nil,<span class="number">921600</span>)配置日志输出端口，此时要关闭输出日志，直接调用<span class="built_in">log</span>.openTrace(<span class="literal">false</span>)即可</span><br><span class="line"><span class="number">2</span>、最后一次是调用<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,<span class="number">1</span>,<span class="number">115200</span>)配置日志输出端口，此时要关闭输出日志，直接调用<span class="built_in">log</span>.openTrace(<span class="literal">false</span>,<span class="number">1</span>)即可</span><br><span class="line">]]</span><br><span class="line">--<span class="built_in">log</span>.openTrace(<span class="literal">true</span>,<span class="number">1</span>,<span class="number">115200</span>)</span><br><span class="line">require <span class="string">&quot;adc&quot;</span></span><br><span class="line"></span><br><span class="line">local function ADC0_Task()</span><br><span class="line">    local adcValue, voltValue = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    local result = adc.open(<span class="number">0</span>)--打开ADC通道<span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;ADC0_Task&quot;</span>, <span class="string">&quot;ADC0_Task_run&quot;</span>)</span><br><span class="line">        adcValue, voltValue = adc.read(<span class="number">0</span>)--读取通道<span class="number">0</span>的值</span><br><span class="line">        --adc.read接口返回的voltval放大了<span class="number">3</span>倍，所以需要除以<span class="number">3</span>还原成原始电压</span><br><span class="line">        <span class="keyword">if</span> adcValue ~= <span class="number">0xffff</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;ADC 0的原始测量数据和电压值:&quot;</span>, adcValue, voltValue)</span><br><span class="line">        end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)</span><br><span class="line">    end</span><br><span class="line">    adc.close(<span class="number">0</span>)</span><br><span class="line">end</span><br><span class="line">local function ADC1_Task()</span><br><span class="line">    --初始化GPIO 比如GPIO_38</span><br><span class="line">    local adcValue, voltValue = <span class="number">0</span>, <span class="number">0</span></span><br><span class="line">    local result = adc.open(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;ADC1_Task&quot;</span>, <span class="string">&quot;ADC1_Task_run&quot;</span>)</span><br><span class="line">        adcValue, voltValue = adc.read(<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> adcValue ~= <span class="number">0xffff</span> then</span><br><span class="line">            <span class="built_in">log</span>.info(<span class="string">&quot;ADC 1的原始测量数据和电压值:&quot;</span>, adcValue, voltValue)</span><br><span class="line">        end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)</span><br><span class="line">    end</span><br><span class="line">    adc.close(<span class="number">1</span>)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    sys.taskInit(ADC0_Task)</span><br><span class="line">    sys.taskInit(ADC1_Task)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序后，我们将ADC0和ADC1的引脚同时接地引脚在这<img src="https://img-blog.csdnimg.cn/20200217141907494.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>能够看到ADC1成功检测到了低电平，输出的数据是0。而ADC0却没有任何反应.。<br>这里我也分开单独测试过均没有测试成功。也许是官方的底层固件出了bug，目前我使用的是v0008版本的固件，下个版本也许会修复这个问题，使用的话建议暂时避开ADC0<br><img src="https://img-blog.csdnimg.cn/20200217141937348.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><h2 id="1、官方的adc库函数"><a href="#1、官方的adc库函数" class="headerlink" title="1、官方的adc库函数"></a>1、官方的adc库函数</h2><ul>
<li>adc.open(0)–打开ADC通道0</li>
<li>adcValue, voltValue = adc.read(0)–读取通道0的值，读取之前必须先打开ADC0</li>
<li>adc.close(0)–关闭ADC通道0</li>
<li>ADC1的使用方法与ADC0一直，换个参数即可</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/35/" data-id="ckkfmdgb2004lvkcg198h1lks" data-title="6、Air720SL模块Luat开发：又是一种新的外设之ADC模" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-34" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/34/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:03:19.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/34/">5、Air720SL模块Luat开发：GPIO输入常见的两种使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>上一篇博文我们讲到了将GPIO初始化为输出功能用来驱动LED或者其他外设，这篇博文我们来继续讲讲GPIO剩下的另外一个功能——输入功能<br>既然是智能设备，那就需要和外界交互信息。获取外界消息的方法有很多。<br>通过互联网访问是一种获取信息的方式。<br><img src="https://img-blog.csdnimg.cn/20200216132129638.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>还有是通过自身的传感器或者按钮开关，获取传感信息，也是一种获取信息的方式，它们输出的信号是开关量<br><img src="https://img-blog.csdnimg.cn/20200216132030279.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20200216132307740.png" alt="在这里插入图片描述"><br>通过互联网获取信息，我们后面的博客在讲，先不急。<br>我们今天来讲一讲，怎么利用GPIO的输入功能来获取外界的开关信号。</p>
</blockquote>
<h1 id="二、编写程序"><a href="#二、编写程序" class="headerlink" title="二、编写程序"></a>二、编写程序</h1><blockquote>
<p>利用GPIO的输入功能获取开关信号有两种方法，一种是查询法，另外一种是中断法，我们依次讲解</p>
</blockquote>
<h2 id="1、查询法"><a href="#1、查询法" class="headerlink" title="1、查询法"></a>1、查询法</h2><blockquote>
<p>顾名思义，查询法就是不停的查询GPIO的状态，不管开关有没有按下，我都去查询，查询到什么就是什么，我没有查询的时候，你按了也没有用，这种方法的实时性比较低。<br>具体使用方法如下</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">GPIO_Input_init</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    local KEY1 </span>= pins.setup(<span class="number">27</span>, nil, pio.PULLUP)--将GPIO27初始化为输入上拉</span><br><span class="line">	local LED1 = pins.setup(<span class="number">64</span>, <span class="number">0</span>)--将GPIO64初始化为输出</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> KEY1() == <span class="number">0</span> then--如果KEY1被接地，那么就点亮LED1</span><br><span class="line">			LED1(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			LED1(<span class="number">0</span>)--否则熄灭LED1</span><br><span class="line">		end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)--一秒查询一次</span><br><span class="line">    end</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>查询法用起来比较简单需要不停的去查询<br>假如延时过短，就会出现任务切换频繁，执行效率低，cpu一直在忙着查询。<br>延时时间过长就会出现实时性低，比如我上面的代码key1接通后运气不好的时候需要等一秒钟才会有反应，不建议在对事件敏感的时候使用</p>
</blockquote>
<h2 id="2、中断法"><a href="#2、中断法" class="headerlink" title="2、中断法"></a>2、中断法</h2><blockquote>
<p>中断我对它的理解是，他的优先级高于普通函数，可以打断正在执行的低优先级中断，和普通任务。<br>有打断的意思，只要正在执行的任务优先级比它低，当中断来临时就可以被打断，转而去执行中断函数。<br>中断的原则是快进快出，不能在里面执行复杂的事情，否则会影响其他任务执行。相对普通任务实时性较高，适用于对事件敏感的情况<br>在Air720SL中GPIO输入中断的使用方法如下</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">local LED2</span><br><span class="line">function GPIO_Exti_cb(msg)--中断回调函数</span><br><span class="line">    <span class="keyword">if</span> msg == cpu.INT_GPIO_POSEDGE then--如果当前中断是上升沿触发</span><br><span class="line">        LED2(<span class="number">0</span>)--熄灭LED2</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        LED2(<span class="number">1</span>)--否则点亮LED2</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function GPIO_Exti_init()</span><br><span class="line">    local KEY2 = pins.setup(<span class="number">28</span>, GPIO_Exti_cb, pio.PULLUP)--将GPIO28初始化为输入上拉，并且启用中断回调</span><br><span class="line">	LED2 = pins.setup(<span class="number">65</span>, <span class="number">0</span>)--将GPIO65初始化为输出</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>中断的使用方法相比查询到要显得麻烦一下，需要多写一个函数，代码量比较多，但是好处就是实时性高。</p>
</blockquote>
<h1 id="三、下载完整的代码到Air720Sl开发板"><a href="#三、下载完整的代码到Air720Sl开发板" class="headerlink" title="三、下载完整的代码到Air720Sl开发板"></a>三、下载完整的代码到Air720Sl开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">require <span class="string">&quot;pins&quot;</span></span><br><span class="line"></span><br><span class="line">local function GPIO_Input_init()</span><br><span class="line">    local KEY1 = pins.setup(<span class="number">27</span>, nil, pio.PULLUP)--将GPIO27初始化为输入上拉</span><br><span class="line">	local LED1 = pins.setup(<span class="number">64</span>, <span class="number">0</span>)--将GPIO64初始化为输出</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="keyword">if</span> KEY1() == <span class="number">0</span> then--如果KEY1被接地，那么就点亮LED1</span><br><span class="line">			LED1(<span class="number">1</span>)</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">			LED1(<span class="number">0</span>)--否则熄灭LED1</span><br><span class="line">		end</span><br><span class="line">        sys.wait(<span class="number">1000</span>)--一秒查询一次</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local LED2</span><br><span class="line">function GPIO_Exti_cb(msg)--中断回调函数</span><br><span class="line">    <span class="keyword">if</span> msg == cpu.INT_GPIO_POSEDGE then--如果当前中断是上升沿触发</span><br><span class="line">        LED2(<span class="number">0</span>)--熄灭LED2</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        LED2(<span class="number">1</span>)--否则点亮LED2</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function GPIO_Exti_init()</span><br><span class="line">    local KEY2 = pins.setup(<span class="number">28</span>, GPIO_Exti_cb, pio.PULLUP)--将GPIO28初始化为输入上拉，并且启用中断回调</span><br><span class="line">	LED2 = pins.setup(<span class="number">65</span>, <span class="number">0</span>)--将GPIO65初始化为输出</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">	sys.wait(<span class="number">10000</span>)</span><br><span class="line">    sys.taskInit(GPIO_Input_init)</span><br><span class="line">	sys.taskInit(GPIO_Exti_init)</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序后运行结果如下，GPIO27控制LED1，GPIO28控制LED2.<br>GPIO27使用一秒查询一次，反应速度感觉明显有卡顿<br>GPIO28采用中断，几乎感觉不出来有延时<br><img src="https://img-blog.csdnimg.cn/20200216125954531.gif" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><h2 id="1、官方的pins库函数"><a href="#1、官方的pins库函数" class="headerlink" title="1、官方的pins库函数"></a>1、官方的pins库函数</h2><ul>
<li>pins.setup(28, GPIO_Exti_cb, pio.PULLUP)–将GPIO28初始化为输入上拉，并且启用中断回调</li>
<li>pins.setup(27, nil, pio.PULLUP)–将GPIO27初始化为输入上拉<h2 id="2、两种使用方法的环境"><a href="#2、两种使用方法的环境" class="headerlink" title="2、两种使用方法的环境"></a>2、两种使用方法的环境</h2></li>
<li>查询法适用于普通场景，对事件敏感度不高的情况，查询不建议太过于频繁，一般按钮的话500ms查询一次，速度都还可以接收，</li>
<li>中断法适用于强实时性场所，比如某些设备的<code>急停按钮</code>这就不能用查询法了，这类按钮对事件要求比较严格，用中断可以满足要求</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/34/" data-id="ckkfmdgb2004kvkcg29omghm9" data-title="5、Air720SL模块Luat开发：GPIO输入常见的两种使用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-33" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/33/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:03:02.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/33/">4、Air720SL模块Luat开发：用GPIO输出功能实现一个</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>本系列教程选择使用Luat在模块上进行二次开发，那么就要把Air720SL模块当作一个普通的单片机来学。</p>
</blockquote>
<blockquote>
<p>既然我们谈到了单片机那么驱动外设是必不可少的，单片机的外设有很多中，常见的有GPIO，UART，IIC，ADC，DAC，SPI等等。<br>就拿我们的Air720SL来讲，其拥有的外设也不少，可玩性还是很高的。<br><img src="https://img-blog.csdnimg.cn/20200214121656756.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>如果仅仅把它当作一个通讯模块来用，显得有点浪费。<br>既然厂商开发了这么多外设功能，那我们要想办法把他用起来，而不是放在那里吃灰，要想方设法榨干它的身体</p>
</blockquote>
<blockquote>
<p>俗话说得好，不学爬怎么学跑呢，对吧。<br>学习也是一样，我们要从简单的学起不是上来就干最难的。<br>在上面这么多种外设中，GPIO无疑是最简单的，最容易的，也是最基本的，而GPIO又有输入和输出的功能。<br>想要点亮一个灯，那就需要用到GPIO的输出功能。那我们现在闲话少说，开始学习新的内容</p>
</blockquote>
<h1 id="二、磨刀不误砍柴工"><a href="#二、磨刀不误砍柴工" class="headerlink" title="二、磨刀不误砍柴工"></a>二、磨刀不误砍柴工</h1><h2 id="1、怎么才能点亮一个灯"><a href="#1、怎么才能点亮一个灯" class="headerlink" title="1、怎么才能点亮一个灯"></a>1、怎么才能点亮一个灯</h2><blockquote>
<p>我们这里就长话短说，想要灯亮首先得满足led灯的电压要求，其次还要形成足够的电流，led才能点亮。<br>在我们的开发板这里我们就不需要考虑这些，官方的就是计算好的，我们只需要让它形成电流即可，形成电流的条件是在led两端要有压差</p>
</blockquote>
<blockquote>
<p>现在我们打开开发板原理图，找到指示灯模块，如下图所示<br><img src="https://img-blog.csdnimg.cn/20200214123820350.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>从原理图得知，LED实际上是由三极管控制的<br>如果想要LED1和LED2两端形成压差，那就要使三极管导通<br>在本图中三极管导通的条件是Vb&gt;Ve，Ve=0，那么就需要Vb&gt;0<br><img src="https://img-blog.csdnimg.cn/20200214143011480.png" alt="在这里插入图片描述"><br>而Vb的电压是由GPIO输出经过电阻分压，而形成的，也就是说，要想LED点亮，那么GPIO需要输出高电平，我们分别控制GPIO64和GPIO65就能控制LED</p>
</blockquote>
<h2 id="2、尝试点亮一个灯"><a href="#2、尝试点亮一个灯" class="headerlink" title="2、尝试点亮一个灯"></a>2、尝试点亮一个灯</h2><blockquote>
<p>既然知道了应该怎样才能点亮一个灯，那我们现在就来试一下，验证刚才的分析对不对<br>首先我们需要包含一个库<code>pin</code>库，<code>require &quot;pins&quot;</code>才能使用GPIO驱动相关的库函数<br>然后在main程序里写入如下代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">user_main</span><span class="params">()</span></span></span><br><span class="line">    --初始化GPIO 比如GPIO_64</span><br><span class="line">    local LED1 = pins.setup(<span class="number">64</span>, <span class="number">0</span>)</span><br><span class="line">	local LED2 = pins.setup(<span class="number">65</span>, <span class="number">0</span>)</span><br><span class="line">	LED1(<span class="number">1</span>)--让指示灯亮</span><br><span class="line">	LED2(<span class="number">1</span>)--让指示灯亮</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载测试程序，等待片刻LED1（第二个灯）和LED2（第三个灯）成功点亮，<code>第一个灯是电源灯，不控制的话开机就会亮</code><br><img src="https://img-blog.csdnimg.cn/20200214131242363.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>接下来我们测量一下GPIO64的引脚电平，果然是高电平点亮LED，说明我们刚才的分析没有问题<br><img src="https://img-blog.csdnimg.cn/20200214132321971.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="三、下载完整的代码到Air720Sl开发板"><a href="#三、下载完整的代码到Air720Sl开发板" class="headerlink" title="三、下载完整的代码到Air720Sl开发板"></a>三、下载完整的代码到Air720Sl开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">require <span class="string">&quot;pins&quot;</span></span><br><span class="line">local function LED0()</span><br><span class="line">    --初始化GPIO 比如GPIO_64</span><br><span class="line">    local ledpin = pins.setup(<span class="number">64</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        ledpin(<span class="number">1</span>)--让指示灯亮<span class="number">500</span>ms</span><br><span class="line">        sys.wait(<span class="number">500</span>)</span><br><span class="line">        ledpin(<span class="number">0</span>); --让指示灯灭<span class="number">500</span>ms</span><br><span class="line">        sys.wait(<span class="number">500</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="function">local function <span class="title">LED1</span><span class="params">()</span></span></span><br><span class="line">    --初始化GPIO 比如GPIO_65</span><br><span class="line">    local ledpin = pins.setup(<span class="number">65</span>, <span class="number">0</span>)</span><br><span class="line">    <span class="keyword">for</span> i=<span class="number">1</span>,<span class="number">5</span> <span class="keyword">do</span></span><br><span class="line">        ledpin(<span class="number">1</span>)--让指示灯亮<span class="number">500</span>ms</span><br><span class="line">        sys.wait(<span class="number">500</span>)</span><br><span class="line">        ledpin(<span class="number">0</span>); --让指示灯灭<span class="number">500</span>ms</span><br><span class="line">        sys.wait(<span class="number">500</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"><span class="function">local function <span class="title">user_main</span><span class="params">()</span></span></span><br><span class="line"><span class="function">	sys.<span class="title">wait</span><span class="params">(<span class="number">10000</span>)</span></span></span><br><span class="line"><span class="function">    sys.<span class="title">taskInit</span><span class="params">(LED0)</span></span></span><br><span class="line"><span class="function">    sys.<span class="title">taskInit</span><span class="params">(LED1)</span></span></span><br><span class="line"><span class="function">end</span></span><br><span class="line"><span class="function"></span></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序后运行结果如下，LED1和LED2以1HZ频率闪烁，LED2闪烁5次后停止<br><img src="https://img-blog.csdnimg.cn/20200214140728460.gif" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><h2 id="1、官方的pins库函数"><a href="#1、官方的pins库函数" class="headerlink" title="1、官方的pins库函数"></a>1、官方的pins库函数</h2><ul>
<li>pins.setup(pin, val, pull)：配置GPIO模式</li>
<li>pins.close(pin)：关闭GPIO模式</li>
<li>GPIO的操作直接使用setup函数的返回值即可<h2 id="2、学会驱动GPIO输出有什么作用"><a href="#2、学会驱动GPIO输出有什么作用" class="headerlink" title="2、学会驱动GPIO输出有什么作用"></a>2、学会驱动GPIO输出有什么作用</h2></li>
<li>直接驱动LED灯</li>
<li>直接驱动继电器，间接控制插座或者其他强电开关，实现自动控制</li>
<li>在没有硬件IIC的芯片上，可以使用GPIO输入和输出功能，模拟软件IIC</li>
<li>这里只列出了三种比较常用的用法，其他用法还有很多，需要自己摸索</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/33/" data-id="ckkfmdgb1004jvkcg1u9l4qrl" data-title="4、Air720SL模块Luat开发：用GPIO输出功能实现一个" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-32" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/32/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:02:31.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/32/">3、Air720SL模块Luat开发：实现用&#34;Printf&#34;把文</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>在我的第二篇博文中<code>2、Air720SL模块Luat开发：第一个Luat的Hello World（在目录出可找到入口）</code>我们用了一下<br><code>print</code>函数实现打印Hello World到日志</p>
</blockquote>
<blockquote>
<p>在Lua语法中print函数可以接收任意字符串实现输出字符到日志<br>1、可以直接输出数字<code>print(123)</code>运行结果如下<br><img src="https://img-blog.csdnimg.cn/20200213105046567.png" alt="在这里插入图片描述"><br>2、也可以直接字符<code> print(&quot;abc&quot;)</code>运行结果如下<br><img src="https://img-blog.csdnimg.cn/20200213105213956.png" alt="在这里插入图片描述"><br>3、还可以混合输出<code>print(&quot;abc&quot;..123)</code>运行结果如下<br><img src="https://img-blog.csdnimg.cn/20200213105321335.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>但是<code>print</code>这个函数并不能用来格式化输出<br>如果我要输出一个可变化的字符串，不是说<code>print</code>函数不行，它也可以，但是却比较麻烦<br>比如我要输出下面这样一段字符串，其中标红的是需要随时改变的变量<br>Hello <code>Tom</code>!my name is:<code>YXCN</code>,I am <code>30</code> years old now</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">local other=<span class="string">&quot;Tom&quot;</span></span><br><span class="line">local name=<span class="string">&quot;YXCN&quot;</span></span><br><span class="line">local age=<span class="number">30</span></span><br><span class="line">print(<span class="string">&quot;Hello &quot;</span>..other..<span class="string">&quot;!&quot;</span>..<span class="string">&quot;my name is:&quot;</span>..name..<span class="string">&quot;,&quot;</span>..<span class="string">&quot;I am &quot;</span>..age..<span class="string">&quot; years old now&quot;</span>)</span><br></pre></td></tr></table></figure>
<blockquote>
<p>用<code>print</code>输出，需要写一大段，还要自己用<code>..</code>组织字符串连接，一共用了八个字符串连接符，用了六对双引号<br>这个例子还好只有三个变量，就已经显得有点复杂，如果变量一多，想都不敢想。<br>这样写法阅读起来也是及其困难的，无法直接得出变量是什么类型的，可能是字符串，也可能是数字，还得回去看变量到底是什么值，这节课我们就一起学习一下怎么用Lua实现C语言的Printf格式化输出的功能</p>
</blockquote>
<h1 id="二、Printf格式化函数输出实现"><a href="#二、Printf格式化函数输出实现" class="headerlink" title="二、Printf格式化函数输出实现"></a>二、Printf格式化函数输出实现</h1><blockquote>
<p>在Lua里面没有<code>printf</code>函数，直接写会报错<br><img src="https://img-blog.csdnimg.cn/20200213111500236.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>这里我们需要自己实现一下，代码如下</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">printf</span><span class="params">(...)</span></span></span><br><span class="line"><span class="function">	<span class="title">print</span><span class="params">(<span class="built_in">string</span>.format(...))</span></span></span><br><span class="line"><span class="function">end</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>现在我们一起来试一下Hello <code>Tom</code>!my name is:<code>YXCN</code>,I am <code>30</code> years old now输出有多简单</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">local function <span class="title">printf</span><span class="params">(...)</span></span></span><br><span class="line"><span class="function">	<span class="title">print</span><span class="params">(<span class="built_in">string</span>.format(...))</span></span></span><br><span class="line"><span class="function">end</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">local other</span>=<span class="string">&quot;Tom&quot;</span></span><br><span class="line">local name=<span class="string">&quot;YXCN&quot;</span></span><br><span class="line">local age=<span class="number">30</span></span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Hello %s ! my name is: %s , I am %d years old now&quot;</span>,other,name,age)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>对比两行<code>print</code>和<code>printf</code>的输出函数，<code>printf</code>函数格式化输出只用的一对双引号，结构清晰，能从语句中直接得出，需要输出的是什么格式的数据，很显然第一个转义码%s和第二个转义码%s代表的是字符串，第三个转义码%d代表的是数字<br>在Lua软件上直接输出结果如下，说明语法上是行得通的<br><img src="https://img-blog.csdnimg.cn/20200213112732472.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>这里给出Lua支持所有的转义码</p>
</blockquote>
<ul>
<li>%c - 接受一个数字, 并将其转化为ASCII码表中对应的字符</li>
<li>%d, %i - 接受一个数字并将其转化为有符号的整数格式</li>
<li>%o - 接受一个数字并将其转化为八进制数格式</li>
<li>%u - 接受一个数字并将其转化为无符号整数格式</li>
<li>%x - 接受一个数字并将其转化为十六进制数格式, 使用小写字母</li>
<li>%X - 接受一个数字并将其转化为十六进制数格式, 使用大写字母</li>
<li>%e - 接受一个数字并将其转化为科学记数法格式, 使用小写字母e</li>
<li>%E - 接受一个数字并将其转化为科学记数法格式, 使用大写字母E</li>
<li>%f - 接受一个数字并将其转化为浮点数格式</li>
<li>%g(%G) - 接受一个数字并将其转化为%e(%E, 对应%G)及%f中较短的一种格式</li>
<li>%q - 接受一个字符串并将其转化为可安全被Lua编译器读入的格式</li>
<li>%s - 接受一个字符串并按照给定的参数格式化该字符串</li>
</ul>
<blockquote>
<p>下面我们将程序下载到开发板验证</p>
</blockquote>
<h1 id="三、下载程序到Air720Sl开发板"><a href="#三、下载程序到Air720Sl开发板" class="headerlink" title="三、下载程序到Air720Sl开发板"></a>三、下载程序到Air720Sl开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line">local function <span class="built_in">printf</span>(...)</span><br><span class="line">	print(<span class="built_in">string</span>.format(...))</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">	local other=<span class="string">&quot;Tom&quot;</span></span><br><span class="line">	local name=<span class="string">&quot;YXCN&quot;</span></span><br><span class="line">	local age=<span class="number">30</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="built_in">printf</span>(<span class="string">&quot;Hello %s ! my name is: %s , I am %d years old now&quot;</span>,other,name,age)</span><br><span class="line">		age = age + <span class="number">1</span>--一秒加一岁</span><br><span class="line">		sys.wait(<span class="number">1000</span>)</span><br><span class="line">	end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序后运行结果如下，一秒加一岁，现在已经240多岁了，哈哈<br><img src="https://img-blog.csdnimg.cn/20200213113713240.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/32/" data-id="ckkfmdgb1004ivkcgf5tb9onh" data-title="3、Air720SL模块Luat开发：实现用&#34;Printf&#34;把文" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-31" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/31/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:02:10.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/31/">2、Air720SL模块Luat开发：第一个Luat的Hello</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>学习过C语言的朋友应该很清楚（没有学过可以直接跳过前言，以下纯属闲聊），C语言入门第一课就是HelloWorld，下面的这段代码大家都不陌生</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;hello world!\n&quot;</span>);</span><br><span class="line">    system(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>在c语言里，想要使用printf函数就需要包含<code>#include &lt;stdio.h&gt;</code>，<br>想要程序能够运行，那需要有main函数，程序以main函数作为程序入口，开始执行</p>
</blockquote>
<blockquote>
<p>而Lua是一个脚本语言，相比C语言要少了很多限制，它可以不需要main函数，甚至参数可以不用定义，直接使用，系统会根据里面的值，自动创建一个对应的变量存储它，用起来十分方便。<br>直接写一个<code>str=“abc”</code>系统会自动给这个数据创建一个String类型的变量存储<br> 直接写一个<code>str=123</code>系统会自动给这个数据创建一个Number类型的变量存储<br>开始运行时直接从上到下顺序执行（下面这段程序，是我随便打出来的，没有什么实际意义）</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">tab1=&#123;&#125;</span><br><span class="line">print(tab2.key1)</span><br><span class="line">print(tab2[<span class="string">&quot;key1&quot;</span>])</span><br><span class="line">print(tab2.key2)</span><br><span class="line">print(tab3[<span class="number">1</span>])</span><br><span class="line">print(tab3[<span class="number">2</span>])</span><br><span class="line">print(tab3[<span class="number">3</span>])</span><br><span class="line">print(tab3[<span class="number">4</span>])</span><br><span class="line">tab1.key1=<span class="string">&quot;www.baidu.com&quot;</span></span><br><span class="line">print(tab1[<span class="string">&quot;key1&quot;</span>])</span><br><span class="line">print(tab1.key1)</span><br><span class="line">tab1[<span class="string">&quot;key2&quot;</span>]=<span class="string">&quot;haha&quot;</span></span><br><span class="line">print(tab1[<span class="string">&quot;key2&quot;</span>])</span><br><span class="line">print(tab1.key2)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们这里也不例外，我选择将HelloWorld作为本系列教程的第一个程序，<br>闲话扯了这么多，下面开始正式我们的Helloworld例程</p>
</blockquote>
<h1 id="二、新建一个工程"><a href="#二、新建一个工程" class="headerlink" title="二、新建一个工程"></a>二、新建一个工程</h1><h2 id="1、创建文件"><a href="#1、创建文件" class="headerlink" title="1、创建文件"></a>1、创建文件</h2><blockquote>
<p>在一个自己能找到的地方，比如桌面，实际随便哪里都行，新建一个文件夹，命名为0_HelloWorld<br><img src="https://img-blog.csdnimg.cn/20200212222315435.png" alt="在这里插入图片描述"><br>进去新建一个文本文档命名为main.lua，注意后缀名，最好是.lua，不要是.txt，其他的后缀名我也没试过<br><img src="https://img-blog.csdnimg.cn/20200212222624121.png" alt="在这里插入图片描述"></p>
</blockquote>
<h2 id="2、编写程序"><a href="#2、编写程序" class="headerlink" title="2、编写程序"></a>2、编写程序</h2><blockquote>
<p>双击main.lua打开复制如下代码，然后<code>保存</code></p>
</blockquote>
<blockquote>
<p>这里有些朋友可能会说，你刚才在前言上面不是说可以不用main函数吗，这里怎么有个<code>user_main()</code><br>没错确实可以不用main函数，不信等会你测试完成我的代码后，可以自己试，不会有任何问题<br>我这里利用系统任务创建了一个main函数，可能是因为我有强迫症吧<br>我个人觉得lua虽然可以直接写程序，但是文件一多，程序就显得比较乱<br>这是我的个人原因，我习惯有一个函数能够统一运行用户程序代码，以后的教程我放出来的程序都会是这个程序格式<br>可以将下面这段程序理解为一个工程模板，以后的程序我都是在这个模板上面改的</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		print(<span class="string">&quot;Hello World&quot;</span>)</span><br><span class="line">		sys.wait(<span class="number">1000</span>)</span><br><span class="line">	end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架，下面不要随便动</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br></pre></td></tr></table></figure>
<blockquote>
<p>这个程序的主逻辑很简单，在一个死循环里面<code>while true do</code>不停的做<code>print(&quot;Hello World&quot;)</code>输出，然后延时1000ms，继续循环</p>
</blockquote>
<ul>
<li>print(“Hello World”)：输出函数</li>
<li>sys.wait(1000)：阻塞延时函数单位毫秒</li>
<li>sys.taskInit(user_main)：创建一个任务，这里创建的是user_main()</li>
<li>sys.init(0, 0)：系统框架初始化</li>
<li>sys.run()：系统开始运行</li>
</ul>
<h2 id="3、下载脚本"><a href="#3、下载脚本" class="headerlink" title="3、下载脚本"></a>3、下载脚本</h2><blockquote>
<p>打开LuaTools(不知道这是什么东西的，去看我的第一篇博客<code>1、Air720SL模块Luat开发：环境搭建</code>，从本文的目录处可找到入口)<br><img src="https://img-blog.csdnimg.cn/20200212231613579.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击右边蓝色按钮<code>下载Lua脚本</code><img src="https://img-blog.csdnimg.cn/2020021223165889.png" alt="在这里插入图片描述">进入如下界面<br><img src="https://img-blog.csdnimg.cn/20200212231800607.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击添加脚本，添加刚才写的程序<br><img src="https://img-blog.csdnimg.cn/20200212231856340.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>点击下载脚本，会弹出如下界面<br><img src="https://img-blog.csdnimg.cn/20200212231941488.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>直接点击确定，下载器会自动完成脚本库的添加，并且进入下载状态<br><img src="https://img-blog.csdnimg.cn/2020021223203293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>按下复位按钮，程序开始下载，等待下载完成<br><img src="https://img-blog.csdnimg.cn/20200212232143469.png" alt="在这里插入图片描述"><br>关闭下载界面，回到主界面，选择USB打印，并且打开端口<img src="https://img-blog.csdnimg.cn/202002122322121.png" alt="在这里插入图片描述"><br>系统会打印一些无关的消息，我们的<code>Hello World</code>就藏在里面<br><img src="https://img-blog.csdnimg.cn/20200212232405188.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>自己要是不想找的话，那就等一会，系统会逐渐停止抽搐<br><img src="https://img-blog.csdnimg.cn/20200212232639885.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述">直到满屏的<code>Hello World</code>出现，我们的第一个例程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/31/" data-id="ckkfmdgb0004hvkcgfd703dy4" data-title="2、Air720SL模块Luat开发：第一个Luat的Hello" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/26/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/25/">25</a><a class="page-number" href="/page/26/">26</a><span class="page-number current">27</span><a class="page-number" href="/page/28/">28</a><a class="page-number" href="/page/29/">29</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/28/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>