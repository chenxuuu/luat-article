<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/37/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-617" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/21/617/" class="article-date">
  <time class="dt-published" datetime="2019-08-21T09:42:13.000Z" itemprop="datePublished">2019-08-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/21/617/">Air系列模块Lua版本应用运行框架概述</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;div style=&quot;border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;&quot;&gt;
</code></pre>
<div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">一、名词解释</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">1.1</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">Lua</span></b><b><span style="font-size:
11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">主</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";
mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">task<o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">            </span><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">core</span><span style="font-size:9.0pt;
font-family:"微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">在启动过程中，会创建一系列的<span lang="EN-US">task</span>，例如音频、协议栈、串口等<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">         </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">其中有一个<span lang="EN-US">task</span>，用来加载<span lang="EN-US">Lua</span>虚拟机，解析运行用户编写的<span lang="EN-US">Lua</span>脚本，这个<span lang="EN-US">task</span>，我们称之为<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>（为什么称之为主<span lang="EN-US">task</span>呢？因为在<span lang="EN-US">Lua</span>脚本中，利用<span lang="EN-US">Lua</span>的协程特性封装了一个<span lang="EN-US">sys.taskInit</span>接口，借用了<span lang="EN-US">task</span>的概念，实际上并不是真正的<span lang="EN-US">task</span>；为了和脚本中封装的这种<span lang="EN-US">task</span>（协程）区分，所以称<span lang="EN-US">core</span>中的<span lang="EN-US">task</span>为<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>）<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">         </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">脚本中的所有应用，都运行在<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>中，属于单<span lang="EN-US">task</span>应用<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">1.2</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">            </span><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">core</span><span style="font-size:9.0pt;
font-family:"微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">创建<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>时，会为这个<span lang="EN-US">task</span>分配一个消息队列，这个队列称之为外部消息队列，<span lang="EN-US">core</span>中的其他<span lang="EN-US">task</span>向<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>发送的消息，都存储在这个外部消息队列中<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">1.3</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、内部消息队列</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">            </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">脚本运行时，内部各应用之间，可能需要相互传递消息，这个消息就被存储在内部消息队列中<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">二、应用运行框架</span></b><span lang="EN-US" style="font-size:
9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:宋体;color:red;
mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.1</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、运行框架总图</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">            </span><img src="http://oldask.openluat.com/image/show/attachments-2019-08-sqtWw3bW5d5d115ad0131.png" class="img-responsive" style="width: 988.5px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.2</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、内部消息队列中的消息处理流</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-n3Q6pLnb5d5d116ab6599.png" class="img-responsive" style="width: 1005px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.3</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列中的定时器消息处理流</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-IciWGW3e5d5d1179a1768.png" class="img-responsive" style="width: 899px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.4</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列中的音频播放消息处理流</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-NydgiWkt5d5d11882ec5d.png" class="img-responsive" style="width: 902px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.5</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列中的串口收发消息处理流</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-iMWHXT5V5d5d119987789.png" class="img-responsive" style="width: 902px;"></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-m92NeDMY5d5d11a358f3d.png" class="img-responsive" style="width: 902px;"><br></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.6</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列中的</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">GPIO</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">中断消息处理流</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-uB5uO4pm5d5d11af9f32e.png" class="img-responsive" style="width: 902px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.7</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、外部消息队列中的</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">SOCKET</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">消息处理流（4G模块）</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">       </span></b><img src="http://oldask.openluat.com/image/show/attachments-2019-08-bllnuwsl5d5d11bfa7fd1.png" class="img-responsive" style="width: 945px;"></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:"微软雅黑","sans-serif";mso-ascii-font-family:inherit;mso-hansi-font-family:
inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">三、常见问题</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:"inherit","serif";mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.1</span></b><b><span style="font-size:11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、为什么</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">Lua</span></b><b><span style="font-size:
11.5pt;font-family:"微软雅黑","sans-serif";mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">版本运行某些功能会有延时</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:"inherit","serif";mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">         </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">脚本中的应用属于单<span lang="EN-US">task</span>应用，都运行在一个<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>中，由<span lang="EN-US">2.1</span>章节可知，<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>一直在循环处理内部消息队列和外部消息队列中的消息，消息是先进先出先处理<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">         </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">即使有新消息到达，插入到内部消息队列或者外部消息队列中，必须等前面所有的消息处理结束，才能处理新消息<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a>



















































</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">         </span><span style="font-size:9.0pt;font-family:"微软雅黑","sans-serif";mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">例如：首先产生了一个定时器消息，定时器消息的处理动作（新建一个文件，写<span lang="EN-US">500K</span>数据）比较耗时，在写文件的过程中，<span lang="EN-US">core</span>中的串口<span lang="EN-US">task</span>产生了一个串口接收数据通知消息，虽然可以插入到<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>的外部消息队列中，但是由于<span lang="EN-US">Lua</span>主<span lang="EN-US">task</span>还在执行写文件的动作，所以串口消息只能等待，问题就表现为“我明明已经向模块串口发送了数据，为什么脚本在<span lang="EN-US">3</span>秒后才开始处理串口数据呢？”<span lang="EN-US"><o:p></o:p></span></span></p></div>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/21/617/" data-id="ckkfmdgej00dfvkcg63yb0w1k" data-title="Air系列模块Lua版本应用运行框架概述" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-616" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/21/616/" class="article-date">
  <time class="dt-published" datetime="2019-08-21T08:40:17.000Z" itemprop="datePublished">2019-08-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/21/616/">lua软件模拟spi</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>本代码可实现功能，但是不推荐使用，速度与spi外设相比，极慢</p>
<p>下面是正常的spi外设代码</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span><span class="string">&quot;utils&quot;</span></span><br><span class="line"><span class="built_in">require</span><span class="string">&quot;pm&quot;</span></span><br><span class="line">pm.wake(<span class="string">&quot;wake11&quot;</span>)</span><br><span class="line"><span class="built_in">require</span><span class="string">&quot;pins&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">_G</span>.moduleType == <span class="number">2</span> <span class="keyword">then</span> pmd.ldoset(<span class="number">6</span>,pmd.LDO_VMMC) <span class="keyword">end</span></span><br><span class="line"><span class="keyword">local</span> result = spi.setup(spi.SPI_1,<span class="number">0</span>,<span class="number">0</span>,<span class="number">8</span>,<span class="number">800000</span>,<span class="number">1</span>,<span class="number">0</span>)<span class="comment">--初始化spi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span>.info(<span class="string">&quot;spi1&quot;</span>,spi.SPI_1)</span><br><span class="line"><span class="built_in">log</span>.info(<span class="string">&quot;testSpiFlash.init&quot;</span>,result)</span><br><span class="line"><span class="keyword">local</span> cs = pins.setup(moduleType == <span class="number">2</span> <span class="keyword">and</span> pio.P0_10 <span class="keyword">or</span> pio.P1_2,<span class="number">1</span>)</span><br><span class="line"><span class="keyword">local</span> s = <span class="built_in">string</span>.fromHex(<span class="string">&quot;9f000000000000&quot;</span>)</span><br><span class="line"></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span> <span class="params">()</span></span></span><br><span class="line">    sys.wait(<span class="number">5000</span>)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        cs(<span class="number">0</span>)<span class="comment">--需要手动下拉cs引脚电平</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;testSpiFlash.readFlashID&quot;</span>,spi.send_recv(spi.SPI_1,s):toHex())<span class="comment">--收发读写</span></span><br><span class="line">        cs(<span class="number">1</span>)</span><br><span class="line">        sys.wait(<span class="number">200</span>)</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    spi.<span class="built_in">close</span>(spi.SPI_1)</span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>可以用下面的代码来代替(gpio需要自行更改)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">require&quot;utils&quot;</span><br><span class="line">require&quot;pins&quot;</span><br><span class="line"></span><br><span class="line">--软件模拟</span><br><span class="line">local clk &#x3D; pins.setup(33,0)</span><br><span class="line">local cs &#x3D; pins.setup(34,1)</span><br><span class="line">local opin &#x3D; pins.setup(36,0)</span><br><span class="line">local ipin &#x3D; pins.setup(35)</span><br><span class="line">--pio.pin.setpull(pio.PULLDOWN,35)</span><br><span class="line"></span><br><span class="line">sys.taskInit(function ()</span><br><span class="line">    log.info(&quot;spi start&quot;)</span><br><span class="line">    while true do</span><br><span class="line">        sys.wait(1000)</span><br><span class="line">        local r &#x3D; &#123;&#125;--待接收到的数组</span><br><span class="line">        local s &#x3D; string.char(0x9f,0,0,0,0,0,0)--待发送的字符串</span><br><span class="line">        cs(0)</span><br><span class="line">        for i&#x3D;1,#s do</span><br><span class="line">            local rd &#x3D; 0--临时存储的接收</span><br><span class="line">            local td &#x3D; s:byte(i)--临时的发送数据</span><br><span class="line">            for j&#x3D;1,8 do</span><br><span class="line">                opin(bit.isset(td,8-j) and 1 or 0)--根据发送的位来决定高低电平</span><br><span class="line">                clk(1)--时钟线拉高，开始采样</span><br><span class="line">                if ipin() &#x3D;&#x3D; 1 then--如果接收线是高，那么把接受临时变量相应位置1</span><br><span class="line">                    rd &#x3D; bit.set(rd,8-j)--把接受临时变量相应位置1</span><br><span class="line">                end</span><br><span class="line">                clk(0)--时钟线拉低，准备下次</span><br><span class="line">            end</span><br><span class="line">            table.insert(r, string.char(rd))--接收数据，存到待接收到的数组中</span><br><span class="line">        end</span><br><span class="line">        cs(1)</span><br><span class="line"></span><br><span class="line">        local rec &#x3D; table.concat(r, &quot;&quot;)--接收到的数据连起来</span><br><span class="line">        log.info(&quot;receive data&quot;,rec:toHex())</span><br><span class="line">    end</span><br><span class="line">end)</span><br></pre></td></tr></table></figure>

<p>可以根据自己的需求。更改代码</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/21/616/" data-id="ckkfmdgcj008svkcg45yt8sqw" data-title="lua软件模拟spi" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-615" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/21/615/" class="article-date">
  <time class="dt-published" datetime="2019-08-21T03:28:05.000Z" itemprop="datePublished">2019-08-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/21/615/">Air720模块认证须知</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><strong>测试条件：</strong><br>1、建议使用<strong>合宙AT版本</strong>测试，LUA版本需关掉一切上层应用，特别是导致模块重启的逻辑代码（包括软件重启和硬件重启）。<br>2、送认证测试的机器，客户大板一定要去掉<strong>硬件开门狗</strong>。</p>
<p><strong>注意事项：</strong><br>1、    驱动安装说明，参考：<a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/92">http://oldask.openluat.com/article/92</a><br>2、    装好了，设备管理器会出来ASR Modem Device（COMXX），此口用于AT通信。<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_67409.png"><br>3、    使用sscom5.12.1工具，选择COM口进行AT通信。<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_16696.png"><br>4、    强制注册设置方法如下：<br>AT<em>BAND=0   强制设备仅工作在GSM网络，发送后立即生效，重启后恢复默认设置LTE优先。<br>AT</em>BAND=1   强制设备仅工作在UMTS网络，发送后立即生效，重启后恢复默认设置LTE优先。<br>AT*BAND=5   强制设备仅工作在LTE网络，发送后立即生效，重启后恢复默认设置LTE优先。</p>
<p>5、    测试时网卡需要禁用<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_28534.png"><br>6、    关闭自动拨号功能<br>通过AT命令设置手动拨号，重启后生效。<br>AT+DIALMODE=1  //关闭自动拨号<br>AT+AUTOAPN=0</p>
<p>7、    设置PDN<br>通过AT命令：AT*CGDFLT=1,”IPV4V6”  //设置iptype为PDN_IP_V4_V6</p>
<p>8、    关闭高层业务（关闭应用层发起的TCP/IP数据业务）<br>AT*NTP=0<br>AT+UPGRADE=”AUTO”,0</p>
<p>9、    AT开启语音自动接听<br>ATS0=1;&W;+CFUN=1,1</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/21/615/" data-id="ckkfmdgcj008rvkcg00wjbm7l" data-title="Air720模块认证须知" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-614" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/19/614/" class="article-date">
  <time class="dt-published" datetime="2019-08-19T14:55:50.000Z" itemprop="datePublished">2019-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/19/614/">Air系列模块Lua版本nvm功能汇总</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;div style=&quot;border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;&quot;&gt;
</code></pre>
<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">一、概述</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">nvm</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">是利用文件实现的一种非易失性参数存储管理模块，掉电后参数不会丢失，典型的应用场景为：小数据量的简单键值对参数。不适合大容量数据的存储管理，如果数据量超过<span lang="EN-US">10K</span>，建议直接使用<span lang="EN-US">io</span>接口操作文件来管理<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">nvm</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">功能模块中，涉及到两个文件和一个表<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">两个文件包括“默认配置文件”和“实时参数文件”，下文用<span lang="EN-US">config.lua</span>来表示默认配置文件，<span lang="EN-US">para.lua</span>来表示实时参数文件：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">config.lua</span><span style="font-size:
9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">：本地烧录程序时，烧录进模块的一个用户自定义文件，定义了默认的键值对参数结构和内容，例如下图<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">module(...)<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p>&nbsp;</o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">strPara = "str1"<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">numPara = 1<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">boolPara = false<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">tablePara =
  {"item1-1","item1-2","item1-3"}</span></span><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">para.lua</span><span style="font-size:
9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">：每次开机初始化时，如果<span lang="EN-US">para.lua</span>不存在，则从<span lang="EN-US">config.lua</span>复制出一个文件，重命名为<span lang="EN-US">para.lua</span>，在程序运行过程中，写参数都是操作这个<span lang="EN-US">para.lua<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">一个表指的是：<span lang="EN-US">para.lua</span>的内存加载表，下文用<span lang="EN-US">para_ram_table</span>来表示这个表，每次开机初始化时，会把<span lang="EN-US">para.lua</span>文件中的内容加载到<span lang="EN-US">para_ram_table</span>，在程序运行过程中，读参数都是直接读取<span lang="EN-US">para_ram_table<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">二、接口实现原理</span></b><span lang="EN-US" style="font-size:
9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:red;
mso-font-kerning:0pt"><o:p></o:p></span></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、初始化</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">调用<span lang="EN-US">nvm.init("config.lua")</span>，执行的流程图如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-qyVjlgob5d5ab83ccb151.png" class="img-responsive" style="width: 573px;"><br></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、读参数</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">调用<span lang="EN-US">nvm.get(...)</span>或者<span lang="EN-US">nvm.gett(...)</span>，直接返回<span lang="EN-US">para_ram_table</span>中的参数值<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、写参数</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">调用<span lang="EN-US">nvm.set(...)</span>或者<span lang="EN-US">nvm.sett(...)</span>，执行的流程图如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-SC2QIPMl5d5ab8481c064.png" class="img-responsive" style="width: 581px;"><br></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、恢复出厂设置</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">调用<span lang="EN-US">nvm.restore()</span>，执行的流程如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、删除<span lang="EN-US">para.lua<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、复制<span lang="EN-US">config.lua</span>，重命名为<span lang="EN-US">para.lua<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、<span lang="EN-US">para.lua</span>文件中的内容加载到内存<span lang="EN-US">para_ram_table</span>中<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.5</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、删除参数文件</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">调用<span lang="EN-US">nvm.remove()</span>，会删除<span lang="EN-US">para.lua</span>， 然后用户自行控制重启，重启后自动执行初始化流程<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;mso-hansi-font-family:
inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">三、常见问题</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">api</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">文档和</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt">demo</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">在哪里</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; api</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">文档详见脚本发布包中：<span lang="EN-US">script_LuaTask\doc\lib\index.html&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; modules---&gt;nvm<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; demo</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参考脚本发布包中：<span lang="EN-US">script_LuaTask\demo\nvm<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">nvm</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">适用于什么场景</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span lang="EN-US" style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">nvm</span><span style="font-size: 9pt; font-family: 微软雅黑, sans-serif; color: rgb(51, 51, 51);">每次更新参数，保存到参数文件中时，会把所有参数拼接在一起，然后执行一次全量写文件的动作；此拼接操作消耗内存较多，如果数据量很大，需要的内存就很大，在系统可用内存紧张的情况下，很容易出现内存不足，从而导致参数更新失败，严重情况下还会造成系统重启</span></p>

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">所以说：<span lang="EN-US">nvm</span>仅适用于小数据量的简单键值对参数；不适用于大容量数据的存储管理，如果数据量超过<span lang="EN-US">10KB</span>【仅仅为经验值，实际能够存储的数据量和系统运行过程中的动态可用内存有关：可用内存越小，允许存储的数据量就越少；可用内存越大，允许存储的数据量就越多，但是也不建议超过<span lang="EN-US">10KB</span>】，建议参考<span lang="EN-US">fs</span>的<span lang="EN-US">demo</span>直接使用<span lang="EN-US">io</span>接口操作文件来管理<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、远程升级后，</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">para.lua</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">会被自动删除吗</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">不会自动删除<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">如果需要删除，在升级包下载成功，软件重启之前，主动调用<span lang="EN-US">nvm.remove()</span>接口来删除<span lang="EN-US">para.lua</span>，重启应用新版本后，<span lang="EN-US">para.lua</span>就是新版本<span lang="EN-US">config.lua</span>的复制文件了<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、本地烧录后，</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">para.lua</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">会被自动删除吗</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本地烧录程序，会格式化文件系统，<span lang="EN-US">para.lua</span>属于文件系统中的一个文件，所以会被自动删除<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">如果参数需要不受本地烧录的影响，可以保存到模块的<span lang="EN-US">sn</span>区，<span lang="EN-US">sn</span>区最多可存储<span lang="EN-US">64</span>字节的数据，在脚本中使用<span lang="EN-US">misc.getSn()</span>和<span lang="EN-US">misc.setSn(...)</span>可以读写<span lang="EN-US">sn</span>区域的数据<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.5</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">2G</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">模块使用远程升级时，</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">config.lua</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">的注意事项</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">不要删除旧版本的任何参数<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">不同版本中，同名参数的参数值数据类型要保持一致<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;
mso-bidi-font-family:Wingdings;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">如果有必要，增加新的参数用于新的功能<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">这样做的原因是：<span lang="EN-US">2G</span>远程升级后，存在版本回退的概率（参考），但是版本回退并不会自动删除<span lang="EN-US">para.lua</span>，回退到旧版本后，如果参数数值类型发生了改变，或者参数不见了（实际上也是数值类型变成了<span lang="EN-US">nil</span>），旧版本的代码如果写的不够健壮，很容易引发代码运行异常。例如：<span lang="EN-US"><o:p></o:p></span></span></p><p>















































































</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1.0.0</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">版本的<span lang="EN-US">para.lua</span>中有一个<span lang="EN-US">keyPara = 1</span>，远程升级到<span lang="EN-US">1.0.1</span>版本后，<span lang="EN-US">keyPara</span>的数据类型被定义成了<span lang="EN-US">string</span>类型，<span lang="EN-US">1.0.1</span>版本运行出错，导致版本自动回退到<span lang="EN-US">1.0.0</span>，<span lang="EN-US">1.0.0</span>的脚本直接对<span lang="EN-US">keyPara</span>的值进行数学运算，就会导致运行异常</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.6</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">nvm</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">操作过程中，掉电会丢失数据吗</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;">

</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nvm</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">有备份机制，如果掉电时正在写<span lang="EN-US">nvm</span>，可能会造成正在写入的参数数据不生效，但是会恢复为上次写入的数据，不会导致数据内容出错。如果掉电时正在读<span lang="EN-US">nvm</span>，不会对参数数据造成任何影响</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.7</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">nvm</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">可以操作多少次</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt">flash<o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; nvm</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">通过文件接口写<span lang="EN-US">flash</span>，具有擦写均衡机制<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2G</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">模块和<span lang="EN-US">4G</span>模的<span lang="EN-US">flash</span>可以完全擦写<span lang="EN-US">10</span>万次<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;">





</p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">假设通过<span lang="EN-US">rtos.get_fs_free_size()</span>获取到的文件系统剩余空间为<span lang="EN-US">512K</span>字节，<span lang="EN-US">nvm</span>参数文件总大小为<span lang="EN-US">1K</span>字节，则写<span lang="EN-US">512</span>次可以完全擦写一次文件系统剩余空间。总得允许擦写次数理论值就是<span lang="EN-US">512*10</span>万次<span lang="EN-US"><o:p></o:p></span></span></p>



      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/19/614/" data-id="ckkfmdgfb00ejvkcgezxk3bzn" data-title="Air系列模块Lua版本nvm功能汇总" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-613" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/19/613/" class="article-date">
  <time class="dt-published" datetime="2019-08-19T09:32:15.000Z" itemprop="datePublished">2019-08-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/19/613/">NTC测温，热力学公式，非查表法。三行代码搞定</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><span style="color:#6a9955">--- 模块功能：NTC功能</span><br/><span style="color:#6a9955">-- ADC测量精度(10bit，电压测量范围为0到1.85V，分辨率为1850/1024，测量精度误差为20MV)</span><br/><span style="color:#6a9955">-- @author DZQ</span><br/><span style="color:#6a9955">-- @module ntc</span><br/><span style="color:#6a9955">-- @license MIT</span><br/><span style="color:#6a9955">-- @copyright openLuat</span><br/><span style="color:#6a9955">-- @release 2018.03.14</span><br/><br/><span style="color:#dcdcaa">module</span>(<span style="color:#569cd6">...</span>,package.<span style="color:#9cdcfe">seeall</span>)<br/><br/><span style="color:#6a9955">--[[NTC：负温度系数热敏电阻，在温度越高时电阻值越低,应用电路NTC电阻与GND相连,标准25°下的阻值与VCC相连分压</span><br/><span style="color:#6a9955">NTC电阻温度计算公式：Rt = Rp*EXP(Bx*(1/T1-1/T2))</span><br/><span style="color:#6a9955">T1，T2 ：单位都是开尔文温度</span><br/><span style="color:#6a9955">Rt ：是热敏电阻在T1温度下的阻值</span><br/><span style="color:#6a9955">Rp ： 是热敏电阻在T2常温下的标准阻值</span><br/><span style="color:#6a9955">EXP：e的n次方</span><br/><span style="color:#6a9955">Bx ：热敏电阻的重要参数</span><br/><span style="color:#6a9955">T2是已知的即：标准温度下的标准阻值（Rp）的开尔文温度值（273.15+25.0）</span><br/><span style="color:#6a9955">T1就是欲求的温度（开尔文标）：T1 = 1/（ln（Rt/R）/B+1/T2）</span><br/><span style="color:#6a9955">]]</span><br/><span style="color:#6a9955">--[[</span><br/><span style="color:#6a9955">功能：获得温度</span><br/><span style="color:#6a9955">参数：Vadc:获取的ADC值，Rp：NTC自身的阻值（25°C）,Bx:热敏电阻的重要参数</span><br/><span style="color:#6a9955">返回值：温度值</span><br/><span style="color:#6a9955">例子(10KΩ B:3380)：getTemp(522,10000,3380)]]</span><br/><span style="color:#c586c0">function</span> <span style="color:#dcdcaa">getTemp</span><span style="color:#d4d4d4">(</span><span style="color:#9cdcfe">Vadc</span><span style="color:#d4d4d4">,</span><span style="color:#9cdcfe">Rp</span><span style="color:#d4d4d4">,</span><span style="color:#9cdcfe">Bx</span><span style="color:#d4d4d4">)</span><br/> <span style="color:#c586c0">local</span><span style="color:#d4d4d4"> Rt = (Vadc*Rp)/(</span><span style="color:#b5cea8">1024</span><span style="color:#d4d4d4">-Vadc)</span><span style="color:#6a9955">--计算电阻值</span><br/> <span style="color:#c586c0">local</span><span style="color:#d4d4d4"> temp=(</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">/(</span><span style="color:#dcdcaa">math.log</span><span style="color:#d4d4d4">(Rt/Rp)/Bx+(</span><span style="color:#b5cea8">1</span><span style="color:#d4d4d4">/</span><span style="color:#b5cea8">298.15</span><span style="color:#d4d4d4">)))-</span><span style="color:#b5cea8">273.15</span><br/> <span style="color:#c586c0">return</span><span style="color:#d4d4d4"> temp - temp %</span><span style="color:#b5cea8">0.01</span><span style="color:#6a9955">--精确到小数点后2位</span><br/><span style="color:#c586c0">end</span><br/><br/><br/></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/19/613/" data-id="ckkfmdgci008qvkcgf6a0alwh" data-title="NTC测温，热力学公式，非查表法。三行代码搞定" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-612" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/18/612/" class="article-date">
  <time class="dt-published" datetime="2019-08-18T02:50:44.000Z" itemprop="datePublished">2019-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/18/612/">RTest Messer ——致力于做最好用的Android可编程串口调试工具</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;p class=&quot;MsoCommentText&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;作为嵌入式开发者，串口调试软件是必不可少的工具，但常用的&lt;span lang=&quot;EN-US&quot;&gt;SSCOM&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;STC-ISP&lt;/span&gt;，&lt;span lang=&quot;EN-US&quot;&gt;XCOM&lt;/span&gt;等串口调试助手都只能在&lt;span lang=&quot;EN-US&quot;&gt;Windows&lt;/span&gt;电脑上运行的&lt;span lang=&quot;EN-US&quot;&gt;PC&lt;/span&gt;端，而移动设备如手机、平板电脑，这个领域几乎是空白的。有鉴于此，为了方便广大开发者现场调试，我们开发了一款功能完善的移动端（&lt;span lang=&quot;EN-US&quot;&gt;&lt;b&gt;Android&lt;/b&gt;&lt;/span&gt;）串口调试助手。&lt;/p&gt;&lt;p class=&quot;MsoCommentText&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;span lang=&quot;EN-US&quot;&gt;RTest Messer&lt;/span&gt;，一款可编程的移动平台硬件设备串口调试工具，非常适合对嵌入式设备、物联网设备进行测试、调试和功能验证。&lt;/p&gt;&lt;h1&gt;&lt;b&gt;为什么做这个应用？&lt;/b&gt;&lt;/h1&gt;&lt;p class=&quot;MsoCommentText&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;我司开发正在进行一个基于&lt;span lang=&quot;EN-US&quot;&gt;LoRa&lt;/span&gt;的项目，需要在各种场景进行实测，以获取如信号强度、丢包等数据。工程师拿着设备和笔记本电脑在周边十多栋楼层里面测试。来来回回，跑上跑下，最后麒麟臂已经不堪重任。&lt;span lang=&quot;EN-US&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoCommentText&quot;&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;经历了该次痛苦的测试，提高测试效率已经迫在眉睫，扛着笔记本奔走显然是不明智的。结合了平常做的测试，开发出了这款手机端的可编程测试工具。&lt;span lang=&quot;EN-US&quot;&gt;RTest Messer&lt;/span&gt;可以很方便的使用手机&lt;span lang=&quot;EN-US&quot;&gt;+OTG&lt;/span&gt;进行串口调试，减轻嵌入式工程师在室外调试的负担。&lt;/p&gt;&lt;p class=&quot;MsoCommentText&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;h1&gt;&lt;span style=&quot;font-family:方正黑体_GBK&quot;&gt;&lt;b&gt;本应用的功能是什么？&lt;/b&gt;&lt;/span&gt;&lt;/h1&gt;&lt;p class=&quot;MsoNormal&quot; style=&quot;margin-left:18.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;1. &lt;/span&gt;全场景调试支持，只需要一根&lt;span lang=&quot;EN-US&quot;&gt;OTG&lt;/span&gt;线和一部&lt;span lang=&quot;EN-US&quot;&gt;Android&lt;/span&gt;手机。不论是&lt;span lang=&quot;EN-US&quot;&gt;LoRa&lt;/span&gt;，还是&lt;span lang=&quot;EN-US&quot;&gt;2G/4G&lt;/span&gt;，哪怕是&lt;span lang=&quot;EN-US&quot;&gt;GPS&lt;/span&gt;模块，只要是串口输出的，统统支持！。&lt;span lang=&quot;EN-US&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoCommentText&quot; style=&quot;margin-left:18.0pt&quot;&gt;&lt;span lang=&quot;EN-US&quot;&gt;2. &lt;/span&gt;自动配置调试信息，一些设备需要在安装的时候进行设备信息配置，比如&lt;span lang=&quot;EN-US&quot;&gt;LoRa&lt;/span&gt;模块需要在安装的时候配置设备&lt;span lang=&quot;EN-US&quot;&gt;ID&lt;/span&gt;，频段，开发者可以编写简单的代码，实现自动配置设备。&lt;span lang=&quot;EN-US&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoCommentText&quot;&gt;
</code></pre>
</p><p class="MsoListParagraph" style="margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0"><span lang="EN-US">3. </span>功能测试，支持编写脚本对设备进行功能验证与操作。</p><p class="MsoListParagraph" style="margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0">RTest Messer介绍<br></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">1. </span>使用<span lang="EN-US">JS</span>编写测试脚本，一种具有高度自由化的测试方法。 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提供测试函数<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->支持<span lang="EN-US">JS</span>拓展<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->支持<span lang="EN-US">ES 6.0</span>语法<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提供多种界面控件<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提供多种测试与操作方法<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">2. </span>支持测试脚本的持久化存储 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提供脚本保存功能，可长期存储在设备中<span lang="EN-US"><o:p></o:p></span></p><p class="MsoListParagraph" align="left" style="margin-left: 36pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;
</span></span><!--[endif]--><span lang="EN-US">&nbsp;</span>轻量化的脚本编辑器 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->支持快速编辑，撤销、重做等功能<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提供常用函数与符号的插入功能<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">4. </span>支持<span lang="EN-US"> Android OTG </span>串口通信 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->通过封装好的函数直接通过<span lang="EN-US">USB</span>连接硬件设备<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->支持<span lang="EN-US">CH34x</span>、<span lang="EN-US">PL2303HXA</span>等多种主流串口芯片<span lang="EN-US"><o:p></o:p></span></p><p class="MsoListParagraph" style="margin-left:18.0pt;text-indent:0cm;mso-char-indent-count:
0">



























</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->自动判断串口芯片，无需手动选择</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><br></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;">界面展示，由于编辑工具的原因，图片始终不能排版到满意，委屈大家了</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-fvbQG2Jf5d58ba2338f16.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-n44jkTDK5d58ba2d2b634.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-Fzh94Op75d58ba3728bc9.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-j1igFLef5d58ba3c6438c.png" class="img-responsive" style="width: 25%; float: none;"></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><br></p><h2 style="text-align: center; margin-left: 72pt; text-indent: -18pt;">上面几张图为主界面以及函数列表</h2><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-cQOrtgn25d58ba4391192.png" class="img-responsive note-float-left" style="width: 25%; float: left;"></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-Zw4oL0dy5d58ba4f18997.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-OhvB7MrF5d58ba5499d9e.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-onvpMyzz5d58ba61927e3.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-4jjxfDst5d58ba7371f78.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-IEDmk9ty5d58ba806ac67.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-3BKw7fKE5d58ba86b7841.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><br></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-6yveLhmI5d58ba8c9cd86.png" class="img-responsive" style="width: 25%; float: none;"></p><h2 style="text-align: center; margin-left: 72pt; text-indent: -18pt;">上面几张图为软件提供的两个demo的使用方法</h2><h2 style="text-align: center; margin-left: 72pt; text-indent: -18pt;">使用RTest进行热表单抄的使用</h2><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-Djdgf85H5d58ba96e82c0.png" class="img-responsive note-float-left" style="width: 25%; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-KRTLu73Z5d58ba9fe739c.png" class="img-responsive note-float-left" style="width: 240px; float: left;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-VwcbbR0I5d58baa8e6e15.png" class="img-responsive" style="width: 240px;"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-vfBRU90S5d58bab106178.png" class="img-responsive" style="width: 519.933px; height: 337.863px;">左图为此前调试场景，右图为使用RTest&nbsp;Messer的调试场景</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><br></p><h3><b>下载地址：<span lang="EN-US">https://eyun.baidu.com/s/3pNiBU1l </span>密码：</b><span lang="EN-US"><b>yl7d</b><o:p></o:p></span></h3><h1><font face="方正黑体_GBK">TODO List</font></h1><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">1. </span>将提供<span lang="EN-US">HTTP</span>相关测试函数 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US">Get</span>方法<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US">Post</span>方法<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">2. </span>将提供<span lang="EN-US">MQTT</span>相关测试函数 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->实现一个移动端的<span lang="EN-US">MQTT</span>测试工具<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">3. </span>将提供<span lang="EN-US">TCP/UDP</span>等相关测试函数 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->可方便测试局域网或广域网设备网络连接<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">4. </span>将提供蓝牙通信相关函数 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->可方便测试蓝牙芯片<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">5. </span>全局环境变量、项目环境变量 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->可在脚本中随时导入<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->提高脚本拓展性<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">6. </span>脚本分享平台 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->与团队或他人分享你的测试脚本<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->下载平台上的脚本<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->可设置代码阅读权限<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">7. </span>将支持其他脚本语言 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->如<span lang="EN-US">Lua</span>，<span lang="EN-US">Python<o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 18pt;"><span lang="EN-US">8. </span>将提供一个更加智能的脚本编辑器 <span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->代码高亮<span lang="EN-US"><o:p></o:p></span></p><p class="MsoNormal">







































</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:10.0pt;mso-bidi-font-size:11.0pt;font-family:&quot;Courier New&quot;;
mso-fareast-font-family:&quot;Courier New&quot;">o<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]-->智能提示</p><p class="MsoNormal" align="left" style="margin-left: 72pt; text-indent: -18pt;"><br></p><h1>其他的一些话</h1><p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;<span style="text-indent: 32pt;">起初，做这个</span><span lang="EN-US" style="text-indent: 32pt;">APP</span><span style="text-indent: 32pt;">的目的是为了方便公司内部测试使用。一次开会中提出，既然我们遇到这些调试问题，其他人也遇到过，那么是否能够把这个</span><span lang="EN-US" style="text-indent: 32pt;">APP</span><span style="text-indent: 32pt;">分享给大家用。团队成员一致同意，并且认为既然做，那么就要做到最好。为了方便大家交流，我们创建了一个</span><span lang="EN-US" style="text-indent: 32pt;">RTest</span><span style="text-indent: 32pt;">的使用交流</span><span lang="EN-US" style="text-indent: 32pt;">Q</span><span style="text-indent: 32pt;">群，群号</span><span lang="EN-US" style="text-indent: 32pt;"><b>675121195</b></span><span style="text-indent: 32pt;">，供大家进行使用交流，反馈问题。</span></p><p class="MsoNormal">&nbsp;&nbsp;&nbsp;&nbsp;<span style="text-indent: 32pt;">最后，也介绍一下我们的团队，团队平均年龄</span><span lang="EN-US" style="text-indent: 32pt;">21</span><span style="text-indent: 32pt;">岁，是一家专注于物联网领域软硬件开发的年轻创业公司，公司相关信息在</span><span lang="EN-US" style="text-indent: 32pt;">APP</span><span style="text-indent: 32pt;">里面可以直接查看，也可以访问我们的官方网站进行了解，网址是</span><span lang="EN-US" style="text-indent: 32pt;">www.cqrootiot.com</span><span style="text-indent: 32pt;">。如果对我们公司感兴趣，可以扫码添加微信好友，欢迎一起谈天侃地，合作交谈。</span></p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-LnxwDYhw5d58bca8ec8cf.png" class="img-responsive" style="width: 215px;"><span style="text-indent: 32pt;"><br></span></p><p class="MsoCommentText"><span lang="EN-US"><o:p></o:p></span></p><p class="MsoCommentText"><span lang="EN-US"><o:p></o:p></span></p>


      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/18/612/" data-id="ckkfmdgej00devkcgg6ok6p0r" data-title="RTest Messer ——致力于做最好用的Android可编程串口调试工具" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-611" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/15/611/" class="article-date">
  <time class="dt-published" datetime="2019-08-15T12:38:03.000Z" itemprop="datePublished">2019-08-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/15/611/">Air系列模块Lua版本串口功能汇总</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;div style=&quot;border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;&quot;&gt;
</code></pre>
<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><a name="下载安装"></a><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">一、硬件概述</span></b><b><span lang="EN-US" style="font-size:
14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">本文描述了<span lang="EN-US">Air</span>系列模块（<span lang="EN-US">2G</span>和<span lang="EN-US">4G</span>模块）<span lang="EN-US">Lua</span>版本上通用串口、调试串口、<span lang="EN-US">USB</span>口的特性和使用方法，先看一张对比图：<span lang="EN-US"><o:p></o:p></span></span></p><div align="center">

<table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: -79.35pt; border: none;">
 <tbody><tr style="mso-yfti-irow:0;mso-yfti-firstrow:yes;height:1.0pt">
  <td width="115" style="width:69.25pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="margin-bottom:7.4pt;mso-pagination:widow-orphan;
  word-break:break-all"><span lang="EN-US" style="font-size:9.0pt;font-family:
  &quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
  0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
  <td width="326" style="width:195.65pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">2G</span><span style="font-size:7.5pt;
  font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
  mso-font-kerning:0pt">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-left:none;mso-border-left-alt:solid black .5pt;mso-border-left-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">4G</span><span style="font-size:7.5pt;
  font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
  mso-font-kerning:0pt">模块<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:1;height:1.0pt">
  <td width="115" style="width:69.25pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">通用串口<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="326" style="width:195.65pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">有<span lang="EN-US">UART1</span>和<span lang="EN-US">UART2</span>两个通用串口<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">通用串口电平<span lang="EN-US">2.8V</span>；如果要和<span lang="EN-US">3.3V</span>的<span lang="EN-US">MCU</span>通信，强烈建议加电平转换电路；如果要和<span lang="EN-US">5V</span>的<span lang="EN-US">MCU</span>通信，必须要加电平转换电路<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">不支持流控<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">有<span lang="EN-US">UART1</span>和<span lang="EN-US">UART2</span>两个通用串口<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">串口电平<span lang="EN-US">1.8V</span>；如果要和<span lang="EN-US">3.3V/5V</span>的<span lang="EN-US">MCU</span>通信，必须要加电平转换电路<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l1 level1 lfo1;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">不支持流控<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:2;height:1.0pt">
  <td width="115" style="width:69.25pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">调试串口<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="326" style="width:195.65pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">主要用于烧录固件和抓取日志，波特率固定为<span lang="EN-US">921600<o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">也可特殊处理实现通用串口的数据传输功能，但是不建议使用，因为调试串口数据传输不稳定，很容易丢失数据<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">不支持<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
 </tr>
 <tr style="mso-yfti-irow:3;mso-yfti-lastrow:yes;height:1.0pt">
  <td width="115" style="width:69.25pt;border:solid black 1.0pt;mso-border-themecolor:
  text1;border-top:none;mso-border-top-alt:solid black .5pt;mso-border-top-themecolor:
  text1;mso-border-alt:solid black .5pt;mso-border-themecolor:text1;background:
  #EEECE1;mso-background-themecolor:background2;padding:0cm 5.4pt 0cm 5.4pt;
  height:1.0pt">
  <p class="MsoNormal" style="margin-bottom:7.4pt;mso-pagination:widow-orphan;
  word-break:break-all"><span lang="EN-US" style="font-size:7.5pt;font-family:
  &quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
  0pt">USB</span><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;
  mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">口<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="326" style="width:195.65pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoNormal" style="mso-pagination:widow-orphan;word-break:break-all"><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">不支持<span lang="EN-US"><o:p></o:p></span></span></p>
  </td>
  <td width="269" style="width:161.3pt;border-top:none;border-left:none;
  border-bottom:solid black 1.0pt;mso-border-bottom-themecolor:text1;
  border-right:solid black 1.0pt;mso-border-right-themecolor:text1;mso-border-top-alt:
  solid black .5pt;mso-border-top-themecolor:text1;mso-border-left-alt:solid black .5pt;
  mso-border-left-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt;height:1.0pt">
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">主要用于烧录固件和抓取日志<span lang="EN-US"><o:p></o:p></span></span></p>
  <p class="MsoListParagraph" style="margin-left:21.0pt;text-indent:-21.0pt;
  mso-char-indent-count:0;mso-pagination:widow-orphan;mso-list:l0 level1 lfo2;
  word-break:break-all"><!--[if !supportLists]--><span lang="EN-US" style="font-size:
  7.5pt;font-family:Wingdings;mso-fareast-font-family:Wingdings;mso-bidi-font-family:
  Wingdings;color:#333333;mso-font-kerning:0pt">Ø<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:7.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt">也可通过枚举出来的<span lang="EN-US">ASR Modem
  Devie AT</span>口实现通用数据传输功能，可参考<span lang="EN-US">Lua</span>版本<span lang="EN-US">usbdata</span>的<span lang="EN-US">demo<o:p></o:p></span></span></p>
  </td>
 </tr>
</tbody></table>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">若无特别说明，下文中描述的串口包括通用串口、调试串口、<span lang="EN-US">USB</span>口三种，描述的串口通信的对端设备称作<span lang="EN-US">MCU<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:18.0pt">二、应用层数据收发原理</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:red;mso-font-kerning:0pt">注意：默认状态下，在合适的时间点（此时间点不可预知），系统会自动进入休眠状态；串口数据收发之前，必须通过<span lang="EN-US">pm.wake(...)</span>接口使系统持续处于唤醒状态，才能保证收发功能正常；收发结束后，可以通过<span lang="EN-US">pm.sleep(...)</span>接口允许系统自动休眠<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、数据接收</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:6.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">在<span lang="EN-US">core</span>中的应用层，有一个<span lang="EN-US">1460</span>字节的缓冲区，串口驱动接收到的数据插入此缓冲区；脚本有轮询和中断两种方式，通过<span lang="EN-US">uart.read(...)</span>接口读取缓冲区中的数据；<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">需要注意如下两点：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:red;mso-font-kerning:0pt">1</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:red;mso-font-kerning:
0pt">、脚本读取的速度要大于数据插入的速度，否则会造成缓冲区溢出，数据出错<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:red;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:red;mso-font-kerning:0pt">、<span lang="EN-US">MCU</span>一次性发送给模块的数据，调用<span lang="EN-US">uart.read</span>接口，并不一定能够一次性读取完整，必须使用“循环读取数据”<span lang="EN-US">+</span>“数据拼接判断完整性”的方案来处理；例如<span lang="EN-US">MCU</span>一次性发送<span lang="EN-US">1460</span>字节的数据，模块使用轮询或者中断第一次读取数据时，缓冲器里面可能才接收到<span lang="EN-US">10</span>字节的数据</span><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt"><o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">uart.read</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">接口详解</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">uart.read(id, format)<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--- </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">读取串口数据（此接口不会阻塞，立即返回）</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- @number id </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">串口</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">ID<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- @string or number format </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">读取串口数据的格式，有如下几种</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- number</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型的数字：表示读取指定长度字节的数据</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中没有数据，则返回空字符串，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据长度小于等于要读取的数据长度，则返回缓冲区中的所有数据，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据长度大于要读取的数据长度，则返回要读取的长度的数据，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">*l</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">：</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp; </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">表示读取到换行符</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">\n<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中没有数据，则返回空字符串，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据没有</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">\n</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，则返回缓冲区中的所有数据，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据有</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">\n</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，则返回到</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">\n</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">结束的所有数据（包括</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">\n</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">），返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">*n</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">：</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp; </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">表示读取整型数据</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中没有数据，则返回</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">0</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">number</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的第一个字节的数据不是</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">+</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">、</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">、数字，则返回</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">0</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">number</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的前几个字节满足整型数据格式</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">[+-]%d+</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">，则按照最长匹配返回数据，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">number</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">-- string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">*s</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">：</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp; </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">表示读取到空格字符</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中没有数据，则返回空字符串，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据没有空格，则返回缓冲区中的所有数据，返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">--&nbsp;&nbsp;&nbsp;&nbsp;
  </span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果缓冲区中的数据有空格，则返回到空格结束的所有数据（不包括空格），返回值为</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">string</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">类型</span></span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、轮询方式读取数据</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">轮询方式比较简单，脚本定时调用<span lang="EN-US">uart.read</span>接口读取数据、拼接数据、检查数据完整性、处理数据即可<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">详细代码参考<span lang="EN-US">uart</span>的<span lang="EN-US">demo<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.1.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、中断方式读取数据</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">中断方式处理逻辑如下：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、脚本调用<span lang="EN-US">uart.on(id,
"receive", intFnc)</span>注册中断处理函数<span lang="EN-US">intFnc<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、脚本接收到<span lang="EN-US">core</span>中产生的数据中断消息后，执行<span lang="EN-US">intFnc<o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">、脚本在<span lang="EN-US">intFnc</span>中循环调用<span lang="EN-US">uart.read</span>接口读取数据、拼接数据、检查数据完整性、处理数据，直至没有数据可读<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">什么情况下，<span lang="EN-US">core</span>中才会产生数据中断消息呢？当缓冲区为空时，收到数据才会插入缓冲区，然后产生数据中断消息；如果缓冲区不为空，收到数据时仅仅插入缓冲区，并不会产生数据中断消息。所以第<span lang="EN-US">3</span>步要把缓冲区中的数据读完，这样才能保证以后收到的数据，可以产生中断消息，脚本可以及时处理<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">详细代码参考<span lang="EN-US">uart</span>的<span lang="EN-US">demo<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">2.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、数据发送</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></b><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">脚本使用<span lang="EN-US">uart.write</span>接口发送数据，一次性最多支持发送<span lang="EN-US">1460</span>字节的数据<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">可以通过异步消息来通知脚本数据已经发送成功，参考<span lang="EN-US">uart</span>的<span lang="EN-US">demo<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span style="font-size:14.5pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;mso-hansi-font-family:
inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt">三、常见问题</span></b><b><span lang="EN-US" style="font-size:14.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:18.0pt"><o:p></o:p></span></b></p>

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.1</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">api</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">文档在哪里</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://wiki.openluat.com/doc/luatApi/#uart">http://wiki.openluat.com/doc/luatApi/#uart</a></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">代码详见<span lang="EN-US">uart</span>的<span lang="EN-US">demo<o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.2</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、休眠、唤醒和功耗控制</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">默认状态下，在合适的时间点（此时间点不可预知），系统会自动进入休眠状态；串口数据收发之前，必须通过<span lang="EN-US">pm.wake(...)</span>接口使系统持续处于唤醒状态，才能保证收发功能正常；收发结束后，可以通过<span lang="EN-US">pm.sleep(...)</span>接口允许系统自动休眠<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">如果项目不要求低功耗，为了编程方便，可以调用<span lang="EN-US">pm.wake</span>使系统一直处于唤醒状态<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">如果项目要求低功耗，除了动态控制休眠唤醒外，还要使用<span lang="EN-US">uart.close</span>关闭串口，这样才能完全消除串口功能的功耗<span lang="EN-US"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.3</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">2G</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">模块的调试串口可以用来做普通数据传输使用吗</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">可以用来做普通数据传输，但是不建议使用，原因有如下两点：<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">、调试串口数据传输不稳定，很容易丢失数据；必须在应用层之上增加重试和容错机制<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2</span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">、调试串口主要用于烧写固件和输出日志，有一套专用协议，如果要用做普通数据传输，必须按照这套协议开发对端程序<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">有需要的话，参考hostUart的demo<span lang="EN-US" style="color:#333333"><o:p></o:p></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.4</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">4G</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">模块的</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt">USB</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">口可以和</span></b><b><span lang="EN-US" style="font-size:11.5pt;font-family:
&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:宋体;
color:#333333;mso-font-kerning:0pt">PC</span></b><b><span style="font-size:
11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:inherit;
mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt">之间进行数据传输吗</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">USB</span><span style="font-size:9.0pt;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;mso-font-kerning:0pt">在<span lang="EN-US">PC</span>端映射出的<span lang="EN-US">ASR Modem Device AT</span>口可以和<span lang="EN-US">PC</span>进行数据传输<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;mso-font-kerning:0pt">代码详见<span lang="EN-US">usbdata</span>的<span lang="EN-US">demo<span style="color:#333333"><o:p></o:p></span></span></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.5</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、</span></b><b><span lang="EN-US" style="font-size:11.5pt;
font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">RS485</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">通信的收发方向控制</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">可使用<span lang="EN-US">uart.set_rs485_oe</span>接口配置此功能<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参考：</span><span lang="EN-US"><a target="_blank" rel="noopener" href="http://wiki.openluat.com/doc/luatApi/#uartset_rs485_oe">http://wiki.openluat.com/doc/luatApi/#uartset_rs485_oe</a></span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.6</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、串口无法数据通信</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">检查一下串口电平是否匹配，波特率是否匹配，软件上是否进入了休眠</span></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.7</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、串口数据乱码</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">检查下模块板和主控板的参考地是否有电势差，曾经有一个客户的板子如下图设计 ，</span><span style="color: rgb(51, 51, 51); font-family: 微软雅黑, sans-serif; font-size: 9pt;">通过主控板给模块供电，然后只通过上图排插针通插座的方式连接主板串口，导致地连接的阻抗增加，在弱信号下大功率发射时，会导致模块板和主控板的参考地有电势差，导致串口通信异常</span></p><p class="MsoNormal" align="left" style="margin-bottom: 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"></p><div style="text-align: center;">&nbsp;&nbsp;</div><img src="https://oldask.openluat.com/image/show/attachments-2019-12-tKRV5rSC5de4acdaa59f8.png" class="img-responsive" style="text-align: center; width: 25%; float: none;"><p></p><div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<div style="border-top: none; border-right: none; border-left: none; border-image: initial; border-bottom: 1pt solid rgb(238, 238, 238); padding: 0cm 0cm 4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial;">

<p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;"><b><span lang="EN-US" style="font-size:11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:
微软雅黑;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:0pt">3.8</span></b><b><span style="font-size:11.5pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-ascii-font-family:
inherit;mso-hansi-font-family:inherit;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">、串口接收数据丢失</span></b><b><span lang="EN-US" style="font-size:
11.5pt;font-family:&quot;inherit&quot;,&quot;serif&quot;;mso-fareast-font-family:微软雅黑;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></b></p>

</div><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">1.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">接收数据前，必须保证系统处于唤醒状态，参考<span lang="EN-US">3.2</span>章节<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">2.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">检查下代码接收处理逻辑是否有问题，重点检查如下代码逻辑<span lang="EN-US"><o:p></o:p></span></span></p><table class="MsoTableGrid" border="1" cellspacing="0" cellpadding="0" style="margin-left: 26.7pt; background: rgb(242, 242, 242); border: none;">
 <tbody><tr>
  <td width="666" valign="top" style="width:399.4pt;border:solid black 1.0pt;
  mso-border-themecolor:text1;mso-border-alt:solid black .5pt;mso-border-themecolor:
  text1;padding:0cm 5.4pt 0cm 5.4pt">
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">local function read()<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  local data = ""<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; --</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">底层</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">core</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">中，串口收到数据时：</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; --</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果接收缓冲区为空，则会以中断方式通知</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">Lua</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">脚本收到了新数据；</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; --</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">如果接收缓冲器不为空，则不会通知</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">Lua</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">脚本</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp; --</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">所以</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">Lua</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">脚本中收到中断读串口数据时，每次都要把接收缓冲区中的数据全部读出，这样才能保证底层</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">core</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">中的新数据中断上来，此</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">read</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">函数中的</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">while</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">语句中就保证了这一点</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  while true do&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  data = uart.read(UART_ID,"*l")<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  if not data or string.len(data) == 0 then break end<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  --</span></span><span class="pln"><span style="font-size: 7.5pt; font-family: 宋体; border: 1pt none windowtext; padding: 0cm;">打开下面的打印会耗时</span></span><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;"><o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  log.info("testUart.read bin",data)<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  log.info("testUart.read hex",data:toHex())<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">&nbsp;&nbsp;&nbsp;
  end<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">end<o:p></o:p></span></span></p>
  <p class="MsoNormal" align="left" style="word-break: break-all;"><span class="pln"><span lang="EN-US" style="font-size: 7.5pt; font-family: Consolas; border: 1pt none windowtext; padding: 0cm;">uart.on(UART_ID,"receive",read)</span></span><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
  宋体;color:#333333;mso-font-kerning:0pt"><o:p></o:p></span></p>
  </td>
 </tr>
</tbody></table><p class="MsoListParagraph" align="left" style="margin-left: 42pt; text-indent: 0cm; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><span lang="EN-US" style="font-size:9.0pt;font-family:
&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;mso-font-kerning:
0pt"><o:p>&nbsp;</o:p></span></p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">3.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">参考<span lang="EN-US">demo\uart\v1\testUart.lua</span>写一个简单<span lang="EN-US">demo</span>，仅仅接收和打印数据，不做其他任何处理，看看数据是否有丢失<span lang="EN-US"><o:p></o:p></span></span></p><p class="MsoNormal" align="left" style="margin: 12pt 0cm 7.4pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all; border: none; padding: 0cm;">











</p><p class="MsoListParagraph" align="left" style="margin: 0cm 0cm 7.4pt 42pt; text-indent: -21pt; background-image: initial; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; word-break: break-all;"><!--[if !supportLists]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
微软雅黑;color:#333333;mso-font-kerning:0pt">4.<span style="font-variant-numeric: normal; font-variant-east-asian: normal; font-stretch: normal; font-size: 7pt; line-height: normal; font-family: &quot;Times New Roman&quot;;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><!--[endif]--><span lang="EN-US" style="font-size:9.0pt;font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:
宋体;color:#333333;mso-font-kerning:0pt">pc</span><span style="font-size:9.0pt;
font-family:&quot;微软雅黑&quot;,&quot;sans-serif&quot;;mso-bidi-font-family:宋体;color:#333333;
mso-font-kerning:0pt">端通过<span lang="EN-US">sscom</span>监控模块的<span lang="EN-US">rx</span>管脚，对比看下<span lang="EN-US">sscom</span>监控到的数据是否有丢失；同时用示波器监控<span lang="EN-US">rx</span>管脚数据，确认下高电平和低电平电压是否正确<span lang="EN-US"><o:p></o:p></span></span></p></div>





      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/15/611/" data-id="ckkfmdgfs00ezvkcgdaprf72f" data-title="Air系列模块Lua版本串口功能汇总" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-610" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/14/610/" class="article-date">
  <time class="dt-published" datetime="2019-08-14T10:29:04.000Z" itemprop="datePublished">2019-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/14/610/">Air2xx/8xx系列GPRS模块AT固件更新说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#####AirM2M_V5887_AT_S_TTS/AirM2M_V5887_AT_S_SSL：<br>解决小概率第一次开机重启的问题</p>
<hr>
<p>#####AirM2M_V5877_AT_S_SSL/AirM2M_V5877_AT_S_TTS：<br>解决使用MDISCONNECT无效的情况下，无法使用MIPCLOSE的问题</p>
<p>直接使用MIPCLOSE的用户无需更新</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/14/610/" data-id="ckkfmdgci008pvkcg53172yq6" data-title="Air2xx/8xx系列GPRS模块AT固件更新说明" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-609" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/14/609/" class="article-date">
  <time class="dt-published" datetime="2019-08-14T10:11:02.000Z" itemprop="datePublished">2019-08-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/14/609/">Air720X系列模块AT固件更新说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>历代固件更新说明，会持续更新：</p>
<p>版本修改：</p>
<h5 id="AirM2M-720-V1509-LTE-AT："><a href="#AirM2M-720-V1509-LTE-AT：" class="headerlink" title="AirM2M_720_V1509_LTE_AT："></a>AirM2M_720_V1509_LTE_AT：</h5><p>下载地址<br><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200923163552_AirM2M_720_V1509_LTE_AT.zip" title="1509">AirM2M_720_V1509_LTE_AT</a></p>
<p>一  BUG修复&amp;优化<br>【问题描述】:AT+MEDCR=0,45,1 设置失败</p>
<p>【问题单号】:3045<br>【问题描述】:ppp死机</p>
<p>【问题单号】:0<br>【问题描述】:AT+GSMBUSY=1拒绝接听呼叫,移动卡没语音提示</p>
<p>【问题单号】:2541<br>【问题描述】:透传每秒4K，模块死机</p>
<p>【问题单号】:0<br>【问题描述】:AT+MEDCR=0,45,1 设置失败</p>
<p>【问题单号】:3045<br>【问题描述】:ppp死机</p>
<p>【问题单号】:0<br>【问题描述】:AT+GSMBUSY=1拒绝接听呼叫,移动卡没语音提示</p>
<p>【问题单号】:2541<br>【问题描述】:透传每秒4K，模块死机</p>
<hr>
<h5 id="AirM2M-720-V1497-LTE-AT："><a href="#AirM2M-720-V1497-LTE-AT：" class="headerlink" title="AirM2M_720_V1497_LTE_AT："></a>AirM2M_720_V1497_LTE_AT：</h5><p>下载地址<br><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/sw_file_20200923163552_AirM2M_720_V1497_LTE_AT.zip" title="1497">AirM2M_720_V1497_LTE_AT</a><br>一  BUG修复&amp;优化<br>1.MQTT连接订阅消息设置订阅消息为缓存模式消息会被改变</p>
<hr>
<h5 id="AirM2M-720-V1446-LTE-AT："><a href="#AirM2M-720-V1446-LTE-AT：" class="headerlink" title="AirM2M_720_V1446_LTE_AT："></a>AirM2M_720_V1446_LTE_AT：</h5><p>一  BUG修复&amp;优化</p>
<p>1  【系统】</p>
<p>1 . 01 优化注网（因为LTE协议版本低导致某些地方注册不上4G网络问题）</p>
<p>#####AirM2M_720_V1381_LTE_AT：</p>
<p>版本修改：</p>
<p>一 新增功能</p>
<p>1 【AT】</p>
<p>1 .01 增加AT+HTTPHEAD命令</p>
<p>二 BUG修复&amp;优化</p>
<p>1 【AT】</p>
<p>1 .01 修改AT*BAND=? 与文档描述不符问题</p>
<p>1 .02 修改AT+CPBF=findtext命令找不到目标电话记录问题</p>
<p>1 .03 修改当AT+SSLCFG中参数<n>=88时，AT+SSLCFG擦除功能无法擦除参数问题</p>
<p>1 .04 修改用AT+CPNETAPN设置专网卡上网失败的问题</p>
<p>2 【系统】</p>
<p>1 .01 优化发送数据异常，连接被服务器断开的问题</p>
<p>2  .02 修改当ppp拨号脚本中有设置AT+CGDCONT=1,”IP”,apn的操作时会拨号失败的问题会拨号失败的问题</p>
<hr>
<p>#####AirM2M_720_V1328_LTE_AT：</p>
<p>版本修改：</p>
<p>一 BUG修复&amp;优化</p>
<p>1 【AT】</p>
<p>1 .01 修改cmux通道上报的URC数据有问题，创建CMUX通道后，用串口线接上UART2插针上，有2条相同的主动上报</p>
<p>1 .02 修改MCONFIG无法设置username和password为空,报CME ERROR 765错误</p>
<p>1 .03 修改当注册网络为2G或3G时，设置CGREG主动上报，CGREG上报内容的参数与文档不一致</p>
<p>1 .04 修改AT^CARDMODE主动上报功能无效(主动上报功能自动打开，卡移除时上报的状态不对)</p>
<p>1 .05 优化短信编码格式跟长短信的支持</p>
<p>1 .06 添加uart2 dtr管脚作为模块休眠控制管脚和原DTR管脚功能一样</p>
<p>2 【系统】</p>
<p>2 .01 修改由于没有忽略大小写概率性出现dns解析失败</p>
<hr>
<p>#####AirM2M_720_V1302_LTE_AT：<br>BUG修复&amp;优化:</p>
<p>1.PDU格式user data部分超过140个字节，死机</p>
<p>2.AT^CARDMODE?指令查询结果缺少n参数</p>
<p>3.优化定位DSP_COM_ERR=0x6501,Unknown死机问题，去除luaWdtTask打印</p>
<p>4.优化修改使用电源供电，开机会出现按键1.5s无法开机得现象</p>
<hr>
<p>#####AirM2M_720_V1199_LTE_AT：</p>
<p>BUG修复&amp;优化</p>
<p>1 【AT】</p>
<p>1 .01 修改上报+NITZ的URC时,先保存时间到系统时钟，然后再上报URC问题</p>
<p>1 .02 修改CDNSCFG指令通过添加缺省参数appid,设置对应cid的DNS问题</p>
<p>1 .03 修改MQTT挂测的过程中收发短信，短信刚开始还能用，后来几乎所有短信相关操作都返回ERROR问题</p>
<p>1 .04 修改AT+DIALMODE=1，2G的情况下进行自动拨号问题</p>
<p>2 【系统】</p>
<p>1 .01 优化特殊网络环境下网络问题</p>
<p>1 .02 优化flash读取慢的问题</p>
<p>1 .03 增加fota区大小</p>
<hr>
<p>#####AirM2M_720_V1161_LTE_AT：<br>一 新增功能</p>
<p>1 【AT】</p>
<p>1 .01 增加AT+CSDH命令</p>
<p>二 BUG修复&amp;优化</p>
<p>1 【AT】</p>
<p>1 .01 修改收到服务器上报数据末尾的\r\n会被上报短信打断问题</p>
<p>1 .02 修改AT*BAND=?的返回值跟文档不符合问题</p>
<p>1 .03 修改TEXT模式下，接收超过160个字符的英文短信会无法打印问题</p>
<p>1 .04 修改socket发送应答延迟问题</p>
<p>1 .05 修改死机问题</p>
<p>1 .06 修改单天线配置的模块CFUN=6,band=4（2/3G）后无法建立默认承载，再lte下是没问题</p>
<p>1 .07 2G专卡注网慢，掉网问提，需设置 at+medcr=0,8,1，at+medcr=0,17,240，at+medcr=0,19,1优化命令问题</p>
<p>2 【系统】</p>
<p>1 .01 修改单天线校准不过问题</p>
<hr>
<p>#####AirM2M_720_V1132_LTE_AT：</p>
<p>一  新增功能</p>
<p>无</p>
<p>二  BUG修复&amp;优化</p>
<p>1【AT】</p>
<p> 1.01 修复CIPGSMLOC在切换时会发生错误的问题</p>
<p> 1.02 优化AT^DATAINFO?命令上报显示</p>
<p> 1.03 优化SSL CLOSE处理流程</p>
<p> 1.04 优化SSL连接服务器</p>
<p> 1.05 修复CSDT功能不生效问题</p>
<p>2【系统】</p>
<p> 2.01 修改插拔USB后模块无法睡眠问题</p>
<p> 2.02 修复开机USB没初始化好导致死机的问题</p>
<hr>
<p> #####AirM2M_720_V1104_LTE_AT：</p>
<p>一 新增功能</p>
<p>1【AT】</p>
<p> 1.01 增加AT^DATAINFO?指令查询使用流量功能；</p>
<p> 1.02 新增支持TEXT模式短信中发送0x0A,0x0D</p>
<p> 1.03 增加MQTT证书认证</p>
<p>二 BUG修复&amp;优化</p>
<p>1【AT】</p>
<p> 1.01 修改AT+CCLK?查询时区不对的问题</p>
<p> 1.02 修改HTTP命令GET的数据跟浏览器GET的数据不一致的问题</p>
<p> 1.03 修改CIPGSMLOC查询时间不对的问题</p>
<p> 1.04 修改AT+CIICR返回CME ERROR 3的问题</p>
<p> 1.05 修改AP_WAKEUP_MODULE一直接地，AT+CSCLK=1后模块睡眠的问题</p>
<p> 1.06 修改服务器发送最后一包数据带有FIN标志时,先上报CLOSE导致数据接受不完全的问题</p>
<p> 1.07 修改使用漫游卡，无法使用CIICR激活PDP的问题</p>
<p>2【系统】</p>
<p> 2.01 修改EXRON1N管脚接地，断开VBUS。外部供电无法开机问题</p>
<p>3【RNDIS】</p>
<p> 3.01 修改用RNDIS发送HTTP命令，导致模块重启问题</p>
<p> 3.02 优化RNDIS稳定性</p>
<p>  #####AirM2M_720_V1040_LTE_AT：<br>  版本修改：</p>
<p>一 新增功能</p>
<p>1【FOTA】</p>
<p> 1.01 自动升级的功能扩展可以配置升级检测时间；</p>
<p>二 BUG修复&amp;优化</p>
<p>1【AT】</p>
<p> 1.01 修改AT+CSTT在没有默认APN的情况下直接返回错误的问题</p>
<p> 1.02 修改AT^SYSCONFIG命令参数和文档描述不一致问题</p>
<p> 1.03 修改AT+CNMI?命令参数和文档描述不一致问题</p>
<p> 1.04 修改AT+CSMP?命令参数和文档描述不一致问题</p>
<p> 1.05 修改AT+WISN设置的SN，最大长度要支持64字节问题</p>
<p> 1.06 修改AT+MIPSTART在已经建立链接的情况下返回的提示字符格式错误的问题</p>
<p> 1.07 修改AT+CIPQSEND=0/1默认都为快发模式,增加一个AT+CIPQSEND=2的模式，用来设置慢发模式；</p>
<p>2【RNDIS】</p>
<p> 2.01 修改部分rndis 通道AT指令无法返回给客户端问题</p>
<p>  #####AirM2M_720_V980_LTE_AT：</p>
<p>  BUG修复&amp;优化</p>
<p>1 【AT】</p>
<p>1 .01 bug_391：修改AT+CNTP获取网络时间并设置到本地</p>
<p>1 .02 AT+HTTPPARA=”USERDATA”,”参数1\r\n参数2\r\n参数3”这种形式不能用   了，返回ERRO2.AT+HTTPPARA=”USERDATA”,”参数1\r\n参数2\r\n参数3”这种形式不能用了，返回ERROR</p>
<p>1 .03 两个一次发送指令连着发的时候，第一次发送的输入数据部分总是多了一部分</p>
<p>1 .04 AT+CIPSPRT=2时，当两条AT+CIPSEND命令连续发送时，只能收到一条数据回送</p>
<p>1 .05 AT+CIFSR没应答问题</p>
<p>1 .06 修改CMCF=1的指令 发74A34AAEB54E02010000006E5CDA4FC110648991030920到模块，模块只能收到74A34AAEB54E0201</p>
<p>1 .07 修改ppp拨号后，电话进入挂断后，ppp掉线问题</p>
<p>1 .08 将短信时间戳里面的空格去掉</p>
<p>  #####AirM2M_720_V786_LTE_AT：<br>  无</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/14/609/" data-id="ckkfmdgci008ovkcghbnshtrs" data-title="Air720X系列模块AT固件更新说明" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-607" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/08/12/607/" class="article-date">
  <time class="dt-published" datetime="2019-08-12T15:15:48.000Z" itemprop="datePublished">2019-08-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/08/12/607/">玩转天猫精灵（一）dtu配置</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p class="MsoNormal">设备刷<span lang="EN-US">dtu</span>固件<span lang="EN-US"><o:p></o:p></span></p><p>

</p><p class="MsoNormal">一机一密，根据复制的信息填写好</p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-kxuo3GnP5d517fd384053.png" style="width: 557.5px;" class="img-responsive"><span lang="EN-US"><o:p><br></o:p></span></p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-sBAgI9dW5d517fe844985.png" style="width: 364.5px;" class="img-responsive"><span lang="EN-US"><o:p>topic直接复制粘贴过来，注意订阅发布位置不要错了</o:p></span></p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-zq71txq05d5180280260b.png" style="width: 557px;" class="img-responsive"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-ATsjBoFL5d518045ba3ed.png" style="width: 219.5px;" class="img-responsive">数据绑定串口1，启用串口1</p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-0I23mIzm5d51809a67651.png" style="width: 307px;" class="img-responsive"><br></p><p class="MsoNormal"><span lang="EN-US"><o:p>硬件连接串口1打开串口助手，我们在云平台在线调试发送一条控制指令</o:p></span></p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-tFPbABaq5d5181306e867.png" style="width: 276.5px;" class="img-responsive"><span lang="EN-US"><o:p>我们就可以接受到消息，根据消息内容：</o:p></span></p><p class="MsoNormal"><span lang="EN-US"><o:p>{"id":"1","version":"1.0","method":"thing.event.property.post","params":{"LightSwitch":0} }</o:p></span></p><p class="MsoNormal"><span lang="EN-US"><o:p>我们可以知道LightSwitch的值就是我们需要获取的指令，我们只需要处理数据即可。</o:p></span></p><p class="MsoNormal"><span lang="EN-US"><o:p>按照这个思路，打开数据流，添加处理脚本</o:p></span></p><p class="MsoNormal"><img src="http://oldask.openluat.com/image/show/attachments-2019-08-SID2QngD5d5181ccd0242.png" style="width: 277px;" class="img-responsive"><span lang="EN-US"><o:p><br></o:p></span></p><pre><span lang="EN-US"><o:p>function
    local str = ...
   led = pins.setup(pio.P0_29,1)
    log.info("------阿里云收到数据-------")
    log.info("数据为:",str)
    if  string.find(str,"LightSwitch") then
        log.info("------数据为控制指令-------")
        JSData=json.decode(str)
        log.info("------解析数据成功了-------")
        Cmd=JSData["params"]["LightSwitch"]
        log.info("------执行动作-------")
        if Cmd==0 then led(0) log.info("------关闭开关-------") end
        if Cmd==1 then led(1) log.info("------打开开关-------") end
    end
    return "OK"
end<br></o:p></span></pre><p class="MsoNormal"><span lang="EN-US"><o:p>重启设备获取参数，我们在下发指令就可以看到luatools打印出了我们的指令，我用的S9开发板，板载蓝色灯可以根据控制实现开关。</o:p></span></p><p class="MsoNormal"><span lang="EN-US"><o:p>设备端开发完成</o:p></span></p><p class="MsoNormal"><span lang="EN-US"><o:p><br></o:p></span></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/08/12/607/" data-id="ckkfmdgch008mvkcg74muck0u" data-title="玩转天猫精灵（一）dtu配置" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/36/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/">35</a><a class="page-number" href="/page/36/">36</a><span class="page-number current">37</span><a class="page-number" href="/page/38/">38</a><a class="page-number" href="/page/39/">39</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/38/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>