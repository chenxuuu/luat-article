<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/52/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-465" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/09/465/" class="article-date">
  <time class="dt-published" datetime="2018-10-09T03:33:00.000Z" itemprop="datePublished">2018-10-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/09/465/">网卡模式下获取Air720的运行状态</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><ol>
<li>需要获取联网状态,设备识别号(IMEI),ICCID,重启设备</li>
<li>通过AT可以获取网络状态,SIM的ICCID</li>
<li>linux下需要修改内核驱动才能出AT口</li>
</ol>
<h2 id="效果预览"><a href="#效果预览" class="headerlink" title="效果预览"></a>效果预览</h2><p>获取信息</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">&quot;sysinfo&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;hardware_version&quot;</span>: <span class="string">&quot;NZ_SSG_V20&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;device_name&quot;</span>: <span class="string">&quot;MIFI&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;version_num&quot;</span>: <span class="string">&quot;NZ_NZ_CP_2.174.000X&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;version_date&quot;</span>: <span class="string">&quot;Oct  6 2018&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;model_name&quot;</span>: <span class="string">&quot;LV01&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;main_chip_name&quot;</span>: <span class="string">&quot;PXA1802&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;ssg_version&quot;</span>: <span class="string">&quot;LV01MVL01&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;ssg_compile_time&quot;</span>: <span class="string">&quot;Oct  6 2018 10:38:24&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;current_device_mac&quot;</span>: <span class="string">&quot;ac:3d:d3:d5:6d:af&quot;</span></span><br><span class="line">   &#125;,</span><br><span class="line">      <span class="attr">&quot;wan&quot;</span>: &#123;</span><br><span class="line">          <span class="comment">// ...</span></span><br><span class="line">         <span class="attr">&quot;IMEI&quot;</span>: <span class="string">&quot;869300038716XXX&quot;</span></span><br><span class="line">         <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">   <span class="comment">//... 剩下的省略</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="突破口"><a href="#突破口" class="headerlink" title="突破口"></a>突破口</h2><ol>
<li>设备自带一个网页管理工具</li>
<li>该工具需要登录,基于变种的Digest realm登录验证</li>
<li>网页是通过ajax访问/xml_action.cgi读取和操作设备</li>
<li>必须先完成一次登录,才能通过普通的Digest realm机制访问xml_action</li>
</ol>
<h2 id="操作流程"><a href="#操作流程" class="headerlink" title="操作流程"></a>操作流程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. 访问&#x2F;login.cgi,服务器返回header WWW-Authenticate</span><br><span class="line">2. 解析WWW-Authenticate,得到nonce</span><br><span class="line">3. 先使用uri&#x3D;&#x2F;cgi&#x2F;protected.cgi生成签名,作为url参数. 这点非常重要</span><br><span class="line">4. 再使用uri&#x3D;&#x2F;cgi&#x2F;xml_action.cgi生成普通的Digest realm签名,放入header</span><br><span class="line">5. 使用上两步的参数和签名,访问&#x2F;login.cgi, 服务器返回200代表登录成功,500代表失败</span><br><span class="line">6. 使用普通Digest realm签名,访问&#x2F;xml_action.cgi, 可以读取和操作设备</span><br></pre></td></tr></table></figure>
<h3 id="Digest-realm签名算法简介"><a href="#Digest-realm签名算法简介" class="headerlink" title="Digest realm签名算法简介"></a>Digest realm签名算法简介</h3><p><a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/HTTP%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81">https://zh.wikipedia.org/wiki/HTTP%E6%91%98%E8%A6%81%E8%AE%A4%E8%AF%81</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HA1 &#x3D; md5_hex(username:realm:password)</span><br><span class="line">HA2 &#x3D; md5_hex(method:uri) &#x2F;&#x2F; method是GET&#x2F;POST&#x2F;PUT等, uri是&#x2F;cgi&#x2F;protected.cgi(仅登录)或&#x2F;xml_action.cgi</span><br><span class="line">&#x2F;&#x2F; 其中nonce是访问&#x2F;login.cgi时获取的</span><br><span class="line">&#x2F;&#x2F; nonceCount是16进制自增数列,login总是1,后续请求逐次+1</span><br><span class="line">&#x2F;&#x2F; clientNonce是客户端随机字符串,长度12字节,数字+字母就行</span><br><span class="line">&#x2F;&#x2F; qop总是auth</span><br><span class="line">RE &#x3D; md5_hex(HA1:nonce:nonceCount:clientNonce:qop:HA2)</span><br></pre></td></tr></table></figure>
<h2 id="演示代码"><a href="#演示代码" class="headerlink" title="演示代码"></a>演示代码</h2><p>基于Java的示例代码,2018-10-06的AT固件验证有效<br><a target="_blank" rel="noopener" href="https://gitee.com/wendal/Air720Master">https://gitee.com/wendal/Air720Master</a></p>
<h2 id="附上部分可以操作"><a href="#附上部分可以操作" class="headerlink" title="附上部分可以操作"></a>附上部分可以操作</h2><p>module总是duster,还没发现例外</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; http:&#x2F;&#x2F;192.168.0.1&#x2F;xml_action.cgi?method&#x3D;get&amp;module&#x3D;duster&amp;file&#x3D;status1</span><br><span class="line">&#x2F;&#x2F; 全部状态? status1</span><br><span class="line">&#x2F;&#x2F; 流量信息 statistics</span><br><span class="line">&#x2F;&#x2F; 上网配置 wan</span><br><span class="line">&#x2F;&#x2F; 局域网配置 lan</span><br><span class="line">&#x2F;&#x2F; PIN&#x2F;PUK设置 pin_puk</span><br><span class="line">&#x2F;&#x2F; USSD设置 ussd</span><br><span class="line">&#x2F;&#x2F; 联网设备 device_management_all</span><br><span class="line">&#x2F;&#x2F; 设备统计 device_management</span><br><span class="line">&#x2F;&#x2F; 日志 detailed_log</span><br><span class="line">&#x2F;&#x2F; 自定义防火墙 custom_fw</span><br><span class="line">&#x2F;&#x2F; 端口过滤 port_filter</span><br><span class="line">&#x2F;&#x2F; 端口转发 port_forwarding</span><br><span class="line">&#x2F;&#x2F; 电话本 phonebook</span><br><span class="line">&#x2F;&#x2F; 短信 message</span><br><span class="line">&#x2F;&#x2F; 管理员配置 admin</span><br><span class="line">&#x2F;&#x2F; 固件版本 firmware</span><br><span class="line">&#x2F;&#x2F; 重启 reset</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/10/09/465/" data-id="ckkfmdgbf005pvkcgd0ex74rg" data-title="网卡模式下获取Air720的运行状态" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-464" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/07/464/" class="article-date">
  <time class="dt-published" datetime="2018-10-07T11:38:52.000Z" itemprop="datePublished">2018-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/07/464/">详解Air202/Air80x的Luat升级流程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="流程总图"><a href="#流程总图" class="headerlink" title="流程总图"></a>流程总图</h2><p>本图描述的是2G模块, 然后4G模块的更新不是基于文件的, 稍有区别</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_89395.png"></p>
<h3 id="重点提示-敲黑板"><a href="#重点提示-敲黑板" class="headerlink" title="重点提示,敲黑板!!!"></a>重点提示,敲黑板!!!</h3><ul>
<li>升级服务器返回状态码200就代表需要升级</li>
<li>实际升级是在系统启动时完成,update.lua是负责下载升级文件的</li>
</ul>
<h2 id="使用合宙iot平台"><a href="#使用合宙iot平台" class="headerlink" title="使用合宙iot平台"></a>使用合宙iot平台</h2><p>平台地址: <a target="_blank" rel="noopener" href="https://iot.openluat.com/">https://iot.openluat.com/</a></p>
<p>该平台的功能及限制:</p>
<ul>
<li>可以根据imei列表升级设备</li>
<li>不支持根据区域升级设备</li>
<li>支持全项目升级</li>
<li>能统计升级成功的设备,但不支持统计失败的设备(通常不存在)</li>
</ul>
<h3 id="点击新建项目"><a href="#点击新建项目" class="headerlink" title="点击新建项目"></a>点击新建项目</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_33307.jpg"></p>
<p>输入一个有个性的名字就行, 我输入的是 超级插座</p>
<h3 id="进入产品"><a href="#进入产品" class="headerlink" title="进入产品"></a>进入产品</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_14881.jpg"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_81751.jpg"><br>把ProductKey记下了,下面会用到</p>
<h3 id="设备端代码修改"><a href="#设备端代码修改" class="headerlink" title="设备端代码修改"></a>设备端代码修改</h3><p>打开项目的main.lua</p>
<ul>
<li>确保开头声明了PROJECT/VERSION/PRODUCT_KEY</li>
</ul>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 务必注意变量的大小写</span></span><br><span class="line">PROJECT = <span class="string">&quot;SuperPower&quot;</span></span><br><span class="line"><span class="comment">-- 版本号我推荐用X.X.X形式</span></span><br><span class="line">VERSION = <span class="string">&quot;2.0.4&quot;</span></span><br><span class="line"><span class="comment">-- 填入iot平台上的ProductKey</span></span><br><span class="line">PRODUCT_KEY = <span class="string">&quot;NzqyRvsPvoyXva8dxXXX&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 其他代码</span></span><br><span class="line"><span class="comment">-- 升级功能</span></span><br><span class="line"><span class="built_in">require</span><span class="string">&quot;update&quot;</span></span><br><span class="line">update.request()</span><br></pre></td></tr></table></figure>
<h3 id="使用luatools生成量产文件"><a href="#使用luatools生成量产文件" class="headerlink" title="使用luatools生成量产文件"></a>使用luatools生成量产文件</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_10346.gif"></p>
<p>会有两个目录:<br>分别是 <strong>远程升级用.bin文件</strong> 和 <strong>量产升级用.lod文件</strong><br>lod是不能远程升级的,只能使用bin文件升级</p>
<h3 id="升级文件的命名规则-非常非常非常重要"><a href="#升级文件的命名规则-非常非常非常重要" class="headerlink" title="升级文件的命名规则,非常非常非常重要"></a>升级文件的命名规则,非常非常非常重要</h3><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- $&#123;PROJECT&#125;_$&#123;VERSION&#125;_$&#123;LOD&#125;.bin</span></span><br><span class="line">SuperPower_2<span class="number">.0</span><span class="number">.4</span>_Luat_V0028_8955_SSL_UI_FLOAT.bin</span><br></pre></td></tr></table></figure>
<p>文件名就是固件版本,不要通过修改文件名来改变版本号,这是行不通的!!!</p>
<h3 id="回到iot平台-添加固件"><a href="#回到iot平台-添加固件" class="headerlink" title="回到iot平台,添加固件"></a>回到iot平台,添加固件</h3><p>上动图</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_37217.gif"></p>
<h3 id="测试升级"><a href="#测试升级" class="headerlink" title="测试升级"></a>测试升级</h3><ul>
<li>先把main.lua的VERSION改成2.0.3, 刷机</li>
<li>回到iot平台, 点击编辑, 将2.0.4设置为可升级</li>
<li>点击”添加”, 填入测试设备的imei,并确定</li>
<li>重启测试设备,观察日志, 一般来说都会更新成功的^_^</li>
</ul>
<h2 id="自建升级平台"><a href="#自建升级平台" class="headerlink" title="自建升级平台"></a>自建升级平台</h2><p><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/107">http://oldask.openluat.com/article/107</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/10/07/464/" data-id="ckkfmdgbe005ovkcg0z4q85oi" data-title="详解Air202/Air80x的Luat升级流程" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-463" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/10/01/463/" class="article-date">
  <time class="dt-published" datetime="2018-10-01T00:28:04.000Z" itemprop="datePublished">2018-10-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/10/01/463/">史上最详细的Air7xx驱动安装教程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>由于Air7xx系列4G模块需要安装USB驱动，但是很多开发者对USB驱动的安装方法不是十分了解，所以经常出现问题，导致安装失败。特书此文，手把手教你装USB驱动。</p>
<p>#第一步  从官网下载最新的驱动程序<br><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/AirM2M_USB_Download&Com_Driver_for_4G_V1.0.0.4.7z">点击此处</a>，下载驱动压缩包：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_47355.png"></p>
</blockquote>
<p>解压后可以看到一个文件夹和两个EXE程序。EXE文件分为32位和64位：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57637.png"></p>
</blockquote>
<p>#第二步  确定操作系统类型<br>按win+r，在弹出的窗口中输入“cmd”，打开cmd；接下来输入“systeminfo” 并回车：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_44715.png"></p>
</blockquote>
<p>根据“系统类型”判断当前操作系统是32位或者64位：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_11185.png"></p>
</blockquote>
<p>或者，“此电脑”上右键，属性，亦可查看：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_91776.png"><br>右键–属性<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_48063.jpeg"><br>操作系统类型</p>
</blockquote>
<p>#第三步  打开“设备管理器”</p>
<p>使用usb线连接开发板（或模块）的usb脚，并开机；</p>
<p>在电脑的左下角“开始”右键—设备管理器，查看带有“问号”、“叹号”的设备：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_30095.png"></p>
</blockquote>
<p>这几个就是待装驱动的设备；安装好USB驱动之后，将没有“问号”、“叹号”，开发者可以正常调试、下载、PPP拨号等。</p>
<p>#第四步 禁止Windows驱动签名认证</p>
<p>以Windows10为例，点开“所有设置”—“更新和安全”—“恢复”—“立即重新启动”：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57583.jpeg"></p>
</blockquote>
<p>接下来，选择“<strong>疑难解答</strong>”：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_58899.jpeg"></p>
</blockquote>
<p>然后，选择“<strong>高级选项</strong>”：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_59757.jpeg"></p>
</blockquote>
<p>现在，点击“<strong>查看更多恢复选项</strong>”（下方小字）：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_70151.jpeg"></p>
</blockquote>
<p>OK，现在可以点击“<strong>启动设置</strong>”了：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_32700.jpeg"></p>
</blockquote>
<p>点击“<strong>重启</strong>”按钮，重启计算机：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_92895.jpeg"></p>
</blockquote>
<p>计算机启动后，会出现如下界面，根据提示按<strong>F7</strong>（禁止驱动程序强制签名）：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_66594.jpeg"></p>
</blockquote>
<p>按<strong>F7</strong>后，系统正常启动，进入桌面。<br>需要注意的是，此“<strong>禁止驱动程序强制签名</strong>”方式仅本次启动有效；如果操作系统重启，则失效。如果开发者需要重新安装驱动，则<strong>仍然需要重复此步骤</strong>。<br>（删除驱动程序，不需要此步骤）</p>
<p>#第五步 安装驱动程序<br>经过前面几步操作，可以开始安装驱动程序了。</p>
<p>通过“第二步”，我们已经知道当前操作系统是64位，打开“DrvInstaller_x64.exe”，点击“Update Driver”安装驱动：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_17830.png"></p>
</blockquote>
<p>安装过程中，会多次跳出如下对话框，请<strong>务必选择</strong>“始终安装此驱动程序软件”，否则驱动安装失败：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_16989.png"><br>（如果错误选择，或者关闭了这个对话框，请重新运行DrvInstaller_x64.exe，并安装驱动）</p>
</blockquote>
<img src="http://doc.openluat.com/api/static/editormd/php/../uploads/5_98990.gif" />

<p>如果驱动安装过程中，跳出如下提示：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_23061.png"></p>
</blockquote>
<p>则证明没有禁止操作系统的驱动签名认证，需要重复“<strong>第四步</strong>”的操作。</p>
<p>驱动安装完成后，跳出如下提示，证明安装成功：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_81926.png"></p>
</blockquote>
<p>#第六步 验证</p>
<p>使用usb线连接开发板（或模块）的usb脚，并开机；</p>
<p>打开“设备管理器”，查看“端口”，应出现对应的设备：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_14466.jpeg"></p>
</blockquote>
<p>如图所示，表明安装成功。</p>
<blockquote>
<p>值得注意的是，其他设备中仍有一个“Mobile AT Interface”是带有“叹号”的，这个是正常现象。</p>
</blockquote>
<p>接下来可以使用LuaTools进行下载，尽享开发乐趣了！</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_64429.jpeg"></p>
</blockquote>
<p>#卸载驱动</p>
<p>如果需要安装新版驱动程序，首先要卸载旧版驱动程序，然后重新按照上述步<strong>骤禁止驱动签名认证</strong>，后方可安装新版驱动。</p>
<p>那么，如何卸载驱动呢？请遵循如下步骤：<br>111. 首先，打开设备管理器；<br>111. 然后，展开<strong>“通用串行总线控制器”</strong><br>111. 使用usb线连接开发板/模块，开机；<br>111. 当出现名称含<strong>“ASR”</strong>的设备，立即在其上右键，点击<strong>“卸载设备”</strong>；<br>111. 接下来，在弹出的对话框中，选中<strong>“删除此设备驱动程序”</strong>，点击<strong>“卸载”</strong>按钮；<br>111. 稍后，卸载成功；<br>111. 再展开<strong>“通用串口”</strong>，同样的步骤，把所有含<strong>“ASR”</strong>字样的设备（通常是3~4个，需要全部删除）及其驱动删除；<br>111. 全部删除后，拔掉开发板/模块的usb线；<br>111. 使用usb线连接开发板/模块，开机；观察设备管理器<strong>“其他设备”</strong>出现带问号的<strong>“WUKONG”</strong>，表示驱动卸载成功。</p>
<img src="http://wx1.sinaimg.cn/large/62494ce4gy1fwcerfq1jug20ln0lenpd.gif" />

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/10/01/463/" data-id="ckkfmdgbe005nvkcgbzuk3j5u" data-title="史上最详细的Air7xx驱动安装教程" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-462" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/30/462/" class="article-date">
  <time class="dt-published" datetime="2018-09-30T11:50:11.000Z" itemprop="datePublished">2018-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/30/462/">实测Air720作为4G上网棒(MIFI)使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="所需要物料"><a href="#所需要物料" class="headerlink" title="所需要物料:"></a>所需要物料:</h2><ol>
<li>Air720, 可以是S720开发板, 也可以是 minipcie封装+minipcie转USB, 我用的是后者</li>
<li>中移动物联网卡一张. 虽说其他运营商也支持,但我只有中移动的卡呀<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_94378.jpg"></li>
</ol>
<h2 id="第一步-刷机"><a href="#第一步-刷机" class="headerlink" title="第一步, 刷机!!!!"></a>第一步, 刷机!!!!</h2><p>当前仅支持windows下刷机<br>收到Air720后, 如果不是AT版或者版本低于296,是必须要刷机的.<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57242.jpg"></p>
<p>我推荐顺序是:</p>
<ol>
<li>先安装驱动!!! 先安装驱动!!! 名字叫 AirM2M_USB_Download&amp;Com_Driver_for_4G_V1.0</li>
<li>插入Air720, 跳过所有Window Update搜索, 接受一切警告!!!</li>
<li>从usb口拔出Air720!! 让其完全断开与电脑的物理连接!!!</li>
<li>启动luatools 下载地址: Luat下载调试工具1.5.2</li>
<li>切换到4G, 然后菜单选AT, 升级为标准AT版本, 等待自动更新!!!!<br>点下载</li>
<li>现在, 把Air720接入电脑,是的,现在才连!!! 之前都不要连!!! 如果是S720开发板,拨到ON!</li>
<li>等待刷机完成</li>
<li>不要马上拔,等一分钟再拔</li>
<li>重新插入Air720,等待自动安装驱动, 会看到rndis字样</li>
</ol>
<h2 id="第二步-验证设备是否驱动成功"><a href="#第二步-验证设备是否驱动成功" class="headerlink" title="第二步,验证设备是否驱动成功"></a>第二步,验证设备是否驱动成功</h2><p>设备启动需要10~20秒,请耐心等待!!!</p>
<p>windows下, 打开网络和共享中心, 更改适配器设置, 会看到<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_29467.png"><br>ubuntu 16.04桌面版或树莓派1b, 搜索系统日志,可以看到rndis字样<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57565.png"></p>
<p>第三步,上网!!!</p>
<p>第四步,额外功能(已失效,该功能已经不存在)</p>
<p>控制页面地址: <a target="_blank" rel="noopener" href="http://192.168.0.1/">http://192.168.0.1</a> 账号admin 密码admin<br>控制功能:<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_73151.jpg"><br>虽然里面有wifi设置,但事实上并无wifi. 算是一个阉割版的MIFI吧</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/30/462/" data-id="ckkfmdgbe005mvkcg9tpzdzxt" data-title="实测Air720作为4G上网棒(MIFI)使用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-461" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/30/461/" class="article-date">
  <time class="dt-published" datetime="2018-09-30T04:37:06.000Z" itemprop="datePublished">2018-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/30/461/">Air720系列固件远程升级后台配置说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;1.1 注册账号（云平台）[如果有账号，则跳过本步] &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;打开&lt;/span&gt;&lt;a href=&quot;https://iot.openluat.com&quot; target=&quot;_blank&quot;&gt;https://iot.openluat.com&lt;/a&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;，进行注册&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;1.2 创建新项目（云平台）[如果有项目，则跳过本步] &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;1. &lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;打开&lt;/span&gt;&lt;a href=&quot;https://iot.openluat.com&quot; target=&quot;_blank&quot;&gt;https://iot.openluat.com&lt;/a&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;font face=&quot;宋体&quot;&gt;，登陆账号 &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;2. &lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;点击右上角的&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;创建新产品&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-UcBjdT9g5bb04dc5755c8.png&quot; class=&quot;img-responsive&quot; style=&quot;height: 38px; text-align: start; width: 157.429px;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-Xzh8LH3R5bb04dd949662.png&quot; style=&quot;width: 553.5px; height: 291.736px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;1.3 配置固件升级项（云平台） &lt;/span&gt;&lt;/b&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&amp;nbsp;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;使用账号登陆&lt;font face=&quot;Calibri&quot;&gt;&lt;a href=&quot;https://iot.openluat.com&quot; target=&quot;_blank&quot;&gt;https://iot.openluat.com&lt;/a&gt;&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;，进入设备所属的项目，点击左边的固件升级&lt;/font&gt;&lt;font face=&quot;Calibri&quot;&gt;-&amp;gt;&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;升级配置，如下图所示&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-OpARHxRQ5bb04e3e57766.png&quot; style=&quot;width: 191.5px; height: 357.854px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;在升级配置页面，点击&lt;/span&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-SNZC8vMu5bb04e623176b.png&quot; style=&quot;width: 129.421px; height: 38.4219px;&quot; class=&quot;img-responsive&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:Calibri;mso-fareast-font-family:宋体;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;在新建页面，选择&lt;/span&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-064jcUeH5bb04e870a722.png&quot; style=&quot;width: 118px; height: 36px;&quot; class=&quot;img-responsive&quot;&gt;&lt;span style=&quot;text-indent: 0pt; font-size: 10.5pt; font-family: 宋体;&quot;&gt;在弹出页面选择需要升级的固件&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-WX4KIVAy5bb04eb4e8d0e.png&quot; style=&quot;width: 554px; height: 370px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-tkE4iaFs5bb051149cb93.png&quot; style=&quot;width: 534.5px; height: 569.613px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;确定保存之后，如下图所示：&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-RnwL3SwI5bb04f3e6bc36.png&quot; style=&quot;width: 1071.73px; height: 104px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;此时固件升级文件已经配置好了，但是还不允许任何设备升级，接下来要配置允许升级的设备，有两种操作方式： &amp;nbsp;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;配置单个设备，点击上图中配置项右边的添加按钮，在弹出窗口输入允许升级的设备&lt;font face=&quot;Calibri&quot;&gt;IMEI&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;，如下图所示。&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;注：&lt;font face=&quot;Calibri&quot;&gt;IMEI&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;由模块包装获取，或由&lt;/font&gt;&lt;font face=&quot;Calibri&quot;&gt;trace&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;中获取。&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-7XU2QeQH5bb04f26e8ffc.png&quot; style=&quot;width: 508.561px; height: 99.1875px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;添加后，点击配置项左边的，下拉列表中会显示刚才输入的&lt;font face=&quot;Calibri&quot;&gt;IMEI&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;，如下图所示&lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-9pNRrz7n5bb04f652871c.png&quot; style=&quot;width: 1051.5px; height: 191.347px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;配置所有设备，在新建配置项时，有一个“是否全项目升级”，选择是即可；或者在已有的配置项，点击右边的编辑按钮，“是否全项目升级”修改为是&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&amp;nbsp;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;1.4 获取项目的ProductKey（云平台） &lt;/span&gt;&lt;/b&gt;&lt;b&gt;&lt;span style=&quot;font-family: 宋体; line-height: 150%; font-size: 14pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/b&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;1. &lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;打开&lt;font face=&quot;Calibri&quot;&gt;https://iot.openluat.com&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;，登陆账号 &lt;/font&gt;&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;2. &lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;参考下图，点击进入项目&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-GPCTKOTe5bb04f83cc4da.png&quot; style=&quot;width: 341.5px; height: 319.532px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;mso-list:l0 level1 lfo1;&quot;&gt;&lt;!--[if !supportLists]--&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;1.&amp;nbsp;&lt;/span&gt;&lt;!--[endif]--&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;点击下图项目信息&lt;/span&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;&lt;o:p&gt;&lt;/o:p&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-94FfT9A65bb04fbf3a8cf.png&quot; style=&quot;width: 194.115px; height: 265.938px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot; align=&quot;justify&quot; style=&quot;margin-right:0.0000pt;margin-left:0.0000pt;mso-para-margin-right:0.0000gd;mso-para-margin-left:0.0000gd;text-indent:0.0000pt;mso-char-indent-count:0.0000;mso-layout-grid-align:none;layout-grid-mode:char;text-autospace:ideograph-numeric;mso-pagination:none;text-align:justify;text-justify:inter-ideograph;line-height:150%;mso-list:l0 level1 lfo1;&quot;&gt;&lt;!--[if !supportLists]--&gt;&lt;span style=&quot;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;2.&amp;nbsp;&lt;/span&gt;&lt;!--[endif]--&gt;&lt;span style=&quot;mso-spacerun:&#39;yes&#39;;font-family:宋体;mso-ascii-font-family:Calibri;mso-hansi-font-family:Calibri;mso-bidi-font-family:&#39;Times New Roman&#39;;font-size:10.5000pt;mso-font-kerning:1.0000pt;&quot;&gt;获取项目的&lt;font face=&quot;Calibri&quot;&gt;ProductKey&lt;/font&gt;&lt;font face=&quot;宋体&quot;&gt;，即下图中的&lt;/font&gt;&lt;font face=&quot;Calibri&quot;&gt;ProductKey&lt;/font&gt;&lt;/span&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-R2gBPfji5bb04fda198b4.png&quot; style=&quot;width: 554px; height: 288px;&quot; class=&quot;img-responsive&quot;&gt;&lt;/p&gt;&lt;p class=&quot;MsoNormal&quot;&gt;&lt;span style=&quot;font-family: Calibri; text-align: justify;&quot;&gt;ProductKey为远程升级固件的AT指令的重要参数。&lt;/span&gt;&lt;/p&gt;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/30/461/" data-id="ckkfmdgee00cwvkcgcrxqdvs5" data-title="Air720系列固件远程升级后台配置说明" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-460" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/30/460/" class="article-date">
  <time class="dt-published" datetime="2018-09-30T02:45:20.000Z" itemprop="datePublished">2018-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/30/460/">合宙Air202模块连接阿里云物联网平台收发数据</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">用到的GPRS模块：合宙Air202用到的物联网平台：阿里云</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">GPRS模块对接阿里云物联网平台，对于新手来说还是很有难度的。在这里，我将使用合宙air202模块，连接阿里云物联网平台，最终使用自己的阿里云服务器来进行数据的双向通信。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#000000" style="word-wrap: break-word;"><br style="word-wrap: break-word;"></font></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#000000" style="word-wrap: break-word;">一、阿里云物联网平台创建新设备</font></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">1、登录阿里云系统，进入阿里云物联网控制台</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">2、创建产品，选择高级版，输入产品名称，节点类型选择“设备”，设备类型选择“无”，数据格式选择“</span><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">Alink JSON</font></font><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">”，是否接入网关选择“否”，确认</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">3、进入刚刚创建的产品，添加设备，输入设备名称DeviceName，建议以无线网络模块的IMEI序列号来命名设备以避免重复，保存后，物联网系统会自动生成该设备证书，包括三个数据，如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1897" aid="1897" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/190713ebrednt8n8ehxo1f.jpg" zoomfile="data/attachment/forum/201809/27/190713ebrednt8n8ehxo1f.jpg" file="data/attachment/forum/201809/27/190713ebrednt8n8ehxo1f.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="word-wrap: break-word; font-weight: 700; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#000000" style="word-wrap: break-word;">二、无线网络模块连接阿里云物联网平台</font></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">阿里云物联网平台与设备端支持MQTT通信协议，因此在这里建议无线网络模块采用MQTT协议连接阿里云物联网平台。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">MQTT通信协议的底层是TCP通信，因此只要无线模块支持TCP通信，原则上就可以TCP基础上移植MQTT，然而MQTT的协议自己移植的话过于复杂，因此各大无线模组供应商与阿里云合作，纷纷推出了内嵌了阿里云物联网通信协议的通信模组，例如这里使用的是AIR202模组。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">air202模组是2G模组，具有较高的性价比。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">1、拿到AIR202模组，先确认其固件是否是支持连接阿里云物联网平台的版本，方法是发送AT+CGRM,模块会返回当前固件版本，例如：AirM2M_V5509_AT_S_SSL。只有版本尾号为SSL的固件版本才支持接入阿里云物联网平台。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">2、接下来，使用串口助手向air202依次发送一下AT指令</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（1）AT //必须发送大写的AT,用来与模组进行波特率的同步。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（2）AT+CGMR//查看模块固件版本，检查尾号是否为SSL，若尾号不是SSL，则需要先使用合宙的LuaTool工具先更新固件，如下图所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1898" aid="1898" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/192741to0ab4grb7abbbbb.jpg" zoomfile="data/attachment/forum/201809/27/192741to0ab4grb7abbbbb.jpg" file="data/attachment/forum/201809/27/192741to0ab4grb7abbbbb.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（3）AT+CGATT?&nbsp;&nbsp;//查看GPRS业务附着情况，附着成功返回1，若返回0则肯定不能联网</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（4）AT+SAPBR=3,1,"CONTYPE","GPRS"&nbsp;&nbsp;//设置网络参数</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;AT+SAPBR=3,1,"APN","CMIOT"&nbsp;</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;AT+SAPBR=1,1</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（5）AT+CGATT? //检查网络附着情况</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（6）AT+HTTPINIT //使用http业务之前，先初始化http协议栈</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（7）AT+HTTPPARA="URL","https://iot-auth.cn-shanghai.aliyuncs.com/auth/devicename"&nbsp;&nbsp;//设置http参数</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;AT+HTTPPARA="USER_DEFINED","Content-Type: application/x-www-form-urlencoded"</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;AT+HTTPDATA=112,20000&nbsp;&nbsp;//注意这里的数字112是下面一条数据的总字节个数</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（8）productKey=a1jRE6oEtOv&amp;sign=773c0feaab4109a153cf07f3dcef3356&amp;clientId=869300031656865&amp;deviceName=869300031656865</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;productKey是阿里云物联网平台系统自动为你创建的产品产生的一个参数。如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1899" aid="1899" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/194029qqhorraqxxxqkxdx.jpg" zoomfile="data/attachment/forum/201809/27/194029qqhorraqxxxqkxdx.jpg" file="data/attachment/forum/201809/27/194029qqhorraqxxxqkxdx.jpg" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;clientId与deviceName在这里设置为相同的数据，来自物联网平台用户添加设备时输入的设备名称，例如这里都是869300031656865，如下图所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1900" aid="1900" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/194237aizuh5y566h38s8v.jpg" zoomfile="data/attachment/forum/201809/27/194237aizuh5y566h38s8v.jpg" file="data/attachment/forum/201809/27/194237aizuh5y566h38s8v.jpg" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp; sign参数的来头就稍微复杂了一点，它是使用hMacMd5算法计算出来的一个哈希值。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">前期测试，可以使用现成的工具来进行计算，例如使用一个在线计算器，链接：</span><a href="http://tool.oschina.net/encrypt?type=2" target="_blank" style="word-wrap: break-word; color: rgb(51, 102, 153); text-decoration-line: underline; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun; background-color: rgb(255, 255, 255);">http://tool.oschina.net/encrypt?type=2</a><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">界面如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1901" aid="1901" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/194914trydhcr63dl3akc3.png" zoomfile="data/attachment/forum/201809/27/194914trydhcr63dl3akc3.png" file="data/attachment/forum/201809/27/194914trydhcr63dl3akc3.png" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">在上面的小工具输入明文为：clientId862991419835241deviceName862991419835241productKeyb1KCi45LcCP</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">注意，输入的明文里的clientId与deviceName应该与被注册的设备信息保持一致，productKey应与被注册的产品信息一致。检查一下，不要有多余的空格符。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">这里要注意下，上面小工具需要输入一个密钥，该密钥为被注册的这个设备的</span><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">DeviceSecret，如下图所示：</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1902" aid="1902" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/195412tcpwckeecuqcuhdc.jpg" zoomfile="data/attachment/forum/201809/27/195412tcpwckeecuqcuhdc.jpg" file="data/attachment/forum/201809/27/195412tcpwckeecuqcuhdc.jpg" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">最终计算出一个哈希值，该值就是上面步骤（8）中的sign。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（9）AT+HTTPACTION=1 //http方式激活，该AT指令发送后稍微等几秒，模块回复+HTTPACTION: 1,200,128</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（10）AT+HTTPREAD //查询http数据响应，一切正常的话，此时模块应该返回与阿里云物联网平台进行鉴权后的数据结果，其中包括iotId、iotToken和success成功提示</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（11）AT+HTTPTERM //结束http服务</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（12）AT+MCONFIG="869300031656865","这里输入上面步骤10返回的iotId","这里输入上面步骤10返回的iotToken"&nbsp;&nbsp;//设置MQTT相关参数</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;这里注意，每次执行步骤10后获取到的iotToken值都不一样，都需要重新更新步骤12中的iotToken。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（13）AT+SSLMIPSTART="这里应该是你产品的的ProducKey.iot-as-mqtt.cn-shanghai.aliyuncs.com",1883&nbsp; &nbsp;</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp; //例如AT+SSLMIPSTART="a1jRE6oEtOv.iot-as-mqtt.cn-shanghai.aliyuncs.com",1883，这条指令发送完后要等几秒，模块回复“CONNECT OK”</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（14）AT+MCONNECT=1,300 //客户端向服务器请求会话连接，返回CONNACK OK说明连接成功</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">（15）AT+MSUB="/a1jRE6oEtOv/869300031656865/user/get",0&nbsp;&nbsp;//这条指令用于订阅一个topic，请参考自己平台下某个设备的可用topic进行修改，若&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;订阅成功系统返回“SUBACK”。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">截止到此，采用air202的设备端就已经成功与阿里云物联网平台进行了mqtt长连接。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">此时从阿里云物联网平台查看设备，会发现该设备处于“在线”状态，如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1903" aid="1903" src="http://bbs.qdclab.com/data/attachment/forum/201809/27/202115csngdtjx403t94ns.jpg" zoomfile="data/attachment/forum/201809/27/202115csngdtjx403t94ns.jpg" file="data/attachment/forum/201809/27/202115csngdtjx403t94ns.jpg" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">三、设备端发送数据至服务器设备端与阿里云物联网平台成功连接后，设备端就可以向平台的某个具备发布权限的Topic发送数据了，例如在这里，设备将向</span><font color="#383d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">/a1jRE6oEtOv/868575026616807/user/update发布数据。</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">想要发布的数据为JSON格式如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">{</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp;&nbsp;"cmd":"get one code"</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">}</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">然而，在使用AT指令将JSON格式的数据发送到模组时，需要对上面的JSON格式数据字符串进行相应的改变，方法是将双引号“修改为\22，</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">因此需要发送的AT指令为：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">AT+MPUB="/a1jRE6oEtOv/868575026616807/user/update",1,0,"{\22cmd\22:\22get one code\22}"</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">数据发送成功后，模组会返回：“PUBACK”,这说明阿里云物联网平台已经收到数据，此时我们登录阿里云物联网平台，进入该设备所对应的产品类目下，查看“日志服务”--&gt;"上行消息分析"，可以看到通信成功的界面，如下所示：</span><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1907" aid="1907" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/090724zttgn5305r22trz2.jpg" zoomfile="data/attachment/forum/201809/28/090724zttgn5305r22trz2.jpg" file="data/attachment/forum/201809/28/090724zttgn5305r22trz2.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">然而，虽然物联网平台能够接收到来自设备端上传的数据，但是我们的服务器根本是不知道设备发来的是什么数据，想要让设备端上传的数据能够发送到自己的服务器，则中间必须要用到阿里云物联网的中间件，其实就是一个阿里云的数据转发中间件，</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">该中间件可以按照用户需求对数据做过滤处理，并最终按照用户设置的参数将数据转发到目的地，这个数据转发服务阿里云是收费的。具体的流程如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">设备端发送数据----&gt;阿里云物联网平台接收到设备端数据----&gt;规则引擎对接收到的数据做过滤提取------&gt;提取出来的数据被转发到MQ消息队列----------&gt;用户服务器监听MQ消息队列中的数据---------&gt;监听到数据则执行回调函数进行业务处理</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">1、启用MQ消息队列服务，并创建一条Topic</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp;&nbsp;进入MQ消息队列控制台，点击“创建Topic”，输入Topic名称，此处的Topic需自己取名；消息类型按需选取，再此我选择普通消息。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp;&nbsp;对刚刚创建的Topic进行授权设置，设置为授予订阅权限，这样我们的服务器就可以订阅这条Topic来监听转发过来的数据。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp;&nbsp;为刚刚创建的Topic创建生产者与消费者，名称需要自己明明。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">2、创建规则引擎并编写SQL语句</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp;&nbsp;打开阿里云物联网平台控制中的规则引擎，创建规则，输入规则名称，选择JSON格式，保存。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">&nbsp; &nbsp;&nbsp;&nbsp;点击“管理”，编辑SQL语句,如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1908" aid="1908" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/092451jjcnn54glplnlp5z.jpg" zoomfile="data/attachment/forum/201809/28/092451jjcnn54glplnlp5z.jpg" file="data/attachment/forum/201809/28/092451jjcnn54glplnlp5z.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">字段输入为*,表明我将设备端上传的JSON数据为全部选择。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">Topic处为"</span><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">+/user/update</font></font><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">",表明这条规则只处理满足</span><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">+/user/update格式的数据。</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">条件处为空，表明没有条件限制。</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">保存该SQL语句.</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">3、配置规则引擎中的转发数据目的地</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif" style="word-wrap: break-word; color: rgb(68, 68, 68);"><font color="#373d41" style="word-wrap: break-word;">打开上面步骤中设置的那条SQL语句对应的管理界面，界面下方点击“添加操作”，</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif" style="word-wrap: break-word; color: rgb(68, 68, 68);"><font color="#373d41" style="word-wrap: break-word;">选择操作为“发送数据到消息队列”，其他配置如下图所示：</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1909" aid="1909" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/094147jjlba0m7wj7f00ij.jpg" zoomfile="data/attachment/forum/201809/28/094147jjlba0m7wj7f00ij.jpg" file="data/attachment/forum/201809/28/094147jjlba0m7wj7f00ij.jpg" class="zoom" width="600" inpost="1" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">保存之后，启用该条转发规则，系统提示成功。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">3、服务器端运行Demo进行数据监听测试</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">服务端采用JAVA，源码如下：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></p><div class="blockcode" style="word-wrap: break-word; overflow: hidden; margin: 10px 0px; padding: 10px 0px 5px 10px; background: url(&quot;http://bbs.qdclab.com/static/image/common/codebg.gif&quot;) 0px 0px repeat-y rgb(247, 247, 247); color: rgb(102, 102, 102); zoom: 1; border: 1px solid rgb(204, 204, 204); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><div id="code_yI7" style="word-wrap: break-word;"><ol style="word-wrap: break-word; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 10px !important; padding: 0px !important;"><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">package com.aliyun.iot.demo;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.Action;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.ConsumeContext;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.Consumer;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.Message;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.MessageListener;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.ONSFactory;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import com.aliyun.openservices.ons.api.PropertyKeyConst;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import java.io.UnsupportedEncodingException;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">import java.util.Properties;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">public class H2 {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;public static void main(String[] args) {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Properties properties = new Properties();<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // 这里的ConsumerId参数是你在MQ消息队列控制台创建的Topic时，你创建的消费者名称<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; properties.put(PropertyKeyConst.ConsumerId, "CID_lockDevice");<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // AccessKey 阿里云身份验证，在阿里云服务器管理控制台创建<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; properties.put(PropertyKeyConst.AccessKey, "改成你自己的");<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // SecretKey 阿里云身份验证，在阿里云服务器管理控制台创建<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; properties.put(PropertyKeyConst.SecretKey,"改成你自己的");<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"><br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // 设置 TCP 接入域名（此处以公共云生产环境为例）<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // http://onsaddr-internet.aliyun.com/rocketmq/nsaddr4client-internet<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; properties.put(PropertyKeyConst.ONSAddr,"http://onsaddr-internet.aliyun.com/rocketmq/nsaddr4client-internet");<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // 集群订阅方式 (默认)<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // properties.put(PropertyKeyConst.MessageModel,<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // PropertyValueConst.CLUSTERING);<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // 广播订阅方式<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // properties.put(PropertyKeyConst.MessageModel,<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // PropertyValueConst.BROADCASTING);<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; Consumer consumer = ONSFactory.createConsumer(properties);<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // 下面函数中的参数qmlock_meg为MQ控制台创建的Topic名称；第二个参数为星号，表明监听所有数据<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; consumer.subscribe("qmlock_meg", "*", new MessageListener() {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;@Override<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;public Action consume(Message message, ConsumeContext context) {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;System.out.println("Receive: " + message);<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;String res = null;<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;byte[] resByte = message.getBody();//获取消息体<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;try {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; res = new String(resByte, "UTF-8");//将消息体byte型数据转换成字符串<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;} catch (UnsupportedEncodingException e) {<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; // TODO Auto-generated catch block<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; e.printStackTrace();<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;System.out.println("body: " + res);//打印消息体<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;return Action.CommitMessage;//返回消息消费结果<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;}<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; });<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; consumer.start();<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp;&nbsp; &nbsp; System.out.println("Consumer Started");<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">&nbsp; &nbsp;&nbsp; &nbsp;&nbsp;&nbsp;}<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;">}<br style="word-wrap: break-word;"></li><li style="word-wrap: break-word; margin: 0px 0px 0px 2em; padding: 0px 0px 0px 10px; list-style-type: decimal-leading-zero; font-family: Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, serif; font-size: 12px; line-height: 1.8em;"></li></ol></div><span style="word-wrap: break-word; margin-left: 43px; font-size: 12px; cursor: pointer; color: rgb(51, 102, 153) !important;">复制代码</span></div><p><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">服务端启动运行后，控制台显示“Consumer Started”，并处于监听状态。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">此时，登录MQ控制台，查看消费者状态，如下图所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1910" aid="1910" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/101100qp6pdht5dzs5hksp.jpg" zoomfile="data/attachment/forum/201809/28/101100qp6pdht5dzs5hksp.jpg" file="data/attachment/forum/201809/28/101100qp6pdht5dzs5hksp.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">上图中，“是否在线”、“订阅关系是否一致”都显示“是”，表明服务端成功开启监听。</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;">进入MQ消息队列控制台，打开生产者管理，发送消息里输入消息体“hello world”并发送，显示发送成功，此时查看服务端控制台，显示出已经接受到消息，如下所示：</span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1911" aid="1911" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/101505w666pu6z1ngjr664.jpg" zoomfile="data/attachment/forum/201809/28/101505w666pu6z1ngjr664.jpg" file="data/attachment/forum/201809/28/101505w666pu6z1ngjr664.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><span style="color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"></span><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">&nbsp; &nbsp;MQ控制台发送消息，服务端能够成功接收，说明服务端监听正常。</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font color="#373d41" style="word-wrap: break-word; font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, &amp;quot;" style="word-wrap: break-word;">接下来，使用air202模组，发送</font></font><font face="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif" style="word-wrap: break-word; color: rgb(68, 68, 68);"><font color="#373d41" style="word-wrap: break-word;">AT+MPUB="/a1b96wWfb8u/868575026616807/user/update",1,0,"{\22cmd\22:\22get one code\22}"</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><font face="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Helvetica, PingFang SC, Hiragino Sans GB, Microsoft YaHei, SimSun, sans-serif" style="word-wrap: break-word; color: rgb(68, 68, 68);"><font color="#373d41" style="word-wrap: break-word;">服务端收到数据如下所示：</font></font><br style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><ignore_js_op style="word-wrap: break-word; color: rgb(68, 68, 68); font-family: Tahoma, &quot;Microsoft Yahei&quot;, Simsun;"><img id="aimg_1912" aid="1912" src="http://bbs.qdclab.com/data/attachment/forum/201809/28/101706ose9xsn63x36xe93.jpg" zoomfile="data/attachment/forum/201809/28/101706ose9xsn63x36xe93.jpg" file="data/attachment/forum/201809/28/101706ose9xsn63x36xe93.jpg" class="zoom" width="600" inpost="1" initialized="true" style="word-wrap: break-word; cursor: pointer;">&nbsp;</ignore_js_op><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/30/460/" data-id="ckkfmdgfa00egvkcgdzxa1nxw" data-title="合宙Air202模块连接阿里云物联网平台收发数据" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-459" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/30/459/" class="article-date">
  <time class="dt-published" datetime="2018-09-30T02:09:53.000Z" itemprop="datePublished">2018-09-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/30/459/">Air720实现在树莓派3b+（Openwrt系统）上的网卡功能</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>本文章简单描述了openwrt移植到树莓派3b+上搭配Air720模块实现上网的功能。<br>#一、OpenWRT源码下载与编译<br>编译OpenWRT需在linux环境下，这里我用的是ubuntu16.04。<br>##1，下载前准备<br>下载源码前需要先下载安装一些依赖包（基本上都囊括了），如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install git</span><br><span class="line">sudo apt-get install gcc</span><br><span class="line">sudo apt-get install binutils</span><br><span class="line">sudo apt-get install bzip2</span><br><span class="line">sudo apt-get install flex</span><br><span class="line">sudo apt-get install python</span><br><span class="line">sudo apt-get install perl</span><br><span class="line">sudo apt-get install make</span><br><span class="line">sudo apt-get install find</span><br><span class="line">sudo apt-get install grep</span><br><span class="line">sudo apt-get install diff</span><br><span class="line">sudo apt-get install unzip</span><br><span class="line">sudo apt-get install gawk</span><br><span class="line">sudo apt-get install getopt</span><br><span class="line">sudo apt-get install subversion</span><br><span class="line">sudo apt-get install libz-dev</span><br><span class="line">sudo apt-get install libc-dev</span><br><span class="line">sudo apt-get install g++</span><br><span class="line">sudo apt-get install libncurses5-dev</span><br><span class="line">sudo apt-get install openssl</span><br><span class="line">sudo apt-get install libssl-dev</span><br></pre></td></tr></table></figure>
<p>##2，OpenWRT源码下载<br>可参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/flyingcys/article/details/54671614">https://blog.csdn.net/flyingcys/article/details/54671614</a>第二点。<br>##3，OpenWRT源码编译<br> 在编译之前，我们需要先更新种子列表，输入：<code>./scripts/feeds update -a</code>,然后更新种子在menuconfig中的显示列表，输入：<code>./scripts/feeds install -a</code>,只有install之后才能在make menuconfig里面进行相关的配置。<br> 接下来就可以<code>make V=99</code>进行编译，V=99表示输出编译信息。编译过程需要联网，OpenWRT需要在线下载很多文件。</p>
<p> #二、Air720在Linux下USB驱动的配置<br> 编译完成后，会生成一个openwrt文件夹，在配置USB驱动之前可以先配置自己设备的基本信息。<br> 在openwrt文件夹下<code>make menuconfig</code>进入配置界面。<br> 因为我使用的是树莓派3b+，故配置如下：<br> <img src="http://doc.openluat.com/api/static/editormd/uploads/5_95475.png"><br> 大家可根据自己的实际情况进行配置。</p>
<p> 接下来介绍USB驱动配置。在openwrt目录下<code>make kernel_menuconfig</code>，具体配置可参考：<a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/37">http://oldask.openluat.com/article/37</a>【一，修改驱动（1-3节部分）】。<br> 为了禁止驱动将usb M0，M1加载为ttyUSB设备，需要将usb serial驱动部分做一些修改，参考：<a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/79">http://oldask.openluat.com/article/79</a>【二，内核修改（非必需）】第2点<strong>ttyUSB驱动设备修改</strong>step 2部分。</p>
<p> #三、Air720在Linux下PPP拨号配置<br> <code>make menuconfig</code>，进入配置菜单：Network-&gt;ppp，如下图：<img src="http://doc.openluat.com/api/static/editormd/uploads/5_17763.png"><br> 点击<code>save</code>保存之后再<code>make kernel_menuconfig</code>，具体配置步骤参考：<a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/37">http://oldask.openluat.com/article/37</a>【一，修改驱动（第4节部分）】。<br> 一切配置完成后<code>make V=99</code>等待编译完成。</p>
<p> #四、烧写镜像到树莓派<br> 将编译好的openwrt镜像（openwrt/bin目录下，后缀.img.gz，需解压成.img文件）通过Win32 Disk Imager工具烧写到SD卡。<br> <img src="http://doc.openluat.com/api/static/editormd/uploads/5_55294.png"><br>选中<code>.img</code>文件，点击<code>write</code>进行烧写，待烧写完成后，将SD卡插入树莓派，开机启动。</p>
<p>通过ssh登录openwrt，可看到开机日志和开机画面如下：<img src="http://doc.openluat.com/api/static/editormd/uploads/5_54316.png"><br>这就表示开机成功。</p>
<p>#五、配置网络<br>##1，Air720作为即插即用型网卡<br><code>ifconfig</code>可以看到新添的网卡设备，如下：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_83133.png"><br>eth1即为Air720网卡设备。<br>如若没有看到新添的网卡，可<code>ifconfig -a</code>查看所有网卡设备，并<code>ifconfig eth1 up</code>启用eth1网卡。</p>
<p>接着将树莓派与电脑用网线直连，浏览器输入<code>192.168.1.1</code>，进入openwrt luci界面，NetWork-&gt;Interfaces配置网络。如果没有显示wan 口。可<code>Add New Interface</code>新建一个，我这新建了一个Air720，如图所示：<img src="http://doc.openluat.com/api/static/editormd/uploads/5_73813.png"><br>至此，Air720作为即插即用型网卡就可以上网了。</p>
<p>##2，ppp拨号实现上网<br>在/etc/ppp/peers目录下（若没有peers目录，可新建一个），添加：<a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/37">http://oldask.openluat.com/article/37</a>【三，PPP拨号】下的三个脚本：<code>Air720-ppp</code>、<code>Air720-chat-connect</code>、<code>Air720-chat-disconnect</code>。<br>添加完成后，执行<code>pppd call air720-ppp &amp;</code>即可后台进行ppp拨号，拨号成功如下图所示：<img src="http://doc.openluat.com/api/static/editormd/uploads/5_10531.png"></p>
<p>拨号成功后会虚拟出一个ppp0网卡，如下：<img src="http://doc.openluat.com/api/static/editormd/uploads/5_98248.png"><br>这时可以禁用其他网卡设备，使用ppp0网卡进行上网，luci配置参考前面eth1配置方法。</p>
<p>##至此，Air720模块无论作为即插即用型网卡，还是用作ppp拨号上网都能成功。</p>
<p>最后附上一张正使用Air720模块上网的图：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_99498.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/30/459/" data-id="ckkfmdgbe005lvkcgeguign1f" data-title="Air720实现在树莓派3b+（Openwrt系统）上的网卡功能" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-458" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/29/458/" class="article-date">
  <time class="dt-published" datetime="2018-09-29T09:23:04.000Z" itemprop="datePublished">2018-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/29/458/">Windows使用RNDIS（usb无线网卡）模式上网</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>首先，下载 <a target="_blank" rel="noopener" href="http://www.openluat.com/Product/4g">驱动程序和LuaTools</a>。然后解压，运行DrvInstaller_x64.exe（32位系统请运行DrvInstaller.exe），点击“Update Driver”安装驱动程序：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_33907.png"></p>
</blockquote>
<p>（请注意，安装驱动程序，需要<a target="_blank" rel="noopener" href="https://jingyan.baidu.com/article/624e74594dbc8d34e8ba5aa6.html">禁止Windows的驱动签名认证</a>）；安装驱动过程中，可能会有多次如下的弹窗提示：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_49238.png"></p>
</blockquote>
<p>请点击“始终安装”。</p>
<p>驱动安装成功后，使用USB线连接Air720和电脑（仅Air720的USB接口，支持RNDIS模式，），长按开机按钮（或者PWRKEY接地）打开Windows的设备管理器将出现如下设备：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_94663.png"></p>
</blockquote>
<p>表明驱动安装成功。</p>
<p>然后，打开LuaTools，切换到4G模式。然后关机后重新开机，观察状态栏输出，当前模块是否为AT底层。如果不是，点击AT菜单，将之刷为AT底层。</p>
<p>此时，通过设备管理器，可以看到“网络适配器”将出现“Remote NDIS”设备，并已经自动安装驱动（win7、win8、win10均可自动安装驱动）。</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_25400.png"></p>
</blockquote>
<p>然后，打开网络和共享中心（win7、win8可从控制面板打开；win10点击“所有设置”—“网络和Internet”—“网络和共享中心”），点击“更改适配器设置”：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_39169.png"></p>
</blockquote>
<p>在这里可以看到所有网络连接：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_84714.png"></p>
</blockquote>
<p>如图所示，Remote NDIS设备。启用Remote NDIS，需要禁用掉其他的网络连接。在需要禁用的设备上右键，点击禁用：</p>
<blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_12126.png"></p>
</blockquote>
<p>最后，仅留Remote NIDS一个可用的连接即可。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/29/458/" data-id="ckkfmdgbd005kvkcgdj2zcswj" data-title="Windows使用RNDIS（usb无线网卡）模式上网" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-457" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/29/457/" class="article-date">
  <time class="dt-published" datetime="2018-09-29T06:49:30.000Z" itemprop="datePublished">2018-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/29/457/">Air800 模块 M4 开发板使用说明</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;一、概述&lt;/p&gt;&lt;p&gt;1、产品描述&lt;/p&gt;&lt;p&gt;Air800 模块 M4 是一款支持 GPRS+GPS 的开发版。Air800 M4 支持lua、C、AT，开发者可根据需求灵活选择。&lt;/p&gt;&lt;p&gt;Air800 M4 稳定、专业、高效。仅银行卡大小的身材，集成了 Air800 模块运行所需要的必要外设，如 SIM 卡座、GPS天线、GSM天线、供电等。开发者仅需使用 microUSB 数据线正确连接到开发板，即可使系统运行。&lt;/p&gt;&lt;p&gt;同时，Air800 M4 还提供了丰富的接口，开发者可用于调试各种外接设备。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;2、开发板配置&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;PCB封装尺寸：65.5*53.5mm；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;板载 GSM PCB 天线，实现“插卡即用”；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;可改 GSM SMA 天线座，满足对天线性能要求高的应用需求；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;多种供电方式：电池、串口、microUSB；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置 DCDC 降压，使开发板运行更稳定；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;电池连接插口，可使用锂电池或者直流电源供电；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置充电芯片，可为电池充电；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;支持 UART、SPI、I2C 等；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;UART1 内置串口电平转换电路，支持 3.3V ，5V 外设串口电平&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;标准 2.54mm &amp;nbsp;19PIN*2 排针；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置串口转换芯片，可直接使用 microUSB 数据线连接开发板，调试更方便；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;拨杆供电开关；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置1个开机按键，1个复位按键；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置3个 LED 指示灯：开机状态指示、充电状态指示、通用指示（默认为网络状态指示）；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置驻极体 mic；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;1路Speaker音频输出&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置 25*25mm GPS 陶瓷天线（可改外置有源 GPS 天线）；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;内置看门狗芯片，实现硬件复位；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;简易式 SIM 卡座；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;上电自动开机焊点（开发者可根据需要自行焊接）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;二、外设布局&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Hfv8waf45bc2149985b35.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-omqh1Ig25bc214d2b659c.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;三、排针管脚定义&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ldt4MIrK5bc2150faee4e.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;四、功能介绍&lt;/p&gt;&lt;p&gt;1、供电方式&lt;/p&gt;&lt;p&gt;Air800 M4 开发板支持多种供电方式：&lt;/p&gt;&lt;p&gt;1．5V 排针供电；&lt;/p&gt;&lt;p&gt;2．USB 接口 5V 供电；&lt;/p&gt;&lt;p&gt;3．电池端排针供电（3.4~4.2V）。&lt;/p&gt;&lt;p&gt;使用 USB 供电&lt;/p&gt;&lt;p&gt;Air800 M4 有 1 个 USB 连接器，开发者可以使用 microUSB 数据线连接 PC，或使用 5V 充电器为 Air800 M4 供电。&lt;/p&gt;&lt;p&gt;打开电源后，将 Air800 M4 的拨杆开关拨到上方，长按开机键（正面左侧微动开关，按住超过2秒后松开），Air800 M4 的红色 LED 亮起时表示供电成功。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Qhw6xDyj5bc2153f1f3e1.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;使用 5v 串口线供电&lt;/p&gt;&lt;p&gt;将串口线的 VCC 和 GND 分别与开发板的 5V 和 GND 排针相连。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Q93UHXY75bc21554a7142.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-t79T5gdb5bc21567319d5.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;打开电源后，将 Air800 M4 的拨杆开关拨到上方，长按开机键（正面左侧微动开关，按住超过2秒后松开），Air800 M4 左下角的红灯亮起时表示供电成功。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Huezs5ia5bc2157c444fd.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;1、5V 串口线供电和 USB 供电，不要同时接线；&lt;/p&gt;&lt;p&gt;2、当 VBAT 端悬空时，充电灯会闪烁，这是正常现象。接入电池后，LED不再频闪。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;锂电池 或 外接直流电源 供电&lt;/p&gt;&lt;p&gt;Air800 M4 提供了锂电池供电接口。开发者可通过接口，使用电池或者直流电源为开发板供电（亦可为锂电池充电）。&lt;/p&gt;&lt;p&gt;VBAT 供电电压范围为 3.4~4.2v，建议使用18650并联，或者相应规格的锂聚合物电池。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;1、电池输出电流峰值能应达到 2A，以满足 GSM 射频需求；&lt;/p&gt;&lt;p&gt;2、电池应配有对应的保护板，以保证电池不会出现过热等情况；&lt;/p&gt;&lt;p&gt;3、接线时应注意正负极，避免接反的情况。&lt;/p&gt;&lt;p&gt;4、切勿使用不合格的电池。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;将电池（直流电源）按照图中标注针脚，正确连接到开发板。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-vLPaZ2s15bc21596dae55.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-pgoRKy6D5bc215accd2e8.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;电池连接完成后，将 Air800 M4 的拨杆开关拨到上方，长按开机键（正面左侧微动开关，按住超过2秒后松开），Air800 M4 左下角的红灯亮起时表示供电成功。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;普通 PC 的 USB 口供电电流峰值最大只有 500mA，远低于 GSM 系统的 2A 供电能力要求。&lt;/p&gt;&lt;p&gt;日常的调试和使用中可能不会暴露问题，但是开发板在进行长时间连续射频发射时，供电端会产生电压跌落，电压不稳定，可能导致开发板数据异常甚至关机。所以如果在测试长时间连续 GPRS 发射时，强烈推荐用锂电池供电，或使用供电能力大于 2A 的直流电源供电。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;2、 开机关机&lt;/p&gt;&lt;p&gt;开机&lt;/p&gt;&lt;p&gt;正确连接供电后，长按 Air800 M4 的开机键大于 2S 后松开，此时红色开机指示灯常亮，随后绿色网络指示灯闪烁，表示开机成功。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-yEgTUhE15bc215ea5fed3.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;如果按开机键的时间不足，或者 VBAT 电压小于开机电压 3.5V，无法正常开机。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;开发者也可以拉低 PWRKEY 超过 2s 实现开机。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-lM2tXjTV5bc216096b03b.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;开机自动上电&lt;/p&gt;&lt;p&gt;Air800 M4 开发板支持上电自动开机。开发者可将开发板上的 JP4 断点用锡短接。开发板上电后会自动开机。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-dzQWPLdu5bc2165089faa.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;配置成自动开机后，无法通过软件调用关机接口的方式实现关机，只能通过切断开发板供电实现关机&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;关机&lt;/p&gt;&lt;p&gt;在开机状态下将 PWRKEY 针脚拉低或者长按开机键 2S 以上，开发板会进入软件关机流程。当网络指示灯不再闪烁时关机流程完成。&lt;/p&gt;&lt;p&gt;另一种方式是通过将 RESET 针脚拉低实现硬件关机，这种关机方式为硬件关机，通常用于在开发板死机或异常状态时恢复用。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-UbCynI2R5bc21671f0eec.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;RESET 针脚是硬件关机功能，不能实现重启功能，但是在自动开机配置下，拉低 RESET 针脚会将开发板关机，随后硬件自动上电开机，从而间接实现重启功能。&lt;/p&gt;&lt;p&gt;RESET 按键按下后，要等 2S 左右系统会完全关闭，开机指示灯熄灭。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;3、串口连接 及 下载调试&lt;/p&gt;&lt;p&gt;串口连接&lt;/p&gt;&lt;p&gt;Air800 M4 内置了 CP2102 串口转 USB 芯片，它可以将模块的串口转成 USB 接口，通过 USB 连接器引出。&lt;/p&gt;&lt;p&gt;开发者仅需用普通 microUSB 数据线连接开发板即可实现供电、下载、调试等操作。&lt;/p&gt;&lt;p&gt;连接方式如下：&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-oEF1jqEx5bc2169298130.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;开机上电状态，才能进行下载、调试操作；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;部分操作系统没有 CP2102 驱动程序（下载地址），开发者需要安装驱动程序后，才能正常识别开发板串口，使用下载工具进行调试；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;2个跳线帽必须都在 HOST 位置，才可以正常下载、调试；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;如果是开机自动上电，无法触发下载握手流程，请短按 RESET 键，或者拉低 RESET 。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Air800 M4 有两路通用串口和一路 HOST 串口。开发板只能通过 HOST UART进行底层软件下载或者 lua 脚本下载。通用串口（UART1/UART2）均不支持下载、调试。&lt;/p&gt;&lt;p&gt;Air800 M4 开发板正面有串口选择排针。开发者可以通过跳线帽来选择相应的串口，使之连接到串转换芯片上，实现 HOST UART、UART1 切换。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-8egL0fXr5bc216aceef20.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如下图所示，跳线帽短接上面两个针脚，即HOST UART。此时 HOST 串口连接串口芯片， USB 连接的是 HOST 口。USB 可用于下载、调试，不可用于 UART1 操作。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ntuljAof5bc216d16a895.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-8qkIOBcz5bc216ea1cc42.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如下图所示，跳线帽短接下面两个针脚，即UART1。此时 UART1 连接串口芯片， USB 连接的是 UART1 。USB 可用于UART1相关操作，如发送 AT 指令，收发 UART1 数据等。不可用于模块的下载、调试操作。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-lvWqVeXV5bc21701b6c89.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-gJFVAzzA5bc2171474cb6.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Air800 M4 的 UART1 内置了电平转换电路，可以兼容 5V，3.3V 电平的 MCU 串口电平，开发者无需考虑串口电平匹配问题。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;1、当跳线帽设置为UART1时，开发板上的 UART1_TX 和 UART1_RX 将不可用；如果需要使用 UART1 排针，请将跳线帽改为HOST UART，或者拔掉跳线帽；&lt;/p&gt;&lt;p&gt;2、跳线帽必须两个都正确设置，才能使用。单独接一个跳线帽，或者跳线帽在两个不同位置，均无法正常工作；&lt;/p&gt;&lt;p&gt;3、HOST UART 固定波特率为 921600，输出数据有加密，必须使用专用工具查看Trace（下载地址）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;下载 / 调试&lt;/p&gt;&lt;p&gt;Air800 M4 开发板拥有串口转换芯片，开发者可以直接使用 microUSB 数据线链接到电脑，通过“下载调试工具”进行开发板调试、下载等操作。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;必须使用优质 microUSB 数据线才可以正常调试、下载；劣质的数据线可能产生较大压降，导致开发板工作异常。&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;串口转换芯片 CP2102 驱动程序下载&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;下载调试工具下载&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;安装驱动 及 硬件配置&lt;/p&gt;&lt;p&gt;首先，开发者需要正确安装 CP2102 串口转换芯片驱动，然后，把开发板正面的跳线帽设置为HOST UART；最后使用 microUSB 数据线连接电脑和开发板。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;查看 Trace&lt;/p&gt;&lt;p&gt;打开“Luat下载调试工具”，正确选择串口，点击软件中“打开串口”按钮；最后长按 Air800 M4 开机键，使开发板上电开机，即可在软件中查看 Trace、Event 信息。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-p9B73tOz5bc2173813974.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （下载调试工具 - 打开串口）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-G8HXqpzu5bc21746d6fae.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （下载调试工具 - 查看 Trace）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;下载&lt;/p&gt;&lt;p&gt;开发者可以使用“下载调试工具”下载底层软件 LOD ，或者二次开发代码 lua。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-7Tird10x5bc2175dd4136.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（下载调试工具 - 下载 LOD）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Q9C1OeyG5bc2176eef26d.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （下载调试工具 - 下载 lua 脚本）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;下载调试工具 使用教程&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;4、天线相关说明&lt;/p&gt;&lt;p&gt;GSM 天线&lt;/p&gt;&lt;p&gt;Air800 M4 开发板采用内置的 PCB GSM 天线。助力开发者，力争做到方便使用、便捷开发，减少成本的目的。&lt;/p&gt;&lt;p&gt;同时， Air800 M4 支持连接外置天线，以满足开发者对天线性能要求较高的应用需求。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;PCB GSM 天线&lt;/p&gt;&lt;p&gt;Air 800 M4 开发板默认使用 PCB GSM 天线.。&lt;/p&gt;&lt;p&gt;该天线具有体积小、效果好的特点，适合大多数使用场景。开发者无须额外改动，可以实现开发板“到手就用”。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-t2OazYRk5bc2178673dd2.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背 - PCB GSM 天线）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;IPEX 3 代同轴射频座&lt;/p&gt;&lt;p&gt;Air800 M4 开发板支持使用IPEX 3 代射频座。&lt;/p&gt;&lt;p&gt;如果需要使用 IPEX 座子，开发者仅需将 PCB 通路上的 0 欧姆电阻拿掉，再将 GSM 天线通过连接线，接驳到该座子上即可。&lt;/p&gt;&lt;p&gt;该种连接方式，适用于信号差，或者金属壳体的情况。开发者可以使用 IPEX 转 SMA 线，将天线外接到壳体外。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-dIrj8phJ5bc2179c132c7.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （去掉图示的 0 欧电阻）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-GxkEhx8p5bc217ae51ffa.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（修改后）&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ash330HE5bc217c22a3fc.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （修改前）&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;                                    &lt;/span&gt;（修改后）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;SMA 天线座子&lt;/p&gt;&lt;p&gt;Air800 M4 开发板支持使用 SMA 天线座子。&lt;/p&gt;&lt;p&gt;如果开发者需要使用 SMA 座子，需要将串联的 0 欧电阻的位置修改到下图位置：&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-DxrXXcIS5bc217d62cdf1.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（修改 0 欧电阻位置）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-HHYhLcHD5bc217e84c59a.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（修改后）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;改好后，即可在 Air800 M4 开发板正面的 SMA 座上安装天线，进行 GSM 通信。适用于开发、调试过程中， PCB GSM 信号不够强，需要天线增强信号的情况。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;切勿同时使用多种 GSM 天线连接方式；&lt;/p&gt;&lt;p&gt;虽然 GSM 天线外观和 WiFi 的天线外观极为相似，但是二者的频率不同（WiFi频率为2.4GHz，5.8GHz，GSM频率为800MHz），故此不可混用。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;GPS 天线&lt;/p&gt;&lt;p&gt;Air800 M4 默认采用 25*25mm 无源陶瓷天线；同时， Air800 M4 支持外接 GPS 有源天线连接器。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;无源陶瓷天线&lt;/p&gt;&lt;p&gt;Air800 M4 板载无源陶瓷天线，具有能耗低，便携性强，可靠性高，二次开发简单等特点。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-IHM0XbLb5bc21807db193.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （正 - 陶瓷天线）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;有源外接天线&lt;/p&gt;&lt;p&gt;Air800 M4 支持有源外 GPS 接天线，开发者可以通过开发板上的IPEX 1代 座子外接有源 GPS 天线，减少搜星速度，增强跟踪能力。&lt;/p&gt;&lt;p&gt;使用有源 GPS 天线，开发者需改动开发板背面的 0 欧电阻位置，如图所示：&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ia8GeL2O5bc2181d9aaeb.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;（修改前）&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;                                &lt;/span&gt;（修改后）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-b9adRAZJ5bc2182d10b84.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;（修改前）&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;                                &lt;/span&gt;（修改后）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;0 欧电阻修改完成后，开发者还需要使用代码打开该 IPEX 座子供电，就可以使用外接有源 GPS 天线了。&lt;/p&gt;&lt;p&gt;适用于对 GPS 性能要求较高的场景，或者开发板封装在壳体内，需要外接天线的情况。&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;pmd.ldoset(7,pmd.LDO_VIB) &amp;nbsp; &amp;nbsp;-- 打开 3.3V 输出&lt;/p&gt;&lt;p&gt;pmd.ldoset(0,pmd.LDO_VIB) &amp;nbsp; &amp;nbsp;-- 关闭输出&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;切勿同时使用 有源、无源 GPS天线；&lt;/p&gt;&lt;p&gt;外接 GPS 有源天线为 IPEX 1代座子；&lt;/p&gt;&lt;p&gt;使用外接 GPS 有源天线时，请注意开发板至多只能提供 3.3v 供电。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;5、LED指示灯&lt;/p&gt;&lt;p&gt;Air800 M4 内置 3 个 LED 指示灯。分别是充电指示灯，开机状态指示灯，通用指示灯。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-cguGrsUL5bc218418c0aa.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;充电指示灯（橙）：&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;充电指示灯由充电 IC 控制。充电时，充电指示灯常亮，当充满后，指示灯熄灭。充电插针悬空时，充电指示灯闪烁。&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;开机状态指示灯（红）：&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;当系统进入充电开机模式或正常开机模式时，就会常亮。此灯由硬件控制，软件无法控制。&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;通用指示灯（绿）：&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;此灯由模块的 GPIO28 控制。开发者可以通过修改代码控制此灯的行为。该指示灯默认为网络指示灯。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Luat 出厂默认软件，闪灯规则如下：&lt;/p&gt;&lt;p&gt;网络模式&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;闪灯规则&lt;/p&gt;&lt;p&gt;飞行模式&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;常灭&lt;/p&gt;&lt;p&gt;未检测到 SIM 卡&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;亮 0.3 秒，灭 5.7 秒&lt;/p&gt;&lt;p&gt;检测到 SIM 卡，未注册上 GSM 网络&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;亮 0.3 秒，灭 3.7 秒&lt;/p&gt;&lt;p&gt;注册上 GSM 网络，未附着上 GPRS 网络&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;亮 0.3 秒，灭 0.7 秒&lt;/p&gt;&lt;p&gt;附着上 GPRS 网络，未连接上服务器&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;亮 0.3 秒，灭 1.7 秒&lt;/p&gt;&lt;p&gt;连接上服务器&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;亮 0.1 秒，灭 0.1 秒&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;网络指示灯闪烁，仅为 GSM 网络注册状态，GPRS 附着情况的标识，并非表示当前存在数据传输。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;6、音频接口&lt;/p&gt;&lt;p&gt;Air800 M4 支持一路 MIC 输入和一路 SPEAKER 输出，以方便开发者进行录音或语音播报方面的开发与调试。MIC 为内置驻极体 MIC;音频输出由排针引出，可接 8 欧姆喇叭。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-vHBlHZQt5bc218574ffe9.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（正）&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-O9K6xtlg5bc2186911214.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;MIC 拾音效果有限；SPEAKER为单声道输出，推荐搭配 8Ω 0.8W 喇叭。&lt;/p&gt;&lt;p&gt;音频输入、输出，如果有更高需求请根据硬件设计手册进行修改。&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;7、充电功能&lt;/p&gt;&lt;p&gt;Air800 M4 内部集成充电功能。开发板通过充电 IC 控制充电，无需软件控制，默认恒流充电电流为 350mA 左右。&lt;/p&gt;&lt;p&gt;电池接在 VBAT 和 GND。开发板使用 5V 供电时，即可为电池充电。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-HAA8P7ct5bc2187fa51c8.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; （正）&lt;/p&gt;&lt;p&gt;Air800 M4 内置充电 LED 指示灯，充电时会持续亮起，充满后熄灭。注意，当电池接口悬空而 USB 口有供电时，充电灯会闪烁。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;8、硬件看门狗&lt;/p&gt;&lt;p&gt;Air800 M4 开发板内置了一颗 luat 专用看门狗芯片。它可以在系统死机时，对系统进行自动恢复。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;详情请参考 《Luat 专用看门狗芯片设计手册》&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;开发板有 4 个和看门狗芯片相关的断点，分别是 JP1，JP2，JP3，JP5。如果需要调试看门狗，可以用锡将之连起来。4个断点接通后，看门狗芯片将正常工作。&lt;/p&gt;&lt;p&gt;连接JP1、JP2、JP3、JP5后，开发板的GPIO11 和 GPIO6 会被占用，请不要另作他用。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-6XbXOIsL5bc2197b0d9d8.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp;（背）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意，如果启用看门狗芯片，那么需要添加如下代码，否则看门狗将间隔 240 秒左右重启一次模块。如果您使用的是 AT 版，请不要启用看门狗。&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;-- 请添加到main.lua&lt;/p&gt;&lt;p&gt;require&quot;wdt&quot;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;由于芯片底层代码调整，目前 Air800 M4（A10硬件版本） 的硬件看门狗功能无法使用。请勿连接 JP1、JP2、JP3、JP5 断点。&lt;/p&gt;&lt;p&gt;后续A11硬件版本会调整此电路。&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;五、lua二次开发&lt;/p&gt;&lt;p&gt;本模块只可使用官方提供的下载工具进行程序下载、调试工作。&lt;/p&gt;&lt;p&gt;1、名词释义（lua版）&lt;/p&gt;&lt;p&gt;底层软件&lt;/p&gt;&lt;p&gt;底层软件：也称为基础软件(core)。&lt;/p&gt;&lt;p&gt;底层 lod 由合宙提供，用户不可以进行修改。它是由用C语言开发完成，内嵌了Lua虚拟机，支持上层软件的运行。&lt;/p&gt;&lt;p&gt;不同功能的lod，可为开发者提供不同的额外功能（如TTS可提供语音朗读，UI可提供显示屏支持）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;上层软件&lt;/p&gt;&lt;p&gt;上层软件由合宙提供DEMO示例代码，用户可进行修改，实现二次开发。&lt;/p&gt;&lt;p&gt;上层软件分为两个部分，分别是基础运行库（lib）和二次开发代码（lua脚本）构成。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;lua版模块出厂已经下载默认的底层软件和上层软件。用户可直接上电，使用APP“时间线”查看开发板定位，或者使用下载工具查看模块运行情况。&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;开发者可以在 wiki (http://wiki.openluat.com/) 查询API和相关例程；&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;开发者可在 github (http://github.com/openLuat/) 下载例程代码。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;2、下载工具&lt;/p&gt;&lt;p&gt;Luat下载调试工具是合宙推出的对Air系列 模块/开发板 的调试工具。&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-xeyFCfww5bc219a1a9c2b.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;该工具有如下功能：&lt;/p&gt;&lt;p&gt;1、对模块打印trace进行输出分析；&lt;/p&gt;&lt;p&gt;2、下载合宙官方lod底层；&lt;/p&gt;&lt;p&gt;3、lua、AT版本互相转化（修改底层lod）；&lt;/p&gt;&lt;p&gt;4、下载Lua脚本进行二次开发；&lt;/p&gt;&lt;p&gt;5、使用App验证开发板是否为良品；&lt;/p&gt;&lt;p&gt;6、生成量产文件进行远程升级/批量生产。&lt;/p&gt;&lt;p&gt;工具下载地址及使用教程：http://wiki.openluat.com/doc/tools/&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;开发者下载前，应先选择适合的 底层软件 和 上层软件。如果上层软件调用了 底层软件 不支持的功能，将出现错误。&lt;/p&gt;&lt;p&gt;日常开发中，仅需下载 上层软件 即可。但是如果重新下载了 底层软件，那么 上层软件 也必须更新。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;3、代码编辑&lt;/p&gt;&lt;p&gt;开发者可以从github或者wiki下载例程，并根据自己的需求进行修改。开发者可使用任何编辑器书写代码（如vim、notepad++，vscode等）。&lt;/p&gt;&lt;p&gt;lua代码修改后，无需编译文件，请直接添加到下载工具中，下载到模块内即可。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;基于安全设计，代码下载到模块后，无法再从模块中提取。开发者应注意源代码的备份。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;4、Debug&lt;/p&gt;&lt;p&gt;开发者需要根据下载工具的trace内容（或报错），修改lua代码，再下载调试，重复此步骤直到实现需求。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;开发者应该根据Trace输出的内容进行调试。&lt;/p&gt;&lt;p&gt;如需求助，请提供完整的Trace数据。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;5、API&lt;/p&gt;&lt;p&gt;合宙™提供多个API以助开发者更轻松书写代码。具体内容情况请参阅：&lt;/p&gt;&lt;p&gt;http://wiki.openluat.com/doc/modules/extra/extrapi/&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;/p&gt;&lt;p&gt;六、Q&amp;amp;A&lt;/p&gt;&lt;p&gt;Q：什么是 底层软件，上层软件，lib，lua？&lt;/p&gt;&lt;p&gt;A：举个栗子&amp;nbsp;&lt;/p&gt;&lt;p&gt;模块 是电脑，底层软件 是Windows。所有的程序都是在Windows上运行的。用户可以调用Windows提供的API，但是不能修改Windows的代码。&lt;/p&gt;&lt;p&gt;上层软件 是应用程序。上层软件中lib 是运行环境，lua 是开发者写的代码。开发者可以直接调用lib提供的API进行开发，也可以自己修改lib代码，实现其他需求。甚至可以自己根据底层软件提供的API重构代码。&lt;/p&gt;&lt;p&gt;PS：已经有大神做了重构版哦：http://github.com/openLuat/Luat&lt;/p&gt;&lt;p&gt;这样一来，应该可以明白这几者对应的关系了。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：下载上层软件后，为什么无法正常运行？&lt;/p&gt;&lt;p&gt;A：请检查代码是否有错误，或者模块剩余空间是否不足。&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;print(&quot;mem:&quot;,base.collectgarbage(&quot;count&quot;)) --实时打印已占用的空间。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么开发板无法使用 GPS 定位呢？&lt;/p&gt;&lt;p&gt;A：有以下几种情况可能导致无法 GPS 定位。&lt;/p&gt;&lt;p&gt;1、开发板所处环境 GPS 信号弱，无法接收到足够强度的 GPS 信号；&lt;/p&gt;&lt;p&gt;2、代码中没有使用 GPS 相关代码，所以不包含 GPS 数据；&lt;/p&gt;&lt;p&gt;3、模块冷启动，需要一定的时间才能 GPS 定位成功；&lt;/p&gt;&lt;p&gt;4、供电问题导致模块运行不稳定；&lt;/p&gt;&lt;p&gt;5、硬件修改 GPS 天线后，导致开发板无法收到 GPS 信号；&lt;/p&gt;&lt;p&gt;6、有其他干扰源导致。&lt;/p&gt;&lt;p&gt;开发者应尽量避免在室内、狭窄场地等场所进行 GPS 相关测试。建议选择较为开阔、没有遮挡的场所进行 GPS 相关测试。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：代码可以在什么环境上编译调试？&lt;/p&gt;&lt;p&gt;A：lua代码可以在任何操作系统编辑。但是目前仅可在windows平台使用下载工具，下载到模块中。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：不同的底层软件，有什么区别呢？&lt;/p&gt;&lt;p&gt;A：如下图所示：&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-t32EfI7Q5bc219dee14a1.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;剩余空间中“脚本+资源”指：通过烧写工具烧写的文件，例如lua脚本文件，mp3音频文件，图片文件；剩余空间中“文件系统”指：例如脚本运行过程中创建的参数文件，录音文件，远程升级文件等。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;如果用到远程升级功能，一定要为远程升级文件预留足够用的空间，至少保留升级bin文件大小+“所有脚本和资源的原始大小之和”的文件系统空间。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：模块的主频是多少？RAM和ROM又是多少呢？&lt;/p&gt;&lt;p&gt;A：模块主频312MHZ，RAM为32MB，ROM为32MB。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么主频达到312M，却还不如单片机实时性强?&lt;/p&gt;&lt;p&gt;A：这是由于GPRS模块的首要任务是与网络进行通信，所以与网络相关的中断的优先级是最高的，模块每隔4.615ms就要与网络同步一次，并且还要处理网络下发的数据，这个中断，会处理1到2毫秒，在此期间会打断其他所有的中断（包括IO中断）；所以 GPRS 模块的IO的实时性是无法与单片机比较的，哪怕是最便宜的单片机。&lt;/p&gt;&lt;p&gt;Lua脚本中的定时器，支持的最小时长是1毫秒，但是1毫秒的肯定不准确，1秒以内的都不准确。&lt;/p&gt;&lt;p&gt;如果要利用定时器精确地采集外部的输入脉冲，脉冲频率高于1Hz都不精确；如果对脉冲的采集精度没有要求，则可以根据自己的需求，实际采集一下试试能否满足需求&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：可否使用充电宝为开发板供电？&lt;/p&gt;&lt;p&gt;A：不推荐。 模块自动休眠后，电流过小。充电宝会认为充电充满了，就会关掉输出。开发者可以接到5V充电器，也可以接到电脑USB口。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么配置GPIO出错？&lt;/p&gt;&lt;p&gt;A：首先请检查代码是否有错。如果代码没错，那么请检查是否和其他代码冲突（如同时配置了gpio和UART）。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;一旦配置了UART，对应的cts、rts、txd、rxd均不可以再设置为gpio&lt;/p&gt;&lt;p&gt;Air800 M4 A10批次开发板，UART1_CTS/GPIO_3与SPI1_DI/GPIO_12在硬件上短路，导致这两个无法使用，请注意软件上不要配置这两个管脚，以免发生无法预测的问题。&lt;/p&gt;&lt;p&gt;后续A11以及以后的版本会对此问题进行修复。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：GPIO支持输出吗？&lt;/p&gt;&lt;p&gt;A：所有GPIO均支持输入、输出和中断。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：待机情况下，功耗大约多少？&lt;/p&gt;&lt;p&gt;A：详见下表：&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ojwnYlWH5bc21a04df918.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：我需要微安级别待机，可行吗？&lt;/p&gt;&lt;p&gt;A：请完全断电。需要开机时再拉低PWRKEY上电。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：模块是否支持录音？&lt;/p&gt;&lt;p&gt;A：模块支持录音。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何计算录音文件大小？&lt;/p&gt;&lt;p&gt;A：录音文件为amr格式文件，码率为12.2kbps。amr文件头有6字节。每秒有1600字节数据。&lt;/p&gt;&lt;p&gt;录音文件总大小为：6+录音秒数*1600 。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：能否使用代码获取流量卡的号码？&lt;/p&gt;&lt;p&gt;A：不可以。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何读取imsi、iccid、imei、mnc、mcc等数据？&lt;/p&gt;&lt;p&gt;A：请使用如下代码：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;require&quot;misc&quot;&lt;/p&gt;&lt;p&gt;require&quot;sim&quot;&lt;/p&gt;&lt;p&gt;print(misc.getimei())&lt;/p&gt;&lt;p&gt;print(sim.getimsi())&lt;/p&gt;&lt;p&gt;print(sim.geticcid())&lt;/p&gt;&lt;p&gt;print(sim.getmcc())&lt;/p&gt;&lt;p&gt;print(sim.getmnc())&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;开机后，立即执行此代码，不能正确打印数据；请稍候片刻，初始化成功后才能正确打印数据。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：模块支持什么运营商的卡？&lt;/p&gt;&lt;p&gt;A：目前支持移动和联通的流量卡。不支持电信卡。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我的手机卡插到模块中，不能正常使用？&lt;/p&gt;&lt;p&gt;A：需要修改APN才可以。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何修改APN？&lt;/p&gt;&lt;p&gt;A：http://wiki.openluat.com/doc/questions/script/#gprsatluatapn&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何设置飞行模式？&lt;/p&gt;&lt;p&gt;A：请使用如下代码：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;require&quot;misc&quot;&lt;/p&gt;&lt;p&gt;misc.setflymode(true) &amp;nbsp; &amp;nbsp;--进入飞行模式&lt;/p&gt;&lt;p&gt;misc.setflymode(false) &amp;nbsp; &amp;nbsp;--退出飞行模式&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何获取小区信息？&lt;/p&gt;&lt;p&gt;A：请使用如下代码：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;require&quot;net&quot;&lt;/p&gt;&lt;p&gt;print(net.getcellinfoext())&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;开机后，立即执行此代码，不能正确打印数据；请稍候片刻，初始化成功后才能正确打印数据。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：能否获得电池电量？&lt;/p&gt;&lt;p&gt;A：开发板默认支持测量电池电压。代码如下：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;require&quot;misc&quot;&lt;/p&gt;&lt;p&gt;print(misc.getvbatvolt())&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;该代码不可以获取电池电量，电池充放电状态。开发者需要使用其他电源管理模块才可以实现该功能。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：SN、IMEI、IMSI、CCID的区别？&lt;/p&gt;&lt;p&gt;A：&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;SN 即 Serial Number ，模块私有的序列号。长度可变，由设备生产商生成并写入模块。开发者可以读取、重写该序列号；&lt;/p&gt;&lt;p&gt;IMEI 即 International Mobile Equipment Identity，设备识别码，用以识别设备身份。长度固定为15位，由设备生产商根据 GSM 标准写入模块，全球唯一。它不会随着 SIM 卡改动而变化，可以用作设备鉴权等；&lt;/p&gt;&lt;p&gt;ICCID 即 Integrate circuit card identity，集成电路识别码，用以识别 SIM 卡。长度固定为20位，由 SIM 卡生产商写入卡中，全球唯一。可以用作 SIM 卡识别、鉴权、识别运营商等；&lt;/p&gt;&lt;p&gt;IMSI 即 International Mobile Subscriber Identification Number，国际移动用户识别码，长度固定，用以识别该 SIM 卡在网络中的身份。可用作 SIM 卡识别、鉴权、识别运营商等。&lt;/p&gt;&lt;p&gt;SN、IMEI 和设备绑定，IMSI 、ICCID 和 SIM 卡绑定；其中 ICCID 为 SIM 卡离线身份验证，不参与数据交换；IMSI 需要传输到 GSM 网络进行 SIM 卡身份识别、验证。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;模块内部默认没有sn号，用户调用misc.setsn()写入之后才有。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：Luat Air模块的“浅休眠”和“深休眠”有什么区别？&lt;/p&gt;&lt;p&gt;A：深休眠：&lt;/p&gt;&lt;p&gt;代码中调用misc.setflymode(true)进入深休眠， 调用misc.setflymode(false)退出深休眠。 深休眠状态下，会关闭语音和数据业务的协议栈，所以不能收发短信， 不能通话，不能上网进行数据传输，可以正常操作GPIO， 可以正常操作定时器。深休眠状态下的单模块功耗为1mAh， 如果还有GPS，UART等外设在运行，功耗另算。&lt;/p&gt;&lt;p&gt;浅休眠：&lt;/p&gt;&lt;p&gt;一般情况下，用户是不需要写代码去控制进入或者退出浅休眠状态， 系统自动控制进入和退出浅休眠 浅休眠状态下，不会关闭语音和数据业务的协议栈， 所以可以收发短信，可以通话，可以上网进行数据传输，可以正常操作GPIO，可以正常操作定时器 进入浅休眠状态后，收发短信时，会自动退出浅休眠，收发短信结束后，会立即自动进入浅休眠。 进入浅休眠状态后，通话时，会自动退出浅休眠，通话结束后，会立即自动进入浅休眠。 进入浅休眠状态后，数据传输时，会自动退出浅休眠，数据传输结束后，会立即自动进入浅休眠。 浅休眠状态下的单模块功耗为3.3mAh，如果还有GPS，UART等外设在运行，功耗另算。&lt;/p&gt;&lt;p&gt;进入浅休眠状态后，UART无法正常工作，必须先退出浅休眠，UART才能正常收发数据&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：Trace中，OPENAT_NetworkStatusChangeInd后面跟的状态字是什么意思？&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;[network] OPENAT_NetworkStatusChangeInd state 0：&lt;/p&gt;&lt;p&gt;网络断开，表示GPRS网络不可用，无法进行数据连接，有可能可以打电话&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;[network] OPENAT_NetworkStatusChangeInd state 1：&lt;/p&gt;&lt;p&gt;网络已连接表示GPRS网络可用，可以进行链路激活&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;[network] OPENAT_NetworkStatusChangeInd state 2：&lt;/p&gt;&lt;p&gt;链路正在激活&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;[network] OPENAT_NetworkStatusChangeInd state 3：&lt;/p&gt;&lt;p&gt;链路已经激活PDP已经激活，可以通过socket接口建立数据连接&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：Air800 M4 卫星接收通道有多少个？支持多少个卫星？&lt;/p&gt;&lt;p&gt;A：通道有复用，32个跟踪通道，96个捕获通道，支持卫星总数196个。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何分辨我手中的开发板是 AT 还是 Luat？&lt;/p&gt;&lt;p&gt;A：请使用下载调试工具查看：&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-8zdozqnc5bc21a4593342.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么发送 AT 指令没有任何响应？&lt;/p&gt;&lt;p&gt;A：首先，请检查 TX、RX 是否接线错误，是否打开了错误的串口，供电是否正常，是否为 AT 底层，是否开机。&lt;/p&gt;&lt;p&gt;如果您使用 microUSB 连接到开发板，需要确认是否安装了 CP2102 驱动程序，开发板的跳线是否设置为 UART1。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-Wm9PLlCw5bc21a6336fab.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;（正）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;如果您使用排针上的 UART1_TX，UART1_RX 进行测试，那么请把跳线设置为 HOST_UART 。&lt;/p&gt;&lt;p&gt;最后，请确定您的串口调试助手可以发送”\r”。如果不行，请尝试更换其他串口调试助手。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何把lua转换为AT版？&lt;/p&gt;&lt;p&gt;A：开发板正确连接到电脑后，使用下载工具转换即可。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-ohAqMAYE5bc21a73bcf33.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;lua版可以通过这个方式转换为AT版；同理，下载lua的底层软件（lod）即可变为lua版。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么使用USB2TTL线连接开发板 UART1 失败？&lt;/p&gt;&lt;p&gt;A：首先，请确定您的串口线驱动是否安装正确；然后，请您查看是否插错了vcc、gnd、tx、rx，是否已经上电开机；最后，请您根据自己的开发板类型（AT/lua）进行调试。&lt;/p&gt;&lt;p&gt;如果是 lua ，请使用代码中设定的波特率。否则会出现乱码等情况。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;部分串口转换芯片可能稳定性不够好，导致识别失败；推荐使用ft232、ch340等芯片。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何查看 GPS 输出的原始数据？&lt;/p&gt;&lt;p&gt;A：使用 USB2TTL 的 RX 线接开发板的 GPS_TX 排针，然后开发板上电开机，就可以收到数据了。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-tUknw4fp5bc21a829d210.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：能否使用5V长时间供电？&lt;/p&gt;&lt;p&gt;A：可以。不过，当使用5V供电方式的时候，由于PC的USB口供电峰值最大只有500mA（标准usb2.0），低于GSM系统要求2A供电能力的需求。所以，在一般的软件调试和一般的使用时没有问题，但是在模块进行长时间连续射频发射时，模块供电端会有电压跌落，造成电源电压不稳定的现象。&lt;/p&gt;&lt;p&gt;如果在测试长时间连续GPRS发射时，有可能会出现随机掉电关机的现象。因此，在测试长时间连续GPRS发射应用时，强烈推荐用锂电池供电或用供电能力大于 2A的直流电源供电。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：PCB天线的设计有什么标准吗？&lt;/p&gt;&lt;p&gt;A：http://wiki.openluat.com/doc/hardwareDesign/#air800&lt;/p&gt;&lt;p&gt;http://www.sohu.com/a/118709782_505877&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：Air800 M4支持什么运营商的卡？是否支持境外的运营商？&lt;/p&gt;&lt;p&gt;A：目前开发板支持 中国移动、中国联通 的 4G/3G/2G 流量卡。&lt;/p&gt;&lt;p&gt;理论上我们的开发板是支持所有运营商的卡，但是由于各国网络存在细微差异，所以很难做到无差别覆盖。所以如果您遇到境外的卡无法使用，请提供相关Trace，我们将提供额外技术支持。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我的卡放到手机上可以用，但是放到开发板却无法联网？&lt;/p&gt;&lt;p&gt;A：请您修改APN后再尝试。&lt;/p&gt;&lt;p&gt;如果仍然无法解决该问题，请您使用手机尝试强制使用2G网络，查看是否有信号，能否使用网络。&lt;/p&gt;&lt;p&gt;（因为基站覆盖问题，部分地区的2G网络可能覆盖不够好，所以会出现此类问题）&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我的开发板不断重启？&lt;/p&gt;&lt;p&gt;A：请您查看重启的规律，如果是间隔4分钟左右重启一次，那么是由于您的代码没有正常驱动看门狗芯片，导致硬件重启。请您下载最新版lib进行开发。&lt;/p&gt;&lt;p&gt;如果是无规律重启，甚至是启动中途就自动重启，那么请您根据Trace检查lua代码是否有问题。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;必须在main.lua中require“wdt”才可以避免规律性重启；&lt;/p&gt;&lt;p&gt;代码错误导致的重启，必须根据Trace输出内容修改代码，重新下载。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我的开发板开机后，没有打印任何Trace，开机失败？&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-10-D4cr1GtK5bc21a9f170ef.png&quot; class=&quot;img-responsive&quot; style=&quot;width: 50%;&quot;&gt;&lt;/p&gt;&lt;p&gt;A：如果您的开发板连接到电脑后，出现上图所示情况（event最后一行地址是0x1a11dead，Trace没有任何输出），是您的按动开机键时间过短导致。&lt;/p&gt;&lt;p&gt;按动开机键超过2s后松开，才可以正常开机。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我发送AT，却返回一堆乱码？&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;A：一般遇到这种情况，请检查模块是否为AT版，是否正确连接到UART1。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;luat版的HOST_TX，HOST_RX波特率为921600，必须使用专用的下载工具查看Trace，普通的串口调试助手均会乱码。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何使用UART1发送 HEX 给单片机？&lt;/p&gt;&lt;p&gt;A：对于串口来说，不论发 HEX、OCT 还是 DEC ，结果都是一样的，转为 BIN （二进制）发出去。所以仅需在编写代码的时候，进行少许改动即可。&lt;/p&gt;&lt;p&gt;此处介绍两种方法方法供大家参考：&lt;/p&gt;&lt;p&gt;方法一：使用 string.char 方法，全部转为 ASCII 发送：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;--发送数据ff ff ff&lt;/p&gt;&lt;p&gt;uart.write(1, string.char(255)..string.char(255)..string.char(255))&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;方法二：使用 pack ，转换需要发送的数据：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;--发送数据ff ff ff&lt;/p&gt;&lt;p&gt;----将 0xff 0xff 0xff 以打包为bytes，再转换为 HEX&lt;/p&gt;&lt;p&gt;packed = pack.pack(common.binstohexs(pack.pack(&quot;b&quot;, 0xff, 0xff, 0xff)))&lt;/p&gt;&lt;p&gt;uart.write(1, packed)&lt;/p&gt;&lt;p&gt;想了解更多 pack 用法？请点击&amp;nbsp;&lt;/p&gt;&lt;p&gt;http://wiki.openluat.com/doc/modules/extra/extrapi/#pack&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：UART读取数据不完整怎么办？&lt;/p&gt;&lt;p&gt;A：请根据实际情况修改参数：&lt;/p&gt;&lt;p&gt;http://wiki.openluat.com/doc/modules/extra/extrapi/#uartread&lt;/p&gt;&lt;p&gt;如果是阻塞读取，那么请检查发送的数据是否完整。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：socket 经常掉线怎么办？&lt;/p&gt;&lt;p&gt;A：首先请检查信号强度如何，如果信号很弱，请修改天线；然后，请检查代码重连方面的问题；随后，请检查服务器的稳定性如何，是否并发性能很弱，或者硬防干扰，亦或境外VPS的不可抗力因素导致连接超时；最后，由于部分 ISP 限制，必要时请使用心跳包维持连接。&lt;/p&gt;&lt;p&gt;参考链接：http://blog.openluat.com/2017/08/28/gprs的坑/&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：GPIO 支持输入、输出、中断吗？&lt;/p&gt;&lt;p&gt;A：所有GPIO都支持输入、输出（0~3.3v）、中断。请注意电压域的设置。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;如果启用了UART，那么相关的GPIO（tx/rx/cts/rts）插针将不可使用，否则会提示错误。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：UART支持什么波特率？能否修改校验位等其他参数？&lt;/p&gt;&lt;p&gt;A：UART支持2400，4800，9600，14400，19200，28800，38400，57600，115200，230400，460800，921600。&lt;/p&gt;&lt;p&gt;修改数据位、校验位，请阅读wiki：&lt;/p&gt;&lt;p&gt;http://wiki.openluat.com/doc/modules/extra/extrapi/#uartsetup&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：uart.read中，”*l”是什么意思？&lt;/p&gt;&lt;p&gt;A：读取到字符”\n”发送，或者阻塞发送。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何阻塞读取uart数据直到收到特定的截止符？&lt;/p&gt;&lt;p&gt;A：代码如下：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;local function read()&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; --定义一个临时变量，储存数据&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;local data = &quot;&quot;&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; --开始循环，阻塞读取&lt;/p&gt;&lt;p&gt;while true do&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; data = uart.read(1,&quot;*l&quot;,0)&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; if not data or string.len(data) == 0 then break end&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; tmp_data = tmp_data..data&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; --如果收到的数据结尾是ff ff ff&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; if string.sub(tmp_data, -6, -1) == &quot;ffffff&quot; then&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; --打印收到的数据，并清空变量&lt;/p&gt;&lt;p&gt;&amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; print(string.sub(tmp_data, 0, -4))&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;        &lt;/span&gt;tmp_data = &quot;&quot;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;end&lt;/p&gt;&lt;p&gt;end&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;--注册读取uart1数据的函数&lt;/p&gt;&lt;p&gt;sys.reguart(1,read)&lt;/p&gt;&lt;p&gt;--配置uart1&lt;/p&gt;&lt;p&gt;uart.setup(1,9600,8,uart.PAR_NONE,uart.STOP_1)&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：串口测试时，怎么一边打印Trace，一边接调试助手？&lt;/p&gt;&lt;p&gt;A：有些时候，开发者可能需要查看Trace的同时，调试uart，这种情况下，建议开发者使用多个usb2ttl线；对于实时性要求不高的情景，可以临时把发uart的数据，传到tcp服务器，从服务器看数据。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：播放mp3必须是tts 的 lod 吗？&lt;/p&gt;&lt;p&gt;A：通用版lod即可。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么TTS朗读没有声音呢？&lt;/p&gt;&lt;p&gt;A：请检查喇叭好坏以及接线情况；请检查代码是否有误；请检查是否使用了 TTS 底层LOD。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：tts遇到多音字怎么办？&lt;/p&gt;&lt;p&gt;A：请尝试用同音字替换多音字。例如“请重试”换位“请虫试”。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：123读成“一百二十三”怎么办？&lt;/p&gt;&lt;p&gt;A：请修改阿拉伯数字为汉字，或者每个数字间加上空格&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么喇叭声音小？&lt;/p&gt;&lt;p&gt;A：有可能是喇叭的阻抗太大，所以声音很小；请替换喇叭，或者外加功放板；也有可能是声学设计不合理，导致喇叭前后相位相抵导致，请设计一个共鸣腔。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么喇叭没声音？&lt;/p&gt;&lt;p&gt;A：多种原因导致，请检查连线情况（是否插错）、喇叭是否损坏、代码是否正确、底层是否正确（tts必须使用tts的lod）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：对于喇叭有什么要求？&lt;/p&gt;&lt;p&gt;A：阻抗8Ω，功率0.8w。&lt;/p&gt;&lt;p&gt;阻抗过大，声音细不可闻；阻抗过小，则可能烧线圈。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：喇叭杂音大怎么办？&lt;/p&gt;&lt;p&gt;A：请检查布线情况。再喇叭线上并电容。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么有的时候使用tonumber转换失败呢？&lt;/p&gt;&lt;p&gt;A：因为开发板不支持浮点。所以请避免浮点相关的任何运算。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么有的时候json解析失败呢？&lt;/p&gt;&lt;p&gt;A：这可能是因为json格式不合法导致的。请先检查json格式。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：VRTC 有什么作用？&lt;/p&gt;&lt;p&gt;A：用以维持内部时钟。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：基站定位是什么原理？为什么有的时候不准呢？&lt;/p&gt;&lt;p&gt;A：每一个基站都有自己的“身份编号”，通过这些编号，查询数据库后，便可以知晓该基站的经纬度信息。定位精度级别：100米。&lt;/p&gt;&lt;p&gt;开发板插入 SIM 卡并开机后，会自动开始搜寻附近的所有基站信息。随后开发板会把基站的“身份编号”及该基站信号强弱上传到服务器。服务器根据开发板上传的信息，查询数据库，应用定位算法，即可返回开发板的经纬度信息了（此过程需要联网）。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;所以通常情况下，单基站定位不如多基站定位精度；基站覆盖密集度越高，定位效果越好。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;伪基站、应急基站等，是无法定位的。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;基站定位的原理是查询数据库，计算经纬度。所以如果数据库内没有该基站信息，或者当前地点基站覆盖较差，均有可能造成定位失准情况。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：什么是 GPS 定位？为什么 GPS 定位比基站定位精准？&lt;/p&gt;&lt;p&gt;A：开发板通过 GPS 天线，接收到太空中 GPS 卫星广播的数据，然后对数据进行计算，即可得到当前经纬度（此过程无需联网）。定位精度级别：10米。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;通常情况下，至少搜到 3 颗卫星才能 2D Fix（经纬度）；至少搜到 4 颗卫星，才能 3D Fix（经纬度+海拔）。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：什么是混合定位？基站定位、GPS定位、混合定位，分别适用于什么场景？&lt;/p&gt;&lt;p&gt;A：混合定位指使用多种方法进行定位，提高定位精度，缩短定位时间。通常使用的定位方法有 卫星导航、基站定位、BLE、WiFi、惯性导航、激光雷达等。&lt;/p&gt;&lt;p&gt;&amp;nbsp;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Air800 M4使用的方法是 基站定位+ GPS。&lt;/p&gt;&lt;p&gt;基站定位适合对精读要求不高的场景，或者室内使用的情况；GPS 定位适合室外，可以接收到 GPS 信号的场景。对于大多数项目，推荐使用混合定位。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：什么是AGPS？什么是DGPS？有什么作用？&lt;/p&gt;&lt;p&gt;A：AGPS 即 Assisted Global Positioning System； DGPS 即 Differential Global Positioning System。&lt;/p&gt;&lt;p&gt;AGPS 是首先通过基站定位，获得模块的大致经纬度信息，然后再从服务器下载该地域 GPS 卫星的星历，可以有效减少搜星时间（此过程需要联网）。&lt;/p&gt;&lt;p&gt;DGPS 是建立一个基准点，然后在此基准点计算出当前 GPS 信号修正值。最后把修正值传输给开发板，开发板把收到的 GPS &amp;nbsp;信号，进行修正运算，最后得到相对更为精确的定位信息。定位精度级别：1m。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么我使用时间线APP，添加设备时，提示没有找到该设备？&lt;/p&gt;&lt;p&gt;A：开发板需要将开发板的数据上传到服务器，APP 才能提示找到该设备。所以请检查开发板是否正常开机，能否正常 GPRS 通信。&lt;/p&gt;&lt;p&gt;如果确认无误，请稍候片刻即可。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：时间线APP能否查看运动轨迹？是否有网页版？&lt;/p&gt;&lt;p&gt;A：不支持查看开发板运动轨迹；如果想实现查看开发板运动轨迹、电子围栏等需求，请选购本公司的车载定位设备。&lt;/p&gt;&lt;p&gt;时间线网页版：http://www.xiaomanzaixian.com/index&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何计算通讯流量？我选择多少兆流量的月卡比较适合？&lt;/p&gt;&lt;p&gt;A：使用多少流量，需要根据开发者写的代码进行估算。&lt;/p&gt;&lt;p&gt;月流量 = 每小时通讯流量 * 24 * 30&lt;/p&gt;&lt;p&gt;如果无法准确估算，可以让开发板模拟工作24小时，然后登陆 http://sim.openluat.com查询该 SIM 卡当日流量情况（流量详情次日 0 时更新）。乘以 30 即可估算月用量了。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：开发板是否支持通话录音，自动接听，播放应答录音？&lt;/p&gt;&lt;p&gt;A：不支持通话录音；可以自动接听，但是不支持播放应答录音。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：开发板的时钟是错误的怎么办？&lt;/p&gt;&lt;p&gt;A：请使用 ntp 进行同步（此过程需要联网）。&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;-- 代码请添加到 main.lua&lt;/p&gt;&lt;p&gt;-- 下载时，请下载 ntp.lua&lt;/p&gt;&lt;p&gt;require&quot;ntp&quot;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么使用 os.date() 获取不到日期时间？&lt;/p&gt;&lt;p&gt;A：请使用如下代码：&lt;/p&gt;&lt;p&gt;代码 &amp;gt;&lt;/p&gt;&lt;p&gt;-- 时间戳&lt;/p&gt;&lt;p&gt;print(os.time())&lt;/p&gt;&lt;p&gt;-- 时间table&lt;/p&gt;&lt;p&gt;print(os.date(&quot;*t&quot;))&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：开发板支持多少个 scoket ？&lt;/p&gt;&lt;p&gt;A：支持至多 8 个。&lt;/p&gt;&lt;p&gt;请注意&lt;/p&gt;&lt;p&gt;8个指所有的 socket 相关操作。包含 mqtt、http、TCP 等在内的所有。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：socket 是否支持域名？是否支持 UDP 协议？&lt;/p&gt;&lt;p&gt;A：支持域名；支持 UDP。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：为什么用物联网多使用 MQTT，而 TCP、HTTP、websocket 用的较少？&lt;/p&gt;&lt;p&gt;A：因为物联网是偏于轻量级的、安全设计的通信方式，所以 MQTT 更为适合物联网。&lt;/p&gt;&lt;p&gt;它具有传输稳定、安全性高、可靠性高、容量大、协议开放、部署方便、省流量等特点，这是其他协议不具备的。&lt;/p&gt;&lt;p&gt;TCP 不够安全，HTTP 不够鉴权不够方便，websocket 消耗流量过多。故此 MQTT 是不二之选。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：一般情况，MQTT设置心跳包间隔多少秒比较好？&lt;/p&gt;&lt;p&gt;A：60~120s。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：有什么推荐的 MQTT 服务端程序吗？有没有什么工具可以测试服务端？&lt;/p&gt;&lt;p&gt;A：服务端可以试试 MOSQUITTO，或者 EMQTT；测试程序可以尝试 MQTT-SPY。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何理解 MQTT 的主题（topic）、订阅（subscribe），发布（publish）？&lt;/p&gt;&lt;p&gt;A：&lt;span class=&quot;Apple-tab-span&quot; style=&quot;white-space:pre&quot;&gt;    &lt;/span&gt;开发板可以订阅主题，订阅后可以发布。只有订阅后才能收到服务器发过来的消息；&lt;/p&gt;&lt;p&gt;开发板可以不订阅主题，发布某主题的内容，服务器可以收到该消息。&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：如何测试 TCP，有没有在线的工具？&lt;/p&gt;&lt;p&gt;A：http://tt.ai-thinker.com:8000/ttcloud&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;Q：GPS 天线设计，有什么参考吗？&lt;/p&gt;&lt;p&gt;A：http://blog.openluat.com/2017/09/22/luat模块gps天线设计建议/&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/29/457/" data-id="ckkfmdgfa00efvkcg45r39ccc" data-title="Air800 模块 M4 开发板使用说明" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-456" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/09/29/456/" class="article-date">
  <time class="dt-published" datetime="2018-09-29T04:25:07.000Z" itemprop="datePublished">2018-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/09/29/456/">Air720模块在OpenWrt设备上的RNDIS网卡使用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;p&gt;&lt;b&gt;1.&amp;nbsp; &lt;/b&gt;&lt;a href=&quot;http://oldask.openluat.com/article/79&quot;&gt;先看 http://oldask.openluat.com/article/79&lt;/a&gt;&lt;b&gt;&lt;a href=&quot;http://oldask.openluat.com/article/79&quot;&gt; &amp;nbsp;&lt;/a&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 介绍的是Air720在Linux上通过RNDIS驱动进行使用&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp; 说明：如果是用PC x86 Linux&amp;nbsp;&amp;nbsp; 3.1x以上的 kernel,不需要编译内核，只需要 modeprobe usbnet 就能自动挂载720 rndis驱动&lt;br&gt;&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;2.本篇介始的是Air720在OpenWrt Linux上通过RNDIS驱动使用&lt;/b&gt;&lt;/p&gt;&lt;p&gt;&lt;b&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/b&gt; 2.1 配置 OpenWrt Linux RNDIS 驱动&lt;/p&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp; 配置菜单为: make menuconfig-&amp;gt;Kenrel modules -&amp;gt; USB Support&lt;/p&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp; 配置选项只有两个: kmod-usb-net, kmod-usb-net-rndis&lt;/p&gt;&lt;p&gt;&amp;nbsp;&amp;nbsp; 配置选项如下图:&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-hCrlx6KN5baefc37d4cfa.png&quot; class=&quot;img-responsive&quot; width=&quot;959&quot; height=&quot;607&quot;&gt;&lt;/p&gt;&lt;p&gt;2.2 编译好OpenWrt Linux固件下载到硬件&lt;/p&gt;&lt;p&gt;系统运行后，查看Air720硬件连接信息,usb pid 为 1286:4e3d &lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-V56ehbPq5baefcf29c26b.png&quot; class=&quot;img-responsive&quot; width=&quot;955&quot; height=&quot;75&quot;&gt;&lt;/p&gt;&lt;p&gt;2.3 查看Air720 rndis 网络接口,下图中eth1为Air720 &lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-xVGfV0Jj5baefd633c043.png&quot; class=&quot;img-responsive&quot; width=&quot;952&quot; height=&quot;547&quot;&gt;&lt;/p&gt;&lt;p&gt;通过Luci(OpenWrt Linux上的lua配置接口) 查看Air720 为 4G eth1,处于WAN ZONE,此时系统可以上网，接LAN和WIFI的设备，都会通过Air720上网&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;img src=&quot;http://oldask.openluat.com/image/show/attachments-2018-09-xedYp93o5baefddd60d5a.png&quot; class=&quot;img-responsive&quot; width=&quot;964&quot; height=&quot;652&quot;&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;p&gt; &lt;b&gt;&lt;br&gt; &lt;/b&gt;&lt;br&gt;&lt;/p&gt;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/09/29/456/" data-id="ckkfmdgbd005jvkcg8lqgg9y8" data-title="Air720模块在OpenWrt设备上的RNDIS网卡使用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/51/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/50/">50</a><a class="page-number" href="/page/51/">51</a><span class="page-number current">52</span><a class="page-number" href="/page/53/">53</a><a class="page-number" href="/page/54/">54</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/53/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>