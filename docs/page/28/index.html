<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/28/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-30" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/30/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T07:01:52.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/30/">1、Air720SL模块Luat开发：环境搭建</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、环境搭建前准备"><a href="#一、环境搭建前准备" class="headerlink" title="一、环境搭建前准备"></a>一、环境搭建前准备</h1><h2 id="1、准备硬件"><a href="#1、准备硬件" class="headerlink" title="1、准备硬件"></a>1、准备硬件</h2><blockquote>
<p>为了避免不必要的麻烦，这里我选用的是合宙商城推出的的Air720SL开发板。<br>相比720x系列，720sl开发板内置了一张esim卡，不需要自己在另外购买物联卡，<br>该开发板在淘宝和合宙商城都有出售。价格199软妹币，还可以接受。</p>
</blockquote>
<p><img src="https://img-blog.csdnimg.cn/20200212204008504.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="Air720SL开发板"></p>
<ul>
<li>淘宝链接：<a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?spm=a1z10.5-c.w4002-22403489719.51.3d727118bUwz0j&id=610853578601">淘宝购买点我</a></li>
<li>合宙商城：<a target="_blank" rel="noopener" href="http://m.openluat.com/product/1192">商城购买点我</a>，也可关注合宙的微信公众号自行购买</li>
</ul>
<h2 id="2、准备软件"><a href="#2、准备软件" class="headerlink" title="2、准备软件"></a>2、准备软件</h2><ul>
<li>Windows USB驱动下载：<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/AirM2M_USB_Download&Com_Driver_for_4G_V1.0.0.4.7z">点我</a></li>
<li>Luat下载调试工具1.6.4：<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/LuaTools%201.6.4_4G.7z">点我</a></li>
<li>底层软件CORE V0008：<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802s/core_V0008.zip">点我</a></li>
<li>上层软件luaTask V2.2.7 (Demo + Lib)：<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/script_LuaTask_V2.2.7.zip">点我</a></li>
</ul>
<blockquote>
<p>上面4个链接全部下载，如下图所示<br><img src="https://img-blog.csdnimg.cn/20200212210602349.png" alt="在这里插入图片描述"><br>全部解压</p>
</blockquote>
<h1 id="二、开始环境搭建"><a href="#二、开始环境搭建" class="headerlink" title="二、开始环境搭建"></a>二、开始环境搭建</h1><blockquote>
<h2 id="1、安装驱动"><a href="#1、安装驱动" class="headerlink" title="1、安装驱动"></a>1、安装驱动</h2><p> 打开解压后的AirM2M_USB_Download&amp;Com_Driver_for_4G_V1.0.0.4<br> <img src="https://img-blog.csdnimg.cn/20200212211006986.png" alt="在这里插入图片描述"><br> 根据自己的操作系统位数，选中安装程序，如下图所示。<br> 基于x64那就选择DrvInstaller_x64安装<br> 基于x86那就选择DrvInstaller安装<br> 我这里电脑是64位的，所以选择DrvInstaller_x64安装程序<br> <img src="https://img-blog.csdnimg.cn/20200212211325596.png" alt="在这里插入图片描述"><br> 安装成功后将开发板插上电脑，将开关拨到On，并且按下开机键，稍等一会正常情况下，开发板三个灯都会正常亮起，并伴随着闪烁<br> <img src="https://img-blog.csdnimg.cn/20200212212145553.png" alt="在这里插入图片描述">&gt;<img src="https://img-blog.csdnimg.cn/20200212212058300.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20200212213241185.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<p> 打开，设备管理器查看端口，是否有如下三个设备，如果没有，那就是驱动没有安装成功，回去重新安装驱动<br> <img src="https://img-blog.csdnimg.cn/20200212212243174.png" alt="在这里插入图片描述"></p>
</blockquote>
<p>**注意：如果是win10系统，需要禁用驱动程序强制签名，否则安装失败，自行百度相关教程这里不多做赘述</p>
<h2 id="2、下载底层软件"><a href="#2、下载底层软件" class="headerlink" title="2、下载底层软件"></a>2、下载底层软件</h2><p> 开发板出厂自带AT固件，我们需要的是Luat二次开发，所以需要替换底层固件</p>
<blockquote>
<p>打开解压后的LuaTools<br><img src="https://img-blog.csdnimg.cn/20200212212708156.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>选择运行LuaTools.exe，可能会自动更新，允许即可，等待片刻<br><img src="https://img-blog.csdnimg.cn/20200212212944418.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>选择右上角绿色图标下载CORE(.blf)<img src="https://img-blog.csdnimg.cn/20200212213333976.png" alt="在这里插入图片描述">打开后如下图所示<br><img src="https://img-blog.csdnimg.cn/2020021221342430.png" alt="在这里插入图片描述"><br>选择浏览文件，选中打开刚才下载的底层固件core_V0008里面的Luat_V0008_ASR1802S中的Luat_V0008_ASR1802S.blf。还有一个Float版本是支持小数运算的，运行会占用更多ram，我们暂时不需要进行小数运算，所以选则正常版本<br><img src="https://img-blog.csdnimg.cn/20200212213606704.png" alt="在这里插入图片描述"><br>去掉勾选的usb_boot，Air720sl支持usb_boot下载，但是可能是我的操作原因，失败率相对较高，用起来很不方便，这里推荐去掉usb_boot，然后点击下载<br><img src="https://img-blog.csdnimg.cn/20200212213921600.png" alt="在这里插入图片描述"><br>只需按一下开发板上的重启按钮即可<img src="https://img-blog.csdnimg.cn/20200212214015907.png" alt="在这里插入图片描述">就是下面的那一个红色按钮，这时开发板会进入下载状态，不要有任何操作，等待下载完成即可<br><img src="https://img-blog.csdnimg.cn/20200212214116698.png" alt="在这里插入图片描述"><br>关闭下载窗口，发现主窗口，上面的状态已经由AT变成了Luat，软件版本也不一样了<br><img src="https://img-blog.csdnimg.cn/20200212214236967.png" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20200212214224975.png" alt="在这里插入图片描述"><br>到此为止，Luat开发环境搭建完成</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/30/" data-id="ckkfmdgaz004gvkcgh8uybv61" data-title="1、Air720SL模块Luat开发：环境搭建" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-701" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/25/701/" class="article-date">
  <time class="dt-published" datetime="2020-02-25T06:47:40.000Z" itemprop="datePublished">2020-02-25</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/25/701/">X、合宙Air模块Luat开发：全网首发，通过iic直接驱动OLED，720Sl开始有显时代</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<blockquote>
<p>本系列博客，理论上适用于合宙的Air202、Air268、Air720x、Air720S以及最近发布的Air720U（我还没拿到样机，应该也能支持）。</p>
</blockquote>
<blockquote>
<p>先不管支不支持，如果你用的是合宙的模块，那都不妨一试，也许会有意外收获<br>我使用的是Air720SL模块，如果在其他模块上不能用，那就是底层core固件暂时还没有支持，这里的代码是没有问题的。例程仅供参考！</p>
</blockquote>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>这里我把博客标题设置为X，是因为本系列教程按照正常的学习顺序，不应该先发OLED驱动，还有好多基础知识都还没讲到，本系列教程截至今日，才讲到模拟量采集，所以看本篇博客大家可能会有点不知所云<br><img src="https://img-blog.csdnimg.cn/20200225142340236.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>用过2g模块的同志，应该知道2g模块官方支持disp驱动库，直接调用库函数就可以很简单实现oled或者lcd驱动</p>
<p>但是！！！4g模块暂时还没有disp驱动（后续应该会支持），所以现在是无法直接调用库函数驱动OLED的！！！！！<br><img src="https://img-blog.csdnimg.cn/20200225142458600.png" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>所谓没有条件那就创造条件，正好这几天闲的没事干，研究了一下通过iic直接驱动OLED，在逻辑分析仪没有带回来的情况下，运气好到爆竟然把驱动调试出来了这里要感谢社区大神<code>Miuser</code>没有他帮助调试那么今天就见不到这篇文章了，既然驱动开发出来了本着开源的思想，就把OLED驱动分享出来，独乐乐不如众乐乐<br><img src="https://img-blog.csdnimg.cn/20200225142203906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<blockquote>
<p>这里我提供<code>两种</code>驱动OLED的方式，</p>
</blockquote>
<ul>
<li>第一种驱动是实时从字库读取字模，用到谁就读谁，然后直接通过iic找到对应的地址写入，实时读写。这种驱动没有缓存，所占用的内存极小，同时刷屏速度也较低，刷屏速度取决与读取字库的速度，只要文件没有读取出来，就算iic速度再快也不行，这就是传说中的木桶短板效应<br><img src="https://img-blog.csdnimg.cn/20200225122128636.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><blockquote>
<p>木桶定律是讲一只水桶能装多少水取决于它最短的那块木板 。一只木桶想盛满水，必须每块木板都一样平齐且无破损，如果这只桶的木板中有一块不齐或者某块木板下面有破洞，这只桶就无法盛满水。<br><img src="https://img-blog.csdnimg.cn/20200225142917102.png" alt="在这里插入图片描述"></p>
</blockquote>
</li>
<li>第二种驱动方式是建立一个128*64  bit的缓存区，所需要的缓存是1K字节ram，这种方法刷新速度理论上要比第一种驱动要快，虽然第二种驱动流程多了一步，但是用户只能在最后一步能感受到刷屏已经开始，所以第二种驱动方式给人的感觉刷屏是更快的<br><img src="https://img-blog.csdnimg.cn/20200225122552131.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><blockquote>
<p>但是第二种驱动方式是全屏刷新，每次刷新数据都较多，所以在低速iic上，刷新速度优势不是特别明显，高速iic刷新速度是低速iic的刷新速度的四倍<br><img src="https://img-blog.csdnimg.cn/20200225122503330.png" alt="在这里插入图片描述"><br>我现在使用的是测试版本v0009，<code>目前官方发布的版本是v0008，很不幸v0008的iic驱动时序有问题，并不能点亮oled</code>，据内部消息近期应该会更新v0009到时候小伙伴们就能愉快的玩耍了<br>我现在使用的v0009其实也有问题，高速iic并不能点亮oled，所以我这里第二种驱动方式优势并不明显，想体验丝滑般流畅，还得等等</p>
</blockquote>
</li>
</ul>
<h1 id="二、编写第1版测试程序（不带缓存）"><a href="#二、编写第1版测试程序（不带缓存）" class="headerlink" title="二、编写第1版测试程序（不带缓存）"></a>二、编写第1版测试程序（不带缓存）</h1><blockquote>
<p> 第一版测试程序实际我只做了英文字库驱动，也不支持多字库兼容，也不支持画图形。后来因为改写第二版驱动，个人时间有限，第一版驱动中文字库支持还是由社区大神<code>Miuser</code>实现的，不过目前的功能也比较简单，<code>只支持16X16的中文和16X8的ascii字库</code>，后面我也懒得改了，就暂时这样</p>
</blockquote>
<h2 id="1、目录说明"><a href="#1、目录说明" class="headerlink" title="1、目录说明"></a>1、目录说明</h2><blockquote>
<p>文章末尾我会提供库文件以及字库的下载地址</p>
</blockquote>
<blockquote>
<p>第1版测试程序目录结构如下<br><img src="https://img-blog.csdnimg.cn/20200225130206623.png" alt="在这里插入图片描述"></p>
</blockquote>
<ul>
<li><code>ASCII_lib.bin</code>：                        16*8            Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_lib.bin</code>：                    16*16          GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>i2c_ssd1306_oled.lua</code>：        IIC   ssd1306    OLED屏驱动库</li>
<li><code>main.lua</code>：                            DEMO文件</li>
</ul>
<p>注意：文件名不建议更改，如果更改了文件名，需要把驱动库中的用户配置区也一并更改，此字库<code>不兼容第二版oled驱动程序</code>，不要随意替换，<code>不支持第三方字库</code></p>
<h2 id="2、用户配置"><a href="#2、用户配置" class="headerlink" title="2、用户配置"></a>2、用户配置</h2><p>本驱动支持2g模块和4g模块，需要用户改动的库文件如下，只要把字库文件地址改下就行了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------用户配置区域------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--local fontfile_ascii = <span class="string">&quot;/ldata/ASCII_lib.bin&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line">--local fontfile_gb2312 = <span class="string">&quot;/ldata/GB2312_lib.bin&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line"></span><br><span class="line">local fontfile_ascii = <span class="string">&quot;/lua/ASCII_lib.bin&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line">local fontfile_gb2312 = <span class="string">&quot;/lua/GB2312_lib.bin&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line"></span><br><span class="line">local iicspeed = i2c.SLOW --iic速度，<span class="number">100</span>K</span><br><span class="line">--local iicspeed = i2c.FAST --iic速度，<span class="number">400</span>K。在<span class="number">720</span>sl上点不亮，<span class="number">2</span>g模块可以使用高速iic</span><br><span class="line"></span><br><span class="line">local i2cid = <span class="number">0</span> --iicid，需要根据接线而定，默认iic1</span><br><span class="line">local i2cslaveaddr = <span class="number">0x3C</span> --从机地址，如果是八位地址，需要向右移动一位。我这个模块说明书给的地址是<span class="number">0x78</span>，右移动一位就是<span class="number">0x3c</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3、函数说明"><a href="#3、函数说明" class="headerlink" title="3、函数说明"></a>3、函数说明</h2><p>接下来我做一下函数说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------函数说明---------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--[[</span><br><span class="line">* @description: 清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Clear()</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 初始化OLED，</span><br><span class="line">* @param &#123;type&#125; :无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Init()</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定位置显示一个字符,包括部分字符</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">0</span>~<span class="number">127</span></span><br><span class="line">----------------------y:<span class="number">0</span>~<span class="number">6</span></span><br><span class="line">---------------------<span class="number">-0</span>第一行，<span class="number">2</span>第二行，<span class="number">4</span>第三行，<span class="number">6</span>第四行</span><br><span class="line">----------------------Show_char:要显示的字符</span><br><span class="line">----------------------isChinese:是中文就填入<span class="number">1</span>，英文就忽略</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowChar(x, y, Show_char, isChinese)</span><br><span class="line">]]</span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示字符串</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">0</span>~<span class="number">127</span></span><br><span class="line">----------------------y:<span class="number">0</span>~<span class="number">6</span></span><br><span class="line">---------------------<span class="number">-0</span>第一行，<span class="number">2</span>第二行，<span class="number">4</span>第三行，<span class="number">6</span>第四行</span><br><span class="line">----------------------Show_char:要显示的字符串，支持中文</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowString(x, y, ShowStr)</span><br><span class="line">]]</span><br></pre></td></tr></table></figure>
<h2 id="4、编写测试程序代码"><a href="#4、编写测试程序代码" class="headerlink" title="4、编写测试程序代码"></a>4、编写测试程序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">require <span class="string">&quot;common&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line">local oled = require <span class="string">&quot;i2c_ssd1306_oled&quot;</span>--包含库文件</span><br><span class="line">local function Test_Task()</span><br><span class="line">	oled.OLED_Init()</span><br><span class="line">    oled.OLED_Clear()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        oled.OLED_ShowChar(<span class="number">0</span>, <span class="number">0</span>, <span class="string">&#x27;6&#x27;</span>,<span class="number">0</span>)--显示一个asill字符</span><br><span class="line">        oled.OLED_ShowString(<span class="number">40</span>, <span class="number">0</span>, <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>)--显示英文字符串,超出一行会自动换行</span><br><span class="line">        oled.OLED_ShowString(<span class="number">0</span>, <span class="number">4</span>, common.utf8ToGb2312(<span class="string">&quot;合宙，你好&quot;</span>) )--显示中文字符串</span><br><span class="line">        sys.wait(<span class="number">2000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    --显示内容</span><br><span class="line">    sys.wait(<span class="number">10000</span>)</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5、下载程序到开发板"><a href="#5、下载程序到开发板" class="headerlink" title="5、下载程序到开发板"></a>5、下载程序到开发板</h2><p>实验效果如下<br><img src="https://img-blog.csdnimg.cn/20200225124705910.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="二、编写第2版测试程序（带缓存）"><a href="#二、编写第2版测试程序（带缓存）" class="headerlink" title="二、编写第2版测试程序（带缓存）"></a>二、编写第2版测试程序（带缓存）</h1><blockquote>
<p> 第2版驱动，支持在任意地方画矩形。<br> 支持显示不同大小的中文和英文字库，目前做了<code>12X6、16X8、24X12的ascii字库支持 和12X12、16X16、24X24的中文字库显示</code><br>近期不打算改了，后续可能还会增加二维码显示，有能力朋友可以先试试，搞出来跟我讲下，顺便学习学习</p>
</blockquote>
<h2 id="1、目录说明-1"><a href="#1、目录说明-1" class="headerlink" title="1、目录说明"></a>1、目录说明</h2><blockquote>
<p>文章末尾我会提供库文件以及字库的下载地址</p>
</blockquote>
<blockquote>
<p>第2版测试程序目录结构如下<br><img src="https://img-blog.csdnimg.cn/2020022513205237.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<ul>
<li><code>ASCII_12X6.bin</code>：         12*6                Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>ASCII_16X8.bin</code>：        16*8                Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>ASCII_24X12.bin</code>：        24*12            Ascii字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_12X12.bin</code>：    12*12              GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_16X16.bin</code>：    16*16              GB2312字库二进制文件，直接随同lua脚本一起下载即可</li>
<li><code>GB2312_24X24.bin</code>：    24*24              GB2312字库二进制文件，直接随同lua脚本一起下载即可，这个文件过大，全部下载就会超出了脚本区大小，单独下载应该没问题（我没有测试），也就是说只能下载这一个字库，其他的五个字库可以一同下载</li>
<li><code>i2c_ssd1306_oled.lua</code>：IIC   ssd1306    OLED屏驱动库</li>
<li><code>main.lua</code>：DEMO文件</li>
</ul>
<p><img src="https://img-blog.csdnimg.cn/20200225132632653.png" alt="在这里插入图片描述"><br>注意：文件名不建议更改，如果更改了文件名，需要把驱动库中的用户配置区也一并更改，此字库<code>不兼容第一版oled驱动程序</code>，不要随意替换，<code>不支持第三方字库</code></p>
<h2 id="2、用户配置-1"><a href="#2、用户配置-1" class="headerlink" title="2、用户配置"></a>2、用户配置</h2><p>本驱动支持2g模块和4g模块，需要改动的库文件如下，只要把字库文件地址改下就行了</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------用户配置区域------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--local Size_address = <span class="string">&quot;ldata&quot;</span> --字库文件的地址，<span class="number">2</span>G模块</span><br><span class="line">local Size_address = <span class="string">&quot;lua&quot;</span> --字库文件的地址，<span class="number">4</span>G模块</span><br><span class="line"></span><br><span class="line">local Size_12X6_name = <span class="string">&quot;ASCII_12X6.bin&quot;</span> --ascll字库名称</span><br><span class="line">local Size_16X8_name = <span class="string">&quot;ASCII_16X8.bin&quot;</span></span><br><span class="line">local Size_24X12_name = <span class="string">&quot;ASCII_24X12.bin&quot;</span></span><br><span class="line"></span><br><span class="line">--通过Luatools烧写的所有文件，都存放在此区域，目前总空间为<span class="number">524</span>KB，所以中文字库不能三个全部一起下载</span><br><span class="line">local FontSize_12X12_name = <span class="string">&quot;GB2312_12X12.bin&quot;</span> --GB2312中文字库名称</span><br><span class="line">local FontSize_16X16_name = <span class="string">&quot;GB2312_16X16.bin&quot;</span></span><br><span class="line">local FontSize_24X24_name = <span class="string">&quot;GB2312_24X24.bin&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local iicspeed = i2c.SLOW --iic速度，<span class="number">100</span>K</span><br><span class="line">--local iicspeed = i2c.FAST --iic速度，<span class="number">400</span>K。在<span class="number">720</span>sl上点不亮，<span class="number">2</span>g模块可以使用高速iic</span><br><span class="line"></span><br><span class="line">local i2cid = <span class="number">0</span> --iicid，需要根据接线而定，默认iic1</span><br><span class="line">local i2cslaveaddr = <span class="number">0x3C</span> --从机地址，如果是八位地址，需要向右移动一位。我这个模块说明书给的地址是<span class="number">0x78</span>，右移动一位就是<span class="number">0x3c</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="3、函数说明-1"><a href="#3、函数说明-1" class="headerlink" title="3、函数说明"></a>3、函数说明</h2><p>接下来我做一下函数说明</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------函数说明---------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--[[</span><br><span class="line">* @description: 更新缓存数据，到oled，操作后，必须更新，否则不会生效</span><br><span class="line">* @param &#123;type&#125; ：无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Refresh_Gram()</span><br><span class="line">*]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 开启OLED显示</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Display_On()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 关闭OLED显示</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Display_Off()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</span><br><span class="line">* @param &#123;type&#125; 无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Clear()</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 画矩形</span><br><span class="line">* @param &#123;type&#125; :确保x1&lt;=x2 y1&lt;=y2 <span class="number">1</span>&lt;=x1&lt;=<span class="number">128</span> <span class="number">1</span>&lt;=y1&lt;=<span class="number">64</span></span><br><span class="line">dot:<span class="number">0</span>,清空 <span class="number">1</span>,填充</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Fill(x1, y1, x2, y2, dot)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定位置显示一个字符,包括部分字符</span><br><span class="line">* @param &#123;type&#125; :-----x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">----------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">----------------------Show_char:要显示的字符</span><br><span class="line">----------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">----------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowChar(x, y, Show_char, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示字符串</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------ShowStr:要显示的字符串</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowString(x, y, ShowString, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示一个汉字</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------UTF8_ShowFont:要显示的字符串</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowFont(x, y, UTF8_ShowFont, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 在指定坐标起始处显示一堆汉字</span><br><span class="line">* @param &#123;type&#125; :--x:<span class="number">1</span>~<span class="number">128</span></span><br><span class="line">-------------------y:<span class="number">1</span>~<span class="number">64</span></span><br><span class="line">-------------------UTF8_ShowFonts:要显示的一堆汉字,</span><br><span class="line">-------------------size:选择字体 <span class="number">12</span>/<span class="number">16</span>/<span class="number">24</span></span><br><span class="line">-------------------mode:<span class="number">0</span>,反白显示 <span class="number">1</span>,正常显示</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_ShowFonts(x, y, UTF8_ShowFonts, size, mode)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 初始化OLED，</span><br><span class="line">* @param &#123;type&#125; :无</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function OLED_Init()</span><br><span class="line">]]</span><br></pre></td></tr></table></figure>
<h2 id="4、编写测试程序代码-1"><a href="#4、编写测试程序代码-1" class="headerlink" title="4、编写测试程序代码"></a>4、编写测试程序代码</h2><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;LED&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local oled = require <span class="string">&quot;i2c_ssd1306_oled&quot;</span></span><br><span class="line">local function Test_Task()</span><br><span class="line">    oled.OLED_Init()--初始化</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        oled.OLED_ShowString(<span class="number">1</span>, <span class="number">1</span>, <span class="string">&quot;abcdefghijklmnopqrstuvwxyz&quot;</span>, <span class="number">12</span>, <span class="number">1</span>)--正常显示一堆<span class="number">12</span>*<span class="number">6</span>的ascii字符，会自动换行</span><br><span class="line">        oled.OLED_ShowChar(<span class="number">50</span>, <span class="number">20</span>, <span class="string">&#x27;6&#x27;</span>, <span class="number">16</span>, <span class="number">0</span>)--反白显示一个<span class="number">16</span>*<span class="number">8</span>的ascii字符</span><br><span class="line">        oled.OLED_ShowFont(<span class="number">90</span>, <span class="number">20</span>, <span class="string">&quot;哈&quot;</span>, <span class="number">16</span>, <span class="number">1</span>)--正常显示一个<span class="number">16</span>*<span class="number">16</span>的中文汉字</span><br><span class="line">        oled.OLED_ShowFonts(<span class="number">1</span>, <span class="number">40</span>, <span class="string">&quot;合宙，你好&quot;</span>, <span class="number">12</span>, <span class="number">0</span>)--反白显示一堆<span class="number">12</span>*<span class="number">12</span>的中文汉字，会自动换行</span><br><span class="line">        oled.OLED_Fill(<span class="number">70</span>, <span class="number">40</span>, <span class="number">90</span>, <span class="number">60</span>, <span class="number">1</span>)--画一个正方形</span><br><span class="line">        oled.OLED_Refresh_Gram()--更新显存</span><br><span class="line">        sys.wait(<span class="number">2000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    --显示内容</span><br><span class="line">    sys.wait(<span class="number">10000</span>)</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line"></span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<h2 id="5、下载程序到开发板-1"><a href="#5、下载程序到开发板-1" class="headerlink" title="5、下载程序到开发板"></a>5、下载程序到开发板</h2><p>实验效果如下<br><img src="https://img-blog.csdnimg.cn/2020022513513421.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="四、总结"><a href="#四、总结" class="headerlink" title="四、总结"></a>四、总结</h1><h2 id="1、本片博客涉及到的OLED驱动"><a href="#1、本片博客涉及到的OLED驱动" class="headerlink" title="1、本片博客涉及到的OLED驱动"></a>1、本片博客涉及到的OLED驱动</h2><p>下载地址：<a target="_blank" rel="noopener" href="https://download.csdn.net/download/weixin_44570083/12190546">点击这里</a><br>开发不易，收几个积分，望理解</p>
<h2 id="2、第1种驱动能用的库函数"><a href="#2、第1种驱动能用的库函数" class="headerlink" title="2、第1种驱动能用的库函数"></a>2、第1种驱动能用的库函数</h2><ul>
<li><code>OLED_Clear()</code>：清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</li>
<li><code>OLED_Init()</code>：初始化OLED</li>
<li><code>OLED_ShowChar(x, y, Show_char, isChinese)</code>：在指定位置显示一个字符,包括部分字符</li>
<li><code>OLED_ShowString(x, y, ShowStr)</code>：在指定坐标起始处显示字符串</li>
</ul>
<p>优点：占用内存极小，没有缓存，功能简单<br>缺点：速度慢</p>
<h2 id="3、第2种驱动能用的库函数"><a href="#3、第2种驱动能用的库函数" class="headerlink" title="3、第2种驱动能用的库函数"></a>3、第2种驱动能用的库函数</h2><ul>
<li><code>OLED_Refresh_Gram()</code>：更新缓存数据，到oled，操作后，必须更新，否则不会生效</li>
<li><code>OLED_Display_On()</code>：开启OLED显示</li>
<li><code>OLED_Display_Off()</code>：关闭OLED显示</li>
<li><code>OLED_Clear()</code>：清屏函数,清完屏,整个屏幕是黑色的!和没点亮一样!!!</li>
<li><code>OLED_Fill(x1, y1, x2, y2, dot)</code>：画矩形</li>
<li><code>OLED_ShowChar(x, y, Show_char, size, mode)</code>：在指定位置显示一个字符,包括部分字符</li>
<li><code>OLED_ShowString(x, y, ShowString, size, mode)</code>：在指定坐标起始处显示字符串</li>
<li><code>OLED_ShowFont(x, y, UTF8_ShowFont, size, mode)</code>：在指定坐标起始处显示一个汉字</li>
<li><code>OLED_ShowFonts(x, y, UTF8_ShowFonts, size, mode)</code>：在指定坐标起始处显示一堆汉字</li>
<li><code>OLED_Init()</code>：初始化OLED</li>
</ul>
<p>优点：速度快，比第一种驱动多一个功能，后续会继续增加新的功能<br>缺点：占用1k内存，有缓存</p>
<h2 id="4、再次提醒"><a href="#4、再次提醒" class="headerlink" title="4、再次提醒"></a>4、再次提醒</h2><ul>
<li> 现在时间是2020年2月25日，到目前为止官方的720sl固件只发布到v0008版本，因为v0008版本iic时序有问题，所以并不能通过本驱动点亮OLED。</li>
<li>目前我使用的v0009内测版本，只能通过低速iic点亮oled，高速iic并不能点亮，所以速度快的优势体现不出来。我不清楚正式版本会不会修复这个问题。</li>
<li> 按照官方手册说明，高速iic比低速iic速度块4倍，修复这个问题后，oled刷新应该是丝滑般流畅</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/25/701/" data-id="ckkfmdgek00dkvkcg3sx28380" data-title="X、合宙Air模块Luat开发：全网首发，通过iic直接驱动OLED，720Sl开始有显时代" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-27" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/23/27/" class="article-date">
  <time class="dt-published" datetime="2020-02-23T06:41:12.000Z" itemprop="datePublished">2020-02-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/23/27/">物联网相关环节</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>行业应用，有这么几种:<br>串口挂外设，gui显示和控制，网络对接各种云，基于各种协议的io和总线操作，usb操作，网口操作。<br>每一种类型的应用，都有合适的解决方案</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/23/27/" data-id="ckkfmdgaw004dvkcgaz310hng" data-title="物联网相关环节" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-700" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/21/700/" class="article-date">
  <time class="dt-published" datetime="2020-02-21T11:46:05.000Z" itemprop="datePublished">2020-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/21/700/">体验DTU的流水帐</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre><code>                        &lt;p style=&quot;color: rgb(68, 68, 68); font-family: &amp;quot;Droid Serif&amp;quot;, Georgia, &amp;quot;Times New Roman&amp;quot;, STHeiti, serif;&quot;&gt;暂且称之为DTU吧，稀饭老师做这个已经很久了，从最早的202模块透传固件，好像还有个字母尾标，记不清了，会不会是202U呢？后来有了iRTU，功能越来越多，支持各种主流无联网平台，某日稀饭老师宣布开源，同时也对720提供了支持。最近呢，称为SmartDTU（智连DTU），底层库也进行了重构。&lt;br&gt;闲话少讲吧，这里主要记录一下一个小白体验dtu的过程吧，沿用一下网友总结的使用流程，记录一下自己的操作过程，以作备忘。&lt;/p&gt;&lt;pre style=&quot;font-family: Menlo, Monaco, Consolas, &amp;quot;Lucida Console&amp;quot;, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 0px; max-height: 400px; color: rgb(68, 68, 68);&quot;&gt;&lt;code style=&quot;font-family: Menlo, Monaco, Consolas, &amp;quot;Lucida Console&amp;quot;, &amp;quot;Courier New&amp;quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 3px; color: rgb(68, 68, 68);&quot;&gt;1、把IMEI号码告诉稀饭老师，添加到自己的账户里
</code></pre>
<p>2、烧录官方的DTU固件<br>3、网页配置参数<br>4、断电重启<br></code></pre><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;"><b><strong><strong><em>第一步</em></strong></strong></b></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;">首先就是提交，imei号码，订货记录里有4g模块的imei，没有找到2g模块的imei，发照片也是不成的，不过也不用去抄，容易出错，可以用qq的二维码扫描功能获取，然后发给稀饭就可以啦，很快，不到2分钟就添加到后台了。<br>登录<a target="_blank" rel="noopener" href="http://dtu.openluat.com/%EF%BC%8C%E5%9C%A8%E2%80%9C%E8%AE%BE%E5%A4%87%E5%88%97%E8%A1%A8%E2%80%9D%E4%B8%AD%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%88%B0%E8%87%AA%E5%B7%B1%E7%9A%84%E8%AE%BE%E5%A4%87%E5%87%BA%E7%8E%B0%E5%9C%A8%E4%BA%86%E6%9C%AA%E5%88%86%E7%BB%84%E8%AE%BE%E5%A4%87%E4%B8%AD%EF%BC%8C%E5%85%88%E7%BB%99%E8%AE%BE%E5%A4%87%E5%88%86%E4%B8%AA%E7%BB%84%EF%BC%8C%E7%82%B9%E5%87%BB%E2%80%9C%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86%E2%80%9D-&gt;%E2%80%9C%E6%B7%BB%E5%8A%A0%E5%88%86%E7%BB%84%E2%80%9D%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%B8%80%E4%B8%AA%E2%80%9C%E6%B5%8B%E8%AF%95%E7%BB%84%E2%80%9D%EF%BC%8C%E5%8F%AF%E4%BB%A5%E5%9C%A8%E8%AE%BE%E5%A4%87%E5%88%97%E8%A1%A8%E4%B8%AD%E2%80%9C%E4%BF%AE%E6%94%B9%E5%88%86%E7%BB%84%E2%80%9D%E6%8A%8A%E8%AE%BE%E5%A4%87%E5%88%86%E5%88%B0%E6%96%B0%E7%BB%84%E4%B8%AD%E3%80%82%E2%80%9C%E5%88%86%E7%BB%84%E7%AE%A1%E7%90%86%E2%80%9D%E4%B8%AD%E5%8F%AF%E4%BB%A5%E4%B8%BA%E7%BB%84%E4%B8%AD%E7%9A%84%E8%AE%BE%E5%A4%87%E2%80%9C%E4%BF%AE%E6%94%B9%E5%88%AB%E5%90%8D/%E4%BF%AE%E6%94%B9%E5%A4%87%E6%B3%A8%E2%80%9D%EF%BC%8C%E8%BF%99%E6%A0%B7%E6%9B%B4%E5%A5%BD%E8%AE%B0%E4%B8%80%E4%BA%9B%E3%80%82">http://dtu.openluat.com/，在“设备列表”中就可以看到自己的设备出现在了未分组设备中，先给设备分个组，点击“分组管理”-&gt;“添加分组”，添加一个“测试组”，可以在设备列表中“修改分组”把设备分到新组中。“分组管理”中可以为组中的设备“修改别名/修改备注”，这样更好记一些。</a></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;"><b><strong><strong><em>第二步</em></strong></strong></b></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;">似乎有些跑题了，开始进行第二步，下载固件吧，看日志开始应该是获取配置参数<br>取了配置后重起，如何远程重起呢，估计要看一下操作手册</p><pre style="font-family: Menlo, Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 0px; max-height: 400px; color: rgb(68, 68, 68);"><code style="font-family: Menlo, Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 3px; color: rgb(68, 68, 68);">[2020-02-21 18:55:00.506]: lualibc_fopen_ext /CONFIG.cnf w+b 602 1 2<br>[2020-02-21 18:55:00.526]: [E]-[errDump.appendErr]  restart[DTU Parameters or firmware are updated!];<br>[2020-02-21 18:55:00.528]: lualibc_fopen_ext /lib_err.txt w+b 602 1 2<br>......<br>[2020-02-21 18:55:04.144]: [E]-[errDump.libErr] restart[DTU Parameters or firmware are updated!];<br>[2020-02-21 18:55:05.645]: [I]-[poweron reason:]    3<br></code></pre><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;"><b><strong><strong><em>第三步</em></strong></strong></b></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;">参数需要网页配置，也就是刚才看设备的网址<a target="_blank" rel="noopener" href="http://dtu.openluat.com/%EF%BC%8C%E5%8F%82%E6%95%B0%E4%BC%BC%E4%B9%8E%E8%A6%81%E8%AE%BE%E5%A4%87%E5%88%B0%E7%BB%84%E4%B8%8A%EF%BC%8C%E6%B5%8B%E8%AF%95%E4%B8%AD%E8%AE%BE%E7%BD%AE%E7%9A%84%E5%87%A0%E4%B8%AA%E5%8F%82%E6%95%B0%EF%BC%8C">http://dtu.openluat.com/，参数似乎要设备到组上，测试中设置的几个参数，</a><br>基本参数：透传、不加、不换、首次登陆服务器发送{csq:rssi,imei:imei,iccid:iccid,ver:Version}；串口参数：串口2启用；网络通道参数：通道1启动，SOCKET、TCP协议、心跳间隔时间60秒、TCP通道捆绑的串口ID-2、socket的地址或域名及端口来自<a target="_blank" rel="noopener" href="http://tcplab.openluat.com/%EF%BC%8C%E7%A1%AE%E5%AE%9A%E4%BF%9D%E5%AD%98%E3%80%82">http://tcplab.openluat.com/，确定保存。</a></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;"><b><strong><strong><em>第四步</em></strong></strong></b></p><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;">重起模块，更新参数然后再重启，打开串口2，速率115200<br>收到注册包，然后串口发送README.md，其间会有心跳包保活，网页发送Tencent Files，串口也能收到</p><pre style="font-family: Menlo, Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 0px; max-height: 400px; color: rgb(68, 68, 68);"><code style="font-family: Menlo, Monaco, Consolas, &quot;Lucida Console&quot;, &quot;Courier New&quot;, monospace; font-size: 0.92857em; background: rgb(243, 243, 240); padding: 3px; color: rgb(68, 68, 68);">来自 117.132.196.99:5336 2020/2/21 下午7:27:17<br>&#123;"ver":"1.8.10","csq":14,"imei":"---","iccid":"---"&#125;<br>来自 117.132.196.99:5336 2020/2/21 下午7:29:22<br>README.md<br>来自本页面 2020/2/21 下午7:30:40<br>Tencent Files<br></code></pre><p style="color: rgb(68, 68, 68); font-family: &quot;Droid Serif&quot;, Georgia, &quot;Times New Roman&quot;, STHeiti, serif;">这只是冰山一角，其它功能逐渐体验吧</p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/21/700/" data-id="ckkfmdgd700asvkcgg0fw4juo" data-title="体验DTU的流水帐" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-699" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/21/699/" class="article-date">
  <time class="dt-published" datetime="2020-02-21T10:12:14.000Z" itemprop="datePublished">2020-02-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/21/699/">720S模块使用ECM</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>本文介绍如何在linux下使用Air720S系列模块ECM网卡功能。</p>
</blockquote>
<p>@[TOC]</p>
<h2 id="设置模块为ECM网卡模式"><a href="#设置模块为ECM网卡模式" class="headerlink" title="设置模块为ECM网卡模式##"></a>设置模块为ECM网卡模式##</h2><ul>
<li><p>AT+SETUSB?查询是否为ECM模式，1是RNDIS网卡，2是ECM网卡</p>
</li>
<li><p>AT+SETUSB=2使模块转化为ECM网卡模式</p>
</li>
</ul>
<ul>
<li>注意：该命令设置后需要重启才能生效，重启后会自动保存配置，之后不需要再进行配置。有些linux内核版本自动打开CDC_ether驱动的，如果没有打开，需要进行下面的配置。</li>
</ul>
<h2 id="linux下加载ECM驱动"><a href="#linux下加载ECM驱动" class="headerlink" title="linux下加载ECM驱动"></a>linux下加载ECM驱动</h2><blockquote>
<p>正常情况下linux都默认打开了ECM功能，如果没有打开，请选择以下方式进行修改。<br>1.编译的时候通过编译菜单是否添加ECM功能，详细操作请看<a href="#1.%E7%BC%96%E8%AF%91%E5%86%85%E6%A0%B8">编译内核</a><br>2.如果没有ECM功能模块（CDC_ether)请看操作<a href="#2.%E5%AE%89%E8%A3%85cdc_ether%E6%A8%A1%E5%9D%97">安装cdc_ether模块</a><br>使用lsmod查询一下是否存在cdc_ether模块，如果已经有了cdc_ether模块但是ECM仍不能使用，请看操作<a href="#3.%E4%BF%AE%E6%94%B9USB%E9%A9%B1%E5%8A%A8">修改USB驱动</a></p>
</blockquote>
<h3 id="1-编译内核"><a href="#1-编译内核" class="headerlink" title="1. 编译内核"></a>1. 编译内核</h3><ul>
<li><strong>Newer than 2.6 版本</strong></li>
</ul>
<hr>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_32995.jpg"></p>
<hr>
<ul>
<li><strong>Older than 2.6 版本</strong></li>
</ul>
<hr>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_91594.png"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_28729.png"><br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_10058.jpg"></p>
<hr>
<p>###2.安装cdc_ether模块</p>
<hr>
<ul>
<li><strong>下载源码</strong></li>
</ul>
<hr>
<p>下载对应内核的源码，cdc_ether的源码是在[kernel]/drivers/net/usb/cdc_ether.c<br>cd到该目录下。</p>
<hr>
<ul>
<li><strong>编译</strong></li>
</ul>
<hr>
<p>建立一个modules文件夹，新建一个Makefile文件，将cdc_ether.c也copy到该文件夹中。修改Makefile文件如下图所示：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_22508.png"></p>
<p>保存退出之后，直接make</p>
<hr>
<ul>
<li><strong>加载</strong></li>
</ul>
<hr>
<p>将编译生成的cdc_ether.ko复制到内核文件夹中。<br><em>cp cdc_ether.ko /lib/modules/5.3.0/kernel/drivers/net/usb/</em><br>在该文件下 <em>depmod -a</em> 一下，之后再使用 <em>modprobe cdc_ether</em> 加载模块</p>
<hr>
<p>###3.修改USB驱动</p>
<ul>
<li>参考文档：</li>
</ul>
<hr>
<ul>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/79">http://oldask.openluat.com/article/79</a></li>
</ul>
<ul>
<li><a target="_blank" rel="noopener" href="https://blog.csdn.net/tangchao198507/article/details/6122489">https://blog.csdn.net/tangchao198507/article/details/6122489</a></li>
</ul>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/21/699/" data-id="ckkfmdgd600arvkcg35asds4l" data-title="720S模块使用ECM" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-26" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/20/26/" class="article-date">
  <time class="dt-published" datetime="2020-02-20T13:37:55.000Z" itemprop="datePublished">2020-02-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/20/26/">码夫支付平台常见问题及解答</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="阅读提示：电脑浏览可Ctrl-F进行关键字查询，找到自己想要了解的内容。"><a href="#阅读提示：电脑浏览可Ctrl-F进行关键字查询，找到自己想要了解的内容。" class="headerlink" title="阅读提示：电脑浏览可Ctrl+F进行关键字查询，找到自己想要了解的内容。"></a>阅读提示：电脑浏览可Ctrl+F进行关键字查询，找到自己想要了解的内容。</h1><h2 id="1-问：总代理如何对次级代理名下的设备进行编辑？（设备编辑）"><a href="#1-问：总代理如何对次级代理名下的设备进行编辑？（设备编辑）" class="headerlink" title="1.问：总代理如何对次级代理名下的设备进行编辑？（设备编辑）"></a>1.问：总代理如何对次级代理名下的设备进行编辑？（设备编辑）</h2><p>  答：A.码夫支付平台的权限是这样设计的：设备的拥有者才有权利编辑设备，越级编辑是不可以的。<br>      B.在某些场景场景下，例如设备要返厂回收，总代理要对次级代理的设备进行编辑，首先要把设备回收，如图1.1，回收之后总代理才能对设备进行编辑。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200220212246997_5ed9ac057d2faa290afe055a9e60b22.png" alt="alt"><br> 图1.1</p>
<h2 id="2-问：如图2-1，扫码消费者扫码后此类情况是什么问题？（设备状态）"><a href="#2-问：如图2-1，扫码消费者扫码后此类情况是什么问题？（设备状态）" class="headerlink" title="2.问：如图2.1，扫码消费者扫码后此类情况是什么问题？（设备状态）"></a>2.问：如图2.1，扫码消费者扫码后此类情况是什么问题？（设备状态）</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200220212406648_8e248d8909134231fb9fb8692065c7b.jpg" alt="alt"><br>图2.1</p>
<p>  答：这种状态表示设备不在线。扫码页面提示：设备正在加速联网，请一分钟后再试。这样的提示是为了给扫码消费者一个比较好的提示，并不是表示设备真的在尝试联网，设备是处于不在线的状态，在后台也可以看的到。</p>
<h2 id="3-问：如果您在提现一笔钱后，发现余额并没有减少你提取的数，这是怎么回事？（余额提现）"><a href="#3-问：如果您在提现一笔钱后，发现余额并没有减少你提取的数，这是怎么回事？（余额提现）" class="headerlink" title="3.问：如果您在提现一笔钱后，发现余额并没有减少你提取的数，这是怎么回事？（余额提现）"></a>3.问：如果您在提现一笔钱后，发现余额并没有减少你提取的数，这是怎么回事？（余额提现）</h2><p>  答：只要有消费者在您的设备上消费，可提现余额就会实时的变化，所以，您提现的同时可能有人消费了，有资金进入你的账户，就会导致你觉得资金变化不对，如果您有疑问可以联系码夫平台工作人员，查看平台的数据，每一笔账都有记录，可以准确得查看账目是否准确。</p>
<h2 id="4-问：入驻平台后，有哪些收费项？（收费）"><a href="#4-问：入驻平台后，有哪些收费项？（收费）" class="headerlink" title="4.问：入驻平台后，有哪些收费项？（收费）"></a>4.问：入驻平台后，有哪些收费项？（收费）</h2><p>  答：后续我们可能会收取每年每个设备20元的流量费用。后台其他的额外功能会以增值服务的方式提供，基础功能不收费。基础功能包含码夫支付平台的全部功能除了支付对接和自定义串口。其他的额外功能通常是指您的定制需求。</p>
<h2 id="5-问：如果码夫支付平台的账号泄露了，钱被提走了，怎么办？（账户被盗）"><a href="#5-问：如果码夫支付平台的账号泄露了，钱被提走了，怎么办？（账户被盗）" class="headerlink" title="5.问：如果码夫支付平台的账号泄露了，钱被提走了，怎么办？（账户被盗）"></a>5.问：如果码夫支付平台的账号泄露了，钱被提走了，怎么办？（账户被盗）</h2><p>  答：这样的情况，建议报警，码夫平台会配合警方，为警方提供警方需要的且我们能提供的信息。</p>
<h2 id="6-问：码夫支付开发板可以对接微信支付海外商户号吗？（微信支付对接）"><a href="#6-问：码夫支付开发板可以对接微信支付海外商户号吗？（微信支付对接）" class="headerlink" title="6.问：码夫支付开发板可以对接微信支付海外商户号吗？（微信支付对接）"></a>6.问：码夫支付开发板可以对接微信支付海外商户号吗？（微信支付对接）</h2><p>  答：现有系统无法对接微信支付海外商户号，需要做开发来适配。</p>
<h2 id="7-问：码夫支付平台如何批量导出SIM卡号和IMEI号吗？（批量操作）"><a href="#7-问：码夫支付平台如何批量导出SIM卡号和IMEI号吗？（批量操作）" class="headerlink" title="7.问：码夫支付平台如何批量导出SIM卡号和IMEI号吗？（批量操作）"></a>7.问：码夫支付平台如何批量导出SIM卡号和IMEI号吗？（批量操作）</h2><p>  答：客户端不能进行这两类批量操作，如果需要，可以联系码夫支付平台工作人员帮助导出。</p>
<h2 id="8-问：测试账号添加设备后，多久可以在平台上显示？"><a href="#8-问：测试账号添加设备后，多久可以在平台上显示？" class="headerlink" title="8.问：测试账号添加设备后，多久可以在平台上显示？"></a>8.问：测试账号添加设备后，多久可以在平台上显示？</h2><p>  答：立即可以。</p>
<h2 id="9-问：提现手续费（余额提现）"><a href="#9-问：提现手续费（余额提现）" class="headerlink" title="9.问：提现手续费（余额提现）"></a>9.问：提现手续费（余额提现）</h2><p>  答：费率都是千分之六。</p>
<h2 id="10-问：在微信支付对接的时候，是否可以使用任意一个商户号？（微信对接）"><a href="#10-问：在微信支付对接的时候，是否可以使用任意一个商户号？（微信对接）" class="headerlink" title="10.问：在微信支付对接的时候，是否可以使用任意一个商户号？（微信对接）"></a>10.问：在微信支付对接的时候，是否可以使用任意一个商户号？（微信对接）</h2><p>   答：码夫支付平台申请的公众号，是码夫服务商的子商户，非子商户，无法对接。我们不会申请T+1，1%的商户号。在微信支付对接时，要使用我们申请的商户号。</p>
<h2 id="11-问：营业额查询"><a href="#11-问：营业额查询" class="headerlink" title="11.问：营业额查询"></a>11.问：营业额查询</h2><p>答：在码夫支付平台上，营业额数据只保留三个月的记录。需要查询三个月之前的营业额数据，可以向码夫工作人员提供IMEI号，由工作人员为您查询。</p>
<h2 id="12-问：码夫支付平台可以获取消费者哪些信息"><a href="#12-问：码夫支付平台可以获取消费者哪些信息" class="headerlink" title="12.问：码夫支付平台可以获取消费者哪些信息"></a>12.问：码夫支付平台可以获取消费者哪些信息</h2><p>答：对于某一个订单，我们可以查询到该订单的微信支付订单号、消费者的openid等公开信息，不能获取私人信息。</p>
<h2 id="13-问：微信支付对接费用"><a href="#13-问：微信支付对接费用" class="headerlink" title="13.问：微信支付对接费用"></a>13.问：微信支付对接费用</h2><p>答：只有总代理账号才能微信支付对接，进行微信支付对接后总代理可以资金自管理，向消费者展示自己的logo和名称。两种方式获取微信支付对接服务，支付1000元或者一次性下单5个开发板。</p>
<h2 id="14-问：提现手续费相"><a href="#14-问：提现手续费相" class="headerlink" title="14.问：提现手续费相"></a>14.问：提现手续费相</h2><p>答：码夫支付平台对提现不收取任何费用，平台上显示的提现手续费是千分之六，这个是腾讯公司收取的提现服务费，不是码夫支付平台收取的。</p>
<h2 id="15-问：有关于流量卡"><a href="#15-问：有关于流量卡" class="headerlink" title="15.问：有关于流量卡"></a>15.问：有关于流量卡</h2><p>答：流量卡有一个管理后台，购买流量卡的手机号就是登录账号，初始密码是888888，网址是：<a target="_blank" rel="noopener" href="http://sim.openluat.com/login%EF%BC%8C%E6%B5%81%E9%87%8F%E5%8D%A1%E6%AC%A0%E8%B4%B9%E4%B8%80%E5%AE%9A%E6%97%B6%E9%97%B4%E4%BC%9A%E8%A2%AB%E4%BD%9C%E5%BA%9F%E6%8E%89%EF%BC%8C%E8%AF%B7%E5%8F%8A%E6%97%B6%E7%99%BB%E5%BD%95%E6%9F%A5%E8%AF%A2%E6%B5%81%E9%87%8F%E5%8D%A1%E7%8A%B6%E6%80%81%E4%BD%99%E9%A2%9D%EF%BC%8C%E5%8F%8A%E6%97%B6%E5%85%85%E5%80%BC%E3%80%82">http://sim.openluat.com/login，流量卡欠费一定时间会被作废掉，请及时登录查询流量卡状态余额，及时充值。</a></p>
<h2 id="16-问：搭建自己的平台"><a href="#16-问：搭建自己的平台" class="headerlink" title="16.问：搭建自己的平台"></a>16.问：搭建自己的平台</h2><p>答：用码夫支付平台的api，自己来开发后台和前端就可以，码夫支付平台为您提供设备状态接口，启动设备接口。目前不收取费用。</p>
<h2 id="17-问：有关于消费者扫码之后的界面"><a href="#17-问：有关于消费者扫码之后的界面" class="headerlink" title="17.问：有关于消费者扫码之后的界面"></a>17.问：有关于消费者扫码之后的界面</h2><p>答：码夫支付平台上有很多种类的设备，目前面对消费者的界面是统一的，如果您想要符合您设备的界面，码夫可以为你定制。</p>
<h2 id="18-问：微信商户号更改问题"><a href="#18-问：微信商户号更改问题" class="headerlink" title="18.问：微信商户号更改问题"></a>18.问：微信商户号更改问题</h2><p>答：更换微信商户号，会使得现有的会员钱包数据丢失，提现的微信需要重新绑定一下，提现记录不会丢失。</p>
<h2 id="19-问：已经对接了微信公众号，微信支付后，显示的是码夫的logo，如下图所示"><a href="#19-问：已经对接了微信公众号，微信支付后，显示的是码夫的logo，如下图所示" class="headerlink" title="19.问：已经对接了微信公众号，微信支付后，显示的是码夫的logo，如下图所示"></a>19.问：已经对接了微信公众号，微信支付后，显示的是码夫的logo，如下图所示</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200428003012407_%E5%9B%BE%E7%89%871.png" alt="alt"><br>答：多半是因为您的公众号没有上传logo，如下图所示<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200428003126695_%E5%9B%BE%E7%89%872.png" alt="alt"><br>上传logo后就会，消费者支付后就会显示您的logo。</p>
<h2 id="20-问：涉及上传图片的上传问题"><a href="#20-问：涉及上传图片的上传问题" class="headerlink" title="20.问：涉及上传图片的上传问题"></a>20.问：涉及上传图片的上传问题</h2><p>答：在码夫支付平台上，有许多功能需要您上传图片，不同地方上传图片会有不同的要求，要求包括尺寸和大小，如下图所示，请严格按照要求上传，否则会出现错误。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200428003455211_%E5%9B%BE%E7%89%873.png" alt="alt"></p>
<h2 id="21-问：浏览器问题"><a href="#21-问：浏览器问题" class="headerlink" title="21.问：浏览器问题"></a>21.问：浏览器问题</h2><p>答：在有些浏览器打开码夫支付平台，可能会出现页面错误，例如编辑框别浏览器删除不能进行编辑，如下图所示，这种情况请更换浏览器登录，如还出现页面错误，请联系码夫工作人员。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200428003733677_%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20200428003707.jpg" alt="alt"></p>
<h2 id="22-问：系统自动退款"><a href="#22-问：系统自动退款" class="headerlink" title="22.问：系统自动退款"></a>22.问：系统自动退款</h2><p>答：当消费者需要退款时，消费者主动联系您，您在确认情况后可以在后台为消费者退款。还有一种情况，消费者付款后，由于网络延迟或者其他原因，开发板不能发出启动设备的指令，设备不启动，则系统自动退款给消费者。<br>23.问：提现界面，账户余额和可提现余额不同，为什么？<br>是否</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/20/26/" data-id="ckkfmdgaw004cvkcg1p3f98xd" data-title="码夫支付平台常见问题及解答" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-698" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/20/698/" class="article-date">
  <time class="dt-published" datetime="2020-02-20T08:16:45.000Z" itemprop="datePublished">2020-02-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/20/698/">Air720U在linux下的驱动修改</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>参考<a target="_blank" rel="noopener" href="http://doc.openluat.com/article/419/0">Air720模块Linux USB驱动以及PPP拨号说明</a>。</p>
</blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_97752.png"></p>
<p>查看模块的<code>vid</code>与<code>pid</code>，分别是<strong>1782</strong>和<strong>4e00</strong>。</p>
<p><code>Air720U</code>与<code>Air720</code>的驱动修改方式一致，都需要添加对应的<code>Vendor ID</code>和<code>Product ID</code>。增加如下代码：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// option.c</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">const</span> <span class="class"><span class="keyword">struct</span> <span class="title">usb_device_id</span> <span class="title">option_ids</span>[] =</span> &#123;</span><br><span class="line">	&#123; USB_DEVICE(<span class="number">0x1782</span>, <span class="number">0x4e00</span>) &#125;,</span><br><span class="line">	...</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">static</span> <span class="keyword">int</span> <span class="title">option_probe</span><span class="params">(struct usb_serial *serial, <span class="keyword">const</span> struct usb_device_id *id)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	...</span><br><span class="line">	<span class="keyword">if</span> (dev_desc-&gt;idVendor == cpu_to_le16(<span class="number">0x1782</span>) &amp;&amp; dev_desc-&gt;idProduct == cpu_to_le16(<span class="number">0x4e00</span>) &amp;&amp; iface_desc-&gt;bInterfaceNumber &lt;= <span class="number">1</span>)</span><br><span class="line">	&#123;</span><br><span class="line">		<span class="keyword">return</span> -ENODEV;</span><br><span class="line">	&#125;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>剩余部分请参考Air720的驱动修改来操作。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/20/698/" data-id="ckkfmdgd600aqvkcggn4hb3px" data-title="Air720U在linux下的驱动修改" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-697" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/19/697/" class="article-date">
  <time class="dt-published" datetime="2020-02-19T07:49:23.000Z" itemprop="datePublished">2020-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/19/697/">合宙模块iRTU相关资料汇总</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-LUA-SmartDTU固件"><a href="#1-LUA-SmartDTU固件" class="headerlink" title="1. LUA SmartDTU固件"></a>1. LUA SmartDTU固件</h2><ul>
<li><h4 id="1-1-主要资源"><a href="#1-1-主要资源" class="headerlink" title="1.1 主要资源"></a>1.1 主要资源</h4><ul>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">SmartDTU开源项目简介</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/hotdll/iRTU">SmartDTU开源项目资料获取</a></li>
<li><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/av41012302">SmartDTU开源项目视频教程</a></li>
<li><a target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&k=5l2WDTj">iRTU技术支持qq群</a></li>
</ul>
</li>
<li><h4 id="1-2-相关文章"><a href="#1-2-相关文章" class="headerlink" title="1.2 相关文章"></a>1.2 相关文章</h4><ul>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">SmartDTU 学习日记 （1）：认识iRTU开源电路</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">SmartDTU 学习日记 （2）：实现最基本的一个应用-RS485透传</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">SmartDTU 学习日记 （3）：PC电脑通过UDP与iRTU通讯的一个小例子</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">稀饭放姜 SmartDTU 学习日记 （4）：Websokcet手机客户端通过iRTU控制Modbus继电器</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/672/0">稀饭放姜 SmartDTU 学习日记 （5）：用电脑采集Modbus温湿度传感器数据</a></li>
</ul>
</li>
</ul>
<h2 id="2-LUA-SmartDTU相关调试板"><a href="#2-LUA-SmartDTU相关调试板" class="headerlink" title="2. LUA SmartDTU相关调试板"></a>2. LUA SmartDTU相关调试板</h2><ul>
<li><h4 id="2G-DTU调试板"><a href="#2G-DTU调试板" class="headerlink" title="2G DTU调试板"></a>2G DTU调试板</h4><ul>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/df_%E7%94%9F%E4%BA%A7_20200219_161429_469847_DTU-Air202-%E5%B7%A5%E7%A8%8B%E6%96%87%E4%BB%B6.zip">设计文件</a></li>
<li><a target="_blank" rel="noopener" href="http://m.openluat.com/product/727">购买链接</a></li>
</ul>
</li>
<li><h4 id="4G-DTU调试板"><a href="#4G-DTU调试板" class="headerlink" title="4G DTU调试板"></a>4G DTU调试板</h4><ul>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/h_d_m_file_20200219160052_DTU-Air720D%20%E7%A1%AC%E4%BB%B6%E7%94%A8%E6%88%B7%E6%89%8B%E5%86%8C.pdf">硬件手册</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/df_%E7%94%9F%E4%BA%A7_20200219_160327_233842_DTU-Air720D-V2-20190218.zip">设计文件</a></li>
<li><a target="_blank" rel="noopener" href="http://m.openluat.com/product/724">购买链接</a></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/19/697/" data-id="ckkfmdgd600apvkcgh0w6bu85" data-title="合宙模块iRTU相关资料汇总" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-25" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/19/25/" class="article-date">
  <time class="dt-published" datetime="2020-02-18T16:26:50.000Z" itemprop="datePublished">2020-02-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/19/25/">晨旭Lua系列入门教程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="第一期-下载调试工具LuaTools的使用指南"><a href="#第一期-下载调试工具LuaTools的使用指南" class="headerlink" title="第一期 下载调试工具LuaTools的使用指南"></a>第一期 下载调试工具LuaTools的使用指南</h1><h4 id="1-下载LuaTools工具"><a href="#1-下载LuaTools工具" class="headerlink" title="1 下载LuaTools工具"></a>1 下载LuaTools工具</h4><p><a href="#title1.1">1.1 2G模块烧写教程（Air2xx系列、Air8xx系列）：</a></p>
<p><a href="#title1.2">1.2 刷入AT版本的lod</a></p>
<p><a href="#title1.3">1.3 刷入luat版本的lod</a></p>
<p><a href="#title1.4">1.4 下载lua脚本文件</a></p>
<p><a href="#title1.5">1.5 4G模块烧写教程（Air7xx系列）：</a></p>
<p><a href="#title1.6">1.6 安装驱动</a></p>
<p><a href="#title1.7">1.7 下载AT版本的固件</a></p>
<p><a href="#title1.8">1.8 下载LUAT底层固件</a></p>
<p><a href="#title1.9">1.9 烧录脚本文件</a></p>
<h4 id="2-控制LED小灯"><a href="#2-控制LED小灯" class="headerlink" title="2 控制LED小灯"></a>2 控制LED小灯</h4><p><a href="#title2.1">2.1 准备一个代码编辑器</a></p>
<p><a href="#title2.2">2.2 模块化编程</a></p>
<p><a href="#title2.3">2.3 连接硬件</a></p>
<p><a href="#title2.4">2.4 点亮LED小灯</a></p>
<p><a href="#title2.5">2.5 让LED灯闪烁起来</a></p>
<h4 id="3-LUAT程序的基本时序"><a href="#3-LUAT程序的基本时序" class="headerlink" title="3 LUAT程序的基本时序"></a>3 LUAT程序的基本时序</h4><p><a href="#title3.1">3.1 简单定时器函数的使用</a></p>
<p><a href="#title3.2">3.2 协程</a></p>
<p><a href="#title3.3">3.3 程序注册</a></p>
<h4 id="4-学会使用并看懂luatools的trace信息"><a href="#4-学会使用并看懂luatools的trace信息" class="headerlink" title="4 学会使用并看懂luatools的trace信息"></a>4 学会使用并看懂luatools的trace信息</h4><p><a href="#title4.1">4.1 trace的几个基本部分</a></p>
<p><a href="#title4.2">4.2 自定义输出trace（LuaTask格式）</a></p>
<p><a href="#title4.3">4.3 语法错误输出</a></p>
<h4 id="5-socket代码详解"><a href="#5-socket代码详解" class="headerlink" title="5 socket代码详解"></a>5 socket代码详解</h4><p><a href="#title5.1">5.1 Socket(TCP/UDP)</a></p>
<p><a href="#title5.2">5.2 代码详解（LuaTask格式）</a></p>
<p><a href="#title5.3">5.3 完整代码</a></p>
<p><a href="#title5.4">5.4 验证功能</a></p>
<h4 id="6-mqtt代码详解"><a href="#6-mqtt代码详解" class="headerlink" title="6 mqtt代码详解"></a>6 mqtt代码详解</h4><p><a href="#title6.1">6.1 先定义一个假装能用来测试的mqtt需求</a></p>
<p><a href="#title6.2">6.2 建立Lua文件</a></p>
<p><a href="#title6.3">6.3 完整代码</a></p>
<p><a href="#title6.4">6.4 实现协议需求</a></p>
<h4 id="7-串口收发"><a href="#7-串口收发" class="headerlink" title="7 串口收发"></a>7 串口收发</h4><p><a href="#title7.1">7.1 官方demo代码</a></p>
<p><a href="#title7.2">7.2 先定义一个假装能用来测试的串口收发规则</a></p>
<p><a href="#title7.3">7.3 建立文件结构</a></p>
<p><a href="#title7.4">7.4 实现功能</a></p>
<p><a href="#title7.5">7.5 处理串口数据截断问题</a></p>
<p><a href="#title7.6">7.6 完整代码</a></p>
<p><a href="#title7.7">7.7 最终测试</a></p>
<p>本来是想直接开始写脚本的hello world的教程，但是发现和多人从最基本的烧程序都不知道从何入手，官网给的资料也并不多（我在刚用的时候也卡在这里很久），所以就单独出一期LuaTools的使用教程。<br><a href="#title1"></a></p>
<h2 id="下载LuaTools工具"><a href="#下载LuaTools工具" class="headerlink" title="下载LuaTools工具"></a>下载LuaTools工具</h2><p>下载工具一般要经过以下步骤：</p>
<p>打开合宙官网：<a target="_blank" rel="noopener" href="http://www.openluat.com/">http://www.openluat.com/</a><br>选择上面的“产品中心”，随便选一个产品，如：Air202 GPRS 通信模块<br>点击模块介绍那边的“资料下载”选项卡<br>点击“[LuaTools] Luat下载调试工具x.x.x”下载<br>当然，如果嫌麻烦，直接打开下面链接下载吧。。</p>
<p>下载后可能会进行自动升级，这个工具基本上是持续使用，都不会出现版本过旧的问题 （截止发稿Luatools最新版本为1.7.24）<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001241028_attachments-2018-08-CJ5id45L5b7eaeb7523b0.png" alt="alt"><br>↑软件界面<br><a href="#title2"></a></p>
<h2 id="2G模块烧写教程（Air2xx系列、Air8xx系列）："><a href="#2G模块烧写教程（Air2xx系列、Air8xx系列）：" class="headerlink" title="2G模块烧写教程（Air2xx系列、Air8xx系列）："></a>2G模块烧写教程（Air2xx系列、Air8xx系列）：</h2><p>（4G模块烧录方法请看往下翻，看下一部分）</p>
<p>这时候，我们只需要用usb转串口线，与给模块/开发板的HOST串口相连，GND相连，并给模块上点即可</p>
<pre><code>注意：模块的HOST口使用的是921600波特率，如果你使用的是劣质串口芯片（如质量差的pl2303以及山寨的ch340之类的），会出现无法通讯的现象。并且需要保证模块供电充足，不然会出现无限重启的状况。
</code></pre>
<h3 id="下载lod固件文件-更改AT和luat底层版本"><a href="#下载lod固件文件-更改AT和luat底层版本" class="headerlink" title="下载lod固件文件/更改AT和luat底层版本"></a>下载lod固件文件/更改AT和luat底层版本</h3><p>lod文件相当于一个模块的底层部分，lod文件可以分为AT版与luat版</p>
<p>AT版只能使用AT命令对模块进行控制，AT串口为uart1口<br>luat版为运行lua脚本所使用的底层，可对模块内部进行片内编程，完成一部分或全部的本应由外接单片机完成的工作</p>
<h3 id="刷入AT版本的lod"><a href="#刷入AT版本的lod" class="headerlink" title="刷入AT版本的lod"></a>刷入AT版本的lod</h3><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001402829_attachments-2018-08-0bO65Rpw5b7eaee4001e1.png" alt="alt"><br>刷入AT版本的固件十分简单，在上面连接模块完成之后，确保串口选项卡的串口为你设备的串口值，点击菜单中的AT–切换为标准的AT版本，如下图：</p>
<p>点击下载为模块烧入AT固件：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001439626_attachments-2018-08-YoR7nKRd5b7eaf4e48f99.png" alt="alt">![alt](<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001535502_attachments-2018-08-YPmuTKwZ5b7eaf06b4f37.png">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001535502_attachments-2018-08-YPmuTKwZ5b7eaf06b4f37.png</a><br>这样，AT版本固件的lod就烧录完成了。<br><a href="#title3"></a></p>
<h3 id="刷入luat版本的lod"><a href="#刷入luat版本的lod" class="headerlink" title="刷入luat版本的lod"></a>刷入luat版本的lod</h3><p>luat的固件因为需求不同，所以为了节省空间，提供了多种库的组合<br>luat的固件可以在下载工具目录的/LuaTools x.x.x/8955Lod/找到，每个版本的区别可以参考readme.txt文件中的描述，部分内容也贴在下面：</p>
<pre><code>Luat_VXXXX_8955.lod：不支持SSL、TTS、SPI接口的LCD功能
Luat_VXXXX_8955_SSL.lod：支持SSL功能
Luat_VXXXX_8955_SSL_TTS.lod：支持SSL、TTS功能，不支持MP3、MIDI、录音功能
Luat_VXXXX_8955_SSL_UI.lod：支持SSL、SPI接口的LCD功能
Luat_VXXXX_8955_TTS_UI.lod：支持TTS、SPI接口的LCD功能
Luat_VXXXX_8955_TTS1.lod：支持TTS功能
Luat_VXXXX_8955_TTS2.lod：支持TTS功能、不支持MP3、MIDI、录音、json
Luat_VXXXX_8955_UI.lod：支持SPI接口的LCD功能
Luat_VXXXX_8955_SSL_FLOAT.lod：支持SSL功能、浮点数
Luat_VXXXX_8955_SSL_UI_FLOAT.lod：支持SSL功能、PI接口的LCD功能、浮点数
Luat_VXXXX_8955F.lod：64M flash版本（Air202F），支持SSL、TTS、SPI接口的LCD功能
</code></pre>
<p>我以烧录最基本的Luat_VXXXX_8955.lod为例，首先在调试工具中确保串口选项卡的串口为你设备的串口值，点击下载LOD(core)按钮，选中之前在工具目录的lod文件：<br>)![alt](<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001640169_attachments-2018-08-UI7Ip9Yl5b7eaf14a2596">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001640169_attachments-2018-08-UI7Ip9Yl5b7eaf14a2596</a>.<br>选中确认无误后，点击下载进行写入lod的操作<br>png)<img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001750895_attachments-2018-08-YoR7nKRd5b7eaf4e48f99.png" alt="alt"><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219001857605_attachments-2018-08-Hql1h9uA5b7eaf5545a62.png" alt="alt"><br>上面下载失败了，要重新下载一遍<br>###下载lua脚本文件</p>
<p>由于luat模块的特色就是lua二次开发，所以下载烧录脚本的方法也是必须掌握的，下面以烧录S9开发板的示例程序为例(S9就是那个板载usb的开发板)</p>
<p>lib库已在luatools中自带，无需再自己下载</p>
<h3 id="烧录S9需要的底层lod文件"><a href="#烧录S9需要的底层lod文件" class="headerlink" title="烧录S9需要的底层lod文件"></a>烧录S9需要的底层lod文件</h3><p>S9需要的底层lod是Luat_VXXXX_8955_UI.lod，这里的UI库包含了字库和各种SPI、I2C屏幕的驱动<br>烧录步骤不再重复，请确保烧录最后成功了<br>烧录lua脚本</p>
<p>lua脚本分为两部分：一个部分是官方写的lib库文件（library），另一部分是用户自己的脚本文件。一般lib的文件不用去修改，除非有特殊需求。</p>
<pre><code>lua库分为两个版本：
一个是老的script，
另一个是由稀饭放姜进行编写的script_LuaTask库

新项目都用script_LuaTask进行编写；老用户使用了script编写的，如码夫支付模块，可以继续用老版本，没有任何影响。
</code></pre>
<p>这里烧录的S9开发板就是使用的script_LuaTask进行编写的，具体步骤如下：</p>
<p>点击下载lua脚本按钮，将文件列表全部清空：<br>![alt](<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002050281_attachments-2018-09-DIs4Ap8Z5b9b64f9e550e_QQ%E6%88%AA%E5%9B%BE20180914153616">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002050281_attachments-2018-09-DIs4Ap8Z5b9b64f9e550e_QQ截图20180914153616</a>.<br>点击添加脚本，将刚刚从git仓库下载的Luat_2G_RDA_8955/script_LuaTask/product/LuatBoard_Air202/demo下的所有文件全部选中，点击打开确认选中</p>
<pre><code>这里如果没有选择lib文件，工具会自动进行提示
</code></pre>
<p>点击下载，会弹出对话框让你补全lib库文件，这里我们选择“优先推荐”的LuaTask库，点击确定：<br>png)<img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002223864_attachments-2018-08-3rV4WVgP5b7eaf905eec1.png" alt="alt"><br>最后，等待下载成功即可<br>![alt](<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002540439_attachments-2018-09-F81NV54U5b9b65a8806a1_QQ%E6%88%AA%E5%9B%BE20180914153841.p">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002540439_attachments-2018-09-F81NV54U5b9b65a8806a1_QQ截图20180914153841.p</a><br>关闭对话框，即可看到设备运行的trace信息，这个信息可能会在下一章进行解释：<br>ng)<img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219002630258_attachments-2018-08-tnZsYZc95b7eafbeb0c92.png" alt="alt"><br>##4G模块烧写教程（Air7xx系列）：</p>
<p>这里我们使用Air720开发板（S720 Border）作为演示，首先需要将开发板按如下方式连接电脑：<br><img id="portrait" src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200219201026352_attachments-2018-09-Fqsh4Frw5b9b543197651_QQ图片20180914142039.png></img></p>
<p>连接后，我们会在设备管理器看到有几个未安装的驱动，我们需要安装上这些驱动</p>
<h3 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h3><pre><code>&lt;img id=&quot;portrait&quot; src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012058993_attachments-2018-09-OcuKrp1S5b9b596995edb_QQ截图20180914144646.png&gt;&lt;/img&gt;
对于win8/win8.1/win10电脑，在安装驱动前需要进行如下操作（win7可以跳过该部分直接安装驱动）：
win8：在桌面右侧点击弹出菜单中的“设置”，点击“更改电脑配置”，在左侧点击“通用”，接着点击右侧“高级启动”中的“立刻重启”按钮
win10：按下win+i快捷键，点击“更新和安全”—“恢复”—“高级启动”下的“立即重启”按钮

接着就进入了高级启动界面，选择“疑难解答”—“高级选项”—“启动设置”—“重启”
在启动设置页按F7选择禁用驱动强制数字签名，就可以在该模式下开机了。
</code></pre>
<p>我们可以在<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/4g/Air720D.html%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%B5%84%E6%96%99%E4%B8%8B%E8%BD%BD%EF%BC%8C%E4%B8%8B%E8%BD%BD[%E9%A9%B1%E5%8A%A8%E7%A8%8B%E5%BA%8F]">http://www.openluat.com/Product/4g/Air720D.html页面的资料下载，下载[驱动程序]</a> AirM2M_USB_Download&amp;Com_Driver_for_4G_V1.0</p>
<p>安装压缩包中的驱动。注意，32位与64位驱动不同，请根据自己电脑选好安装包exe<br>安装过程中肯定会弹出下面的窗口，点击始终安装即可<br><img id="portrait" src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012324920_attachments-2018-09-whEUtOjF5b9b59a5bf0e1_QQ截图20180914144749.png></img><br>安装成功后，将板子重新连接即可。</p>
<h3 id="下载AT版本的固件"><a href="#下载AT版本的固件" class="headerlink" title="下载AT版本的固件"></a>下载AT版本的固件</h3><pre><code>注意：AT固件也可以直接通过AT指令来进行远程升级，无需使用LuaTools工具，详情请参阅http://oldask.openluat.com/article/186

如果是模块飞线烧录，请先确保可以保证模块的稳定供电，并且烧录时模块不会被重启，按下图进行飞线usb：
</code></pre>
<p>img id=”portrait” src=<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012509038_5_51295.jpg&gt;">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012509038_5_51295.jpg&gt;</a></img><br>打开luatools，将在菜单栏切换为4G模式：</p>
<p>直接点击AT–升级到标准AT版本即可，点击下载：</p>
<p>src=<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012712634_attachments-2018-08-5cy7CJI85b7eafcd118f8.png&gt;">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221012712634_attachments-2018-08-5cy7CJI85b7eafcd118f8.png&gt;</a></img><br>这时工具会进入下载模块，我们可以点击开发板上的“重启”按键，或者开关旁边的拨码开关，下载工具会自动开始下载：</p>
<p>烧录后，我们可以用串口工具，通过虚拟的AT串口来进行AT操作：</p>
<p>同时，也可以从开发板的另一个usb引脚，将拨码改至UART2，进行AT控制：</p>
<h3 id="下载LUAT底层固件"><a href="#下载LUAT底层固件" class="headerlink" title="下载LUAT底层固件"></a>下载LUAT底层固件</h3><p>打开luatools，将在菜单栏切换为4G模式：<br>img id=”portrait” src=<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221020312010_attachments-2018-09-LfNmMIl85b9b5f5070499_QQ%E6%88%AA%E5%9B%BE20180914151206.png&gt;">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221020312010_attachments-2018-09-LfNmMIl85b9b5f5070499_QQ截图20180914151206.png&gt;</a></img><br>首先要先烧录blf底层文件，点击右上角的下载CORE，<br>选择需要烧入的底层文件（可在LuaTools x.x.x\asr1802\CORE\Luat_V0005_ASR1802\文件夹找到），点击下载：<br><img id="portrait" src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221020821228_attachments-2018-09-HDGMkxxe5b9b600493762_QQ截图20180914151508.png></img><br>这时工具会进入下载模块，我们可以点击开发板上的“重启”按键，或者开关旁边的拨码开关，下载工具会自动开始下载：<br>img id=”portrait” src=<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221020928102_attachments-2018-09-PfYPshpL5b9b6076c12ef_QQ%E6%88%AA%E5%9B%BE20180914151701.png&gt;">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221020928102_attachments-2018-09-PfYPshpL5b9b6076c12ef_QQ截图20180914151701.png&gt;</a></img><br><img id="portrait" src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221021012967_attachments-2018-09-UHFzxvQC5b9f0e8be9b41_QQ截图20180917101617.png></img></p>
<p>底层烧录完成。</p>
<h3 id="烧录脚本文件"><a href="#烧录脚本文件" class="headerlink" title="烧录脚本文件"></a>烧录脚本文件</h3><p>我们用demo文件夹中的adc举例，烧录一个完整的脚本工程<br>（如果需要新建项目，千万不要在luatool下建立项目文件夹，不然会在更新时被删掉）<br>点击下载lua脚本，先点击打开4G（.blf）文件按钮，选择之前烧录的底层文件<br>然后点击清空所有：<br><img id="portrait" src=http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200221021152009_attachments-2018-09-DIs4Ap8Z5b9b64f9e550e_QQ截图20180914153616.png></img><br>接着点击添加脚本我们把LuaTools x.x.x\asr1802\lib\demo\adc文件夹下的所有文件添加进去，点击下载脚本<br><img src="http://oldask.openluat.com/file/attachments-2018-09-ZXaS33xT5b9b65294c113_QQ%E6%88%AA%E5%9B%BE20180914153702.png" alt="alt"><br>这是会由于没有添加lib文件夹内的lua库文件而弹出一个对话框，我们直接点击确定，自动补全即可：<br>（如果没补全，那就手动把lib文件夹的所有文件都加进去）<br><img src="http://oldask.openluat.com/file/attachments-2018-09-QVbeorMP5b9b6495a6c41_QQ%E6%88%AA%E5%9B%BE20180914153437.png" alt="alt"><br>接着就和上面烧录固件一样了，点击开发板上的重启按键，或者开关旁边的拨码开关，下载工具会自动开始下载<br><img src="http://oldask.openluat.com/file/attachments-2018-09-PfYPshpL5b9b6076c12ef_QQ%E6%88%AA%E5%9B%BE20180914151701.png" alt="alt"><br><img src="http://oldask.openluat.com/file/attachments-2018-09-sU0R39PO5b9b659ae2c3c_QQ%E6%88%AA%E5%9B%BE20180914153837.png" alt="alt"><br>烧录完成后，关闭烧录对话框，检查一下左上角是否勾上了自动usb口，如果已勾选，等待十几秒后即可看到luatools会输出adc demo的trace：<br><img src="http://oldask.openluat.com/file/attachments-2018-09-Rd74yE8b5b9b660ac91a6_QQ%E6%88%AA%E5%9B%BE20180914154050.png" alt="alt"></p>
<h1 id="第二期-控制LED小灯"><a href="#第二期-控制LED小灯" class="headerlink" title="第二期 控制LED小灯"></a>第二期 控制LED小灯</h1><p>本教程使用的开发板为S9开发板，使用其他开发板的请使用杜邦线连接相关的引脚，代码也请根据需要自行修改</p>
<p>接触过单片机的人应该都知道，使用一款单片机，第一件事就是学会如何点亮LED灯，学会了控制LED灯，就相当于学会了最基础的GPIO高低电平控制操作</p>
<h2 id="准备一个代码编辑器"><a href="#准备一个代码编辑器" class="headerlink" title="准备一个代码编辑器"></a>准备一个代码编辑器</h2><p>代码编辑器有很多可供选择，比如notepad++、Sublime Text</p>
<pre><code>如果你已经可以熟练掌握了某一个代码编辑器，那么你可以直接跳过这一章，直接看代码编写。如果你想试试我推荐的编辑器，那么也可以看下去
</code></pre>
<h4 id="详细的安装和配置，请参考这篇文章vscode-lua开发推荐配置"><a href="#详细的安装和配置，请参考这篇文章vscode-lua开发推荐配置" class="headerlink" title="详细的安装和配置，请参考这篇文章vscode lua开发推荐配置"></a>详细的安装和配置，请参考这篇文章vscode lua开发推荐配置</h4><h2 id="新建一个最基本的工程"><a href="#新建一个最基本的工程" class="headerlink" title="新建一个最基本的工程"></a>新建一个最基本的工程</h2><p>在你觉得适当的位置，新建一个文件夹，名为LUAT-LED，使用你的代码编辑器打开该文件夹，vscode如下图所示操作：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-j0k4s1nt5b800abd3c5ba.png" alt="alt"><br>打开后，在编辑器左侧的文件夹中，右击空白处，新建文件，输入文件名main.lua，回车键保存：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-SRWSpjPq5b800ad3d0255.png" alt="alt"><br>接着，在新建的文件夹中添加如下代码，完成最主要的main.lua文件的编写：</p>
<pre><code>--必须在这个位置定义PROJECT和VERSION变量
--PROJECT：ascii string类型，可以随便定义，只要不使用,就行
--VERSION：ascii string类型，如果使用Luat物联云平台固件升级的功能，必须按照&quot;X.X.X&quot;定义，X表示1位数字；否则可随便定义
PROJECT = &quot;LED-TEST&quot;
VERSION = &quot;0.0.1&quot;
--根据固件判断模块类型
moduleType = string.find(rtos.get_version(),&quot;8955&quot;) and 2 or 4
--加载日志功能模块，并且设置日志输出等级
--如果关闭调用log模块接口输出的日志，等级设置为log.LOG_SILENT即可
require &quot;log&quot;
LOG_LEVEL = log.LOGLEVEL_TRACE
require &quot;sys&quot;
require &quot;net&quot;
--每1分钟查询一次GSM信号强度
--每1分钟查询一次基站信息
net.startQueryAll(60000, 60000)
--加载硬件看门狗功能模块
--根据自己的硬件配置决定：1、是否加载此功能模块；2、配置Luat模块复位单片机引脚和互相喂狗引脚
--合宙官方出售的Air201开发板上有硬件看门狗，所以使用官方Air201开发板时，必须加载此功能模块
--如果用的是720 4g模块，请注释掉这两行
require &quot;wdt&quot;
wdt.setup(pio.P0_30, pio.P0_31)
--加载网络指示灯功能模块
--根据自己的项目需求和硬件配置决定：1、是否加载此功能模块；2、配置指示灯引脚
--合宙官方出售的Air800和Air801开发板上的指示灯引脚为pio.P0_28，其他开发板上的指示灯引脚为pio.P1_1
require &quot;netLed&quot;
netLed.setup(true,moduleType == 2 and pio.P1_1 or pio.P2_0,moduleType == 2 and nil or pio.P2_1)--自动判断2/4g默认网络灯引脚配置
--网络指示灯功能模块中，默认配置了各种工作状态下指示灯的闪烁规律，参考netLed.lua中ledBlinkTime配置的默认值
--如果默认值满足不了需求，此处调用netLed.updateBlinkTime去配置闪烁时长
--加载错误日志管理功能模块【强烈建议打开此功能】
--如下2行代码，只是简单的演示如何使用errDump功能，详情参考errDump的api
require &quot;errDump&quot;
errDump.request(&quot;udp://ota.airm2m.com:9072&quot;)
--加载远程升级功能模块【强烈建议打开此功能】
--如下3行代码，只是简单的演示如何使用update功能，详情参考update的api以及demo/update
-- PRODUCT_KEY = &quot;xxxxxx&quot;
-- require &quot;update&quot;
-- update.request()
--启动系统框架
sys.init(0, 0)
sys.run()
</code></pre>
<p>我们将main.lua和基本的task库文件烧录到开发板中（不烧录会的请看第一章），会发现：并没有什么事情发生<br>因为代码基本是空的啊2333<br>##模块化编程</p>
<p>在编写lua功能时，我们一般会把相似功能的代码放到同一个文件中，写完后只需要在main.lua中添加require语句即可，所以我们需要将main.lua结尾改成如下形式：</p>
<pre><code>....上面一堆代码省略
--加载远程升级功能模块【强烈建议打开此功能】
--如下3行代码，只是简单的演示如何使用update功能，详情参考update的api以及demo/update
-- PRODUCT_KEY = &quot;xxxxxx&quot;
-- require &quot;update&quot;
-- update.request()
require &quot;ledtest&quot;    --新加上的代码
--启动系统框架
sys.init(0, 0)
sys.run()
</code></pre>
<p>添加完后，使用和新建main.lua文件相同的方式，新建一个新的文件ledtest.lua</p>
<p>我们在ledtest.lua的第一行可以先加上如下一句话：</p>
<pre><code>module(..., package.seeall)  --使得文件中的函数在何处都可调用
</code></pre>
<h2 id="连接硬件"><a href="#连接硬件" class="headerlink" title="连接硬件"></a>连接硬件</h2><pre><code>注意：这里演示用的是2g模块，4g模块请详细阅读下面代码注释中的信息进行修改，代码不可以直接拿去用！！
</code></pre>
<p>由于我这里使用的是普通的S9开发板，和一个配套的LED灯小主板，所以我直接将其连接到了双排针上，插入方式如下图：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-dFQTv3VK5b800af7e5562.png" alt="alt"><br>为了照顾其他未使用S9开发板的读者，我将led的电气连接在下方进行标识，有条件的可以手动按下文进行连接（用的是Air202模块，其他模块请根据情况自行修改）：<br>引脚名称     灯序号     另一端连接哪里<br>SPI1_CLK/GPIO_8     LED1     GND<br>SPI1_DO/GPIO_11     LED2     GND<br>SPI1_DI/GPIO_12     LED3     GND<br>UART1_CTS/GPIO_3     LED4     GND<br>UART1_RTS/GPIO_2     LED5     GND</p>
<p>可以看到，每个管脚都有各种复用功能，我们本文之将其作为普通GPIO口使用</p>
<h2 id="点亮LED小灯"><a href="#点亮LED小灯" class="headerlink" title="点亮LED小灯"></a>点亮LED小灯</h2><p>模块中几乎所有的函数都可以在wiki中找到，所以我们也去wiki中进行搜索<br>打开openluat的wiki页：<a target="_blank" rel="noopener" href="http://wiki.openluat.com/">http://wiki.openluat.com/</a><br>在网页左边选择Luat API接口，可以看到所有接口都被整理好放到了这里，点击LuaTask—pins可以找到我们需要的函数接口：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-lhU9G8GF5b800b1502db4.png" alt="alt"><br>这样我们就明白这个改如何点亮LED小灯了，我们将ledtest.lua改成如下代码：</p>
<pre><code>module(..., package.seeall)
require&quot;pins&quot;  --用到了pin库，该库为luatask专用库，需要进行引用
-- GPIO 0到GPIO 31表示为pio.P0_0到pio.P0_31 。
-- GPIO 32到GPIO XX表示为pio.P1_0到pio.P1_(XX-32)，例如GPIO33 表示为pio.P1_1
if moduleType == 2 then
    pmd.ldoset(5,pmd.LDO_VMMC)  --使用某些GPIO时，必须在脚本中写代码打开GPIO所属的电压域，配置电压输出输入等级，这些GPIO才能正常工作
end
--注意！！！4G模块无需设置电压域！
--设置led的GPIO口
local led1 = pins.setup(pio.P0_8,0)--如果你用的是4G模块，请更改这个gpio编号
local led2 = pins.setup(pio.P0_11,0)--如果你用的是4G模块，请更改这个gpio编号
local led3 = pins.setup(pio.P0_12,0)--如果你用的是4G模块，请更改这个gpio编号
local led4 = pins.setup(pio.P0_3,0)--如果你用的是4G模块，请更改这个gpio编号
local led5 = pins.setup(pio.P0_2,0)--如果你用的是4G模块，请更改这个gpio编号
--将gpio口都置为高电平
led1(1)
led2(1)
led3(1)
led4(1)
led5(1)
</code></pre>
<p>更改完保存后，将改好的文件全部烧入模块中，查看效果<br>如果一切正常的话，五个灯都会正常被点亮<br>将led1(1)改为led1(0)即可熄灭第一个灯，以此类推，可以多尝试更改着玩一下，再看下一部分<br>让LED灯闪烁起来</p>
<p>LED灯已经可以点亮了，那么我们就要让它动起来<br>我们可以在wiki页查到，开启一个定时器函数为sys.timerStart(fnc, ms, …)，那么我们可以将代码改成如下样式：</p>
<pre><code>module(..., package.seeall)
require&quot;pins&quot;  --用到了pin库，该库为luatask专用库，需要进行引用
-- GPIO 0到GPIO 31表示为pio.P0_0到pio.P0_31 。
-- GPIO 32到GPIO XX表示为pio.P1_0到pio.P1_(XX-32)，例如GPIO33 表示为pio.P1_1
if moduleType == 2 then
    pmd.ldoset(5,pmd.LDO_VMMC)  --使用某些GPIO时，必须在脚本中写代码打开GPIO所属的电压域，配置电压输出输入等级，这些GPIO才能正常工作
end
--注意！！！4G模块无需设置电压域！
--设置led的GPIO口
local led1 = pins.setup(pio.P0_8,0)--如果你用的是4G模块，请更改这个gpio编号
local led2 = pins.setup(pio.P0_11,0)--如果你用的是4G模块，请更改这个gpio编号
local led3 = pins.setup(pio.P0_12,0)--如果你用的是4G模块，请更改这个gpio编号
local led4 = pins.setup(pio.P0_3,0)--如果你用的是4G模块，请更改这个gpio编号
local led5 = pins.setup(pio.P0_2,0)--如果你用的是4G模块，请更改这个gpio编号
local ledon = false --led是否开启
function changeLED()
    if ledon then
        led1(1)
        led2(1)
        led3(1)
        led4(1)
        led5(1)
    else
        led1(0)
        led2(0)
        led3(0)
        led4(0)
        led5(0)
    end
    ledon = not ledon
    sys.timerStart(changeLED,1000)--一秒后执行指定函数
end
changeLED() --开机后立刻运行该函数
</code></pre>
<p>保存后烧入程序即可，如果不出意外，五个LED灯就应该一秒亮一秒灭了</p>
<p>既然学会了延时、点亮LED、熄灭LED，那么就可以自己尝试编写一个流水灯了，这里不再赘述，请大家自己尝试</p>
<h1 id="第三期-LUAT程序的基本时序"><a href="#第三期-LUAT程序的基本时序" class="headerlink" title="第三期 LUAT程序的基本时序"></a>第三期 LUAT程序的基本时序</h1><p>本文只会介绍LuaTask中多线程任务的基本用法，不会过多的讨论原理，如果需要深入研究，请查看wiki页的详细介绍：<a target="_blank" rel="noopener" href="http://wiki.openluat.com/">http://wiki.openluat.com</a></p>
<pre><code>适合阅读本文的人
至少用过一款单片机的
接触、了解过或听说过rtos、ucos等多线程系统
前几篇文章所提内容都已经懂了的
有耐心看完本文的
对lua语法熟悉的，如不熟悉请移步
http://www.runoob.com/lua/lua-tutorial.html
或
https://www.lua.org/manual/5.1/manual.html
进行学习。
</code></pre>
<p>本文只会介绍LuaTask中多线程任务的基本用法，不会过多的讨论原理，如果需要深入研究，请查看wiki页的详细介绍：<a target="_blank" rel="noopener" href="http://wiki.openluat.com/doc/run/">http://wiki.openluat.com/doc/run/</a></p>
<h2 id="简单定时器函数的使用"><a href="#简单定时器函数的使用" class="headerlink" title="简单定时器函数的使用"></a>简单定时器函数的使用</h2><p>上一章里的点亮led小灯，最后一步是让led灯闪烁起来。习惯了c语言写代码的人可能会发现，这个lua程序中好像没有delay之类的函数。</p>
<p>我们把上一章的代码简化一下，像如下这样：</p>
<pre><code>function sayHello()
print(&quot;hello&quot;)
sys.timerStart(sayHello,1000)--一秒后执行指定函数
print(&quot;bye&quot;)
end

sayHello()

.....其他代码
</code></pre>
<p>这里使用了定时器的接口：sys.timerStart(fnc, ms, …)，用过js之类语言的可能会感到特别熟悉。在luat中，一般不在主线程中使用类似c一样用死循环阻塞式地来延时，取而代之的是这种定时器的结构，流程图如下：</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-2RFA4bxN5b80c9f706619.png" alt="alt"></p>
<p>其实实现上述定时器循环执行某函数的功能，可以直接使用sys.timerLoopStart(fnc, ms, …)接口，改成如下样式：</p>
<p>function sayHello()<br>    print(“hello”)<br>end</p>
<p>sys.timerLoopStart(sayHello,1000)</p>
<p>…..其他代码</p>
<p>Lua<br>Copy</p>
<p>整个流程图便变成了如下的顺序：</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-Lxds7UjR5b80ca16eadd6.png" alt="alt"></p>
<p>为了使函数更简洁，我们可以直接把函数名改成function() ….. end的形式，在函数变量中直接定义要使用的函数：</p>
<p>sys.timerLoopStart(function()<br>                       print(“hello”)<br>                   end,1000)</p>
<p>Lua<br>Copy</p>
<p>甚至可以写成一行：</p>
<p>sys.timerLoopStart(function() print(“hello”) end,1000)</p>
<p>Lua<br>Copy</p>
<p>上述两段代码的功能与一开始的timerLoopStart示例代码的运行结果完全相同</p>
<h2 id="协程"><a href="#协程" class="headerlink" title="协程"></a>协程</h2><p>在wiki页中，给出了这样一段简洁的代码，我们为了照顾不熟悉lua语言的人，稍微改一下代码：</p>
<p>test.lua</p>
<pre><code>function test()
    while true do
        print(&quot;ss function test&quot;)
        sys.wait(1000)          -- 挂起1000ms，同理为每隔1000ms运行一次
    end
end

sys.taskInit(test)

.....其他代码
</code></pre>
<p>在这里，sys.taskInit的作用可以理解为创建了一个新的线程，这个线程运行的内容就是test()函数</p>
<p>在test()进行while true这样的死循环时，并不会使其他程序被阻塞运行，反而是多线程运行的</p>
<p>在LuaTask架构下，协程内的函数可以直接使用sys.wait(ms)函数进行延时操作，延时途中只是将cpu让给了其他需要运行的程序，在倒计时完成后继续该进程的运行，从而实现了延时操作</p>
<p>我们一般会把sys.taskInit内的函数直接写在其中，像下面这样：</p>
<pre><code>sys.taskInit(function()
    while true do
        print(&quot;ss function test&quot;)
        sys.wait(1000)          -- 挂起1000ms，同理为每隔1000ms运行一次
    end
end)

.....其他代码
</code></pre>
<p>相信各位已经可以理解这种写法了（如果从文章开头看到这里了的话），协程的运行流程图如下</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-VchwfAC35b80ca5330f35.png" alt="alt"></p>
<p>我们可以同时开多个线程，使用方法都是一样的</p>
<h2 id="程序注册"><a href="#程序注册" class="headerlink" title="程序注册"></a>程序注册</h2><p>LuaTask可以使用订阅和发布，使某个程序等待另一个程序完成后才继续运行</p>
<p>我们来看最简单的一个示例代码：</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-rxZWfyuj5b80cc9fbd240.png" alt="alt"></p>
<p>程序定义了一个5秒后的定时器，并运行了一个包含了时间订阅等待的函数，整体流程运行如下：</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-v0MVTubI5b80ca9a053cb.png" alt="alt"></p>
<p>这种用法经常用在http、socket等操作和其他需要等待的操作中，利用回调函数可实现等待功能。</p>
<p>sys.publish也可传递参数：</p>
<p>sys.timerStart(function()<br>                   sys.publish(“TEST”,123)<br>               end,3000)–三秒后执行发布”TEST”消息的函数</p>
<p>function sub()<br>    print(“start”)<br>    result,data = sys.waitUntil(“TEST”)<br>    print(result,data)<br>end</p>
<p>sys.taskInit(sub)</p>
<p>Lua<br>Copy</p>
<p>上述代码将会输出：</p>
<p>true    123</p>
<p>同时，luat在库中自带了许多系统消息，部分如下：</p>
<p><img src="http://oldask.openluat.com/image/show/attachments-2018-08-kHOv44o75b80caf440093.png" alt="alt"></p>
<p>三种线程控制的使用方法全部介绍完毕了，如果需要了解原理，请去研读<a target="_blank" rel="noopener" href="http://wiki.openluat.com/">http://wiki.openluat.com</a> 的说明与解释</p>
<h1 id="第四期-学会使用并看懂luatools的trace信息"><a href="#第四期-学会使用并看懂luatools的trace信息" class="headerlink" title="第四期 学会使用并看懂luatools的trace信息"></a>第四期 学会使用并看懂luatools的trace信息</h1><p>由于luat这个架构并不能直接连接仿真器进行调试，所以也无法在程序中设置断点来检查自己代码是否有问题，所以在开发过程中，一般我们都是靠各种print来输出trace获取程序运行的各种状态的。 并且由于lua是脚本文件，烧录时并没有进行编译，所以就算是报错，报错信息也可以准确地把错误所在行的具体位置详细指出来，方便我们进行排查问题</p>
<pre><code>适合阅读本文的人需要：
理解或已经学习了前几章的内容
熟悉lua语法
有实际模块，可以自己实践验证
能耐心阅读完本文
有问题会在文章下方进行留言
</code></pre>
<p>由于luat这个架构并不能直接连接仿真器进行调试，所以也无法在程序中设置断点来检查自己代码是否有问题，所以在开发过程中，一般我们都是靠各种print来输出trace获取程序运行的各种状态的。<br>并且由于lua是脚本文件，烧录时并没有进行编译，所以就算是报错，报错信息也可以准确地把错误所在行的具体位置详细指出来，方便我们进行排查问题</p>
<h2 id="trace的几个基本部分"><a href="#trace的几个基本部分" class="headerlink" title="trace的几个基本部分"></a>trace的几个基本部分</h2><p>首先我们随便烧录一个程序，就只包含下面一个main.lua和自带的LuaTask库文件好了：<br>main.lua</p>
<pre><code>PROJECT = &quot;LOG-TEST&quot;
VERSION = &quot;1.0.0&quot;
--加载日志功能模块，并且设置日志输出等级
--如果关闭调用log模块接口输出的日志，等级设置为log.LOG_SILENT即可
require &quot;log&quot;
LOG_LEVEL = log.LOGLEVEL_TRACE
require &quot;sys&quot;
require &quot;net&quot;
--每1分钟查询一次GSM信号强度
--每1分钟查询一次基站信息
net.startQueryAll(60000, 60000)
--加载硬件看门狗功能模块
--根据自己的硬件配置决定：1、是否加载此功能模块；2、配置Luat模块复位单片机引脚和互相喂狗引脚
--合宙官方出售的Air201开发板上有硬件看门狗，所以使用官方Air201开发板时，必须加载此功能模块
require &quot;wdt&quot;
wdt.setup(pio.P0_30, pio.P0_31)
--加载网络指示灯功能模块
--根据自己的项目需求和硬件配置决定：1、是否加载此功能模块；2、配置指示灯引脚
--合宙官方出售的Air800和Air801开发板上的指示灯引脚为pio.P0_28，其他开发板上的指示灯引脚为pio.P1_1
require &quot;netLed&quot;
netLed.setup(true,pio.P1_1)
--加载错误日志管理功能模块【强烈建议打开此功能】
--如下2行代码，只是简单的演示如何使用errDump功能，详情参考errDump的api
require &quot;errDump&quot;
errDump.request(&quot;udp://ota.airm2m.com:9072&quot;)
--启动系统框架
sys.init(0, 0)
sys.run()
</code></pre>
<p>程序中除了必要的声明软件版本和名称、初始化看门狗、初始化网络灯、加载错误日志管理功能模块、启动系统框架之外，没有进行其他任何操作（lib库文件和lod底层里进行的各种操作除外）<br>我们可以将这个文件烧录到开发板中，查看trace的各种信息（这里用的是S9开发板）：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-zqejrkLg5b80ccf881f86.png" alt="alt"><br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-MRIMreS55b80cd1353c4c.png" alt="alt"></p>
<p>↑显示烧录成功后，最好立即关闭烧录界面，以免错过一些开头的trace信息。实际开发中一般错过了也没事，反正开头的一些东西也没什么用</p>
<p>我们可以看到trace中输出了一些信息：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-bwJsOQOb5b80cd25ac9f6.png" alt="alt"><br>    由于trace中大多数的信息是由lib库文件打印出来的，随时可能会有更改，所以下面也就讲个大概，具体要以实际为准</p>
<p>为了更好地观察，我们可以点击停止打印按钮，以免刷新新的log信息导致滚动条回到最低端：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-5Qp0X2s15b80cd3f7b0fe.png" alt="alt"><br>    [时间]: CDFU_LoadSection: %d-%d<br>    [时间]: CDFU_LoadSection: %d-%d<br>    [时间]: ====================================<br>    [时间]: INTR VER :Luat_V0027_8955_SSL_UI<br>    [时间]: BASE VER :B5431<br>    [时间]: SCRIPT ADDR :0x002b0000<br>    [时间]: SCRIPT SIZE :0x000b0000<br>    [时间]: BASE   ADDR :0x00220000<br>    [时间]: BASE   SIZE :0x00090000<br>    [时间]: ====================================<br>    [时间]: [cust_task_main]: Enter message loop<br>    [时间]: INTEGRITY file not exist!<br>    [时间]: FH:file=/lua/wdt.lua,len=589,offset=29006<br>    [时间]: FH:file=/lua/utils.lua,len=2526,offset=26455<br>    [时间]: FH:file=/lua/sys.lua,len=5472,offset=20956<br>    [时间]: FH:file=/lua/sim.lua,len=1084,offset=19847<br>    [时间]: FH:file=/lua/ril.lua,len=7790,offset=12032<br>    [时间]: FH:file=/lua/pins.lua,len=946,offset=11061<br>    [时间]: FH:file=/lua/patch.lua,len=1186,offset=9849<br>    [时间]: FH:file=/lua/netLed.lua,len=2601,offset=7221<br>    [时间]: FH:file=/lua/net.lua,len=5141,offset=2052<br>    [时间]: FH:file=/lua/main.lua,len=280,offset=1747<br>    [时间]: FH:file=/lua/log.lua,len=1174,offset=547<br>    [时间]: FH:file=/lua/clib.lua,len=472,offset=50<br>    [时间]: parse_luadb_data:delupdpack=0,err=0,section=1,wrFile=0<br>    [时间]: INTEGRITY file write begin!<br>    [时间]: lualibc_fopen /integrity.bin wb 601 1 2<br>    [时间]: INTEGRITY file write success!<br>    [时间]: [fopen_ext]: /lua/main.lua 2!<br>    [时间]: RUN main.lua<br>    [时间]: [fopen_ext]: /lua/main.lua 2!<br>    [时间]: [fopen_ext]: /lua/log.lua 2!<br>    [时间]: [fopen_ext]: /lua/log.lua 2!<br>    [时间]: [fopen_ext]: /lua/sys.lua 2!<br>    [时间]: [fopen_ext]: /lua/sys.lua 2!<br>    [时间]: [fopen_ext]: /lua/utils.lua 2!<br>    [时间]: [fopen_ext]: /lua/utils.lua 2!<br>    [时间]: [fopen_ext]: /lua/patch.lua 2!<br>    [时间]: [fopen_ext]: /lua/patch.lua 2!<br>    [时间]: [fopen_ext]: /lua/clib.lua 2!<br>    [时间]: [fopen_ext]: /lua/clib.lua 2!<br>    [时间]: [fopen_ext]: /lua/net.lua 2!<br>    [时间]: [fopen_ext]: /lua/net.lua 2!<br>    [时间]: [fopen_ext]: /lua/ril.lua 2!<br>    [时间]: [fopen_ext]: /lua/ril.lua 2!<br>    [时间]: [fopen_ext]: /lua/sim.lua 2!<br>    [时间]: [fopen_ext]: /lua/sim.lua 2!<br>    [时间]: [fopen_ext]: /lua/wdt.lua 2!<br>    [时间]: [fopen_ext]: /lua/wdt.lua 2!<br>    [时间]: [fopen_ext]: /lua/pins.lua 2!<br>    [时间]: [fopen_ext]: /lua/pins.lua 2!<br>    [时间]: [I]-[wdt.taskWdt]    AirM2M –&gt; WATCHDOG : OK<br>    [时间]: [fopen_ext]: /lua/netLed.lua 2!<br>    [时间]: [fopen_ext]: /lua/netLed.lua 2!<br>    /<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong>温馨提示**<strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong>/<br>    软件开机,如果是意外重启,请去<a target="_blank" rel="noopener" href="http://wiki.openluat.com/doc/luatApi/#rtospoweron,%E6%9F%A5%E7%9C%8B">http://wiki.openluat.com/doc/luatApi/#rtospoweron,查看</a><br>    /<strong><strong><strong><strong><strong><strong><strong>**</strong></strong></strong></strong></strong></strong></strong>提示结束**<strong><strong><strong><strong><strong><strong><strong><strong>****</strong></strong></strong></strong></strong></strong></strong></strong>/</p>
<p>开头的这一些代码表示读取到了上述的这些文件，可以用于后续的运行</p>
<pre><code>注意：
我们烧录进模块的lua文件一般都在/lua/路径下
而烧录的其他文件如png图片、mp3音乐，则会在/ldata/路径下

[时间]: [I]-[poweron reason:]    3    LOG-TEST    1.0.0    2.0.8    Luat_V0027_8955_SSL_UI
</code></pre>
<p>这一行代表了上次关机的原因、脚本工程里定义的名称（main.lua第1行写的）、脚本工程里定义的版本号（main.lua第2行写的）、LuaTask库文件的版本号（1.x.x是旧版的lua script，2.x.x是LuaTask）、lod固件的版本号</p>
<pre><code>[时间]: LJD VSIM sim_SetNextVoltage:1048,sim_present=0,IsVsim=0
[时间]: LJD VSIM sim_ProcessInstruction:2784,sim_present=1,IsVsim=1
</code></pre>
<p>这两行的IsVsim=1代表了当前模块拥有虚拟sim卡，sim_present=1代表没检测到外置sim卡，所以就使用内置的虚拟sim卡（可能是吧，我猜的）</p>
<pre><code>[时间]: [I]-[ril.defrsp]    AT+CMEE=0    true    OK    nil
[时间]: [I]-[ril.sendat]    AT+CREG=2
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.defrsp]    AT+CREG=2    true    OK    nil
[时间]: [I]-[ril.sendat]    AT+CREG?
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CREG: 2,0
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.defrsp]    AT+CREG?    true    OK    nil
[时间]: [I]-[ril.sendat]    AT+CENG=1,1
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.sendat]    AT+CSQ
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CSQ: 0,0
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.sendat]    AT+CENG?
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CENG:1,1
[时间]: [I]-[ril.proatc]    +CENG:0,&quot;0000, 0, 0,000,00,00,0000,00,00,0000,00&quot;
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.sendat]    AT+CSQ
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CSQ: 0,0
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.sendat]    AT+CENG?
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CENG:1,1
[时间]: [I]-[ril.proatc]    +CENG:0,&quot;0000, 0, 0,000,00,00,0000,00,00,0000,00&quot;
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CSIMTYPE: 0,0
[时间]: [I]-[ril.defurc]    +CSIMTYPE: 0,0
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +ENCRET: 0
[时间]: [I]-[ril.defurc]    +ENCRET: 0
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    +CPIN: READY
</code></pre>
<p>上面这些就是lua脚本底层里，调用AT接口来对模块进行的操作了。熟悉AT指令的人会一下子就明白这些，不熟悉的人可以无视，只要知道这些是调用的AT指令就可以，操作基本都由底层和lib库来完成，一般情况下不用接触</p>
<pre><code>[时间]: [I]-[wdt.taskWdt]    AirM2M --&gt; WATCHDOG : OK
[时间]: [I]-[wdt.taskWdt]    AirM2M &lt;-- WatchDog : OK
</code></pre>
<p>这是看门狗的喂狗操作。。。我觉得我不用解释了吧。。。</p>
<pre><code>[时间]: [I]-[ril.defrsp]    AT+CIPSTATUS    true    OK    nil
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    STATE: IP INITIAL
[时间]: [I]-[link.STATE]    IP STATUS    IP INITIAL
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    C: 0,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 0,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 1,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 1,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 2,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 2,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 3,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 3,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 4,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 4,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 5,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 5,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 6,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 6,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 7,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 7,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.sendat]    AT+CSTT=&quot;CMIOT&quot;,&quot;&quot;,&quot;&quot;
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.defrsp]    AT+CSTT=&quot;CMIOT&quot;,&quot;&quot;,&quot;&quot;    true    OK    nil
[时间]: [I]-[ril.sendat]    AT+CIICR
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.defrsp]    AT+CIICR    true    OK    nil
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    STATE: IP GPRSACT
[时间]: [I]-[link.STATE]    IP STATUS    IP GPRSACT
[时间]: [I]-[ril.sendat]    AT+CIFSR
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    010.007.081.239
[时间]: [I]-[ril.defrsp]    AT+CIFSR    true    nil    010.007.081.239
[时间]: [I]-[ril.sendat]    AT+CIPSTATUS
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    OK
[时间]: [I]-[ril.defrsp]    AT+CIPSTATUS    true    OK    nil
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    STATE: IP STATUS
[时间]: [I]-[link.STATE]    IP STATUS    IP STATUS
[时间]: [I]-[ril.proatc]
[时间]: [I]-[ril.proatc]    C: 0,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 0,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 1,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 1,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 2,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 2,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 3,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 3,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 4,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 4,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 5,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 5,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 6,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 6,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.proatc]    C: 7,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
[时间]: [I]-[ril.defurc]    C: 7,,&quot;&quot;,&quot;&quot;,&quot;&quot;,&quot;INITIAL&quot;
</code></pre>
<p>熟悉AT的各位如果看到这两大串，一定又明白了，这模块连上GPRS网络了。不明白的大概了解一下就好，可以在测试时作为参考</p>
<p>基本的trace就讲到这里，具体的自己去研究吧</p>
<h2 id="自定义输出trace（LuaTask格式）"><a href="#自定义输出trace（LuaTask格式）" class="headerlink" title="自定义输出trace（LuaTask格式）"></a>自定义输出trace（LuaTask格式）</h2><p>在第一版lua script时代，输出的trace基本都是直接使用print(xxxxx)这种格式，这个输出习惯的效果不怎么样，也不利于排查问题<br>于是在稀饭放姜大佬写的LuaTask版本中，使用了log语句，输出整齐具有区分度较高格式的trace</p>
<p>老套路，我们在上面的main.lua中稍作修改，在–启动系统框架的上方添加如下代码：</p>
<pre><code>require&quot;logtest&quot;
</code></pre>
<p>并且新建一个lua文件，名为logtest.lua，文件内容如下：</p>
<pre><code>require&quot;common&quot;
local function test()
    log.info(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出info级别的日志&quot;))
    log.debug(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出debug级别的日志&quot;))
    log.trace(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出trace级别的日志&quot;))
    log.warn(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出warn级别的日志&quot;))
    log.error(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出error级别的日志&quot;))
    log.fatal(&quot;logtest.test&quot;,common.utf8ToGb2312(&quot;输出fatal级别的日志&quot;))
end
test()

注意：
由于vscode新建文件默认都为utf8编码格式，
所以我们在代码中输出的中文字符也都为utf8编码格式。但是luatools使用的却是GB2312格式，所以为了输出正确不乱码的中文，我们需要对中文进行转码，使用common.utf8ToGb2312()函数就可以解决这个编码问题
输出英文没有类似问题，无需转码
</code></pre>
<p>我们把logtest.lua文件添加到烧录工程中，将程序烧录进去，可以得到如下的输出结果（需要自己在luatools往上翻地找）：</p>
<p>同时，log输出也可以改成如下语句：</p>
<p>testlog.lua</p>
<pre><code>local function test()
    local a = 1
    local b = true
    local c = &quot;test&quot;
    log.info(&quot;logtest.test&quot;,&quot;mixed output&quot;,a,b,c)
end
test()
</code></pre>
<p>输出如下：</p>
<pre><code>[时间]: [I]-[logtest.test]    mixed output    1    true    test
</code></pre>
<p>这些输出日志方便了我们调试的过程，我们可以在程序必要处添加这些log输出，以便通过trace掌握程序运行的状态<br>##语法错误输出</p>
<p>为了演示，我们可以再次更改testlog.lua文件的内容如下：</p>
<p>testlog.lua</p>
<pre><code>local function test()
    local a
    local b = 10
    b = a + b
end
test()
</code></pre>
<p>显而易见，这是会产生语法错误的，没看懂的也不要紧，烧录到模块中，可以看一下trace输出了什么：</p>
<pre><code>[时间]: [E]-[errDump.luaErr]    /lua/logtest.lua:4: attempt to perform arithmetic on local &#39;a&#39; (a nil value)
程序运行错误，请根据上方提示,找到对应lua文件修改程序
[时间]: stack traceback:
[时间]:     /lua/logtest.lua:4: in function &#39;test&#39;
[时间]:     /lua/logtest.lua:7: in main chunk
[时间]:     [C]: in function &#39;require&#39;
[时间]:     /lua/main.lua:34: in main chunk
[时间]:     [C]: ?
[时间]: [fopen_ext]: /lua/logtest.lua 2!
[时间]: [fopen_ext]: /lua/logtest.lua 2!
[时间]: lualibc_fopen /luaerrinfo.txt w 601 1 2
[时间]: lua: /lua/logtest.lua:4: attempt to perform arithmetic on local &#39;a&#39; (a nil value)
程序运行错误，请根据上方提示,找到对应lua文件修改程序
[时间]: stack traceback:
[时间]:     /lua/logtest.lua:4: in function &#39;test&#39;
[时间]:     /lua/logtest.lua:7: in main chunk
[时间]:     [C]: in function &#39;require&#39;
[时间]:     /lua/main.lua:34: in main chunk
[时间]:     [C]: ?
[时间]: [lua_shell_main]: lua exit status 1
</code></pre>
<p>第一行的/lua/logtest.lua:4: attempt to perform arithmetic on local ‘a’ (a nil value)代表了这个错误的具体原因，我们可以直接到错误的行数寻找，同时错误信息也写得十分明确：a是个nil值，无法进行算术计算</p>
<p>如果你觉得这个报错十分准确的话，那你就错了，如果真是这样我就不会在下面再加一段解释了</p>
<p>再次修改testlog.lua文件的内容如下：</p>
<p>testlog.lua</p>
<pre><code>require&quot;utils&quot;
local function test()
    local a = &quot;&quot;
    log.info(&quot;logtest.test&quot;,string.toHex(a))
end
test()
</code></pre>
<p>报错信息如下：</p>
<pre><code>[时间]: lua: /lua/utils.lua:19: attempt to index local &#39;str&#39; (a nil value)
程序运行错误，请根据上方提示,找到对应lua文件修改程序
[时间]: stack traceback:
[时间]:     /lua/utils.lua:19: in function &#39;toHex&#39;
[时间]:     /lua/logtest.lua:5: in function &#39;test&#39;
[时间]:     /lua/logtest.lua:8: in main chunk
[时间]:     [C]: in function &#39;require&#39;
[时间]:     /lua/main.lua:34: in main chunk
[时间]:     [C]: ?
[时间]: [lua_shell_main]: lua exit status 1
</code></pre>
<p>可能有人看到这个报错就凌乱了：utils.lua？这文件不是我写的啊？</p>
<p>确实，utils.lua这个文件是lib文件夹中的库文件，库文件中的函数报错也会导致trace中显示这个文件的错误位置<br>我们可以在错误报告中找到/lua/logtest.lua:5 : in function ‘test’这一段，在检查后发现，确实是logtest.lua文件的第五行导致了错误：对nil进行转成16进制字符串的处理是非法的</p>
<p>以上就是luatools中trace解析的基本解释，很多trace信息还需要各位自己来摸索，用的多了也就熟悉了这些信息了</p>
<h1 id="第五期-socket代码详解"><a href="#第五期-socket代码详解" class="headerlink" title="第五期 socket代码详解"></a>第五期 socket代码详解</h1><p>TCP和UDP除了在lua代码声明时有一些不同，其他地方完全一样，所以下面的代码将以TCP长连接的数据收发作为示例，如果需要UDP连接，只需要改声明对象时的三个字母即可。</p>
<pre><code>阅读本文需要具有的技能：
看过该系列前几篇文章或明白前几篇文章内容的
熟悉lua语法，尤其是数组部分
可以明白字符串、字节码之间的区别
可以自己实践操作
对tcp/udp通讯有基本的了解
用过这东西
</code></pre>
<p>各位想看mqtt解释的，请等待下一篇文章，不过也可以顺便看看这一篇嘛，二者都差不多的</p>
<h2 id="Socket-TCP-UDP"><a href="#Socket-TCP-UDP" class="headerlink" title="Socket(TCP/UDP)"></a>Socket(TCP/UDP)</h2><p>TCP和UDP除了在lua代码声明时有一些不同，其他地方完全一样，所以下面的代码将以TCP长连接的数据收发作为示例，如果需要UDP连接，只需要改声明对象时的三个字母即可。</p>
<h3 id="先定义一个假装能用来测试的TCP协议（需求）"><a href="#先定义一个假装能用来测试的TCP协议（需求）" class="headerlink" title="先定义一个假装能用来测试的TCP协议（需求）"></a>先定义一个假装能用来测试的TCP协议（需求）</h3><pre><code>客户端每10秒发送一条字符串heart beat
客户端接收到back开头的数据要回复相同的数据
客户端收到bin要回复二进制数组0x11 0x22 0x33
客户端收到time要回复当前时间的时间戳字符串
</code></pre>
<p>示例时序如下：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-5jS7Adof5b80ced3d77c1.png" alt="alt"></p>
<h2 id="代码详解"><a href="#代码详解" class="headerlink" title="代码详解"></a>代码详解</h2><h3 id="官方demo提供的示例代码"><a href="#官方demo提供的示例代码" class="headerlink" title="官方demo提供的示例代码"></a>官方demo提供的示例代码</h3><p>官方代码可以在github的Luat_2G_RDA_8955/script_LuaTask/demo/socket/longConnection目录或luatools的LuaTools 1.x.x\script\script_LuaTask\demo\socket\longConnection目录找到</p>
<p>如果你能看懂官方例程，那么可以直接去使用，不需要再看本文了</p>
<h3 id="socket连接代码的拆解分析"><a href="#socket连接代码的拆解分析" class="headerlink" title="socket连接代码的拆解分析"></a>socket连接代码的拆解分析</h3><p>这一部分会将官方demo的代码拆开来，只保留基础部分，放到一个文件中来解释</p>
<h4 id="建立文件"><a href="#建立文件" class="headerlink" title="建立文件"></a>建立文件</h4><p>首先先新建两个文件，用于测试这个工程</p>
<p>main.lua</p>
<pre><code>PROJECT = &quot;SOCKET-TEST&quot;
VERSION = &quot;1.0.0&quot;
--根据固件判断模块类型
moduleType = string.find(rtos.get_version(),&quot;8955&quot;) and 2 or 4
require &quot;log&quot;
LOG_LEVEL = log.LOGLEVEL_TRACE
require &quot;sys&quot;
--每1分钟查询一次GSM信号强度,每1分钟查询一次基站信息
require &quot;net&quot;
net.startQueryAll(60000, 60000)
--加载硬件看门狗功能模块
--如果用的是720 4g模块，请注释掉这两行
require &quot;wdt&quot;
wdt.setup(pio.P0_30, pio.P0_31)
--加载网络指示灯功能模块
require &quot;netLed&quot;
netLed.setup(true,moduleType == 2 and pio.P1_1 or pio.P2_0,moduleType == 2 and nil or pio.P2_1)
require&quot;longlink&quot;
--启动系统框架
sys.init(0, 0)
sys.run()
</code></pre>
<p>longlink.lua</p>
<pre><code>module(...,package.seeall)
require&quot;socket&quot;
--下面代码一会儿写
</code></pre>
<h3 id="找一个测试用的服务器"><a href="#找一个测试用的服务器" class="headerlink" title="找一个测试用的服务器"></a>找一个测试用的服务器</h3><p>2G模块socket测试和wifi有着本质的区别：没法使用内网来调试，必须要使用一个公网服务器来调试</p>
<p>为了解决这个问题，luat官方提供了一个tcp测试实验室网站服务：<a target="_blank" rel="noopener" href="http://tcplab.openluat.com/">http://tcplab.openluat.com/</a><br>这个工具有一个坏处，就是三分钟没有客户端连接的话就会被强行关闭服务。我们可以在本地用一个tcp调试工具提前连上，就不会被强制关闭服务了。</p>
<p>为了针对这种情况，我临时写了一个工具：<br><a target="_blank" rel="noopener" href="https://github.com/chenxuuu/tcplab.openluat.com">https://github.com/chenxuuu/tcplab.openluat.com</a><br>编译好的文件可以点我下载</p>
<p>打开后可以直接获取从服务器分配的ip、端口，还能接收客户端数据、主动发送数据：<br><img src="http://oldask.openluat.com/image/show/attachments-2018-08-VemLO8Al5b80cf3171da3.png" alt="alt"><br>记住自己获取到的ip和端口，在下面的代码中会被使用到<br>###建立socket线程</p>
<p>一般来说，socket连接都是异步运行的，何时应该发送数据，何时应该接收数据，这些逻辑应该让socket收发的进程自己进行控制</p>
<p>所以我们在longlink.lua中添加一个新的线程（看不懂的回去看前几篇文章），文件改成如下（注意要自己改东西！）：</p>
<p>longlink.lua</p>
<pre><code>module(...,package.seeall)
require&quot;socket&quot;
--测试用的服务器信息，上一部分获取到的那个
local testip,testport = &quot;&quot;,&quot;&quot;
--启动socket客户端任务
sys.taskInit(
function()
    while true do
    --该区域的代码会永久循环运行（除非出现语法错误）
    end
end)
</code></pre>
<h3 id="进行socket连接"><a href="#进行socket连接" class="headerlink" title="进行socket连接"></a>进行socket连接</h3><p>一般来说，我们会在模块成功获取基站分配的ip后，才会进行网络的连接操作，所以我们需要使用socket.isReady()函数来判断是否连接网络，然后再进行网络操作</p>
<p>在成功获取ip后，我们才能新建一个tcp对象，对其进行联网操作，socket客户端线程代码改为如下：</p>
<pre><code>--启动socket客户端任务
sys.taskInit(
function()
    while true do
        --是否获取到了分配的ip(是否连上网)
        if socket.isReady() then
            --新建一个socket对象，如果是udp只需要把tcp改成udp即可
            local socketClient = socket.tcp()
            --尝试连接指定服务器
            if socketClient:connect(testip,testport) then
                --连接成功
                log.info(&quot;longlink.socketClient&quot;,&quot;connect success&quot;)
            else
                log.info(&quot;longlink.socketClient&quot;,&quot;connect fail&quot;)
                --连接失败
            end
        else
            --没连上网，原地等待一秒，一秒后会循环回去重试
            sys.wait(1000)
        end
    end
end)
</code></pre>
<h3 id="对连接失败的处理"><a href="#对连接失败的处理" class="headerlink" title="对连接失败的处理"></a>对连接失败的处理</h3><p>上述代码只是一个简单的连接服务器的代码，并且连上之后没有进行任何的其他操作</p>
<p>为了增加代码的稳健性，我们可以利用sys.waitUntil()函数，设置五分钟内没有获取到ip就开启飞行模式几秒，再关闭，让模块重新去获取GPRS连接：</p>
<pre><code>--启动socket客户端任务
sys.taskInit(
function()
    while true do
        --是否获取到了分配的ip(是否连上网)
        if socket.isReady() then
            --新建一个socket对象，如果是udp只需要把tcp改成udp即可
            local socketClient = socket.tcp()
            --尝试连接指定服务器
            if socketClient:connect(testip,testport) then
                --连接成功
                log.info(&quot;longlink.socketClient&quot;,&quot;connect success&quot;)
            else
                log.info(&quot;longlink.socketClient&quot;,&quot;connect fail&quot;)
                --连接失败
            end
        else
            --没连上网
            --等待网络环境准备就绪，超时时间是5分钟
            sys.waitUntil(&quot;IP_READY_IND&quot;,300000)
            --等完了还没连上？
            if not socket.isReady() then
                --进入飞行模式，20秒之后，退出飞行模式
                net.switchFly(true)
                sys.wait(20000)
                net.switchFly(false)
            end
        end
    end
end)
</code></pre>
<p>同样，我们也可以给socketClient:connect(testip,testport)的连接加上错误次数的判断，连接错误超过五次，强制断开socket连接,等待五秒后重试：</p>
<pre><code>--启动socket客户端任务
sys.taskInit(
function()
    local retryConnectCnt = 0   --失败次数统计
    while true do
        --是否获取到了分配的ip(是否连上网)
        if socket.isReady() then
            --新建一个socket对象，如果是udp只需要把tcp改成udp即可
            local socketClient = socket.tcp()
            --尝试连接指定服务器
            if socketClient:connect(testip,testport) then
                --连接成功
                log.info(&quot;longlink.socketClient&quot;,&quot;connect success&quot;)
                retryConnectCnt = 0 --失败次数清零
            else
                log.info(&quot;longlink.socketClient&quot;,&quot;connect fail&quot;)
                --连接失败
                retryConnectCnt = retryConnectCnt+1 --失败次数加一
            end
            socketClient:close()    --断开socket连接
            if retryConnectCnt&gt;=5 then  --失败次数大于五次了
                link.shut()         --强制断开TCP/UDP连接
                retryConnectCnt=0   --失败次数清零
            end
            sys.wait(5000)
        else
            retryConnectCnt = 0     --没连上网，失败次数清零
            --没连上网
            --等待网络环境准备就绪，超时时间是5分钟
            sys.waitUntil(&quot;IP_READY_IND&quot;,300000)
            --等完了还没连上？
            if not socket.isReady() then
                --进入飞行模式，20秒之后，退出飞行模式
                net.switchFly(true)
                sys.wait(20000)
                net.switchFly(false)
            end
        end
    end
end)
</code></pre>
<h3 id="添加发送-接收处理函数"><a href="#添加发送-接收处理函数" class="headerlink" title="添加发送/接收处理函数"></a>添加发送/接收处理函数</h3><p>到了这一步，整个的socket线程只剩下循环处理接收和发送的数据这一部分与demo不同了，我们直接把这两句话加到socket线程的代码中吧：</p>
<pre><code>--启动socket客户端任务
sys.taskInit(
function()
    local retryConnectCnt = 0   --失败次数统计
    while true do
        --是否获取到了分配的ip(是否连上网)
        if socket.isReady() then
            --新建一个socket对象，如果是udp只需要把tcp改成udp即可
            local socketClient = socket.tcp()
            --尝试连接指定服务器
            if socketClient:connect(testip,testport) then
                --连接成功
                log.info(&quot;longlink.socketClient&quot;,&quot;connect success&quot;)
                retryConnectCnt = 0 --失败次数清零
                --循环处理接收和发送的数据
                while true do
                    if not inMsgProcess(socketClient) then  --接收消息处理函数
                        log.error(&quot;longlink.inMsgProcess error&quot;)
                        break
                    end
                    if not outMsgprocess(socketClient) then --发送消息处理函数
                        log.error(&quot;longlink.outMsgprocess error&quot;)
                        break
                    end
                end
            else
                log.info(&quot;longlink.socketClient&quot;,&quot;connect fail&quot;)
                --连接失败
                retryConnectCnt = retryConnectCnt+1 --失败次数加一
            end
            socketClient:close()    --断开socket连接
            if retryConnectCnt&gt;=5 then  --失败次数大于五次了
                link.shut()         --强制断开TCP/UDP连接
                retryConnectCnt=0   --失败次数清零
            end
            sys.wait(5000)
        else
            retryConnectCnt = 0     --没连上网，失败次数清零
            --没连上网
            --等待网络环境准备就绪，超时时间是5分钟
            sys.waitUntil(&quot;IP_READY_IND&quot;,300000)
            --等完了还没连上？
            if not socket.isReady() then
                --进入飞行模式，20秒之后，退出飞行模式
                net.switchFly(true)
                sys.wait(20000)
                net.switchFly(false)
            end
        end
    end
end)
</code></pre>
<p>可以看到，在接收和发送函数不返回false的情况下，接收和发送循环会一直进行下去；只有当两个函数之一返回false时，才会触发break导致退出该接收和发送循环</p>
<h3 id="inMsgProcess-socketClient-函数"><a href="#inMsgProcess-socketClient-函数" class="headerlink" title="inMsgProcess(socketClient)函数"></a>inMsgProcess(socketClient)函数</h3><p>这段的代码相对来说比较简单，我们可以直接使用socketClient:recv(毫秒数)来接收我们的tcp消息。<br>我们在合适的地方，新建一个inMsgProcess(socketClient)函数：</p>
<pre><code>function inMsgProcess(socketClient)
    local result,data
    while true do
        result,data = socketClient:recv(2000)
        --接收数据
        if result then  --接收成功
            log.info(&quot;longlink.inMsgProcess&quot;,data)
            --处理data数据，现在还没代码，空着
        else    --接收失败
            break
        end
    end
    --返回结果，处理成功返回true，处理出错返回false
    return result or data==&quot;timeout&quot;
end
</code></pre>
<p>这段代码就是循环获取socket消息，如果没获取到，socketClient:recv(2000)就会返回false,”timeout”；如果获取到了，就会返回true,获取到的数据字符串；如果返回了false,不为”timeout”，则表示数据处理出错，说明socket连接有了什么问题</p>
<p>细心的读者可能看出来了，如果接收函数一直在2秒内有接收到数据，那么这段函数会永远无限循环下去，没办法到达outMsgprocess(socketClient)函数进行发送数据的操作，所以我们先去讲outMsgprocess(socketClient)函数的实现过程，再回来改进inMsgProcess(socketClient)函数</p>
<h3 id="outMsgprocess-socketClient-函数"><a href="#outMsgprocess-socketClient-函数" class="headerlink" title="outMsgprocess(socketClient)函数"></a>outMsgprocess(socketClient)函数</h3><p>由于发送函数在socket线程中是一个循环的小部分，所以我们要建立一个消息发送的队列：有要发送的发数据时，将数据放到这个队列中；等运行到outMsgprocess(socketClient)函数时，将队列中的数据一个一个发出去</p>
<p>首先我们要建一个放这种队列的数组，在合适位置声明一下这个数组：</p>
<pre><code>--数据发送的消息队列
local msgQuene = &#123;&#125;
</code></pre>
<p>接着我们构造一个可以往数组里插入数据的函数，table.insert()可以向数组添加数据，所以我们新建一个insertMsg函数：</p>
<pre><code>local function insertMsg(data)
    table.insert(msgQuene,data)
end
</code></pre>
<p>还记得上面说过的消息接收函数函数会永远无限循环下去的问题吗？我们在合适的地方新建一个判断发送消息队列是否为空的函数：</p>
<pre><code>function waitForSend()
    return #msgQuene &gt; 0
end
</code></pre>
<p>在数组有数据时，这个函数会返回true，我们可以将inMsgProcess(socketClient)接收到数据后的代码添加一行判断发送队列是否有数据的代码，当检测到发送队列有数据时，就立即退出接收函数，转而去进行发送动作，接收函数最终改为了这样：</p>
<pre><code>function inMsgProcess(socketClient)
    local result,data
    while true do
        result,data = socketClient:recv(2000)
        --接收到数据
        if result then  --接收成功
            log.info(&quot;longlink.inMsgProcess&quot;,data)
            --处理data数据，现在还没代码，空着
            --如果msgQuene中有等待发送的数据，则立即退出本循环
            if waitForSend() then return true end
        else    --接收失败
            break
        end
    end
    --返回结果，处理成功返回true，处理出错返回false
    return result or data==&quot;timeout&quot;
end
</code></pre>
<p>最后我们终于可以开始写消息发送函数了，整体的函数就是检查队列是否为空，不为空的话就发一条消息并将其从队列中删除，然后重复这一操作，函数代码如下：</p>
<pre><code>function outMsgprocess(socketClient)
    --队列中有消息
    while #msgQuene&gt;0 do
        --获取消息，并从队列中删除
        local outMsg = table.remove(msgQuene,1)
        --发送这条消息，并获取发送结果
        local result = socketClient:send(outMsg)
        --发送失败的话立刻返回nil（等同于false）
        if not result then return end
    end
    return true
end
</code></pre>
<h3 id="完成基本的socket线程"><a href="#完成基本的socket线程" class="headerlink" title="完成基本的socket线程"></a>完成基本的socket线程</h3><p>经过上述的更改，最终，longlink.lua已经实现了连接服务器并自动处理错误的功能，并且预留了消息接收以及向发送队列添加数据的接口，文件的所有代码如下：</p>
<p>longlink.lua</p>
<pre><code>module(...,package.seeall)
require&quot;socket&quot;
--测试用的服务器信息
local testip,testport = &quot;180.97.81.180&quot;,&quot;50798&quot;
--数据发送的消息队列
local msgQuene = &#123;&#125;
local function insertMsg(data)
    table.insert(msgQuene,data)
end
function waitForSend()
    return #msgQuene &gt; 0
end
function outMsgprocess(socketClient)
    --队列中有消息
    while #msgQuene&gt;0 do
        --获取消息，并从队列中删除
        local outMsg = table.remove(msgQuene,1)
        --发送这条消息，并获取发送结果
        local result = socketClient:send(outMsg)
        --发送失败的话立刻返回nil（等同于false）
        if not result then return end
    end
    return true
end
function inMsgProcess(socketClient)
    local result,data
    while true do
</code></pre>
<p>a</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/19/25/" data-id="ckkfmdgfg00elvkcg8nym9qr5" data-title="晨旭Lua系列入门教程" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-696" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/02/18/696/" class="article-date">
  <time class="dt-published" datetime="2020-02-18T14:03:34.000Z" itemprop="datePublished">2020-02-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/02/18/696/">合宙模块AT相关资料汇总</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-目录"><a href="#1-目录" class="headerlink" title="1. 目录"></a>1. 目录</h1><ul>
<li><strong>1. 目录</strong></li>
<li><strong>[2. 新手教程](#2. 新手教程)</strong></li>
<li><strong>[3. 产品资料](#3. 产品资料)</strong><ul>
<li><strong>3.1 [2G模块（GPRS / GPRS+GNSS）](#3.1 2G模块（GPRS / GPRS+GNSS）)</strong><ul>
<li><strong>3.1.1</strong> [硬件文档](#3.1.1 硬件文档)</li>
<li><strong>3.1.2</strong> [2G 开发板](#3.1.2 2G 开发板)</li>
<li><strong>3.1.3</strong> [产品证书](#3.1.3 产品证书)</li>
<li><strong>3.1.4</strong> [软件文档](#3.1.4 软件文档)</li>
<li><strong>3.1.5</strong> [相关工具](#3.1.5 相关工具)</li>
</ul>
</li>
<li><strong>3.2 [4G Cat.4 模块](#3.2 4G Cat.4 模块)</strong><ul>
<li><strong>3.2.1</strong> [硬件文档](#3.2.1 硬件文档)</li>
<li><strong>3.2.2</strong> [4G开发板](#3.2.2 4G Cat.4 开发板)</li>
<li><strong>3.2.3</strong> [产品证书](#3.2.3 产品证书)</li>
<li><strong>3.2.4</strong> [AT固件](#3.2.4 AT固件)</li>
<li><strong>3.2.5</strong> [相关文档](#3.2.5 相关文档)</li>
<li><strong>3.2.6</strong> [相关工具](#3.2.6 相关工具)</li>
</ul>
</li>
<li><strong>3.3 [4G Cat.1 模块](#3.3 4G Cat.1 模块)</strong><ul>
<li><strong>3.3.1</strong> [硬件文档](#3.3.1 硬件文档)</li>
<li><strong>3.3.2</strong> [4G开发板](#3.3.2 4G Cat.1 开发板)</li>
<li><strong>3.3.3</strong> [产品证书](#3.3.3 产品证书)</li>
<li><strong>3.3.4</strong> [AT固件](#3.3.4 AT固件)</li>
<li><strong>3.3.5</strong> [相关文档](#3.3.5 相关文档)</li>
<li><strong>3.3.6</strong> [相关工具](#3.3.6 相关工具)</li>
</ul>
</li>
</ul>
</li>
<li><strong>4. [调试教程](#4. 调试教程)</strong></li>
</ul>
<h1 id="2-新手教程"><a href="#2-新手教程" class="headerlink" title="2. 新手教程"></a>2. 新手教程</h1><ul>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">基本注意事项</a><br>  <a target="_blank" rel="noopener" href="http://doc.openluat.com/article/713/0">4G模块如何装USB驱动</a><br>  <a target="_blank" rel="noopener" href="http://doc.openluat.com/article/713/0">如何更新AT固件</a><br>  <a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1405/0%E3%80%81">如何空中升级</a></li>
</ul>
<h1 id="3-产品资料"><a href="#3-产品资料" class="headerlink" title="3. 产品资料"></a>3. 产品资料</h1><ul>
<li><h2 id="3-1-2G模块（GPRS-GPRS-GNSS）"><a href="#3-1-2G模块（GPRS-GPRS-GNSS）" class="headerlink" title="3.1 2G模块（GPRS / GPRS+GNSS）"></a>3.1 2G模块（GPRS / GPRS+GNSS）</h2></li>
<li><h3 id="3-1-1-硬件文档"><a href="#3-1-1-硬件文档" class="headerlink" title="3.1.1 硬件文档"></a>3.1.1 硬件文档</h3><ul>
<li><h4 id="通用硬件资料"><a href="#通用硬件资料" class="headerlink" title="通用硬件资料"></a>通用硬件资料</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155922759_PCB_ANT.7z">2G 模块板载天线封装</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155619482_Luat%E6%A8%A1%E5%9D%97%E9%98%BB%E6%8A%97%E7%BA%BF%E5%8F%8A%E5%A4%A9%E7%BA%BF%E8%AE%BE%E8%AE%A1%E5%BB%BA%E8%AE%AE_V1.0.pdf">Luat 模块阻抗线及天线设计建议 v1.0</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155759042_Luat%E4%B8%93%E7%94%A8%E7%9C%8B%E9%97%A8%E7%8B%97%E8%8A%AF%E7%89%87%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8CV1.6.pdf">Luat 专用看门狗芯片设计手册 v1.6</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165715026_NMEA%E6%95%B0%E6%8D%AE%E6%A0%BC%E5%BC%8F%E8%AF%B4%E6%98%8E.docx">GPS NMEA 数据格式说明</a><h4 id="Air202-模块"><a href="#Air202-模块" class="headerlink" title="Air202 模块"></a>Air202 模块</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/product_center/product_detail?id=26">产品简介</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155350171_Air202S_%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C_V1.59.pdf">Air202 硬件设计手册 v1.58</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017160109356_Air202_PADS.zip">Air202 模块原理图 PCB 封装（PADS 9.5 格式）</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155421731_Air202%E4%B8%89%E6%B8%A9%E4%B8%89%E5%8E%8BRF%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A_1.2.xls">三温三压 RF 测试报告 1.2</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017155441776_Air202%E5%B0%84%E9%A2%91%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A1.2%EF%BC%88GSM4%E9%A2%91%EF%BC%89.xls">射频常规测试报告 1.2（GSM 4频）</a></li>
<li><h4 id="Air208S-模块"><a href="#Air208S-模块" class="headerlink" title="Air208S 模块"></a>Air208S 模块</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/208s/Luat_GPRS%E6%A8%A1%E5%9D%97Air208S%E8%A7%84%E6%A0%BC%E4%B9%A620180716.pdf">产品简介</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/430/0">Air208S 硬件设计手册 v1.09</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/208s/Air208_PADS.zip">Air208 模块原理图 PCB 封装（PADS 9.5 格式)</a></li>
<li><h4 id="Air268F-模块"><a href="#Air268F-模块" class="headerlink" title="Air268F 模块"></a>Air268F 模块</h4></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/427/0">Air268F 硬件设计手册 v1.05</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/268/Air268_PADS.zip">Air268F 模块原理图 PCB 封装（PADS 9.5 格式）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/268/Air268_DEMO_0718.pdf">Air268F 模块参考设计 (PDF)</a></li>
<li><h4 id="Air800-模块"><a href="#Air800-模块" class="headerlink" title="Air800 模块"></a>Air800 模块</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/product_center/product_detail?id=28">产品简介</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165237942_Air800_%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C_V1.75.pdf">Air800 硬件设计手册 v1.75</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165201281_Air800_PADS.zip">Air800 模块原理图 PCB 封装（PADS 9.5)</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165258887_Air800%E5%8F%82%E8%80%83%E8%AE%BE%E8%AE%A1_20170609.rar">Air800 参考设计</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165352409_Air800%E4%BA%94%E6%B8%A9%E4%B8%89%E5%8E%8BRF%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A_1.1.xls">Air800 五温三压 RF 测试报告 1.1</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165322236_Air800%E5%B0%84%E9%A2%91%E5%B8%B8%E8%A7%84%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A1.3%EF%BC%88GSM4%E9%A2%91%EF%BC%89.xls">Air800 射频常规测试报告 1.3（GSM 4频）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/product_center/[Air800%20GPS%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A.docx](http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017165143735_Air800%20GPS%E6%80%A7%E8%83%BD%E6%B5%8B%E8%AF%95%E6%8A%A5%E5%91%8A.docx)">Air800 GPS 性能测试报告</a></li>
<li><h4 id="Air530-gps-模块"><a href="#Air530-gps-模块" class="headerlink" title="Air530(gps) 模块"></a>Air530(gps) 模块</h4></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/871/0">GPS相关调试工具以及使用说明相关资料</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1828/0">Air800系列模块如何下载GPS固件</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">批量生产时如何进行GPS生产测试</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1829/0">GPS信噪比测试方法</a></li>
</ul>
</li>
<li><h3 id="3-1-2-2G-开发板"><a href="#3-1-2-2G-开发板" class="headerlink" title="3.1.2 2G 开发板"></a>3.1.2 2G 开发板</h3><ul>
<li><h4 id="S5-Air202-开发板"><a href="#S5-Air202-开发板" class="headerlink" title="S5(Air202) 开发板"></a>S5(Air202) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110143119282_S5%E5%BC%80%E5%8F%91%E6%9D%BF%E5%8E%9F%E7%90%86%E5%9B%BE.rar">Air202 S5 开发板 PCB</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110143441790_Air202%E6%A8%A1%E5%9D%97S5%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8Ev1.4.pdf">Air202 S5 开发板使用说明 v1.4</a></li>
<li><h4 id="S6-Air202-开发板"><a href="#S6-Air202-开发板" class="headerlink" title="S6(Air202) 开发板"></a>S6(Air202) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110144254951_Air202_S6_A12_PADS.7z">Air202 S6 开发板原理图和 PCB 设计文件</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110144312350_S6-PADS.zip">Air202 S6 开发板封装</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110144232307_S6%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8EV1.2.pdf">Air202 S6 开发板使用说明 v1.2</a></li>
<li><h4 id="LuatBoard-S9-Air202-开发板"><a href="#LuatBoard-S9-Air202-开发板" class="headerlink" title="LuatBoard S9 (Air202) 开发板"></a>LuatBoard S9 (Air202) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/202s9/LuatBoard-%E5%8E%9F%E7%90%86%E5%9B%BE.pdf">Air202 LuatBoard(S9) 原理图</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/202s9/LuatBoard-%E8%AF%B4%E6%98%8E%E4%B9%A6.pdf">Air202 S9 开发板使用说明</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/202s9/%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%8E%A5%E6%8F%90%E7%A4%BA%E5%92%8C%E6%8E%A5%E5%8F%A3%E8%AF%B4%E6%98%8E.pdf">S9 小程序接提示和接口说明</a></li>
<li><h4 id="S268F-Air268F-开发板"><a href="#S268F-Air268F-开发板" class="headerlink" title="S268F(Air268F) 开发板"></a>S268F(Air268F) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/268/Air268_DEMO_0718.pdf">Air268F 模块参考设计 (PDF)</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/s268f/Air268F%E6%A8%A1%E5%9D%97S268F%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8EV1.1.pdf">Air268F 模块 S268F 开发板使用说明 v1.1</a></li>
<li><h4 id="M4-Air800-开发板"><a href="#M4-Air800-开发板" class="headerlink" title="M4(Air800) 开发板"></a>M4(Air800) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/800m4/EVB_Air800_M4_A12_DEMO%28PADS%E7%89%88%29.7z">Air800 M4 开发板原理图 PCB (PADS 版)</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/457/0">Air800 M4 开发板使用手册 v1.01</a></li>
<li><h4 id="开发板串口驱动"><a href="#开发板串口驱动" class="headerlink" title="开发板串口驱动"></a>开发板串口驱动</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/driver/CP210x_Universal_Windows_Driver.zip">CP2102 串口芯片驱动</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/202s9/CH341SER.EXE">CH341SER.EXE</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/ft232/ftdi_ft232_drive.rar">ftdi_ft232_drive</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/batdl/PL2303_Prolific_DriverInstaller_v1190.zip">PL2303_Prolific_DriverInstaller_v1190</a></li>
</ul>
</li>
<li><h3 id="3-1-3-产品证书"><a href="#3-1-3-产品证书" class="headerlink" title="3.1.3 产品证书"></a>3.1.3 产品证书</h3><ul>
<li><h4 id="Air202"><a href="#Air202" class="headerlink" title="Air202"></a>Air202</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20191018110743_Air202_CCC%E8%AF%81%E4%B9%A620191018.jpg">Air202 3C 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20180115141653_Air202%20Rohs%E6%8A%A5%E5%91%8A.pdf">Air202 RoHS 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190513102312_Air202%E5%9E%8B%E5%8F%B7%E6%A0%B8%E5%87%86%E8%AF%81.pdf">Air202 型号核准</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20171225172018_Air202%20CE%20NB%E8%AF%81%E4%B9%A6.pdf">Air202 CE NB 证书</a></li>
<li><h4 id="Air208"><a href="#Air208" class="headerlink" title="Air208"></a>Air208</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20181130163318_%E4%B8%8A%E6%B5%B7%E5%90%88%E5%AE%99208-3C%E8%AF%81%E4%B9%A6-%E4%B8%AD.jpg">Air208 3C 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20180428135900_AIR208%20FCC%E8%AF%81%E4%B9%A6.pdf">Air208 FCC 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20180305111944_Air208%20%E5%9E%8B%E5%8F%B7%E6%A0%B8%E5%87%86%E8%AF%81.pdf">Air208 型号核准</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20180224102735_Air208%20CE%E8%AF%81%E4%B9%A6.pdf">Air208 CE NB 证书</a></li>
<li><h4 id="Air800"><a href="#Air800" class="headerlink" title="Air800"></a>Air800</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190724151827_Air800_CCC%E8%AF%81%E4%B9%A6.rar">Air800 3C 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20181130163246_Air800-Rohs%E6%8A%A5%E5%91%8A.pdf">Air800 RoHS 证书</a></li>
<li><h4 id="GPS-相关"><a href="#GPS-相关" class="headerlink" title="GPS 相关"></a>GPS 相关</h4></li>
</ul>
</li>
<li><h3 id="3-1-4-软件文档"><a href="#3-1-4-软件文档" class="headerlink" title="3.1.4 软件文档"></a>3.1.4 软件文档</h3><ul>
<li><h4 id="AT-指令手册"><a href="#AT-指令手册" class="headerlink" title="AT 指令手册"></a>AT 指令手册</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/product_center/[AirM2M%20%E6%97%A0%E7%BA%BF%E6%A8%A1%E5%9D%97AT%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8CV3.96.pdf](http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017161239747_AirM2M%20%E6%97%A0%E7%BA%BF%E6%A8%A1%E5%9D%97AT%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8CV3.96.pdf)">AirM2M 无线模块 AT 命令手册 v3.96</a></li>
<li><h4 id="AT-固件"><a href="#AT-固件" class="headerlink" title="AT 固件"></a>AT 固件</h4><code>AT固件，所有合宙 2G 模块通用</code></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017160743503_sw_file_20200519141030_AirM2M_V6117_AT_S_TTS.zip">AirM2M_V6117_AT_S_TTS</a><br><code>支持TTS，不支持SSL</code></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017160732011_sw_file_20200519135033_AirM2M_V6117_AT_S_SSL.zip">AirM2M_V6117_AT_S_SSL</a><br><code>支持SSL，不支持TTS。如果需要连接阿里云，请务必使用该固件</code></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/923">Air2xx/8xx 系列 GPRS 模块 AT 固件更新说明</a></li>
<li><h4 id="2G模块AT-指令文档"><a href="#2G模块AT-指令文档" class="headerlink" title="2G模块AT 指令文档"></a>2G模块AT 指令文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110151152033_%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91AT%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E%EF%BC%88%E4%B8%80%E6%9C%BA%E4%B8%80%E5%AF%86%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88%EF%BC%8CAT_S_TTS%E5%92%8CAT_S%E7%89%88%E6%9C%AC%E4%B8%8D%E6%94%AF%E6%8C%81%EF%BC%8CAT_S_SSL%E5%92%8CAT_S_NOTTS%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81%EF%BC%89.pdf">连接阿里云 AT 流程说明（一机一密认证方案，AT_S_SSL 版本支持）</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110151203921_%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91AT%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E%EF%BC%88%E4%B8%80%E5%9E%8B%E4%B8%80%E5%AF%86%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88%EF%BC%8CAT_S_TTS%E5%92%8CAT_S%E7%89%88%E6%9C%AC%E4%B8%8D%E6%94%AF%E6%8C%81%EF%BC%8CAT_S_SSL%E5%92%8CAT_S_NOTTS%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81%EF%BC%89.pdf">连接阿里云 AT 流程说明（一型一密认证方案，AT_S_SSL 版本支持）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/54">Luat GPRS 模块 TCPIP 应用指导 v1.1</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/918">Air 系列 AT 控制命令，针对 STM32F03C8T6 的示例代码</a></li>
</ul>
</li>
<li><h3 id="3-1-5-相关工具"><a href="#3-1-5-相关工具" class="headerlink" title="3.1.5 相关工具"></a>3.1.5 相关工具</h3><ul>
<li><h4 id="下载调试"><a href="#下载调试" class="headerlink" title="下载调试"></a>下载调试</h4></li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808182655634_Luatools_v2.exe">Luat下载调试工具v2</a><br><code>下载底层、下载代码、开发调试必备工具</code></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/713/0">LuaToolsV2 使用说明</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017160013544_RDA%E5%B9%B3%E5%8F%B0Lod%E5%AE%A2%E6%88%B7%E5%8D%87%E7%BA%A7%E5%B7%A5%E5%85%B72.5.7z">量产多口批量升级工具 v2.5（包含使用说明）</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110152628562_cooltools.7z">RDA 平台 2G 模块底层日志调试抓取工具（coolwatcher）</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/63">coolWatcher工具使用说明</a></p>
</li>
<li><h4 id="GPS-相关-1"><a href="#GPS-相关-1" class="headerlink" title="GPS 相关"></a>GPS 相关</h4></li>
<li><p><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/871/0">GPS相关调试工具以及使用说明相关资料</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/964">Air800系列模块如何下载GPS固件</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">批量生产时如何进行GPS生产测试</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/636/0">GPS信噪比测试方法</a></p>
</li>
</ul>
</li>
<li><h2 id="3-2-4G-Cat-4-模块"><a href="#3-2-4G-Cat-4-模块" class="headerlink" title="3.2 4G Cat.4 模块"></a>3.2 4G Cat.4 模块</h2></li>
<li><h3 id="3-2-1-硬件文档"><a href="#3-2-1-硬件文档" class="headerlink" title="3.2.1 硬件文档"></a>3.2.1 硬件文档</h3><ul>
<li><h4 id="Air720X-Air720H-HA-G-GA-D-DA"><a href="#Air720X-Air720H-HA-G-GA-D-DA" class="headerlink" title="Air720X(Air720H/HA/G/GA/D/DA)"></a>Air720X(Air720H/HA/G/GA/D/DA)</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155147373_Air720x(3229)%E7%B3%BB%E5%88%97%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20191028.pdf">产品简介</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155202167_%E5%90%88%E5%AE%994G%E6%A8%A1%E5%9D%97%E9%80%89%E5%9E%8B%E8%A1%A82020072301.pdf">4G 模块选型手册</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155155097_Air720x(3229)%E7%B3%BB%E5%88%97%E6%A8%A1%E5%9D%97%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8CV1.28.pdf">Air720x(3229) 系列模块硬件设计手册 v1.28</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155207434_Air720D_PADS%E7%89%88%E6%9C%AC%20(1).rar">Air720X 模块原理图 PCB 封装（PADS9.5)</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">Air720系列 GPIO口默认状态</a></li>
<li><h4 id="Air720SL"><a href="#Air720SL" class="headerlink" title="Air720SL"></a>Air720SL</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017143250955_Air720SL%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20191029.pdf">产品简介</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155202167_%E5%90%88%E5%AE%994G%E6%A8%A1%E5%9D%97%E9%80%89%E5%9E%8B%E8%A1%A82020072301.pdf">4G 模块选型手册</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017141504496_Air720SL_%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C_V1.00.pdf">Air720SL_硬件手册_V1.00</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017151603187_Air720SL_%E5%B0%81%E8%A3%85%E5%BA%93(PADS9.5%E6%A0%BC%E5%BC%8F).zip">Air720SL_封装库（PADS9.5)</a></li>
<li><a target="_blank" rel="noopener" href="https://lceda.cn/luat/evb_air720sl_a11">Air720SL_参考设计</a></li>
<li><h4 id="Air720SH-720SG-720SD"><a href="#Air720SH-720SG-720SD" class="headerlink" title="Air720SH/720SG/720SD"></a>Air720SH/720SG/720SD</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017152925558_Air720SG(3229)%E7%B3%BB%E5%88%97%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20200114.pdf">Air720SH系列模块产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017152925558_Air720SG(3229)%E7%B3%BB%E5%88%97%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20200114.pdf">Air720SG系列模块产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110155202167_%E5%90%88%E5%AE%994G%E6%A8%A1%E5%9D%97%E9%80%89%E5%9E%8B%E8%A1%A82020072301.pdf">4G模块选型表</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017152837922_Air720SH_Air720SG_Air720SD_%E6%A8%A1%E5%9D%97%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8CV1.03.pdf">Air720SH_Air720SG_Air720SD_模块硬件设计手册V1.03</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017153024171_Air720SH&SG_PADS%E7%89%88%E6%9C%AC.zip">Air720SH/SG_封装库（PADS9.5)</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017153131954_%E5%8F%82%E8%80%83%E8%AE%BE%E8%AE%A1.zip">Air720SH/SG_参考设计</a></li>
<li><h4 id="Air720X-mini-PCI-E封装"><a href="#Air720X-mini-PCI-E封装" class="headerlink" title="Air720X mini PCI-E封装"></a>Air720X mini PCI-E封装</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/720dminipcie/Luat_LTE_MiNiPCIe_Air720DI_%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20181122.pdf">Luat LTE MiNiPCIe Air720X 系列 模块产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/s720/Air720DI_Air720HI_SCHPCB%28MiniPCIE%29.7z">mini PCI-E 开发板原理图 PCB 资料</a></li>
<li><h4 id="Air720S-mini-PCI-E相关"><a href="#Air720S-mini-PCI-E相关" class="headerlink" title="Air720S mini PCI-E相关"></a>Air720S mini PCI-E相关</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110160502403_Luat_LTE_MiNiPCIe_Air720SHI_%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20191218.pdf">Luat LTE MiNiPCIe Air720SHI 模块产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201017172728871_Luat_LTE_MiNiPCIe_Air720SGI_%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20191220.pdf">Luat LTE MiNiPCIe Air720SGI 模块产品规格书</a></li>
</ul>
</li>
<li><h3 id="3-2-2-4G-Cat-4-开发板"><a href="#3-2-2-4G-Cat-4-开发板" class="headerlink" title="3.2.2 4G Cat.4 开发板"></a>3.2.2 4G Cat.4 开发板</h3><ul>
<li><h4 id="Air720系列-（S720）-开发板"><a href="#Air720系列-（S720）-开发板" class="headerlink" title="Air720系列 （S720） 开发板"></a>Air720系列 （S720） 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/s720/EVB_Air720_A13_DEMO_pads.7z">Air720 开发板原理图 PCB 资料（参考设计）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/s720/EVB_Air720_A13.pdf">Air720 开发板原理图 PDF 版</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/s720/Air720%204G%20LTE%20%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8EV1.3.pdf">Air720 开发板使用说明 v1.3</a></li>
<li><h4 id="Air720SL-S720SL-开发板"><a href="#Air720SL-S720SL-开发板" class="headerlink" title="Air720SL (S720SL) 开发板"></a>Air720SL (S720SL) 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="https://lceda.cn/luat/evb_air720sl_a11">Air720 开发板原理图 PCB 资料（参考设计）</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802s/Air720SL%204G%20LTE%20%E5%BC%80%E5%8F%91%E6%9D%BF%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8EV1.0.pdf">Air720SL 开发板使用说明 v1.0</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/651/0">合宙Luat Air720SL开发板（EVB_Air720SL）初体验 （1）</a></li>
</ul>
</li>
<li><h3 id="3-2-3-产品证书"><a href="#3-2-3-产品证书" class="headerlink" title="3.2.3 产品证书"></a>3.2.3 产品证书</h3><ul>
<li><h4 id="Air720"><a href="#Air720" class="headerlink" title="Air720"></a>Air720</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190711100823_Air720-CCC%E8%AF%81%E4%B9%A6.rar">Air720 3C 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190321142025_Air720-Rohs%E6%8A%A5%E5%91%8A.pdf">Air720 RoHS 报告</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190924170004_Air720%E5%9E%8B%E5%8F%B7%E6%A0%B8%E5%87%86%E8%AF%81.jpg">Air720 型号核准</a></li>
</ul>
</li>
<li><h3 id="3-2-4-AT固件"><a href="#3-2-4-AT固件" class="headerlink" title="3.2.4 AT固件"></a>3.2.4 AT固件</h3><ul>
<li><h5 id="Air720系列"><a href="#Air720系列" class="headerlink" title="Air720系列"></a>Air720系列</h5></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200919104052431_sw_file_20200707092706_AirM2M_720_V1497_LTE_AT.zip">AirM2M_720_V1497_LTE_AT</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/922">Air720X 系列模块 AT 固件更新说明</a></li>
<li><h5 id="Air720S系列"><a href="#Air720S系列" class="headerlink" title="Air720S系列"></a>Air720S系列</h5></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200919104619131_sw_file_20200723193153_AirM2M_720S_V569_LTE_AT.zip">AirM2M_720S_V569_LTE_AT</a></li>
</ul>
</li>
<li><h3 id="3-2-5-相关文档"><a href="#3-2-5-相关文档" class="headerlink" title="3.2.5 相关文档"></a>3.2.5 相关文档</h3><ul>
<li><h4 id="4G模块AT指令相关文档"><a href="#4G模块AT指令相关文档" class="headerlink" title="4G模块AT指令相关文档"></a>4G模块AT指令相关文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201014110453872_Luat%204G%E6%A8%A1%E5%9D%97AT%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8CV4.3.1.pdf">Luat4G模块AT命令手册V4.2.8</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/AT%20COMMAND%20Set%20for%20Luat%204G%20Modules_V3.89.pdf">Luat AT COMMAND Set for Luat 4G Modules v3.89</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110151152033_%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91AT%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E%EF%BC%88%E4%B8%80%E6%9C%BA%E4%B8%80%E5%AF%86%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88%EF%BC%8CAT_S_TTS%E5%92%8CAT_S%E7%89%88%E6%9C%AC%E4%B8%8D%E6%94%AF%E6%8C%81%EF%BC%8CAT_S_SSL%E5%92%8CAT_S_NOTTS%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81%EF%BC%89.pdf">连接阿里云 AT 流程说明（一机一密认证方案）</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110151203921_%E8%BF%9E%E6%8E%A5%E9%98%BF%E9%87%8C%E4%BA%91AT%E6%B5%81%E7%A8%8B%E8%AF%B4%E6%98%8E%EF%BC%88%E4%B8%80%E5%9E%8B%E4%B8%80%E5%AF%86%E8%AE%A4%E8%AF%81%E6%96%B9%E6%A1%88%EF%BC%8CAT_S_TTS%E5%92%8CAT_S%E7%89%88%E6%9C%AC%E4%B8%8D%E6%94%AF%E6%8C%81%EF%BC%8CAT_S_SSL%E5%92%8CAT_S_NOTTS%E7%89%88%E6%9C%AC%E6%94%AF%E6%8C%81%EF%BC%89.pdf">连接阿里云 AT 流程说明（一型一密认证方案）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/130">Air720 系列模块如何用 AT 指令切换频段</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/984">Air720系列模块空中升级完全指南</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/130">Air720 系列模块如何设置频段</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/913">Air720 系列专网 APN 设置流程</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/164">合宙 S720 开发板连接阿里云 MQTT</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/902">教你用 Air720 模块通过 AT 指令以 MQTTS 方式连接华为云（上篇）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/903">教你用 Air720 模块通过 AT 指令以 MQTTS 方式连接华为云（下篇）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/918">Air 系列 AT 控制命令，针对 STM32F03C8T6 的示例代码</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/928">Air720 模块认证须知</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/937">AIr 系列 4G 模块 AT 版本 PDP 使用汇总</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/939">Air 系列 4G 模块 AT 版本 HTTP 应用说明</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/938">Air 系列 4G 模块 MQTT 应用说明</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/946">世界各国家蜂窝移动通信网络频段分布</a></li>
<li><h4 id="4G模块Linux相关文档"><a href="#4G模块Linux相关文档" class="headerlink" title="4G模块Linux相关文档"></a>4G模块Linux相关文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/79">Air720 模块在 Linux 设备上的 RNDIS 网卡使用</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/37">Air720 模块Linux USB 驱动以及 PPP 拨号说明</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/82">Air720 模块在 OpenWrt 设备上的 RNDIS 网卡使用</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何利用RNDIS网卡设备收发AT指令</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/911">如何在 Linux 上添加合宙 4G 驱动</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">720模块USB描述符详解 </a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何让linux 中的ethxx 设备 改名 </a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何在linux下使用Air720S系列模块ECM网卡功能 </a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">Air720U在linux下的驱动修改 </a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">【linux平台】720U 底层抓包</a></li>
<li><h4 id="4G模块Android相关文档"><a href="#4G模块Android相关文档" class="headerlink" title="4G模块Android相关文档"></a>4G模块Android相关文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/95">4G 模块 Air720 系列 android RIL 驱动</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/940">安卓系统下如何用 USB 口抓取 4G 模块底层 Trace</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/936">安卓7 安卓8 出现三角符号，但是可以上网解决方案</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">android so库合集</a></li>
</ul>
</li>
<li><h3 id="3-2-6-相关工具"><a href="#3-2-6-相关工具" class="headerlink" title="3.2.6 相关工具"></a>3.2.6 相关工具</h3><ul>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110172810104_AirM2M_USB_Download&Com_Driver_for_4G_V1.0.0.4%20(1).7z">720X/720S系列 PC 端 USB 驱动</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/92">720X/720S系列 USB 驱动安装教程</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808183454135_sw_file_20200303181718_8910_module_usb_driver_signed%20_20200303_hezhou.7z">723U/724U/720U系列 PC 端 USB 驱动</a></p>
</li>
<li><p>[Luat下载调试工具v2]<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808182655634_Luatools_v2.exe">http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808182655634_Luatools_v2.exe</a>)<br><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/713/0">Luatools v2烧录教程（适用于2G、4G Cat.1、4G Cat.4模块）</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201110174411145_ASR%E5%B9%B3%E5%8F%B0core%E5%AE%A2%E6%88%B7%E5%8D%87%E7%BA%A7%E5%B7%A5%E5%85%B7V1.3_Air720%E7%B3%BB%E5%88%97.7z">ASR 平台量产多口升级工具 v1.3（包含使用说明）</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808185432677_8910-UPGRADEDOWNLOAD_R23.0.0001.7z">720/723/724系列升级工具 UPGRADEDOWNLOAD_R23.0.0001.7z</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/931">Windows / Linux 系统下如何用 USB 口抓取 4G 模块底层 Trace</a></p>
</li>
</ul>
</li>
<li><h2 id="3-3-4G-Cat-1-模块"><a href="#3-3-4G-Cat-1-模块" class="headerlink" title="3.3 4G Cat.1 模块"></a>3.3 4G Cat.1 模块</h2></li>
<li><p>###<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6" title="cat1 应用手册">cat1 应用手册</a></p>
</li>
<li><h3 id="3-3-1-硬件文档"><a href="#3-3-1-硬件文档" class="headerlink" title="3.3.1 硬件文档"></a>3.3.1 硬件文档</h3><ul>
<li><h4 id="Air720UG-720UH"><a href="#Air720UG-720UH" class="headerlink" title="Air720UG/720UH"></a>Air720UG/720UH</h4><ul>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200814142245280_Air720UH_Air720UG_%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_2020417.pdf">产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200814142519980_Air720UH_Air720UG_%E6%A8%A1%E5%9D%97%E7%A1%AC%E4%BB%B6%E8%AE%BE%E8%AE%A1%E6%89%8B%E5%86%8C_V1.9.pdf">Air720UG/Air720UH_模块硬件设计手册V1.9.pdf</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200814161803893_AIR720UH%E5%B0%81%E8%A3%85PADS9.5%E6%A0%BC%E5%BC%8F.zip">Air720UG/Air720UH_封装（PADS9.5格式）</a></li>
</ul>
</li>
<li><h4 id="Air724UG-723UG"><a href="#Air724UG-723UG" class="headerlink" title="Air724UG/723UG"></a>Air724UG/723UG</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201014095556849_Air724UG_Air723UG_%E6%A8%A1%E5%9D%97%E4%BA%A7%E5%93%81%E8%A7%84%E6%A0%BC%E4%B9%A6_20200807.pdf">产品规格书</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/383/0">Air724UG_Air723UG_模块硬件设计手册V2.1</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200821115513088_Air724UG_Air723UG_%E5%B0%81%E8%A3%85_PADS9.5%E6%A0%BC%E5%BC%8F.zip">Air724UG/Air723UG_封装（PADS9.5格式）</a></li>
</ul>
</li>
<li><h3 id="3-3-2-4G-Cat-1-开发板"><a href="#3-3-2-4G-Cat-1-开发板" class="headerlink" title="3.3.2 4G Cat.1 开发板"></a>3.3.2 4G Cat.1 开发板</h3><ul>
<li><h4 id="Air723-Air724-开发板"><a href="#Air723-Air724-开发板" class="headerlink" title="Air723/Air724 开发板"></a>Air723/Air724 开发板</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200821114813208_EVB_Air724UG_A13_%E8%AE%BE%E8%AE%A1%E6%96%87%E4%BB%B6_20200723.zip">Air723/Air724 开发板原理图 PCB 资料（参考设计）</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/103/0">Air724 开发板使用说明</a></li>
</ul>
</li>
<li><h3 id="3-3-3-产品证书"><a href="#3-3-3-产品证书" class="headerlink" title="3.3.3 产品证书"></a>3.3.3 产品证书</h3><ul>
<li><h4 id="Air720-1"><a href="#Air720-1" class="headerlink" title="Air720"></a>Air720</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190711100823_Air720-CCC%E8%AF%81%E4%B9%A6.rar">Air720 3C 证书</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190321142025_Air720-Rohs%E6%8A%A5%E5%91%8A.pdf">Air720 RoHS 报告</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-erp.oss-cn-hangzhou.aliyuncs.com/erp_site_file/product_file/pc_file_20190924170004_Air720%E5%9E%8B%E5%8F%B7%E6%A0%B8%E5%87%86%E8%AF%81.jpg">Air720 型号核准</a></li>
</ul>
</li>
<li><h3 id="3-3-4-AT固件"><a href="#3-3-4-AT固件" class="headerlink" title="3.3.4 AT固件"></a>3.3.4 AT固件</h3><ul>
<li><h5 id="Air720U系列"><a href="#Air720U系列" class="headerlink" title="Air720U系列"></a>Air720U系列</h5></li>
<li>[<a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1061/0">http://doc.openluat.com/article/1061/0</a>)</li>
</ul>
</li>
</ul>
<ul>
<li><h3 id="3-3-5-相关文档"><a href="#3-3-5-相关文档" class="headerlink" title="3.3.5 相关文档"></a>3.3.5 相关文档</h3><ul>
<li><h4 id="4G模块AT指令相关文档-1"><a href="#4G模块AT指令相关文档-1" class="headerlink" title="4G模块AT指令相关文档"></a>4G模块AT指令相关文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20201014110453872_Luat%204G%E6%A8%A1%E5%9D%97AT%E5%91%BD%E4%BB%A4%E6%89%8B%E5%86%8CV4.3.1.pdf">Luat4G模块AT命令手册V4.2.8</a></li>
<li><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/asr1802/AT%20COMMAND%20Set%20for%20Luat%204G%20Modules_V3.89.pdf">Luat AT COMMAND Set for Luat 4G Modules v3.89</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/928">Air720 模块认证须知</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/946">世界各国家蜂窝移动通信网络频段分布</a></li>
<li><h4 id="4G模块Linux相关文档-1"><a href="#4G模块Linux相关文档-1" class="headerlink" title="4G模块Linux相关文档"></a>4G模块Linux相关文档</h4></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/79">Air720 模块在 Linux 设备上的 RNDIS 网卡使用</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/37">Air720 模块Linux USB 驱动以及 PPP 拨号说明</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/82">Air720 模块在 OpenWrt 设备上的 RNDIS 网卡使用</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何利用RNDIS网卡设备收发AT指令</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/911">如何在 Linux 上添加合宙 4G 驱动</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何让linux 中的ethxx 设备 改名 </a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何在linux下使用Air720S系列模块ECM网卡功能 </a></li>
</ul>
</li>
</ul>
<ul>
<li><h3 id="3-3-6-相关工具"><a href="#3-3-6-相关工具" class="headerlink" title="3.3.6 相关工具"></a>3.3.6 相关工具</h3><ul>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808183454135_sw_file_20200303181718_8910_module_usb_driver_signed%20_20200303_hezhou.7z">Air720UH/Air723UG/Air724UG系列 PC 端 USB 驱动</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808182655634_Luatools_v2.exe">Luat下载调试工具v2</a><br><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">Luatools v2烧录教程（适用于2G、4G Cat.1、4G Cat.4模块）</a></li>
<li><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200808185432677_8910-UPGRADEDOWNLOAD_R23.0.0001.7z">Air720UH/Air723UG/Air724UG系列 系列升级工具 </a><h1 id="4-调试教程"><a href="#4-调试教程" class="headerlink" title="4. 调试教程"></a>4. 调试教程</h1></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/27">Air 系列模块重启原因分析及应对策略（一）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/28">Air 系列模块重启原因分析及应对策略（二）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/29">Air 系列模块重启原因分析及应对策略（三）</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/31">GPRS 如何防范掉线</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/17">Air202 / Air800 等 GPRS 模块无法下载问题分析步骤</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/19">Air202 / Air800 模块异常掉电重启问题分析不完全指南</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/21">Air202 / Air800 通话或录音出现电流噪音（TDD 噪音）问题分析与讨论</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/182">Air720 系列-死机 dump 数据功能使用说明</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/901">安卓 ril 无法上网初步分析</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/906">如何排查 Linux 使用 RNDIS 无法上网的问题</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/907">如何利用 RNDIS 网卡设备收发 AT 指令</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/910">Air720 系列 4G 模块软件异常死机后，如何 dump 死机现场数据</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/914">Air208 在西安某地区连接服务器失败问题分析过程</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/960">2G/4G模块开机SIM卡接口各信号波形对比</a></li>
<li><a target="_blank" rel="noopener" href="http://oldask.openluat.com/article/983">2G/4G模块AT版本AT指令交互流程抓取方法</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何判主板的4G/2G信号接收性能的好坏</a></li>
<li><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/664/0">如何获得 Altium Design (AD)格式的开发板图纸和模块封装</a></li>
</ul>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/02/18/696/" data-id="ckkfmdgek00djvkcg6ebaf4s7" data-title="合宙模块AT相关资料汇总" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/27/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/26/">26</a><a class="page-number" href="/page/27/">27</a><span class="page-number current">28</span><a class="page-number" href="/page/29/">29</a><a class="page-number" href="/page/30/">30</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/29/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>