<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/4/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-2259" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/2259/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T12:52:43.000Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/2259/">ESD原理和ESD防护注意事项</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109205227214_2.png" alt="undefined" title="undefined"></p>
<h3 id="什么是ESD"><a href="#什么是ESD" class="headerlink" title="什么是ESD"></a><strong>什么是ESD</strong></h3><p>ESD全称是Electro-Static discharge，其中文意思是“静电放电”。是指具有不同静电荷电位的物体相互靠近或直接接触引起的电荷转移。简单说就是电荷瞬间从一个物体移到另一个物体上，形成一个电荷转移的过程的现象，即具有不同静电电势（电位差）的物体或表面之间的静电电荷转移，就是静电放电。在EMC领域我们习惯上称之为静电放电抗扰度试验，具体可参阅国际标准IEC-61000-4-2/GBT 17626.2。其中分接触放电和电磁场击穿介质放电。</p>
<h3 id="ESD产生原理："><a href="#ESD产生原理：" class="headerlink" title="ESD产生原理："></a><strong>ESD产生原理：</strong></h3><p>具有不同静电荷电位的物体由于直接接触或静电感应所引起的物体之间静电电荷的转移。通常指在静电场的能量达到一定程度之后，击穿其间介质而进行放电的现象。</p>
<h3 id="静电的产生："><a href="#静电的产生：" class="headerlink" title="静电的产生："></a><strong>静电的产生：</strong></h3><p>静电是一种静止的电荷，是电子不均匀分布的结果，静电产生的两种途径主要是摩擦起电与感应起电。</p>
<h2 id="1-摩擦起电"><a href="#1-摩擦起电" class="headerlink" title="1. 摩擦起电"></a><strong>1. 摩擦起电</strong></h2><ul>
<li><p>当两种不同性质的材料（至少其中一个为绝缘体)接触和分离，电荷从一种材料转移到另一种材料。</p>
</li>
<li><p>得到电荷的材料呈负电性，反之亦然。</p>
</li>
<li><p>产生电荷的类型与两种材料的相对位置有关。</p>
</li>
<li><p>任何两种材料摩擦后电极性都是可以判断的，在摩擦起电过程中，两者的距离越远，则各自产生的电荷越多。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110103209087_3.png" alt="undefined" title="undefined"><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110103146389_4.png" alt="undefined" title="undefined"></p>
</li>
</ul>
<h2 id="2-感应起电"><a href="#2-感应起电" class="headerlink" title="2. 感应起电"></a><strong>2. 感应起电</strong></h2><ul>
<li><p>非接触的方法</p>
</li>
<li><p>当导电材料充分接近时,来源于某静电源的静电场将引起该导电材料表面的电荷分离。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110103607349_5.png" alt="undefined" title="undefined"></p>
</li>
</ul>
<h2 id="静电的特点"><a href="#静电的特点" class="headerlink" title="静电的特点"></a>静电的特点</h2><ul>
<li>高电位：可达数万至数十万伏，操作时常达数百至数千伏（人通常对于3KV以下静电不易感觉到）</li>
<li>低电量：静电流多为微安级</li>
<li>作用时间短：微秒级</li>
<li>受环境影响大：特别是湿度，湿度上升则静电积累减少，静电压下降；反之越干燥，静电压越高；</li>
</ul>
<h2 id="材料的电特性"><a href="#材料的电特性" class="headerlink" title="材料的电特性"></a>材料的电特性</h2><ol>
<li>绝缘体</li>
</ol>
<ul>
<li>很大的体电阻，体电阻大于1X10^11 欧姆</li>
<li>很少有电子在物体中移动，在同一种物体上的不同地方可以保持正电荷和负电荷</li>
<li>绝缘体的静电耗散只能通过环境，不能通过自己的表面接地耗散<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110113019505_7.png" alt="undefined" title="undefined"></li>
</ul>
<ol start="2">
<li>导体</li>
</ol>
<ul>
<li>体电阻小于1X10^4 欧姆</li>
<li>电子能在导体表面和体内自由流动</li>
<li>如果被接地，电荷能迅速被中和<br>常见的铜、锡、钢、铝 等金属材料都是导体；</li>
</ul>
<ol start="3">
<li>静电释放材料（静电耗散材料）</li>
</ol>
<ul>
<li>体电阻大于1X10^4 欧姆，小于1X10^11 欧姆</li>
<li>电子在材料的表面可以自由移动，但移动的速率由于电阻而受到控制</li>
<li>如果被接地，电荷将被缓慢的释放掉<br>防静电材料都是用静电耗散材料制作的，如防静电屏蔽袋，防静电工作服等等。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110114749711_9.png" alt="undefined" title="undefined"></li>
</ul>
<h2 id="人体活动产生典型的静电电压"><a href="#人体活动产生典型的静电电压" class="headerlink" title="人体活动产生典型的静电电压"></a>人体活动产生典型的静电电压</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110113344459_8.png" alt="undefined" title="undefined"></p>
<table>
<thead>
<tr>
<th>人体活动</th>
<th>静电势（空气相对湿度10%-20%）</th>
<th>静电势（空气相对湿度65%-90%）</th>
</tr>
</thead>
<tbody><tr>
<td>在地毯上走动</td>
<td>35000</td>
<td>1500</td>
</tr>
<tr>
<td>在聚乙烯地板上走动</td>
<td>12000</td>
<td>250</td>
</tr>
<tr>
<td>在工作台走动</td>
<td>6000</td>
<td>100</td>
</tr>
<tr>
<td>拿聚乙烯纤维包</td>
<td>7000</td>
<td>600</td>
</tr>
<tr>
<td>从工作台拿起聚乙烯衬垫</td>
<td>20000</td>
<td>1200</td>
</tr>
<tr>
<td>坐在填有聚氟脂泡膜的椅子上</td>
<td>18000</td>
<td>15000</td>
</tr>
<tr>
<td><strong>从数据上可以明显看到在干燥的环境中产生的静电压更高，所以实际生活中在干燥的秋冬季节更易出现ESD问题</strong></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h2 id="各种常用器件的静电敏感性"><a href="#各种常用器件的静电敏感性" class="headerlink" title="各种常用器件的静电敏感性"></a>各种常用器件的静电敏感性</h2><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110111404901_6.png" alt="undefined" title="undefined"></p>
<h2 id="模块的防静电能力"><a href="#模块的防静电能力" class="headerlink" title="模块的防静电能力"></a>模块的防静电能力</h2><p>下表是合宙Air724UG模块的ESD防护能力：</p>
<table>
<thead>
<tr>
<th>管脚名</th>
<th>接触放电</th>
<th>空气放电</th>
</tr>
</thead>
<tbody><tr>
<td>VBAT,GND</td>
<td>±5KV</td>
<td>±10KV</td>
</tr>
<tr>
<td>ANT_MAIN</td>
<td>±5KV</td>
<td>±10KV</td>
</tr>
<tr>
<td>Others</td>
<td>±0.5KV</td>
<td>±1KV</td>
</tr>
</tbody></table>
<p>从表中可以看到除了VBAT管脚和天线管脚的防静电能力可以达到空气放电10KV以外，其他管脚的防静电能力都很弱鸡，只能到空气放电1KV，从前面的资料我们可以看到人体放电很轻松就能达到10KV，这样的话模块不是很容易就被打坏了吗？合宙为什么不把所有管脚的防静电能力都做到10KV呢？模块的所有管脚都加好ESD防护器件会有哪些问题呢？</p>
<ul>
<li>成本会大幅增加，而绝大多数客户并不会用到模块的所有管脚，这势必会造成极大的浪费；</li>
<li>增加了这么多的ESD防护器件后，会占用大量的空间，必然会大幅增加模块的尺寸，这不符合模块小型化的趋势；</li>
<li>ESD防护器件要放置在靠近连接器的地方才能起到最好的防护效果，如果放置在模块内部，防护性能会大打折扣；</li>
</ul>
<p>既然ESD防护绝大部分的工作需要靠终端来实现，那么我们在使用模块的时候要具体要采用哪些防护措施呢？</p>
<h2 id="ESD防护措施"><a href="#ESD防护措施" class="headerlink" title="ESD防护措施"></a>ESD防护措施</h2><p>我们该如何来保护我们的电子产品呢？</p>
<ol>
<li>生产环节</li>
</ol>
<ul>
<li>接地 接地就是将静电通过一条线的连接放入大地，这是防静电措施中最直接最有效的。导体常用的接地方法有：带防静电手腕及工作表面接地等。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210110122944683_10.png" alt="undefined" title="undefined">　</li>
<li>静电屏蔽 静电敏感元件在储存或运输过程中会暴露于有静电的区域中，用静电屏蔽的方法可削弱外界静电对电子元件的影响。最通常的方法是用静电屏蔽袋作为保护。　</li>
<li>离子中和 绝缘体往往是易产生静电的，对绝缘体静电的消除，用接地方法是无效的，通常采用的方法是离子中和， 即在工作环境中使用离子风机，离子气枪。</li>
</ul>
<p>人体静电防护系统主要有防静电手腕带、脚腕带、脚跟带、工作服、鞋袜、帽、手套或指套等组成，具有静电泄放，中和与屏蔽等功能。<br>静电防护工作是一项长期的系统工程，任何环节的失误或疏漏，都将导致静电防护工作的失败。<br>2. 产品设计环节</p>
<p>产品到了消费者手上后，就会暴露在静电放电的风险中，我们必须在产品设计的环节中就设计好ESD防护：<br>整机ESD 性能主要决定于：结构屏蔽性， ESD器件防护 和 PCB Layout 防护。</p>
<ol>
<li><p>结构屏蔽性<br>所有的结构缝隙都是潜在的ESD泄漏路径，有可能会损坏我们的产品，所以我们必须尽可能的用外壳密封起来。</p>
</li>
<li><p>ESD防护器件<br>对于USB连接器，SIM卡座，天线 等接口，无法通过结构来密封，我们可以通过增加ESD防护器件来增加产品的抗静电能力。<br>常见的ESD防护器件有TVS管和MLV压敏电阻</p>
</li>
</ol>
<p>TVS 管箝位时间短、 结间电容小，用于高速信号防护，而 MLV价格便宜用于低速信号的防护</p>
<p>选择防护器件时的几个关键参数：</p>
<ul>
<li>反向工作电压VRWM：这个电压要高于保护网络端的正常工作电压</li>
<li>反向漏电流 IR：反向电流过大不仅增大系统功耗，而且可能影响信号功能，尤其在高速、低驱动能力 的信号上更明显；</li>
<li> Clamping Voltage 和 Peak Pulse Power<br>TVS 管不损坏 的前提下，Peak Pulse Power 值越大、TVS 体积越大，则 TVS 反向击穿阻抗越小，钳位电压 Clamping Voltage 也就越小，后端器件越安全；</li>
<li>结间电容CJ：结间电容太大将影响高速信号完整性；<br>我们建议 USB、SDIO 信号使用结间电容小于 0.5pf 的 TVS 管进行防护。另外天线也必须使用结间电容小于 0.5pf 的 TVS 管。基于成本考虑，中低速信号如 SIM, I2C,SPI，LCD_RST，LCD_FMARK，SIM_DET，HP_R，HP_L，HPMIC_IN_DET，KEYPAD 这些信号可以使用结容较大的TVS 或者 MLV 进行防护。</li>
</ul>
<ol start="3">
<li>PCB Layout 防护<br> 不管选择怎样的TVS器件，它们在电路板上的布局非常重要。TVS布局前的导线长度应该减到最小，因为快速(0.7ns)ESD脉冲可能产生导致TVS保护能力下降的额外电压。另外，快速ESD脉冲可能在电路板上相邻(平行)导线间产生感应电压，感应电压路径将成为另一条让浪涌到达IC的路径。因此，被保护的输入线不应该被放置在其它单独、未受保护的走线旁边。</li>
</ol>
<p>推荐的ESD抑制器件PCB布局方案应该是：</p>
<ul>
<li>放置在被保护的IC之前，但尽量与连接器/触点PCB侧尽量近；</li>
<li>放置在与信号线串联任何电阻之前；</li>
<li>放置在包含保险丝在内的过滤或调节器件之前；</li>
<li>放置在IC之前的其他可能有ESD的地方。</li>
<li>TVS管的接地端到主地的泄放回路要尽可能的小；</li>
</ul>
<h2 id="附-ESD静电放电测试模型："><a href="#附-ESD静电放电测试模型：" class="headerlink" title="附 ESD静电放电测试模型："></a><strong>附 ESD静电放电测试模型：</strong></h2><p>(1)HBM 人体放电模型(Human-Body Model, HBM)</p>
<p>人体模型（Human Body Model - HBM），HMB是ESD模型中建立最早和最主要的模型之一。</p>
<p>HBM是传统的测试模式，定义在工业标准 (MIL-STD-883x)中。人体上带电，特别在干燥的冬天，常会接触如门把手时便会有被电到的感觉。这是人体活动的结果，静电荷积聚在人体上，当我们去接触芯片时，人体上的静电就经由IC的pin脚进入芯片内部，然后经由IC放电到地。(不只在接触PIN时才会发生，因为封装IC的表面就存在静电荷，接触包装表面也会发生。)放电过程在瞬间发生，大概几纳秒内将IC组件烧毁。</p>
<p>(2)MM 机器放电模型 (Machine Model, MM)</p>
<p>机器放电模式，也就是将人体换成了机器设备，主体部分的改变，使得测试模式的改变。在这情况下，指静电电荷积累在机器设备上，当接触到IC进对芯片放电，并因此毁坏了电路。机器放电模式，工业标准EIAJ-IC-121 method20。MM测试电路与HBM相似，数值改变如，电容值为200pf,充电电压500V,充电电阻100Mohms，放电部分加&gt;500nH电感(电感量与电流无关，感抗XL=2πfL，f为频率)。因为绝大部分机器是金属的，等效电阻极小，导致瞬时放电电流巨大(几安培)。机器模型因在日本得到广泛应用，也叫日本模型。与家具模型不同的是它主要由200pf电容串非常低的电阻（&lt;10Ω）代替通常串联的电阻构成。机器模型的典型代表如带电绝缘的机器人手臂、车辆、绝缘导体等。机器模型放电的波形与预料的家具模型波形相似，不同的是带电电容较大。典型的机器模型对小电阻（＜10Ω）放电的波形, 峰值电流可达几百安培，持续时间（决定于放电通路的电感）为几百纳。</p>
<p>(3)CDM 组件充电模式 (Charged-Device Model, CDM)</p>
<p>这种模式下，电荷积聚在IC本身，可能是因为与PIN摩擦，或者是接触到其他物体的静电电荷，使本身带电。再通过直接接地或间接接地进行放电，而形成的一种放电现象。此类现象的模拟十分困难，是因为导致放电的组件差异所造成的。这种现象表明IC可能在生产过程中受损，比如IC在传输过程中带电，在安装到电路板上时接地而损坏。有时也可能在测试过程中受到损坏。CDM等效电路因情况的不同而多种多样。因为封装很小，所以电容和电感值都很小，大约5pf和10nH。CDM的放电时间很短，电流能在1ns时间内冲到15安培的高峰，因此这种现象更容易对IC造成损伤。CDM与HBM没有相互关连性，成功的CDM测试不能预示器件用HBM会发生什么情况!</p>
<p>(4)其它FIM/IEC/E-Gun 电磁场感应模式 (Field-Induced Model, FIM)</p>
<p>此类模式与CDM相似，只是IC带电方式不同。这种模式是IC在电场环境中，因感应而使本身带电，放电模式与CDM类拟。这种模式工业标准(JESD22-C101)，详情请阅读相关标准。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/09/2259/" data-id="ckkfmdgam003mvkcgd6r61pnp" data-title="ESD原理和ESD防护注意事项" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2255" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/2255/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T10:30:10.000Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/2255/">3、8910芯片USB描述符：接口描述符---RNDIS</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="三、RNDIS网卡"><a href="#三、RNDIS网卡" class="headerlink" title="三、RNDIS网卡"></a>三、RNDIS网卡</h1><p>&emsp;&emsp;RNDIS 是 Remote Network Driver Interface Specification（远程网络驱动程序接口规范） 的首字母缩写，实际上的作用为 TCP/IP over USB，也即视 USB 设备（如手机）为网卡，是基于USB实现RNDIS实际上就是TCP/IP over USB，从而使 Windows 可以通过 USB 设备连接网络。</p>
<p>&emsp;&emsp;TCP/IP 协议族，简称为 TCP/IP， 其名称源于其最早的两个核心协议 TCP（Transmission Control Protocol，传输控制协议）和 IP （Internet Protocol，网际协议），它规定了设备连接网络的方式以及数据如何传输的标准。</p>
<p>&emsp;&emsp;8910平台支持RNDIS功能，并且默认处于开启状态。模块只要能联网，正常情况下只要将模块接入电脑（windows、linux）电脑就会识别出来一块网卡，不需要经历ppp拨号那样复杂的流程就可以访问联网。</p>
<h2 id="3-1、控制接口"><a href="#3-1、控制接口" class="headerlink" title="3.1、控制接口"></a>3.1、控制接口</h2><h3 id="3-1-1、RNDIS控制接口描述符（9字节）"><a href="#3-1-1、RNDIS控制接口描述符（9字节）" class="headerlink" title="3.1.1、RNDIS控制接口描述符（9字节）"></a>3.1.1、RNDIS控制接口描述符（9字节）</h3><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>136</td>
<td>0x09</td>
<td>描述符大小为9字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>144</td>
<td>0x04</td>
<td>接口描述符类型</td>
</tr>
<tr>
<td><strong>bInterfaceNumber</strong></td>
<td>8</td>
<td>152</td>
<td>0x00</td>
<td>此接口号的索引为0。</td>
</tr>
<tr>
<td><strong>bAlternateSetting</strong></td>
<td>8</td>
<td>160</td>
<td>0x00</td>
<td>用于选择此接口的备用设置的值为0</td>
</tr>
<tr>
<td><strong>bNumEndpoints</strong></td>
<td>8</td>
<td>168</td>
<td>0x01</td>
<td>此接口使用的端点数为1（不包括端点0）</td>
</tr>
<tr>
<td><strong>bInterfaceClass</strong></td>
<td>8</td>
<td>176</td>
<td>0xE0</td>
<td>接口实现无线控制器类</td>
</tr>
<tr>
<td><strong>bInterfaceSubClass</strong></td>
<td>8</td>
<td>184</td>
<td>0x01</td>
<td>接口实现射频控制器子类</td>
</tr>
<tr>
<td><strong>bInterfaceProtocol</strong></td>
<td>8</td>
<td>192</td>
<td>0x03</td>
<td>接口使用设备线适配器同步流接口协议</td>
</tr>
<tr>
<td><strong>iInterface</strong></td>
<td>8</td>
<td>200</td>
<td>0x03</td>
<td>接口字符串描述符索引为3</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182434811.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-1-2、RNDIS-CDC-Header功能描述符（5字节）"><a href="#3-1-2、RNDIS-CDC-Header功能描述符（5字节）" class="headerlink" title="3.1.2、RNDIS CDC Header功能描述符（5字节）"></a>3.1.2、RNDIS CDC Header功能描述符（5字节）</h3><p>&emsp;&emsp;Header功能描述符表示功能描述符的开始，其他紧跟的内容就是此设备的功能描述符的内容。bcdCDC表示的是CDC的版本。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>208</td>
<td>0x05</td>
<td>描述符的大小，以字节为单位</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>216</td>
<td>0x24</td>
<td>描述符类型</td>
</tr>
<tr>
<td><strong>bDescriptorSubType</strong></td>
<td>8</td>
<td>224</td>
<td>0x00</td>
<td>描述符子类型</td>
</tr>
<tr>
<td><strong>bcdCDC</strong></td>
<td>16</td>
<td>232</td>
<td>0x0110</td>
<td>USB通信类定义通信规范1.10版</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/2021010918245821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-1-3、RNDIS-CDC-Call-Management功能描述符（4字节）"><a href="#3-1-3、RNDIS-CDC-Call-Management功能描述符（4字节）" class="headerlink" title="3.1.3、RNDIS CDC Call Management功能描述符（4字节）"></a>3.1.3、RNDIS CDC Call Management功能描述符（4字节）</h3><p>&emsp;&emsp;Call Management描述的就是电话相关的东西，AT指令集的支持情况。 bDataInterface表示如有电话时，电话数据内容对应的接口号。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>248</td>
<td>0x05</td>
<td>描述符的大小，以字节为单位</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>256</td>
<td>0x24</td>
<td>描述符类型</td>
</tr>
<tr>
<td><strong>bDescriptorSubType</strong></td>
<td>8</td>
<td>264</td>
<td>0x01</td>
<td>描述符子类型</td>
</tr>
<tr>
<td><strong>bmCapabilities</strong></td>
<td>8</td>
<td>272</td>
<td>0x00</td>
<td>Bit0:设备是否自己处理呼叫管理1<br/>Bit1:设备是否可以通过数据类接口发送/接收呼叫管理信息0</td>
</tr>
<tr>
<td><strong>bDataInterface</strong></td>
<td>8</td>
<td>280</td>
<td>0x01</td>
<td>可选用于呼叫管理的数据类接口的接口号</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182523969.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-1-4、RNDIS-CDC-ACM功能描述符（4字节）"><a href="#3-1-4、RNDIS-CDC-ACM功能描述符（4字节）" class="headerlink" title="3.1.4、RNDIS CDC ACM功能描述符（4字节）"></a>3.1.4、RNDIS CDC ACM功能描述符（4字节）</h3><p>&emsp;&emsp;ACM(Abstract Control Model)，即抽象控制模型，PSTN下，除了ACM模型还有还有DLM(Direct Line Mode), TCM(Telephone Control Model)。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>288</td>
<td>0x04</td>
<td>描述符的大小，以字节为单位</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>296</td>
<td>0x24</td>
<td>描述符类型</td>
</tr>
<tr>
<td><strong>bDescriptorSubType</strong></td>
<td>8</td>
<td>304</td>
<td>0x02</td>
<td>描述符子类型</td>
</tr>
<tr>
<td><strong>bmCapabilities</strong></td>
<td>8</td>
<td>312</td>
<td>0x00</td>
<td>第0位:设备是否支持Set_Comm_Feature、Clear_Comm_Feature和Get_Comm_Feature的组合请求<br/>第1位:设备是否支持Set_Line_Coding、Set_Control_Line_State、Get_Line_Coding和Serial_State 1的通知组合</td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20210109182557614.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-1-5、RNDIS-CDC-Union功能描述符（5字节）"><a href="#3-1-5、RNDIS-CDC-Union功能描述符（5字节）" class="headerlink" title="3.1.5、RNDIS CDC Union功能描述符（5字节）"></a>3.1.5、RNDIS CDC Union功能描述符（5字节）</h3><p>&emsp;&emsp;Union描述符就是用来告诉主机端，哪些接口是联合在一起的，对应着一个功能，这个功能需要主机装载对应的驱动来实现，因此，功能与驱动是一对一的关系。这里bControlInterface值为0，则表示接口0为控制接口，bSubBoardinateInterface0值为1，表示接口1为控制接口0的下级接口，即数据接口。在CDC标准中，控制接口是必须的，而数据接口是可选的，因此，数据接口为控制接口的附属。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>解码</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>320</td>
<td>0x05</td>
<td>0x05</td>
<td>描述符的大小，以字节为单位</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>328</td>
<td>0x24</td>
<td>0x24</td>
<td>描述符类型</td>
</tr>
<tr>
<td><strong>bDescriptorSubType</strong></td>
<td>8</td>
<td>336</td>
<td>0x06</td>
<td>0x06</td>
<td>描述符子类型</td>
</tr>
<tr>
<td><strong>bControlInterface</strong></td>
<td>8</td>
<td>344</td>
<td>0x00</td>
<td>0x00</td>
<td>通信或数据类接口的接口号</td>
</tr>
<tr>
<td><strong>bSubordinateInterface0</strong></td>
<td>8</td>
<td>352</td>
<td>0x01</td>
<td>0x01</td>
<td>下级接口的接口号</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182612146.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-1-6、RNDIS-通知端点描述符（7字节）"><a href="#3-1-6、RNDIS-通知端点描述符（7字节）" class="headerlink" title="3.1.6、RNDIS 通知端点描述符（7字节）"></a>3.1.6、RNDIS 通知端点描述符（7字节）</h3><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>360</td>
<td>0x07</td>
<td>描述符大小为7字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>368</td>
<td>0x05</td>
<td>端点描述符类型</td>
</tr>
<tr>
<td><strong>bEndpointAddress</strong></td>
<td>8</td>
<td>376</td>
<td>0x82</td>
<td>这是端点号为2的输入端点</td>
</tr>
<tr>
<td><strong>bmAttributes</strong></td>
<td>8</td>
<td>384</td>
<td>0x03</td>
<td>类型-传输：中断<br/>低功耗：无<br/>Pkt大小调整：无</td>
</tr>
<tr>
<td><strong>wMaxPacketSize</strong></td>
<td>16</td>
<td>392</td>
<td>0x0008</td>
<td>此终结点的最大数据包大小为8字节。如果是高速，则每帧增加0个事务</td>
</tr>
<tr>
<td><strong>bInterval</strong></td>
<td>8</td>
<td>408</td>
<td>0x09</td>
<td>轮询间隔值为每9帧。如果高速，每256帧</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/2021010918263120.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="3-2、数据接口"><a href="#3-2、数据接口" class="headerlink" title="3.2、数据接口"></a>3.2、数据接口</h1><h3 id="3-2-1、RNDIS数据接口描述符（9字节）"><a href="#3-2-1、RNDIS数据接口描述符（9字节）" class="headerlink" title="3.2.1、RNDIS数据接口描述符（9字节）"></a>3.2.1、RNDIS数据接口描述符（9字节）</h3><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>416</td>
<td>0x09</td>
<td>描述符大小为9字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>424</td>
<td>0x04</td>
<td>接口描述符类型</td>
</tr>
<tr>
<td><strong>bAlternateSetting</strong></td>
<td>8</td>
<td>432</td>
<td>0x01</td>
<td>此接口号为1。</td>
</tr>
<tr>
<td><strong>bAlternateSetting</strong></td>
<td>8</td>
<td>440</td>
<td>0x00</td>
<td>用于选择此接口的备用设置的值为0</td>
</tr>
<tr>
<td><strong>bNumEndpoints</strong></td>
<td>8</td>
<td>448</td>
<td>0x02</td>
<td>此接口使用的端点数为2（不包括端点0）</td>
</tr>
<tr>
<td><strong>bInterfaceClass</strong></td>
<td>8</td>
<td>456</td>
<td>0x0A</td>
<td>接口实现数据接口类</td>
</tr>
<tr>
<td><strong>bInterfaceProtocol</strong></td>
<td>8</td>
<td>472</td>
<td>0x00</td>
<td>接口使用不需要特定于类的协议</td>
</tr>
<tr>
<td><strong>bInterfaceSubClass</strong></td>
<td>8</td>
<td>464</td>
<td>0x00</td>
<td>子类编码为0</td>
</tr>
<tr>
<td><strong>iInterface</strong></td>
<td>8</td>
<td>480</td>
<td>0x04</td>
<td>接口字符串描述符索引为4</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182652980.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-2-2、RNDIS数据输入端点描述符（7字节）"><a href="#3-2-2、RNDIS数据输入端点描述符（7字节）" class="headerlink" title="3.2.2、RNDIS数据输入端点描述符（7字节）"></a>3.2.2、RNDIS数据输入端点描述符（7字节）</h3><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>488</td>
<td>0x07</td>
<td>描述符大小为7字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>496</td>
<td>0x05</td>
<td>端点描述符类型</td>
</tr>
<tr>
<td><strong>bEndpointAddress</strong></td>
<td>8</td>
<td>504</td>
<td>0x81</td>
<td>这是端点号为1的IN端点</td>
</tr>
<tr>
<td><strong>bmAttributes</strong></td>
<td>8</td>
<td>512</td>
<td>0x02</td>
<td>类型-传输：批量<br/>包大小调整：否</td>
</tr>
<tr>
<td><strong>wMaxPacketSize</strong></td>
<td>16</td>
<td>520</td>
<td>0x0200</td>
<td>此终结点的最大数据包大小为512字节。如果是高速，则每帧增加0个事务</td>
</tr>
<tr>
<td><strong>bInterval</strong></td>
<td>8</td>
<td>536</td>
<td>0x00</td>
<td>轮询间隔值为每0帧。高速未定义</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182711325.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="3-2-3、RNDIS数据输出端点描述符（7字节）"><a href="#3-2-3、RNDIS数据输出端点描述符（7字节）" class="headerlink" title="3.2.3、RNDIS数据输出端点描述符（7字节）"></a>3.2.3、RNDIS数据输出端点描述符（7字节）</h3><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>544</td>
<td>0x07</td>
<td>描述符大小为7字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>552</td>
<td>0x05</td>
<td>端点描述符类型</td>
</tr>
<tr>
<td><strong>bEndpointAddress</strong></td>
<td>8</td>
<td>560</td>
<td>0x01</td>
<td>这是端点号为1的输出端点</td>
</tr>
<tr>
<td><strong>bmAttributes</strong></td>
<td>8</td>
<td>568</td>
<td>0x02</td>
<td>类型-传输：批量<br/>包大小调整：否</td>
</tr>
<tr>
<td><strong>wMaxPacketSize</strong></td>
<td>16</td>
<td>576</td>
<td>0x0200</td>
<td>此终结点的最大数据包大小为512字节。如果是高速，则每帧增加0个事务</td>
</tr>
<tr>
<td><strong>bInterval</strong></td>
<td>8</td>
<td>592</td>
<td>0x00</td>
<td>轮询间隔值为每0帧。</td>
</tr>
</tbody></table>
<p><img src="https://img-blog.csdnimg.cn/20210109182723499.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/09/2255/" data-id="ckkfmdgam003lvkcg9xhj8yas" data-title="3、8910芯片USB描述符：接口描述符---RNDIS" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2254" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/2254/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T09:48:07.000Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/2254/">2、8910芯片USB描述符：接口描述符---概述</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="二、接口描述符-概述"><a href="#二、接口描述符-概述" class="headerlink" title="二、接口描述符-概述"></a>二、接口描述符-概述</h1><p>&emsp;&emsp;接口描述符一般是按设备的运行状态分类，这样设备可以在不同的接口中切换来实现设备运行状态的切换，如在设备在运行状态下使用正常的接口描述符，在停止状态下使用该接口描述符的备用接口描述符。</p>
<p>&emsp;&emsp;USB协议规定，接口描述符不能单独返回，必须附着在配置描述符后一并返回。</p>
<h2 id="2-1、接口关联描述符（8字节）"><a href="#2-1、接口关联描述符（8字节）" class="headerlink" title="2.1、接口关联描述符（8字节）"></a>2.1、接口关联描述符（8字节）</h2><table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>72</td>
<td>0x08</td>
<td>描述符大小为8字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>80</td>
<td>0x0B</td>
<td>接口类型</td>
</tr>
<tr>
<td><strong>bFirstInterface</strong></td>
<td>8</td>
<td>88</td>
<td>0x00</td>
<td>起始接口号是0</td>
</tr>
<tr>
<td><strong>bInterfaceCount</strong></td>
<td>8</td>
<td>96</td>
<td>0x02</td>
<td>接口数为2</td>
</tr>
<tr>
<td><strong>bFunctionClass</strong></td>
<td>8</td>
<td>104</td>
<td>0xE0</td>
<td>该接口属于无线控制器类</td>
</tr>
<tr>
<td><strong>bFunctionSubClass</strong></td>
<td>8</td>
<td>112</td>
<td>0x01</td>
<td>该接口属于RF控制器子类</td>
</tr>
<tr>
<td><strong>bFunctionProtocol</strong></td>
<td>8</td>
<td>120</td>
<td>0x03</td>
<td>该接口使用设备线适配器同步流接口协议</td>
</tr>
<tr>
<td><strong>iFunction</strong></td>
<td>8</td>
<td>128</td>
<td>0x05</td>
<td>接口字符串描述符索引为5</td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20210109174558545.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/09/2254/" data-id="ckkfmdgam003kvkcg90wm0a9j" data-title="2、8910芯片USB描述符：接口描述符---概述" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2253" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/2253/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T09:40:44.000Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/2253/">input标签详解（图片版）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p style="text-align:start;" size="0" _root="undefined" __ownerid="undefined" __hash="undefined" __altered="false">&lt;input&gt; 标签规定了用户可以在其中输入数据的输入字段。输入字段可通过多种方式改变，取决于 type 属性。</p><p></p><p><span style="font-size:20px"><strong>type属性及其对应形态一览</strong></span></p><p></p><p><span style="font-size:20px"><span style="font-size:14px">1.默认情况下type=“text” disabled/radonly为不可点击状态/只读状态（可以聚焦但是没有光标）。</span></span></p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;text&quot;</span> <span style="color:#9cdcfe">disabled</span><span style="color:#808080">&gt;</span><br/><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;text&quot;</span> <span style="color:#9cdcfe">readonly</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap align-left" style="text-align:left"><img class="media-wrap image-wrap align-left" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109163811532_QQ截图20210108195008.png"/></div><p></p><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6391" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109165024613_image.png"/></div><p></p><p>2.button形态，需加一个value属性来确定按钮的文字</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;button&quot;</span> <span style="color:#9cdcfe">onclick</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;</span><span style="color:#dcdcaa">click</span><span style="color:#ce9178">()&quot;</span> <span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;按钮&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6390" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109164857569_image.png"/></div><p>3.选择日期</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;date&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6392" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109165341325_image.png"/></div><p></p><p>4.选择日期和时间</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;datetime-local&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6393" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109165728534_image.png"/></div><p>5.<span style="color:#000000"><span style="font-size:13.3333px"><span style="background-color:#ffffff">支持<strong>html5</strong>的浏览器会自动验证<strong>email</strong>域值的格式合法性。当输入的不是email格式的内容时，在支持html5的浏览器中提交该表单会出个提示说不是合法的email格式，样式与普通input无异，在手机端会唤出英文键盘。</span></span></span></p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;email&quot;</span><span style="color:#808080">&gt;</span></code></pre><p><span style="font-size:14px"><span style="color:#333333">6.点击选择文件</span></span></p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;file&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6395" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109170344989_image.png"/></div><p>7.type=“hidden”，什么也没有，让人直呼神（ji）奇（lei），跟css里的display：none的作用好像也没啥不同。</p><p></p><p>8.上传图片功能（与img标签用法相似，需传入src属性、alt属性）</p><p>不同点：input的图片可点击（小手形态）可聚焦，在表单中自带submit功能。（<span style="color:#ff0000"><span style="font-size:14px"><span style="background-color:#ffffff">创建一个图像控件，该控件单击后将导致表单立即被提交。</span></span></span>）</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;image&quot;</span> <span style="color:#9cdcfe">src</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;./QQ截图20210108183129.png&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6396" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109171747979_image.png"/></div><p></p><p>9.日期选择到月份</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;month&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6397" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109171926877_image.png"/></div><p></p><p>10.只可写数字，字母敲不上去</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;number&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6398" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109172012717_image.png"/></div><p>11.很好理解，密码框</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;password&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6399" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109172123364_image.png"/></div><p>12.单选框：需要name属性进行分组，name相同的只可进行单选，name不同互不影响，value为提交时input的代表值</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;sex&quot;</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;radio&quot;</span> <span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&#x27;1&#x27;</span><span style="color:#808080">&gt;</span><span style="color:#d4d4d4">男</span><br/><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">name</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;sex&quot;</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;radio&quot;</span> <span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&#x27;2&#x27;</span><span style="color:#808080">&gt;</span><span style="color:#d4d4d4">女</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6400" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109172359083_image.png"/></div><p></p><p>13.进度条（通过min，max，和value控制进度条的起点终点和现在的位置）</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;range&quot;</span> <span style="color:#9cdcfe">min</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">1</span> <span style="color:#9cdcfe">max</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">200</span> <span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">10</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6401" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109173107447_image.png"/></div><p>14.重置按钮 点击可使整个表单恢复初始状态（默认文字：重置）</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;reset&quot;</span> <span style="color:#9cdcfe">value</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;点我你就白写了&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6403" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109173443868_image.png"/></div><p></p><p>15.提交表单（点击提交整个表单的按钮）</p><p></p><p>16.选择时间</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;time&quot;</span><span style="color:#808080">&gt;</span></code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6404" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109173847715_image.png"/></div><p>17.选择一整个周</p><pre><code><span style="color:#808080">&lt;</span><span style="color:#569cd6">input</span> <span style="color:#9cdcfe">type</span><span style="color:#d4d4d4">=</span><span style="color:#ce9178">&quot;week&quot;</span><span style="color:#808080">&gt;</span> </code></pre><div class="media-wrap image-wrap"><img class="media-wrap image-wrap" id="6405" alt="image.png" title="image.png" src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109174023503_image.png"/></div><p></p><p></p><p></p><p></p><p></p><p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/09/2253/" data-id="ckkfmdgal003ivkcgfhmhf9l7" data-title="input标签详解（图片版）" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2252" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/09/2252/" class="article-date">
  <time class="dt-published" datetime="2021-01-09T09:26:59.000Z" itemprop="datePublished">2021-01-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/09/2252/">1、8910芯片USB描述符：设备描述符&amp;配置描述符</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>&emsp;&emsp;AirCat1系列模块是合宙出品的4G cat1 LTE模块，拥有丰富功能模块以及完善AT指令，用户可以通过AT指令实现所需的功能，也可以插上PC的USB当作网卡使用，也可以使用PPP拨号等等。这些功能都可以用模块的USB设备实现，下面就介绍下AirCat1系列模块强大的USB设备。</p>
<p>&emsp;&emsp;AirCat1模块USB功能默认支持NDIS网卡和ECM网卡，但同时只能支持一个，用户可以根据自己的实际需要自行切换。ecm网卡一般是在linux上面会用到，windows默认不带ecm驱动。除了网卡外，还默认支持三个虚拟串口。如下图所示：</p>
<table>
<thead>
<tr>
<th align="center">接口名</th>
<th align="center">功能</th>
</tr>
</thead>
<tbody><tr>
<td align="center">NDIS</td>
<td align="center">RNDIS网卡接口(默认)</td>
</tr>
<tr>
<td align="center">ECM</td>
<td align="center">ECM网卡接口</td>
</tr>
<tr>
<td align="center">modem</td>
<td align="center">PPP拨号和发送AT指令</td>
</tr>
<tr>
<td align="center">AT</td>
<td align="center">发送AT指令</td>
</tr>
<tr>
<td align="center">ap</td>
<td align="center">调试抓log接口</td>
</tr>
</tbody></table>
<p>&emsp;&emsp;本系列文章将会按照USB的枚举顺序依次对模块的USB描述符进行简要分析。</p>
<h1 id="一、设备描述符-amp-配置描述符"><a href="#一、设备描述符-amp-配置描述符" class="headerlink" title="一、设备描述符&amp;配置描述符"></a>一、设备描述符&amp;配置描述符</h1><h2 id="1-1、设备描述符（18字节）"><a href="#1-1、设备描述符（18字节）" class="headerlink" title="1.1、设备描述符（18字节）"></a>1.1、设备描述符（18字节）</h2><p>&emsp;&emsp;设备描述符是USB设备的第一个描述符，每个USB设备都得具有设备描述符，且只能拥有一个。<br>| 字段                   | 长度（位） | 偏移量（位） | 十六进制值 | 说明                             |<br>| ———————- | ———- | ———— | ———- | ——————————– |<br>| <strong>bLength</strong>            | 8          | 0            | 0x12       | 描述符大小为18字节               |<br>| <strong>bDescriptorType</strong>    | 8          | 8            | 0x01       | 设备描述符类型                   |<br>| <strong>bcdUSB</strong>             | 16         | 16           | 0x0200     | USB规范版本2.00                  |<br>| <strong>bDeviceClass</strong>       | 8          | 32           | 0x00       | 驱动类型                         |<br>| <strong>bDeviceSubClass</strong>    | 8          | 40           | 0x00       | 驱动子类                         |<br>| <strong>bDeviceProtocol</strong>    | 8          | 48           | 0x00       | 无协议设备基础                   |<br>| <strong>bMaxPacketSize0</strong>    | 8          | 56           | 0x40       | 端点0的最大数据包大小为64        |<br>| <strong>idVendor</strong>           | 16         | 64           | 0x1782     | 供应商ID为6018:展讯香港有限公司  |<br>| <strong>idProduct</strong>          | 16         | 80           | 0x4E00     | 产品ID为19968                    |<br>| <strong>bcdDevice</strong>          | 16         | 96           | 0x0000     | 设备版本号为0.00                 |<br>| <strong>iManufacturer</strong>      | 8          | 112          | 0x01       | 制造商字符串描述符索引为1        |<br>| <strong>iProduct</strong>           | 8          | 120          | 0x02       | 产品字符串描述符索引为2          |<br>| <strong>iSerialNumber</strong>      | 8          | 128          | 0x00       | 设备没有描述序列号的字符串描述符 |<br>| <strong>bNumConfigurations</strong> | 8          | 136          | 0x01       | 设备有1种可能的配置              |</p>
<p><img src="https://img-blog.csdnimg.cn/20210109172000306.png" alt="在这里插入图片描述"></p>
<h2 id="1-2、配置描述符（9字节）"><a href="#1-2、配置描述符（9字节）" class="headerlink" title="1.2、配置描述符（9字节）"></a>1.2、配置描述符（9字节）</h2><p>&emsp;&emsp;配置描述符定义了设备的配置信息，一个设备可以有多个配置描述符。<br>&emsp;&emsp;大部分的USB设备只有一个配置描这符，设备存在多个配置描述符时，系统会自动弹出对话框让用户选择。</p>
<p>&emsp;&emsp;配置描述符在USB设备的枚举过程中，需要获取两次：<br>&emsp;&emsp;第一次只获取配置描这符的基本长度9字节，获取后从wTotalLength字节中解析出配置描述符的总长度，然后再次获取全部的描述符。</p>
<p>&emsp;&emsp;配置描述数据中不仅包括配置描述符本身，也包括其下的接口描述符和端点描述符。</p>
<table>
<thead>
<tr>
<th>字段</th>
<th>长度（位）</th>
<th>偏移量（位）</th>
<th>十六进制值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><strong>bLength</strong></td>
<td>8</td>
<td>0</td>
<td>0x09</td>
<td>描述符大小为9字节</td>
</tr>
<tr>
<td><strong>bDescriptorType</strong></td>
<td>8</td>
<td>8</td>
<td>0x02</td>
<td>配置描述符类型</td>
</tr>
<tr>
<td><strong>wTotalLength</strong></td>
<td>16</td>
<td>16</td>
<td>0x0090</td>
<td>此配置的数据总长度为144。<br/>这包括返回的所有描述符的组合长度警告：wTotalLength的值不等于实际长度</td>
</tr>
<tr>
<td><strong>bNumInterfaces</strong></td>
<td>8</td>
<td>32</td>
<td>0x05</td>
<td>此配置支持5个接口</td>
</tr>
<tr>
<td><strong>bConfigurationValue</strong></td>
<td>8</td>
<td>40</td>
<td>0x01</td>
<td>值1应用于选择此配置</td>
</tr>
<tr>
<td><strong>iConfiguration</strong></td>
<td>8</td>
<td>48</td>
<td>0x00</td>
<td>设备没有描述此配置的字符串描述符</td>
</tr>
<tr>
<td><strong>bmAttributes</strong></td>
<td>8</td>
<td>56</td>
<td>0xE0</td>
<td>配置特征：<br/>位7:保留（设置为一个）1<br/>位6:自供电1<br/>位5:远程唤醒1</td>
</tr>
<tr>
<td><strong>bMaxPower</strong></td>
<td>8</td>
<td>64</td>
<td>0xC8</td>
<td>此配置中设备的最大功耗为400 mA</td>
</tr>
<tr>
<td><img src="https://img-blog.csdnimg.cn/20210109172013908.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/09/2252/" data-id="ckkfmdgal003jvkcgh1fday6x" data-title="1、8910芯片USB描述符：设备描述符&amp;配置描述符" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2241" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/07/2241/" class="article-date">
  <time class="dt-published" datetime="2021-01-07T02:42:52.000Z" itemprop="datePublished">2021-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/07/2241/">luatOS启蒙小课堂</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210107104100876_Air640w.xmind" target="_blank">Air640w.xmind</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/07/2241/" data-id="ckkfmdgak003gvkcg5e5fc5ql" data-title="luatOS启蒙小课堂" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2236" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/06/2236/" class="article-date">
  <time class="dt-published" datetime="2021-01-06T12:50:30.000Z" itemprop="datePublished">2021-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/06/2236/">EVB_Air724UG_A13开发板使用指南</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>&emsp;&emsp;Air724 是上海合宙物联网于2020年3月下旬发布的一款基于UIS8910DM芯片组的物联网通讯模块。 模块通讯性能优越，符合Cat1通讯标准，支持最大下行速率 10Mbps 和最大上行速率5Mbps数据传输。 具有全功能音频输入输出接口，LCD接口，Camera接口，内存卡接口，矩阵键盘接口，ADC接口，其外设齐全，是替代2G物联网模块的理想产品。<br>&emsp;&emsp;EVB_Air724UG系列开发板是针对Air724模块而设计，本文将针对A13版本开发板做一个基本介绍。</p>
<hr>
<p>@<a href="%E7%9B%AE%E5%BD%95">TOC</a></p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><h2 id="一、给开发板添加必要的附属器件"><a href="#一、给开发板添加必要的附属器件" class="headerlink" title="一、给开发板添加必要的附属器件"></a>一、给开发板添加必要的附属器件</h2><ul>
<li> 下图为合宙提供的开发板实物图，配件含天线一根。如进行USB调试，需自行配置一根USB电缆与电脑进行通讯。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106204945821_1.png" alt="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205011585_2.png" alt="undefined" title="undefined"><br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205141370_3.png" alt="undefined" title="undefined"></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">注意：</span><br><span class="line">   1. 位于开发板右下角的串口检测接口未装配测试排针，如果不使用，可以不进行焊接，其他接口均有引出。</span><br><span class="line">   2. 用户如需对模块单独供电，可焊接4V排针，上电前需将USB供电的4V对应开关拨至OFF档后，再进行单独供电。</span><br><span class="line">   3. 部分功能虽开发板自带，但默认不连接，需自行使用跳帽进行短接以便使用。</span><br><span class="line">   4. 开发板可能需要自行配全的零件：跳帽、排针、杜邦线。</span><br></pre></td></tr></table></figure>

<h2 id="二、供电与通信介绍"><a href="#二、供电与通信介绍" class="headerlink" title="二、供电与通信介绍"></a>二、供电与通信介绍</h2><p><strong>接口：</strong><br> 开发板上有两个micro USB接口。</p>
<ul>
<li>位于上方的USB连接器(如下图)与Air724的USB_DM，USB_DP相连，实际连接的是模块的USB接口。安装模块的USB驱动后，在设备管理器中会枚举出三个虚拟串口。这个USB口比较常用，用于固件下载，调试，日志抓取，RNDIS应用等</li>
<li>位于下方的USB连接器是通过串口转换芯片CH330N和Air724的 UART1/UART2相连，并通过一个拨动开关来选择。实际连接的是模块的串口。在设备管理器中会枚举出一个CH340的串口设备。</li>
</ul>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205221354_4.png" alt="undefined" title="undefined"></p>
<p><strong>供电：</strong><br>开发板提供三种方式供电。</p>
<ol>
<li> 从上方的USB接口直接用micro USB数据线连接PC供电。开发板上内置了JW5033S 电源转换芯片，可以将USB的5V电源转换为4V电压给模块供电。</li>
<li>从下方的USB连接器的串口接口供电，也是可以直接用micro USB数据线连接PC供电。与上方的电源路径相同。</li>
<li>同时提供了4V的测试点，可以不通过内置的JW5033S电源芯片，用外部的直流稳压电源给模块供电，建议电压范围为：3.5V~4.2V。这种供电方式通常用于模块的功耗测试。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205244419_5.png" alt="undefined" title="undefined"><br><code>注意：这两个USB连接器都可以给模块供电，也可以同时插上，以提高对开发板的供电能力。</code></li>
</ol>
<h2 id="三、开机"><a href="#三、开机" class="headerlink" title="三、开机"></a>三、开机</h2><ol>
<li>使用USB线缆，插入左侧USB端口，打开开发板左侧的电源开关，之后按下开机按钮3秒钟，如果电脑扬声器打开，应该能听到USB被识别的声音。<br>注意：A所指示的框图区域，拨码开关1和2的位置需拨至上方与下图保持一致，以确保开发板能够正常工作。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107194243442_1610019107(1).png" alt="undefined" title="undefined"></li>
<li>打开电脑的设备管理器，如果出现如下情况，进行下一步，需配置相关开发环境。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210109141006128_1610172454(1).png" alt="undefined" title="undefined"><h2 id="四、配置相关开发环境"><a href="#四、配置相关开发环境" class="headerlink" title="四、配置相关开发环境"></a>四、配置相关开发环境</h2></li>
</ol>
<ul>
<li>第一步，安装驱动程序，安装后如果不使用开发板网卡上网，应该禁用开发板自带的Rndis网卡。<br>驱动下载地址如下,直接安装即可。<br><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/uis8910dm/sw_file_20200303181718_8910_module_usb_driver_signed%20_20200303_hezhou.7z">http://www.openluat.com/Product/file/uis8910dm/sw_file_20200303181718_8910_module_usb_driver_signed%20_20200303_hezhou.7z</a><br>安装成功后打开设备管理器，会出现如下界面：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205552719_15.png" alt="undefined" title="undefined"></li>
<li>第二步，安装编程环境，推荐使用微软公司的最新开源编辑器Visual studio code + Luatools V2，下载地址为:<br><a target="_blank" rel="noopener" href="https://visualstudio.microsoft.com/zh-hans/?rr=https://www.baidu.com/link?url=k7IXsN9yTtIo2o7LQVR4YtRDeou8ovXtrskN_5ZM3gjWBFECiKRKBuGLTJ3vub0h&wd=&eqid=ee3aa6ef00050d2c000000025e8cb05c">https://visualstudio.microsoft.com/zh-hans/?rr=https%3A%2F%2Fwww.baidu.com%2Flink%3Furl%3Dk7IXsN9yTtIo2o7LQVR4YtRDeou8ovXtrskN_5ZM3gjWBFECiKRKBuGLTJ3vub0h%26wd%3D%26eqid%3Dee3aa6ef00050d2c000000025e8cb05c</a><br><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/luatoolsV2-redirect.html">http://www.openluat.com/Product/file/luatoolsV2-redirect.html</a></li>
</ul>
<h2 id="五、电脑没有映射出端口怎么办"><a href="#五、电脑没有映射出端口怎么办" class="headerlink" title="五、电脑没有映射出端口怎么办"></a>五、电脑没有映射出端口怎么办</h2><p>如电脑未映射出端口，请依次检查：</p>
<ol>
<li> 开发板指示灯红灯是否常亮，如有，请检查3)</li>
<li> 供电是否充足（板子有没有反复重启，或者电源灯点不亮）</li>
<li> USB电缆质量</li>
<li> 驱动是否安装成功（设备管理器里能看到3个虚拟COM口）<h1 id="如何进行固件下载"><a href="#如何进行固件下载" class="headerlink" title="如何进行固件下载"></a>如何进行固件下载</h1></li>
</ol>
<h2 id="下载方式"><a href="#下载方式" class="headerlink" title="下载方式"></a>下载方式</h2><p>开发板支持两种下载方式：免BOOT下载与BOOT下载</p>
<ul>
<li>Notes:Air724UG模块需要使模块进入特定的下载模式，也就是BOOT模式，才能更新该模块的固件。通过上电前拉高第66脚复用管脚USB_BOOT/KEYIN0管脚至1.8V，可使模块进入BOOT模式。<br>&emsp;①开发板BOOT按键连接了1.8V的管脚，在上电前按下该键，模块在上电后就可进入BOOT模式进行更新固件，需要注意的是此模式下模块在更新的整个过程和更新后会一直保持BOOT模式，更新完成后需要重启开发板。<br>&emsp;②免BOOT模式通过Luatools软件内部功能智能实现，软件在更新模块固件前先使模块重启，在重新开机时主动让模块进入BOOT模式，省去了手动按键的流程，需要注意的是该模式只有在模块处于开机状态，并且模块正常运行时才能够进行免BOOT更新，在更新完成后会自动重启。<h3 id="1-免BOOT下载"><a href="#1-免BOOT下载" class="headerlink" title="1.免BOOT下载"></a>1.免BOOT下载</h3></li>
</ul>
<h4 id="AT固件或lua固件不带脚本下载流程"><a href="#AT固件或lua固件不带脚本下载流程" class="headerlink" title="AT固件或lua固件不带脚本下载流程"></a>AT固件或lua固件不带脚本下载流程</h4><ul>
<li>&lt;1&gt;开发板上电开机，打开luatools，点击下载选项。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107200117520_1610020811(1).png" alt="undefined" title="undefined"></li>
<li>&lt;2&gt;免BOOT下载取消勾选1，选择其需要下载的文件2，点击下载3。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107200710924_1610021014(1).png" alt="undefined" title="undefined"></li>
<li>&lt;3&gt;下载完成<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107202009017_1610021963(1).png" alt="undefined" title="undefined"></li>
</ul>
<h4 id="lua固件带脚本下载流程"><a href="#lua固件带脚本下载流程" class="headerlink" title="lua固件带脚本下载流程"></a>lua固件带脚本下载流程</h4><ul>
<li>&lt;1&gt;选择项目管理测试。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107202720963_1610022419(1).png" alt="undefined" title="undefined"></li>
<li>&lt;2&gt;选择底层固件包1，增加所需脚本2，不勾选BOOT下载3，点击下载底层与脚本4。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107212203542_1610025686(1).png" alt="undefined" title="undefined"></li>
<li>&lt;3&gt;下载完成<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107204252862_1610023255(1).png" alt="undefined" title="undefined"><h3 id="2-BOOT模式下载"><a href="#2-BOOT模式下载" class="headerlink" title="2.BOOT模式下载"></a>2.BOOT模式下载</h3><h4 id="AT固件或lua固件不带脚本下载流程-1"><a href="#AT固件或lua固件不带脚本下载流程-1" class="headerlink" title="AT固件或lua固件不带脚本下载流程"></a>AT固件或lua固件不带脚本下载流程</h4></li>
<li>&lt;1&gt;开发板上电开机，打开luatools，点击下载选项。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107200117520_1610020811(1).png" alt="undefined" title="undefined"></li>
<li>&lt;2&gt;BOOT下载勾选1，选择其需要下载的文件2，点击下载3。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107200710924_1610021014(1).png" alt="undefined" title="undefined"></li>
<li>&lt;3&gt;提示等待进入BOOT模式。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107210326860_1610024574(1).png" alt="undefined" title="undefined"></li>
<li>&lt;4&gt;按下开发板BOOT键不松，点击重启键一次，即可进入BOOT模式。<img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107210853108_1610024801(1).png" alt="undefined" title="undefined"></li>
<li>&lt;5&gt;提示下载后松开BOOT键。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107210956475_1610024977(1).png" alt="undefined" title="undefined"></li>
<li>&lt;6&gt;下载完成。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107211053847_1610025036(1).png" alt="undefined" title="undefined"></li>
</ul>
<h4 id="lua固件带脚本下载流程-1"><a href="#lua固件带脚本下载流程-1" class="headerlink" title="lua固件带脚本下载流程"></a>lua固件带脚本下载流程</h4><ul>
<li>&lt;1&gt;选择项目管理测试。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107202720963_1610022419(1).png" alt="undefined" title="undefined"></li>
<li>&lt;2&gt;选择底层固件包1，增加所需脚本2，勾选BOOT下载3，点击下载底层与脚本4。<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107211743006_1610025441(1).png" alt="undefined" title="undefined"></li>
<li>&lt;3&gt;下载完成<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107212524744_1111.png" alt="undefined" title="undefined"><h2 id="固件包指引"><a href="#固件包指引" class="headerlink" title="固件包指引"></a>固件包指引</h2></li>
<li>&lt;1&gt;AT固件下载地址：<br><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1061/0">http://doc.openluat.com/article/1061/0</a></li>
<li>&lt;2&gt;luat固件下载地址：<br><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/1061/0">http://doc.openluat.com/article/1061/0</a></li>
</ul>
<h1 id="硬件资源描述"><a href="#硬件资源描述" class="headerlink" title="硬件资源描述"></a>硬件资源描述</h1><h2 id="一、引脚定义"><a href="#一、引脚定义" class="headerlink" title="一、引脚定义"></a>一、引脚定义</h2><p>  &emsp;&emsp;Air724 模块支持的GPIO接口达29个，电平为1.8V ，最大输出电流约2mA，部分引脚可改变其电压域，GPIO介绍：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=60" title="GPIO介绍">GPIO介绍</a><br>&emsp;&emsp;Air724 模块支持通用串口3个，SPI显示屏接口1个，I2C接口1个，相机接口1个，端口介绍：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=46" title="端口介绍">端口介绍</a></p>
<p>开发板双侧引脚定义如下：</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205304497_6.png" alt="undefined" title="undefined"></p>
<p>&lt;1&gt; 上下插针均为26pin，共计52个引脚，上下插针GPIO口的引出达18个。<br>&lt;2&gt; 上侧的插针（J24） GPIO 有11pin，GND 2pin，通用串口2组 4pin，4V与1.8V电压输出2 pin，PBINT开机按键1pin，按键脚1个KIN01pin（与下载功能复用），PSM内部保留功能引脚 1pin，其他功能4pin。<br>&lt;3&gt; 下侧的插针（J26） GPIO有7pin，耳机差分输出1组 2pin，HOST专用串口1组 2pin，麦克风差分输入1组2pin，电源输出 1pin，按键 11pin（KEYOUT4复用UART3TX，KEYOUT5复用UART3RX），其他功能引脚 1pin。<br>其他接口定义如下：</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205323709_7.png" alt="undefined" title="undefined"></p>
<ol>
<li><p>  左侧有一个SPI的显示屏接口为7pin （K2），其中信号线 5pin，电源 1pin， GND 1pin。</p>
</li>
<li><p>  右侧有一个24pin 的串口相机接口（J27），其中信号线 8pin，电源 3pin，GND 2pin，NC(未使用）11 pin，其中有一根数据线可以和GPIO17复用。<br>3）板载有两个SIM卡槽， SIM0 （J25） 和 SIM1 （J15），其中SIM0为优先专用卡槽，SIM1的3pin信号线与GPIO29,30,31复用。<br>4）板载的LED有三个灯，红色为工作指示，信号由GPIO5控制，绿色为网络状态灯，蓝色为LTE注册灯，分别受GPIO_1和GPIO_4控制<br>5）除此之外板载接口还有串口数据检测接口（J14）、SPK接口（扬声器）与ADC（模拟电压输入）接口。</p>
</li>
</ol>
<h2 id="二、功能区定义"><a href="#二、功能区定义" class="headerlink" title="二、功能区定义"></a>二、功能区定义</h2><ul>
<li>Air724开发板支持以下功能：<br>&emsp;&emsp;1. 支持Camera接口<br>&emsp;&emsp;2. 支持Audio接口<br>&emsp;&emsp;3. 支持矩阵键盘接口<br>&emsp;&emsp;4. 自带MIC功能<br>&emsp;&emsp;5. 支持TF卡功能与LCD屏功能<br>&emsp;&emsp;6. 支持SPK功能<br>&emsp;&emsp;7. 支持I2C接口，自带I2C传感器功能<br>&emsp;&emsp;8. 支持WIFI外部天线接口，自带板载天线功能<br>&emsp;&emsp;9. 支持ADC2与ADC3两路接口，ADC2自带热敏电阻，ADC3自带电位器<br>&emsp;&emsp;10. 支持串口1、串口2内部与外部切换<br>整体示意图如下：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102046594_1610072419(1).png" alt="undefined" title="undefined"></li>
</ul>
<hr>
<h3 id="1-Camera接口"><a href="#1-Camera接口" class="headerlink" title="1.Camera接口"></a>1.Camera接口</h3><ul>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108101939956_1610072345(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;Camera接口最大支持200W像素，支持数据格式YUV422, Y420, RAW8, RAW10，集成GC0310驱动(SPI接口模式下最高支持30W像素)。<br>&emsp;&emsp;Note:开发板上的Camera接口使用24Pin的上接触式端子，安装时注意正反。</p>
<ul>
<li><h4 id="相关管脚定义"><a href="#相关管脚定义" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>VCC_CAMA</td>
<td>79</td>
<td>/</td>
<td>/</td>
<td>Camera模拟部分电源</td>
<td>1.6V~3.2v/100mA 默认1.8V</td>
<td></td>
</tr>
<tr>
<td>VCC_CAMD</td>
<td>80</td>
<td>/</td>
<td>/</td>
<td>Camera数字部分电源</td>
<td>1.4V~2.18v/100mA 默认1.8V</td>
<td></td>
</tr>
<tr>
<td>GPIO_17</td>
<td>50</td>
<td>CAMI2C_SDA1</td>
<td>I/O</td>
<td>Camera I2C</td>
<td>VILmin=-0.3V VILmax=0.6V VIHmin=1.2V VIHmax=2.0V VOHmin= V_GLOBAL_1V8<em>0.7 VOLmax= V_GLOBAL_1V8</em>0.3</td>
<td>电压域V_GLOBAL_1V8</td>
</tr>
<tr>
<td>CAMI2C_SCL1</td>
<td>51</td>
<td>/</td>
<td>O</td>
<td>Camera I2C</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_RST</td>
<td>84</td>
<td>/</td>
<td>O</td>
<td>重启Camera</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_PWDN</td>
<td>78</td>
<td>/</td>
<td>O</td>
<td>关闭Camera</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_REFCLK</td>
<td>85</td>
<td>/</td>
<td>O</td>
<td>Camera 基准时钟</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_SCK</td>
<td>86</td>
<td>/</td>
<td>I</td>
<td>SPI Camera 时钟输入</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_SI1</td>
<td>88</td>
<td>/</td>
<td>I</td>
<td>SPI Camer数据输入1</td>
<td>同上</td>
<td>同上</td>
</tr>
<tr>
<td>CAM_SI0</td>
<td>87</td>
<td>/</td>
<td>I</td>
<td>SPI Camer数据输入0</td>
<td>同上</td>
<td>同上</td>
</tr>
</tbody></table>
<h3 id="2-Audio接口"><a href="#2-Audio接口" class="headerlink" title="2.Audio接口"></a>2.Audio接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102151727_1610072482(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;耳机根据第3段和第4段的接线定义不同可以分为 国标OMTP 和 美标CTIA 两种，在设计耳机插座的电路后需要选择相应的耳机。<br>&emsp;&emsp;Note:Air724UG 开发板是按照国标OMTP设计的，故只能使用 OMTP标准的耳机，示意图如下：</p>
<ul>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107161043029_1610006995(1).png" alt="undefined" title="undefined"></li>
<li><h4 id="相关管脚定义-1"><a href="#相关管脚定义-1" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>HEADMIC_IN_DET</td>
<td>105</td>
<td>/</td>
<td>I</td>
<td>耳机按键检测</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HP_R</td>
<td>103</td>
<td>/</td>
<td>O</td>
<td>耳机输出</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HP_L</td>
<td>112</td>
<td>/</td>
<td>O</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>HP_DET</td>
<td>106</td>
<td>/</td>
<td>I</td>
<td>耳机插入检测</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HEADMIC_N</td>
<td>104</td>
<td>/</td>
<td>I</td>
<td>麦克输入，需要加外部偏置电路</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HEADMIC_P</td>
<td>113</td>
<td>/</td>
<td>I</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>HEADMIC_BIAS</td>
<td>114</td>
<td>/</td>
<td>O</td>
<td>给HEADMIC 提供偏置电压</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="3-矩阵键盘接口"><a href="#3-矩阵键盘接口" class="headerlink" title="3. 矩阵键盘接口"></a>3. 矩阵键盘接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102255565_1610072551.png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;    Air724UG模块最大支持6×6矩阵键盘，开发板预留的单侧接口最高支持5×5工作，如需支持6×6，需使用排线等其他方式实现。</p>
<ul>
<li><h4 id="相关管脚定义-2"><a href="#相关管脚定义-2" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4>&emsp;&emsp;管脚定义：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=57">http://doc.openluat.com/wiki/6?wiki_page_id=57</a><h3 id="4-MIC接口"><a href="#4-MIC接口" class="headerlink" title="4.MIC接口"></a>4.MIC接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102352696_1610072610(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>MIC使用型号：B4013AM423-093</p>
<ul>
<li><h4 id="相关管脚定义-3"><a href="#相关管脚定义-3" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>MIC-</td>
<td>21</td>
<td>/</td>
<td>I</td>
<td>麦克输入，已内置偏置电路</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MIC+</td>
<td>22</td>
<td>/</td>
<td>I</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="5-TF卡接口"><a href="#5-TF卡接口" class="headerlink" title="5. TF卡接口"></a>5. TF卡接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102505801_1610072666(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>SD卡要求如下：<br>&emsp;&emsp;1、文件系为FAT32格式（windows、linux都可以正常识别），所以非FAT格式的SD卡会挂载失败，而无法正常识别<br>&emsp;&emsp;2、支持的SD卡最大容量为32GB<br>&emsp;&emsp;3、SD卡文件访问通过路径前加上【/sdcard0】</p>
<ul>
<li><h4 id="相关管脚定义-4"><a href="#相关管脚定义-4" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4>&emsp;&emsp;管脚定义：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=56">http://doc.openluat.com/wiki/6?wiki_page_id=56</a><h3 id="6-LCD屏接口"><a href="#6-LCD屏接口" class="headerlink" title="6. LCD屏接口"></a>6. LCD屏接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102623147_1610072753(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;使用LCD专用SPI接口，用于驱动1.8V /2.8V电压的SPI LCD屏幕，最大支持320*240分辨率。</p>
<ul>
<li><h4 id="相关管脚定义-5"><a href="#相关管脚定义-5" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4>&emsp;&emsp;管脚定义：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=53">http://doc.openluat.com/wiki/6?wiki_page_id=53</a><h3 id="7-SPK接口"><a href="#7-SPK接口" class="headerlink" title="7.SPK接口"></a>7.SPK接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108102721488_1610072814(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>可直接驱动8欧姆Speaker，最大输出功率1W。</p>
<ul>
<li><h4 id="相关管脚定义-6"><a href="#相关管脚定义-6" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>SPK-</td>
<td>18</td>
<td>/</td>
<td>O</td>
<td>Speaker差分信号输出，可以直接驱动8欧姆Speaker，最大输出功率1W</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SPK+</td>
<td>19</td>
<td>/</td>
<td>O</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="8-I2C接口"><a href="#8-I2C接口" class="headerlink" title="8. I2C接口"></a>8. I2C接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210108103026906_1610072985(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;开发板自带一颗使用较为广泛的加速度传感器1，通过Air724模块的1V8引脚进行上电，可配置I2C用来实现此功能，同时引出3.3V接口，用于驱动3.3V的I2C设备。<br>Notes:外接3.3V的I2C设备时，无需断开开发板自带的传感器。</p>
<ul>
<li><h4 id="相关管脚定义-7"><a href="#相关管脚定义-7" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>GPIO_15</td>
<td>31</td>
<td>I2C2_SDA</td>
<td>I/O</td>
<td>I2C2数据信号</td>
<td>VDDIO(1.8V)</td>
<td></td>
</tr>
<tr>
<td>GPIO_14</td>
<td>32</td>
<td>I2C2_SCL</td>
<td>O</td>
<td>I2C2时钟信号</td>
<td>VDDIO(1.8V)</td>
<td></td>
</tr>
</tbody></table>
<h3 id="9-WIFI天线接口"><a href="#9-WIFI天线接口" class="headerlink" title="9. WIFI天线接口"></a>9. WIFI天线接口</h3></li>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107172105966_1610011242(1).png" alt="undefined" title="undefined"></li>
</ul>
<p>&emsp;&emsp;开发板默认贴装2号电阻，以实现板载天线工作功能，如需外接WIFI天线，将2号电阻短接至1号位置即可使用。</p>
<ul>
<li><h4 id="相关管脚定义-8"><a href="#相关管脚定义-8" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4><table>
<thead>
<tr>
<th>管脚名</th>
<th>管脚号</th>
<th>复用</th>
<th>I/O</th>
<th>管脚描述</th>
<th>电气特性</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>WIFI_ANT</td>
<td>34</td>
<td>/</td>
<td>/</td>
<td>/</td>
<td></td>
<td></td>
</tr>
<tr>
<td>参考文档：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=63">http://doc.openluat.com/wiki/6?wiki_page_id=63</a></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="10-ADC接口"><a href="#10-ADC接口" class="headerlink" title="10.ADC接口"></a>10.ADC接口</h3></li>
<li><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107172611692_1610011547(1).png" alt="undefined" title="undefined"></p>
<p>开发板支持1和2两路ADC接口，ADC接口的工作方式采用跳帽来切换其不同功能：<br>&emsp; 1） 位置1在跳帽连接时，可进行热敏电阻的ADC电压测试。位置1的上方针脚连接模块的ADC2引脚，可使用杜邦线连接外部ADC设备，下图为热敏电阻位置。</p>
</li>
<li><p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107173448350_1610012065(1).png" alt="undefined" title="undefined"></p>
</li>
</ul>
<p>&emsp; 2）位置2在跳帽连接时，可进行电位器的ADC电压调试。位置2的上方针脚连接模块的ADC3引脚，可使用杜邦线连接外部ADC设备，下图为电位器位置。</p>
<ul>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107173642318_1610012180(1).png" alt="undefined" title="undefined"></li>
<li><h4 id="相关管脚定义-9"><a href="#相关管脚定义-9" class="headerlink" title="相关管脚定义"></a>相关管脚定义</h4>&emsp;&emsp;管脚定义：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=61">http://doc.openluat.com/wiki/6?wiki_page_id=61</a></li>
</ul>
<h3 id="11-串口切换"><a href="#11-串口切换" class="headerlink" title="11. 串口切换"></a>11. 串口切换</h3><h4 id="1-开发板UART1与UART2切换"><a href="#1-开发板UART1与UART2切换" class="headerlink" title="1)开发板UART1与UART2切换"></a>1)开发板UART1与UART2切换</h4><p>&emsp;&emsp;如下图，可拨动开发板右侧的拨动开关完成切换操作：</p>
<ul>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107180312974_1610013771(1).png" alt="undefined" title="undefined"></li>
</ul>
<h4 id="2-与外部MCU建立通信"><a href="#2-与外部MCU建立通信" class="headerlink" title="2)与外部MCU建立通信"></a>2)与外部MCU建立通信</h4><p>&emsp;&emsp; 1） 将拨码开关3与4拨动至ON档，可使用USB连接UART的micro USB接口，与PC端建立通信。<br>&emsp;&emsp; 2） 将拨码开关3与4拨动至OFF档， 模块的串口可以与外部3.3V电平的MCU建立通信，可连接开发板右下角的接口，与模块对应串口直接建立通信。</p>
<ul>
<li><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210107175812247_1610013462(1).png" alt="undefined" title="undefined"></li>
<li><h4 id="3-相关管脚定义"><a href="#3-相关管脚定义" class="headerlink" title="3)相关管脚定义"></a>3)相关管脚定义</h4>&emsp;&emsp;管脚定义：<a target="_blank" rel="noopener" href="http://doc.openluat.com/wiki/6?wiki_page_id=46">http://doc.openluat.com/wiki/6?wiki_page_id=46</a></li>
</ul>
<h1 id="其他信息"><a href="#其他信息" class="headerlink" title="其他信息"></a>其他信息</h1><h2 id="1-产品链接"><a href="#1-产品链接" class="headerlink" title="1.产品链接"></a>1.产品链接</h2><p>EVB_Air724官方商城购买链接：<br><a target="_blank" rel="noopener" href="http://m.openluat.com/product/1275">http://m.openluat.com/product/1275</a></p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20210106205723238_18.png" alt="undefined" title="undefined"></p>
<hr>
<h2 id="2-资源下载"><a href="#2-资源下载" class="headerlink" title="2.资源下载"></a>2.资源下载</h2><ul>
<li> &lt;1&gt;以下为开发板PADS格式设计参考文件<br><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210106210026481_EVB_Air724UG_A13_%E8%AE%BE%E8%AE%A1%E6%96%87%E4%BB%B6_20200723.rar">EVB_Air724UG_A13_设计文件_20200723.rar</a></li>
<li>  &lt;2&gt;以下为原理图PDF格式设计参考文件<br><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210106210504049_EVB_Air724UG_A13_%E8%AE%BE%E8%AE%A1%E6%96%87%E4%BB%B6_20200723.pdf">EVB_Air724UG_A13_设计文件_20200723.pdf</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/06/2236/" data-id="ckkfmdgea00civkcg5cwmhxnn" data-title="EVB_Air724UG_A13开发板使用指南" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2234" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/06/2234/" class="article-date">
  <time class="dt-published" datetime="2021-01-06T11:48:58.000Z" itemprop="datePublished">2021-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/06/2234/">Air720UG/Air720UH_模块产品规格书</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20210106194835072_Air720UH_Air720UG_模块产品规格书_v2_20210106.pdf" target="_blank">Air720UH_Air720UG_模块产品规格书_v2_20210106.pdf</a></p><p></p><p class="media-wrap image-wrap"></p><p></p><p class="media-wrap image-wrap"></p><p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/06/2234/" data-id="ckkfmdgaj003fvkcg6ejufog7" data-title="Air720UG/Air720UH_模块产品规格书" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2223" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/06/2223/" class="article-date">
  <time class="dt-published" datetime="2021-01-05T16:18:22.000Z" itemprop="datePublished">2021-01-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/06/2223/">MIT 6.S081 操作系统课程系列2 System calls</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="MIT-6-S081-操作系统课程系列2-System-calls"><a href="#MIT-6-S081-操作系统课程系列2-System-calls" class="headerlink" title="MIT 6.S081 操作系统课程系列2 System calls"></a>MIT 6.S081 操作系统课程系列2 System calls</h1><hr>
<p><a target="_blank" rel="noopener" href="https://pdos.csail.mit.edu/6.828/2020/labs/syscall.html">https://pdos.csail.mit.edu/6.828/2020/labs/syscall.html</a><br>本次实验需要读xv6手册第二章、4.3、4.4。看相关kernel代码。<br>理解system call的流程并实现一些system call。</p>
<hr>
<h3 id="物理资源的抽象"><a href="#物理资源的抽象" class="headerlink" title="物理资源的抽象"></a>物理资源的抽象</h3><ul>
<li>为什么要有system call。因为为了安全等因素，需要有一层隔离，不能让应用程序直接访问敏感资源。</li>
<li>为一些关键资源做一系列system call，供应用程序使用，是比较好的办法，既安全又分层化方便开发。比如文件的open/read/write等等。<br>比如exec，会做一系列内存操作，不需要应用程序自己处理。</li>
</ul>
<hr>
<h3 id="user模式和supervisor模式"><a href="#user模式和supervisor模式" class="headerlink" title="user模式和supervisor模式"></a>user模式和supervisor模式</h3><ul>
<li>应用程序与内核是“隔离”的，应用程序的崩溃绝不能影响内核的正常运行。所以不允许一个应用程序访问内核本身的数据和内存等。<br>而且应用程序之间也不允许相互访问内存。</li>
<li>cpu对这种隔离有硬件上的支持。比如risc-v有三种模式：machine mode/supervisor mode/user mode。<br>machine模式下执行的指令有所有权限，通常是机器启动时配置各种资源时使用。<br>xv6在machine模式下执行少数代码后会切换到supervisor模式。</li>
<li>supervisor模式下cpu可以执行一些需要权限的指令。比如中断的开关，读写寄存器等等。<br>如果在user模式下执行这些指令，cpu会忽略。<br>普通应用程序只能运行在user模式下，所谓的user space。<br>supervisor模式下运行的程序在所谓的kernel space里。</li>
<li>应用程序想调用system call时必须转到kernel模式。cpu会提供指令从user模式转到supervisor模式。<br>收到system call后，kernel会检查其参数。没有问题才运行。</li>
</ul>
<hr>
<h3 id="kernel的规划"><a href="#kernel的规划" class="headerlink" title="kernel的规划"></a>kernel的规划</h3><ul>
<li>一个大问题是操作系统的哪些部分要运行在supervisor模式。</li>
<li>一种方法是整个操作系统都放进去，即monolithic kernel。<br>这样的好处是好实现，少费脑筋，可共用资源比如各种buff。<br>一个坏处是各个模块之间的接口会过于复杂，开发人员容易犯错。<br>monolithic kernel里的错误是致命的，因为supervisor模式下的错误通常会造成整个kernel崩溃。</li>
<li>为了缓解这个问题，可尽量减少运行在supervisor模式下的代码，而转到user模式下执行。成为micro kernel微内核。</li>
<li>例如用户程序想访问文件，操作系统会在user空间跑一个文件服务器，用户程序还是向kernel请求system call，kernel把请求再发给user空间的文件服务器。这样内核实际跑的代码就很少，只是转发了一下命令。</li>
<li>xv6是monolithic kernel，体积小，功能少。</li>
</ul>
<hr>
<h3 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h3><ul>
<li>xv6中隔离的粒度是进程。进程间无法相互访问各自内存、cpu信息、文件等资源。<br>进程也不能访问kernel的资源。</li>
<li>kernel代码必须很小心地实现，防止用户程序的各种恶意操作。<br>进程有自己的地址空间，仿佛自己占用是一套独立完整的机器资源。</li>
<li>xv6用分页表(硬件实现)实现每个进程的地址空间。<br>risc-v分页表会把虚拟地址转换成实际的物理内存地址。</li>
</ul>
<p>进程的虚拟地址空间示意:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">_____________</span><br><span class="line">| trampoline |  &lt;- maxva</span><br><span class="line">|____________|</span><br><span class="line">| trapframe  |</span><br><span class="line">|____________|</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|   heap     |</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|            |</span><br><span class="line">|____________|</span><br><span class="line">| user stack |</span><br><span class="line">|____________|</span><br><span class="line">|            |</span><br><span class="line">| user text  |</span><br><span class="line">| user data  |</span><br><span class="line">|____________|  &lt;- 0</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<ul>
<li>riscv的指针为64bit。会用低39位来查分页表中的地址。xv6又会用其中的38位，所以寻址空间就是pow(2, 38)-1=0x3fffffffff（kernel/riscv.h里又定义)。</li>
<li>每个进程有user和kernel两个stack。程序在user空间时就用user栈，进入kernel是就用kernel栈。</li>
<li>进程调用system call时先发送rsicv的ecall指令，获取硬件权限然后把程序接到kernel指定的入口，在入口处会转换到kernel栈然后执行system call的代码。<br>当system call执行完，发送sret指令取消硬件权限，切换回user栈和user空间。</li>
</ul>
<hr>
<h3 id="xv6的启动流程"><a href="#xv6的启动流程" class="headerlink" title="xv6的启动流程"></a>xv6的启动流程</h3><ol>
<li>上电。bootloader加载kernel进内存。地址为0x80000000。因为0x0到0x80000000包含io设备，所以放到0x80000000。</li>
<li>machine模式。cpu执行entry.S里的_entry。此时硬件分页关闭，虚拟地址直接映射到物理地址。</li>
<li>_entry起一个stack0让xv6能够跑c代码。sp指针指向stack0+4096。开始跑start.c里的start()函数。</li>
<li>start()做一些machine模式特许的操作。</li>
<li>切换到supervisor模式。写main函数(kernel/main.c)的地址到mepc，直接返回到main函数。</li>
<li>main()初始化各种设备和子系统。调用userinit()创建第一个进程。执行user/initcode.S。</li>
<li>initcode.S执行exec(system call)，启动init程序(user/init.c)。进入shell等待用户输入。</li>
</ol>
<hr>
<h3 id="system-call的c代码解析"><a href="#system-call的c代码解析" class="headerlink" title="system call的c代码解析"></a>system call的c代码解析</h3><ul>
<li>exec为例，用户程序代码会把参数放进a0和a1寄存器，exec的代码7(syscall.h)放进a7。</li>
<li>见syscall()函数，从a7取出代号调用相应的system call函数。</li>
<li>system call函数里需要从寄存器取参数(使用argaddr/argint/argfd等等)。<br>返回值存入a0。</li>
<li>结束后exec就会返回a0里的值。</li>
<li>有时需要返回较多的数据，需要用copyout从kernel复制数据到用户地址。</li>
</ul>
<hr>
<h2 id="实战"><a href="#实战" class="headerlink" title="实战"></a>实战</h2><h3 id="trace"><a href="#trace" class="headerlink" title="trace"></a>trace</h3><ul>
<li>做一个trace程序(system call)，供user层的trace调用。</li>
<li>第一个参数是一个bit设置，对应syscall.h里的定义。比如传32，就是1&lt;&lt;5，5对应的就是SYS_read。可以同时打开多项。</li>
<li>调用system call后，检查对应的bit是否打开，打开的话就打印信息。</li>
</ul>
<ol>
<li>makefile里UPROGS加入trace</li>
<li>user/user.h里加入trace的定义</li>
<li>user/usys.pl里加入trace的定义</li>
<li>kernel/syscall.h里加入trace新号</li>
<li>kernel/proc.h的进程结构体里添加int类型trace_flag</li>
<li>kernel/sysproc.c里加入sys_trace()<br>sys_trace这个system call。获取参数用argint。给myproc()的trace_flag赋值即可。</li>
<li>修改fork函数。把parent的trace_flag传给child。</li>
<li>初始化进程的地方把trace_flag置0。</li>
<li>修改kernel/syscall.c。调用syscall后判断num和trace_flag，如果bit被打开，打印相关信息。</li>
</ol>
<hr>
<h3 id="sysinfo"><a href="#sysinfo" class="headerlink" title="sysinfo"></a>sysinfo</h3><ul>
<li>做一个sysinfo程序(system call)。打印系统信息。<br>测试程序为user/sysinfotest.c</li>
</ul>
<ol>
<li>修改makefile</li>
<li>user/user.h里加入sysinfo的定义(参照sysinfotest.c的使用方法)</li>
<li>参照trace的实现，添加其他定义。</li>
<li>实现sysinfo函数。</li>
</ol>
<ul>
<li><p>参考sysfile.c里的sys_fstat。会接收一个指针，要用copyout把kernel模式下的内存数据copy到这个指针的地址。<br>要获取系统可用内存和当前进程总数这两个数据。</p>
</li>
<li><p>如何获取系统的空闲内存？需要看一下内存操作的实现。<br>memlayout.h里定义了KERNBASE和PHYSTOP，从0x80000000L开始的128M字节为可用内存。<br>riscv.h里定义了页的大小PGSIZE为4字节。</p>
</li>
<li><p>看一下kalloc.c里对内存的操作<br>有一个run结构类型包含一个指向同类型结构的指针，就是一个简单的list。<br>有一个kmem结构实体包含一个run的指针freelist，和一个spinlock。对kmem操作时都要锁这个spinlock。</p>
</li>
<li><p>先看kfree如何释放或初始化内存。<br>kfree接收一个指针pa，pa的值是要释放的内存的地址比如0x80000008L，往0x80000008L开始填4字节垃圾(也可以不管)，然后把pa插到freelist头部。<br>kalloc先检查freelist头部，如果不是0就往头部填充一些垃圾返回(这里没有硬性规定，所以分配内存后一般需要memset置零。)，把freelist往后挪。</p>
</li>
<li><p>这样就很清晰了，freelist实际就是个可用内存的链表。每次free一个页就把这个地址做成指针插到头部，每次alloc一个页就拿出头部，之前的第二项变成新的新的头部。</p>
</li>
<li><p>懂了内存分配的原理，获取可用内存就非常简单，遍历一下freelist并计数即可。</p>
</li>
<li><p>统计当前进程总数，遍历proc数组，统计不为UNUSED的数量即可。</p>
</li>
</ul>
<hr>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2021/01/06/2223/" data-id="ckkfmdgaj003evkcg1ri57mlr" data-title="MIT 6.S081 操作系统课程系列2 System calls" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2180" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/31/2180/" class="article-date">
  <time class="dt-published" datetime="2020-12-31T13:25:44.000Z" itemprop="datePublished">2020-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/12/31/2180/">你了解的跨域是怎样的？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>心声：跨域，相信很多人对这个词都不陌生…那么你对它的理解是什么呢？？？本人对这个概念属于入门级别的菜鸟，一直知道它，但是对它一直有种“忽远忽近的感觉”，最近正在进行学习，查阅资料，也对它有了进一步的了解。</p>
<p>常见场景：<br><em>你：你了解跨域吗？<br>我：嗯，了解，使用CORS/JSONP等进行解决…</em></p>
<p>这个场景也许你也经历过。我经历了…大部分情况下，我们只回答了怎么解决这个问题，<strong>of course</strong> 单纯的对于开发任务来说，知道怎么解决就行了；但是有没有想过为什么会存在这些问题？如何来的？其中是怎样过程呢？</p>
<p><strong>提问：<br>1、为什么浏览器会引入跨域机制<br>2、跨域浏览器到底有没有发出去，收到响应<br>3、跨域的预检</strong></p>
<p>若干秒过去了…/(ㄒoㄒ)/~~<br>在进一步了解跨域时，首先了解一些基础的问题点。。。</p>
<h4 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h4><p>什么是跨域？就是浏览器限制了向不同的域发起请求！！！也就是我们所谓的协议、域名、端口号不同<br>也就是所谓的“同源策略”，协议、域名、端口号相同：保证数据的安全性 ！！！</p>
<blockquote>
<p>网上的一个例子，想必更能说明问题：<br>设想这样一种情况：A 网站是一家银行，用户登录以后，A 网站在用户的机器上设置了一个 Cookie，包含了一些隐私信息（比如存款总额）。用户离开 A 网站以后，又去访问 B 网站，如果没有同源限制，B 网站可以读取 A 网站的 Cookie，那么隐私信息就会泄漏。更可怕的是，Cookie 往往用来保存用户的登录状态，如果用户没有退出登录，其他网站就可以冒充用户，为所欲为。因为浏览器同时还规定，提交表单不受同源政策的限制。</p>
</blockquote>
<p>跨域的解决方式：</p>
<p><strong>CORS</strong><br>常见配置：（可能有其他的方式，有兴趣小伙伴自行拓展）<br>Access-Control-Allow-Origin（必须）: 设置允许的域名 ，只能填*<br>Access-Control-Allow-Methods（必须）：常见的一些常用请求方法，比如 post get等，<br>Access-Control-Allow-Headers：当预请求中含有请求头时吗，这是必须的<br>Access-Control-Allow-Credentials（可选）：<br>Access-Control-Max-Age（可选）：这里和浏览器的缓存机制有关</p>
<p>浏览器将CORS请求大致分为两种：简单 、 非简单<br>简单：使用post、get、head中的一种；请求头头信息不超出指定的几种字段（Accept Accept-Language Content-Language  Last-Event-ID Content-Type）<br>非简单：请求方法是put、delete ；Content-Type 类型是appliction/json<br>CORS大致分为这两种，不是ta就是ta</p>
<p><img src="https://user-gold-cdn.xitu.io/2019/4/11/16a0ab6de903b2b0?imageView2/0/w/1280/h/960/format/webp/ignore-error/1" alt="示意图" title="CORS"><br>如下图：<br><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201231212145417_QQ%E5%9B%BE%E7%89%8720201231212131.png" alt="undefined" title="undefined"></p>
<p>处理跨域的方式还有：<br>JSONP、服务器代理等等 暂不作说明</p>
<p>待续…</p>
<p>参考资料：<br><a target="_blank" rel="noopener" href="http://www.ruanyifeng.com/blog/2016/04/cors.html" title="跨域资源共享 CORS 详解">跨域资源共享 CORS 详解</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/12/31/2180/" data-id="ckkfmdgai003cvkcg2369421s" data-title="你了解的跨域是怎样的？" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/3/">&laquo; 上一页</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/5/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>