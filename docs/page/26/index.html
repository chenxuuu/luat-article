<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/26/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-69" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/31/69/" class="article-date">
  <time class="dt-published" datetime="2020-03-31T02:09:44.000Z" itemprop="datePublished">2020-03-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/31/69/">720UH,720UG,724UG,723UG有什么区别？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一、封装差异"><a href="#一、封装差异" class="headerlink" title="一、封装差异"></a>一、封装差异</h1><p>720UH 和 720UG 是 32<em>29的封装，跟 720H，720G，720D 的封装兼容， pin脚定义也兼容，四边邮票孔和 底部LGA 的引脚都有；<br>724UG 是24</em>24 的封装，四边邮票孔和 底部LGA 的引脚都有，一共 117个引脚；<br>723UG 是23*23 的封装，只有底部 LGA 的引脚，一共 117个；</p>
<h1 id="二、频段差异"><a href="#二、频段差异" class="headerlink" title="二、频段差异"></a>二、频段差异</h1><p>720UH 支持 4G 全频段和 GPRS 全频段；<br>720UG 仅仅支持 4G 全频段。</p>
<h1 id="三、价格差异"><a href="#三、价格差异" class="headerlink" title="三、价格差异"></a>三、价格差异</h1><p>价格按照从低到高的排序为： 724UG &lt; 720UG &lt; 720UH &lt; 723UG</p>
<h1 id="四、功能差异"><a href="#四、功能差异" class="headerlink" title="四、功能差异"></a>四、功能差异</h1><p>720UH 和 720UG 不支持摄像头， 724UG 和 723UG 支持摄像头。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/31/69/" data-id="ckkfmdgd400ajvkcgf2jv2rp2" data-title="720UH,720UG,724UG,723UG有什么区别？" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-714" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/30/714/" class="article-date">
  <time class="dt-published" datetime="2020-03-30T15:56:26.000Z" itemprop="datePublished">2020-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/30/714/">没有开发能力也能做物联网么？有何不可！</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="欢迎使用Easy-IoT"><a href="#欢迎使用Easy-IoT" class="headerlink" title="欢迎使用Easy-IoT"></a>欢迎使用Easy-IoT</h1><p>现在大多数物联网需求仅仅是指控制一个<strong>管脚</strong>或者<strong>UART传输</strong>，所以今天分享一个自己写的项目，用于控制设备的管脚、UART，其中包含<strong>安卓</strong>端、<strong>IOS</strong>端、<strong>小程序</strong>端。（若不嫌弃的话可以上手即用）</p>
<h2 id="成果演示"><a href="#成果演示" class="headerlink" title="成果演示"></a>成果演示</h2><p>以Air202 S5开发板作为演示</p>
<h3 id="点灯"><a href="#点灯" class="headerlink" title="点灯"></a>点灯</h3><table>
<thead>
<tr>
<th>设备</th>
<th>小程序</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://img-blog.csdnimg.cn/20200330211712976.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td><img src="https://img-blog.csdnimg.cn/20200330211732882.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<h3 id="中断"><a href="#中断" class="headerlink" title="中断"></a>中断</h3><table>
<thead>
<tr>
<th>设备</th>
<th>小程序</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://img-blog.csdnimg.cn/20200330211932126.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
<td><img src="https://img-blog.csdnimg.cn/20200330211945821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<h3 id="UART输出"><a href="#UART输出" class="headerlink" title="UART输出"></a>UART输出</h3><table>
<thead>
<tr>
<th>软件</th>
<th>小程序</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://img-blog.csdnimg.cn/20200330215901517.png#pic_center" alt="在这里插入图片描述"></td>
<td><img src="https://img-blog.csdnimg.cn/20200330215917445.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<h3 id="UART输出-1"><a href="#UART输出-1" class="headerlink" title="UART输出"></a>UART输出</h3><table>
<thead>
<tr>
<th>软件</th>
<th>小程序</th>
</tr>
</thead>
<tbody><tr>
<td><img src="https://img-blog.csdnimg.cn/20200330215950327.png#pic_center" alt="在这里插入图片描述"></td>
<td><img src="https://img-blog.csdnimg.cn/2020033022000126.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></td>
</tr>
</tbody></table>
<p>@@[TOC]</p>
<h2 id="整个项目的下载地址"><a href="#整个项目的下载地址" class="headerlink" title="整个项目的下载地址"></a>整个项目的下载地址</h2><p>整个项目的下载地址 <a target="_blank" rel="noopener" href="https://github.com/tounans/easyiot/">https://github.com/tounans/easyiot/</a></p>
<h3 id="模块介绍"><a href="#模块介绍" class="headerlink" title="模块介绍"></a>模块介绍</h3><table>
<thead>
<tr>
<th>模块</th>
<th>端口</th>
<th>是否暴露</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>server-gateway</td>
<td>80</td>
<td>是</td>
<td>Zuul</td>
</tr>
<tr>
<td>server-config</td>
<td>8010</td>
<td>否</td>
<td>系统设置</td>
</tr>
<tr>
<td>server-device</td>
<td>8020</td>
<td>否</td>
<td>设备设置</td>
</tr>
<tr>
<td>server-mq</td>
<td>8030</td>
<td>否</td>
<td>MQTT处理</td>
</tr>
<tr>
<td>server-auth</td>
<td>8040</td>
<td>是</td>
<td>用于登录</td>
</tr>
<tr>
<td>server-push</td>
<td>8050</td>
<td>否</td>
<td>信息推送</td>
</tr>
<tr>
<td>server-user</td>
<td>8060</td>
<td>否</td>
<td>用户信息</td>
</tr>
<tr>
<td>server-wss</td>
<td>8070,8088</td>
<td>是</td>
<td>WebSocket</td>
</tr>
<tr>
<td>server-init</td>
<td>8090</td>
<td>否</td>
<td>设备初始化</td>
</tr>
<tr>
<td>server-server</td>
<td>8761</td>
<td>否</td>
<td>Eureka</td>
</tr>
</tbody></table>
<h3 id="data目录介绍"><a href="#data目录介绍" class="headerlink" title="data目录介绍"></a>data目录介绍</h3><table>
<thead>
<tr>
<th>目录</th>
<th>介绍</th>
</tr>
</thead>
<tbody><tr>
<td>data/img</td>
<td>运行后效果图</td>
</tr>
<tr>
<td>data/key</td>
<td>密钥文件（可以自己生成）</td>
</tr>
<tr>
<td>data/lua</td>
<td>硬件源码</td>
</tr>
<tr>
<td>data/sql</td>
<td>数据库</td>
</tr>
<tr>
<td>data/uni</td>
<td>UNI源码</td>
</tr>
</tbody></table>
<h2 id="运行前的准备"><a href="#运行前的准备" class="headerlink" title="运行前的准备"></a>运行前的准备</h2><h3 id="服务端运行环境"><a href="#服务端运行环境" class="headerlink" title="服务端运行环境"></a>服务端运行环境</h3><ol>
<li>Windows（本教程以Windows作为服务端运行平台，Linux没太大区别）</li>
<li>Redis</li>
</ol>
<blockquote>
<p>（<a target="_blank" rel="noopener" href="https://redis.io/%EF%BC%89">https://redis.io/）</a></p>
</blockquote>
<ol start="3">
<li>EMQX</li>
</ol>
<blockquote>
<p>（<a target="_blank" rel="noopener" href="https://www.emqx.io/%EF%BC%89">https://www.emqx.io/）</a></p>
</blockquote>
<ol start="4">
<li>Java1.8</li>
</ol>
<blockquote>
<p>（<a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase-jdk8-downloads.html%EF%BC%89">https://www.oracle.com/java/technologies/javase-jdk8-downloads.html）</a></p>
</blockquote>
<ol start="5">
<li>Mysql5.7</li>
</ol>
<blockquote>
<p>（<a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/5.7.html%EF%BC%89">https://dev.mysql.com/downloads/mysql/5.7.html）</a></p>
</blockquote>
<h3 id="服务端放KEY的位置"><a href="#服务端放KEY的位置" class="headerlink" title="服务端放KEY的位置"></a>服务端放KEY的位置</h3><p>鉴权key：D:/key/publickey.txt<br>WssKey：D:/key/wss.jks</p>
<blockquote>
<p>如果您要自己生成key需要修改以下信息</p>
<p>鉴权key修改位置：<br>1.server-gateway\src\main\java\com\tounans\easyiot\easyiotzuul\filter\LoginFilter.java<br>78行<br>2.server-wss\src\main\java\com\tounans\easyiot\easyiotwss\servier\impl\AuthService.java<br>38行</p>
<p>WssKey 修改的位置： server-wss\src\main\resources\application.yml 12行</p>
</blockquote>
<h3 id="服务端启动方法"><a href="#服务端启动方法" class="headerlink" title="服务端启动方法"></a>服务端启动方法</h3><p>最简单的导入到Idea中运行，或者打成jar或者war包发布到容器中运行，这里不过多介绍。</p>
<h3 id="Mysql的配置"><a href="#Mysql的配置" class="headerlink" title="Mysql的配置"></a>Mysql的配置</h3><p>==项目中所有数据库端口都为3307，并不是默认的3306，修改的话需要到各个项目下\src\main\resources\application.yml 中修改 spring.datasource.url==</p>
<p>创建数据库easyiot并运行easyiot.sql<br>创建数据库easyiot_oauth2并运行easyiot_oauth2.sql</p>
<h3 id="UNI的修改"><a href="#UNI的修改" class="headerlink" title="UNI的修改"></a>UNI的修改</h3><blockquote>
<p>uni-app 是一个使用 Vue.js<br>开发所有前端应用的框架，开发者编写一套代码，可发布到iOS、Android、H5、以及各种小程序（微信/支付宝/百度/头条/QQ/钉钉）等多个平台。</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// js/common.js</span></span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&quot;http://localhost/&quot;</span>;</span><br><span class="line"><span class="comment">// js/user.js</span></span><br><span class="line"><span class="keyword">const</span> baseUrl = <span class="string">&quot;http://localhost:8040/auth&quot;</span>;</span><br><span class="line"><span class="comment">// pages/index/wss.vue</span></span><br><span class="line">baseUrl :<span class="string">&quot;wss://127.0.0.1:8088/ws&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="LUA的修改"><a href="#LUA的修改" class="headerlink" title="LUA的修改"></a>LUA的修改</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//main.lua</span></span><br><span class="line">_G.initUrl  = <span class="string">&quot;http://localhost/init&quot;</span></span><br><span class="line">_G.mqttHost = <span class="string">&quot;127.0.0.1&quot;</span></span><br><span class="line">_G.mqttPort = <span class="string">&quot;1883&quot;</span></span><br><span class="line">_G.mqttUser = <span class="string">&quot;username&quot;</span></span><br><span class="line">_G.mqttPass = <span class="string">&quot;password&quot;</span></span><br></pre></td></tr></table></figure>
<h3 id="硬件的烧录"><a href="#硬件的烧录" class="headerlink" title="硬件的烧录"></a>硬件的烧录</h3><p>我用的设备环境：Air 202 S5、底层V0038<br>2G与4G源码应该没太多差异没有验证过</p>
<p>烧录方法参考</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://doc.openluat.com/article/713/0">http://doc.openluat.com/article/713/0</a></p>
</blockquote>
<h2 id="运行效果"><a href="#运行效果" class="headerlink" title="运行效果"></a>运行效果</h2><p>默认用户名admin<br>默认密码123456<br>| 登录 | 首页 |<br>|–|–|<br>|<img src="https://img-blog.csdnimg.cn/20200330220445667.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述">  | <img src="https://img-blog.csdnimg.cn/20200330220456430.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzIxMzI4OTM5,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"> |</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/30/714/" data-id="ckkfmdgda00b4vkcg27gl7ipd" data-title="没有开发能力也能做物联网么？有何不可！" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-713" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/30/713/" class="article-date">
  <time class="dt-published" datetime="2020-03-30T08:19:39.000Z" itemprop="datePublished">2020-03-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/30/713/">Luatools v2烧录教程（适用于2G、4G Cat.1、4G Cat.4模块）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>#目录，可以根据需要直接点击跳转：</p>
<ul>
<li><a href="#%E4%B8%8B%E8%BD%BDLuaTools%E5%B7%A5%E5%85%B7">下载LuaTools工具</a></li>
<li><a href="#2G%E6%A8%A1%E5%9D%97%E7%83%A7%E5%86%99%E6%95%99%E7%A8%8B%EF%BC%88Air2xx%E7%B3%BB%E5%88%97%E3%80%81Air8xx%E7%B3%BB%E5%88%97%EF%BC%89">2G模块烧写教程（Air2xx系列、Air8xx系列）</a><ul>
<li><a href="#%E8%BF%9E%E6%8E%A5%E6%A8%A1%E5%9D%97">连接模块</a></li>
<li><a href="#2G%E5%88%B7%E5%85%A5AT%E7%89%88%E6%9C%AC%E7%9A%84lod">刷入AT版本的lod</a></li>
<li><a href="#2G%E5%88%B7%E5%85%A5%E4%BB%BB%E6%84%8F%E7%9A%84lod%E5%9B%BA%E4%BB%B6">刷入任意的lod固件</a></li>
<li><a href="#2G%E4%B8%8B%E8%BD%BDlua%E8%84%9A%E6%9C%AC%E6%96%87%E4%BB%B6">下载lua脚本文件</a></li>
</ul>
</li>
<li>[4G 模块烧写教程（Air720x/Air720Sx/Air720Ux系列）](#4G 模块烧写教程（Air720x/Air720Sx/Air720Ux系列）)<ul>
<li><a href="#%E6%A8%A1%E5%9D%97%E5%9E%8B%E5%8F%B7%E4%B8%8E%E8%8A%AF%E7%89%87%E5%AF%B9%E5%BA%94%E5%85%B3%E7%B3%BB">模块型号与芯片对应关系</a></li>
<li><a href="#%E5%AE%89%E8%A3%85%E9%A9%B1%E5%8A%A8">安装驱动</a></li>
<li><a href="#%E8%BF%9E%E6%8E%A5%E6%A8%A1%E5%9D%97%E5%88%B0%E7%94%B5%E8%84%91">连接模块到电脑</a></li>
<li><a href="#%E8%BF%9B%E5%85%A5%E4%B8%8B%E8%BD%BD%E6%A8%A1%E5%BC%8F">进入下载模式</a><ul>
<li><a href="#Air720x%E7%B3%BB%E5%88%97">Air720x系列</a></li>
<li><a href="#Air720Sx%E7%B3%BB%E5%88%97">Air720Sx系列</a></li>
<li><a href="#Air720Ux%E7%B3%BB%E5%88%97">Air720Ux系列</a></li>
</ul>
</li>
<li><a href="#%E7%83%A7%E5%BD%95AT%E5%9B%BA%E4%BB%B6">烧录AT固件</a></li>
<li><a href="#%E7%83%A7%E5%BD%95%E5%85%B6%E4%BB%96blf/pac%E5%9B%BA%E4%BB%B6">烧录其他blf/pac固件</a></li>
<li><a href="#%E7%83%A7%E5%BD%95Lua%E8%84%9A%E6%9C%AC">烧录Lua脚本</a></li>
</ul>
</li>
</ul>
<h2 id="下载LuaTools工具"><a href="#下载LuaTools工具" class="headerlink" title="下载LuaTools工具"></a>下载LuaTools工具</h2><p><a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/luatoolsV2-redirect.html">点击这里下载</a></p>
<p>下载后可能会进行自动升级，这个工具基本上是持续使用，都不会出现版本过旧的问题</p>
<p><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20200727163109048_5_32875.jpg" alt="luatools v2图片"></p>
<h2 id="2G模块烧写教程（Air2xx系列、Air8xx系列）"><a href="#2G模块烧写教程（Air2xx系列、Air8xx系列）" class="headerlink" title="2G模块烧写教程（Air2xx系列、Air8xx系列）"></a>2G模块烧写教程（Air2xx系列、Air8xx系列）</h2><p>（4G模块烧录方法请看往下翻，看下一部分）</p>
<h3 id="连接模块"><a href="#连接模块" class="headerlink" title="连接模块"></a>连接模块</h3><p>我们只需要用usb转串口线，与给模块/开发板的HOST串口相连，GND相连，并给模块上电即可。部分开发板可以直接连接microUSB口</p>
<blockquote>
<p>意：模块的HOST口使用的是921600波特率，如果你使用的是劣质串口芯片（如质量差的pl2303以及山寨的ch340之类的），会出现无法通讯的现象。<br>并且需要<strong>保证模块供电充足，不然会出现无限重启的状况</strong>。</p>
</blockquote>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_91840.jpg"></p>
<h3 id="2G刷入AT版本的lod"><a href="#2G刷入AT版本的lod" class="headerlink" title="2G刷入AT版本的lod"></a>2G刷入AT版本的lod</h3><p>刷入AT版本的固件十分简单，在上面连接模块完成之后，确保串口选项卡的串口为你设备的串口值，点击菜单中的<code>AT</code>–<code>2G模块切换为xxxx</code>（TTS还是SSL按需选择），如下图：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_19700.jpg"></p>
<p>模块开机后，点击<code>下载</code>：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_99295.gif"></p>
<p>等待下载完成</p>
<h3 id="2G刷入任意的lod固件"><a href="#2G刷入任意的lod固件" class="headerlink" title="2G刷入任意的lod固件"></a>2G刷入任意的lod固件</h3><p>luat的固件因为需求不同，所以为了节省空间，提供了多种库的组合<br>luat的固件可以在下载工具目录的/LuaTools 2.x.x/resource/8955_lua_lod/core_V00xx找到，每个版本的区别可以参考readme.txt文件中的描述，部分内容也贴在下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Luat_VXXXX_8955.lod：不支持SSL、TTS、SPI接口的LCD功能</span><br><span class="line">Luat_VXXXX_8955_SSL.lod：支持SSL功能</span><br><span class="line">Luat_VXXXX_8955_SSL_TTS.lod：支持SSL、TTS功能，不支持MP3、MIDI、录音功能</span><br><span class="line">Luat_VXXXX_8955_SSL_UI.lod：支持SSL、SPI接口的LCD功能</span><br><span class="line">Luat_VXXXX_8955_TTS_UI.lod：支持TTS、SPI接口的LCD功能</span><br><span class="line">Luat_VXXXX_8955_TTS1.lod：支持TTS功能</span><br><span class="line">Luat_VXXXX_8955_TTS2.lod：支持TTS功能、不支持MP3、MIDI、录音、json</span><br><span class="line">Luat_VXXXX_8955_UI.lod：支持SPI接口的LCD功能</span><br><span class="line">Luat_VXXXX_8955_SSL_FLOAT.lod：支持SSL功能、浮点数</span><br><span class="line">Luat_VXXXX_8955_SSL_UI_FLOAT.lod：支持SSL功能、SPI接口的LCD功能、浮点数</span><br><span class="line">Luat_VXXXX_8955F.lod：64M flash版本（Air202F），支持以上提到的所有功能（除浮点数外）</span><br><span class="line">Luat_VXXXX_8955F_FLOAT.lod：64M flash版本（Air202F），支持以上提到的所有功能</span><br></pre></td></tr></table></figure>
<p>我以烧录最基本的Luat_VXXXX_8955.lod为例，首先在调试工具中确保串口选项卡的串口为你设备的串口值，点击下载LOD(core)按钮，选中之前在工具目录的lod文件（LuaTools 2.x.x/resource/8955_lua_lod/core_V00xx/Luat_V00xx_8955.lod）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_79034.gif"></p>
<p>选中固件无误后，模块开机，点击下载进行写入lod的操作</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_24739.gif"></p>
<h3 id="2G下载lua脚本文件"><a href="#2G下载lua脚本文件" class="headerlink" title="2G下载lua脚本文件"></a>2G下载lua脚本文件</h3><p>由于luat模块的特色就是lua二次开发，所以下载烧录脚本的方法也是必须掌握的，下面以烧录ADC demo示例程序为例</p>
<p>lua脚本分为两部分：一个部分是官方写的lib库文件（library），另一部分是用户自己的脚本文件。一般lib的文件不用去修改，除非有特殊需求。</p>
<p>点击<code>项目管理测试</code>，点击左下角<code>创建项目</code>，自己起个名字，这里我起名<code>ADC demo</code>：</p>
<p><img src="http://doc.openluat.com/apihttp://doc.openluat.com/api/static/editormd/uploads/5_34907.gif"></p>
<p>选好lod固件（按需求）和脚本，demo脚本可在工具目录下找到（luatools2/resource/8955_script/script_LuaTask_Vx.x.x/demo/adc），勾选<code>添加默认lib</code>：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_64090.jpg"></p>
<p>现在把模块开机等待烧录。</p>
<p>如果模块是第一次烧录，需要点<code>下载底层和脚本</code>；<br>如果模块内的固件版本就是已选的固件（已经烧录过固件），那么就点<code>下载脚本</code>：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_10901.jpg"></p>
<p>等待下载完成即可</p>
<h2 id="4G-模块烧写教程（Air720x-Air720Sx-Air720Ux系列）"><a href="#4G-模块烧写教程（Air720x-Air720Sx-Air720Ux系列）" class="headerlink" title="4G 模块烧写教程（Air720x/Air720Sx/Air720Ux系列）"></a>4G 模块烧写教程（Air720x/Air720Sx/Air720Ux系列）</h2><h3 id="模块型号与芯片对应关系"><a href="#模块型号与芯片对应关系" class="headerlink" title="模块型号与芯片对应关系"></a>模块型号与芯片对应关系</h3><p>因为工具内的固件与脚本都是按芯片型号分别存放在文件夹里的，所以需要对应一下，以便更快地找到他们</p>
<table>
<thead>
<tr>
<th>模块</th>
<th>芯片</th>
</tr>
</thead>
<tbody><tr>
<td>Air720x系列</td>
<td>1802</td>
</tr>
<tr>
<td>Air720Sx系列</td>
<td>1802s</td>
</tr>
<tr>
<td>AirUx系列/Air723/Air724</td>
<td>8910</td>
</tr>
</tbody></table>
<h3 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h3><p>Air720x/Air720Sx模块（Cat.4）请参考这篇文章<a target="_blank" rel="noopener" href="http://doc.openluat.com/article/463/0">史上最详细的Air7xx驱动安装教程</a></p>
<p>Air720Ux模块（Cat.1）请<a target="_blank" rel="noopener" href="http://www.openluat.com/Product/file/uis8910dm/sw_file_20200303181718_8910_module_usb_driver_signed%20_20200303_hezhou.7z">点击此处下载驱动</a><br>win7打开<code>DriversForWin78</code>，win10打开<code>DriversForWin10</code>，根据自己电脑的位数点击相应的exe安装驱动</p>
<h3 id="连接模块到电脑"><a href="#连接模块到电脑" class="headerlink" title="连接模块到电脑"></a>连接模块到电脑</h3><p>这里我们使用官方开发板作为演示，首先需要将开发板按如下方式连接电脑：</p>
<p>720系列：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_34395.png"></p>
<p>720S系列：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_52306.jpg"></p>
<p>720U Cat.1系列<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_66385.jpg"></p>
<p>如果是模块飞线烧录，请先确保可以保证模块的稳定供电，并且烧录时模块不会被重启，按下图进行飞线usb：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57781.jpg"></p>
<p>长按开机键/拉低power key引脚，即可开机</p>
<h3 id="进入下载模式"><a href="#进入下载模式" class="headerlink" title="进入下载模式"></a>进入下载模式</h3><p>由于4G Cat.4模块必须在烧录状态下，才会再PC上显示出烧录设备，所以烧录时都需要先在工具上点击<code>下载</code>，再对模块进行操作</p>
<h4 id="Air720x系列"><a href="#Air720x系列" class="headerlink" title="Air720x系列"></a>Air720x系列</h4><p>Air720x的烧录设备，会在每次开机后出现一秒左右，所以烧录时只需要让模块重启即可。</p>
<p>我们可以直接断电后重新上电，也可以使用复位按键（对于开发板，可以<code>点击开发板上的“重启”按键，或者开关旁边的拨码开关</code>）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_32974.png"></p>
<p>设备管理器中会出现这个设备<strong>一秒左右</strong>，如果没出现，就是驱动安装有问题，或者设备没开机</p>
<p><img src="http://doc.openluat.com/apihttp://doc.openluat.com/api/static/editormd/uploads/5_11572.jpg"></p>
<h4 id="Air720Sx系列"><a href="#Air720Sx系列" class="headerlink" title="Air720Sx系列"></a>Air720Sx系列</h4><p>Air720Sx系列的设备，需要在上电时同时将<code>BOOT</code>与<code>v1.8</code>引脚短接，才会进入下载模式。（或者使用AT命令使模块重启进入下载模式）</p>
<p>对于<code>luatools v2</code>版本，工具会自动重启模块以进入下载模式。</p>
<p>如果需要手动操作使模块进入下载模式，请将<code>BOOT</code>与<code>v1.8</code>引脚短接（开发板为按下boot按键不松开），然后再上电和开机，同时工具烧录时需要勾选<code>USB BOOT下载</code></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_62015.jpg"></p>
<p>设备管理器中会出现这个设备，如果没出现，就是驱动安装有问题，或者设备没开机</p>
<p><img src="http://doc.openluat.com/apihttp://doc.openluat.com/api/static/editormd/uploads/5_11572.jpg"></p>
<h4 id="Air720Ux系列"><a href="#Air720Ux系列" class="headerlink" title="Air720Ux系列"></a>Air720Ux系列</h4><p>Air720Ux系列的设备，需要在上电时同时将<code>BOOT</code>与<code>v1.8</code>引脚短接，才会进入下载模式。（或者使用AT命令使模块重启进入下载模式）</p>
<p>如果需要手动操作使模块进入下载模式，请将<code>BOOT</code>与<code>v1.8</code>引脚短接（开发板为按下boot按键不松开），然后再上电和开机，同时工具烧录时需要勾选<code>USB BOOT下载</code></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_57330.jpg"></p>
<p>设备管理器中会出现这个设备，如果没出现，就是驱动安装有问题，或者设备没开机；如果出现的时<code>串口设备xxx</code>，那么说明系统认错了驱动，请右击该设备并<code>卸载驱动程序</code>让电脑重新识别</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_38643.jpg"></p>
<h3 id="烧录AT固件"><a href="#烧录AT固件" class="headerlink" title="烧录AT固件"></a>烧录AT固件</h3><p>直接点击<code>AT</code>–<code>72xxxx系列xxx固件切换为AT版本</code>，点击下载，然后让模块进入<code>烧录模式</code>（如果使用BOOT开机，请勾选<code>USB BOOT下载</code>）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_65295.jpg"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_33460.gif"></p>
<p>烧录后，我们可以用串口工具，通过<code>USB虚拟的AT串口</code>或<code>物理串口UART2</code>（720Ux系列使<code>物理串口UART1</code>）来进行AT操作：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_40687.jpg"></p>
<h3 id="烧录其他blf-pac固件"><a href="#烧录其他blf-pac固件" class="headerlink" title="烧录其他blf/pac固件"></a>烧录其他blf/pac固件</h3><p>直接点击工具的<code>下载固件</code>，选择固件后，点击下载，使设备进入<code>烧录模式</code>后便会进行下载（如果使用BOOT开机，请勾选<code>USB BOOT下载</code>）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_69784.gif"></p>
<h3 id="烧录Lua脚本"><a href="#烧录Lua脚本" class="headerlink" title="烧录Lua脚本"></a>烧录Lua脚本</h3><p>由于luat模块的特色就是lua二次开发，所以下载烧录脚本的方法也是必须掌握的，下面以烧录ADC demo示例程序为例</p>
<p>lua脚本分为两部分：一个部分是官方写的lib库文件（library），另一部分是用户自己的脚本文件。一般lib的文件不用去修改，除非有特殊需求。</p>
<p>点击<code>项目管理测试</code>，点击左下角<code>创建项目</code>，自己起个名字，这里我起名<code>ADC demo</code>：</p>
<p><img src="http://doc.openluat.com/apihttp://doc.openluat.com/api/static/editormd/uploads/5_34907.gif"></p>
<p>选好lod固件（按需求）和脚本，demo脚本可在工具目录下找到（luatools2/resource/xxxx_script/script_LuaTask_Vx.x.x/demo/adc）勾选<code>添加默认lib</code>，例如下图：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_79126.jpg"></p>
<p>如果模块是第一次烧录，需要点<code>下载底层和脚本</code>；<br>如果模块内的固件版本就是已选的固件（已经烧录过固件），那么就点<code>下载脚本</code>（如果使用BOOT开机，请勾选<code>USB BOOT下载</code>）：</p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_27874.gif"></p>
<p>等待下载完成即可</p>
<script>
location.href="https://wiki.openluat.com/doc/tools/";
</script>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/30/713/" data-id="ckkfmdgda00b3vkcgheds1ygt" data-title="Luatools v2烧录教程（适用于2G、4G Cat.1、4G Cat.4模块）" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-712" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/28/712/" class="article-date">
  <time class="dt-published" datetime="2020-03-28T06:18:04.000Z" itemprop="datePublished">2020-03-28</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/28/712/">724UG开发板播放mp3、图片源码</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200609163800829_J9exePe55e7eebc62a3f5_724UG开发板演示源码.zip">724UG开发板演示源码.zip</a></p><p><br></p><p>LCD采用st7735 IC<br><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/28/712/" data-id="ckkfmdgd900b2vkcg0cdn6i3f" data-title="724UG开发板播放mp3、图片源码" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-711" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/20/711/" class="article-date">
  <time class="dt-published" datetime="2020-03-20T08:50:46.000Z" itemprop="datePublished">2020-03-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/20/711/">202 S5开发板在Windows7系统下ppp拨号教程</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="一、硬件准备"><a href="#一、硬件准备" class="headerlink" title="一、硬件准备"></a>一、硬件准备</h1><p>1.一个202 S5开发板<br>2.一根TTL转USB的串口线<br>3.一张移动物联网卡<br>4.一台Windows7电脑</p>
<h1 id="二、硬件连接示意图"><a href="#二、硬件连接示意图" class="headerlink" title="二、硬件连接示意图"></a>二、硬件连接示意图</h1><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_55874.jpg"><br>红色接——————VBAT<br>黄色接——————UART1_CTS<br>蓝色接——————UART1_RTS<br>黑色接——————GND<br>白色接——————UART1_TXD<br>绿色接——————UART1_RXD</p>
<h1 id="三、操作步骤"><a href="#三、操作步骤" class="headerlink" title="三、操作步骤"></a>三、操作步骤</h1><h3 id="1-插上SIM卡，开发板跳线选择UART1-上电开机，用串口调试工具，发送AT-CGATT-指令查询，确认模块已联网（返回-CGATT-1）"><a href="#1-插上SIM卡，开发板跳线选择UART1-上电开机，用串口调试工具，发送AT-CGATT-指令查询，确认模块已联网（返回-CGATT-1）" class="headerlink" title="1.插上SIM卡，开发板跳线选择UART1,上电开机，用串口调试工具，发送AT+CGATT?指令查询，确认模块已联网（返回+CGATT: 1）"></a>1.插上SIM卡，开发板跳线选择UART1,上电开机，用串口调试工具，发送AT+CGATT?指令查询，确认模块已联网（返回+CGATT: 1）</h3><h3 id="2-点击链接，下载-MDMGEN-INF文件，并保存到C盘，文件txt后缀改为-INF"><a href="#2-点击链接，下载-MDMGEN-INF文件，并保存到C盘，文件txt后缀改为-INF" class="headerlink" title="2.点击链接，下载 MDMGEN.INF文件，并保存到C盘，文件txt后缀改为.INF"></a>2.点击链接，下载<a target="_blank" rel="noopener" href="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/attachment/20200609163653112_P25Qz1e95baed0a8756ef_MDMGEN.INF" title=" MDMGEN.INF"> MDMGEN.INF</a>文件，并保存到C盘，文件txt后缀改为.INF</h3><h3 id="3-打开电脑控制面板，选择电话和调制解调器"><a href="#3-打开电脑控制面板，选择电话和调制解调器" class="headerlink" title="3.打开电脑控制面板，选择电话和调制解调器"></a>3.打开电脑控制面板，选择电话和调制解调器</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_28180.png"></p>
<h3 id="4-选择调制解调器，添加"><a href="#4-选择调制解调器，添加" class="headerlink" title="4.选择调制解调器，添加"></a>4.选择调制解调器，添加</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_78897.png"></p>
<h3 id="5-请按以下图片顺序依次操作"><a href="#5-请按以下图片顺序依次操作" class="headerlink" title="5.请按以下图片顺序依次操作"></a>5.请按以下图片顺序依次操作</h3><p>A:<img src="http://doc.openluat.com/api/static/editormd/uploads/5_57292.png"></p>
<p>B:<img src="http://doc.openluat.com/api/static/editormd/uploads/5_31671.png"></p>
<p>C:<img src="http://doc.openluat.com/api/static/editormd/uploads/5_69545.png"></p>
<p>D:<img src="http://doc.openluat.com/api/static/editormd/uploads/5_42011.png"></p>
<h3 id="注意：若是第一次安装，B步骤中要选择从磁盘安装，找到-INF文件"><a href="#注意：若是第一次安装，B步骤中要选择从磁盘安装，找到-INF文件" class="headerlink" title="注意：若是第一次安装，B步骤中要选择从磁盘安装，找到.INF文件"></a>注意：若是第一次安装，B步骤中要选择从磁盘安装，找到.INF文件</h3><h3 id="6-重新打开调制解调器，按如下步骤，确认调制解调器正确"><a href="#6-重新打开调制解调器，按如下步骤，确认调制解调器正确" class="headerlink" title="6.重新打开调制解调器，按如下步骤，确认调制解调器正确"></a>6.重新打开调制解调器，按如下步骤，确认调制解调器正确</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_21458.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_82406.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_72989.png"></p>
<h3 id="7-禁用本地连接和无线连接，按以下图片流程操作"><a href="#7-禁用本地连接和无线连接，按以下图片流程操作" class="headerlink" title="7.禁用本地连接和无线连接，按以下图片流程操作"></a>7.禁用本地连接和无线连接，按以下图片流程操作</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_15535.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_20096.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_16864.png"></p>
<h3 id="8-开始拨号连接"><a href="#8-开始拨号连接" class="headerlink" title="8.开始拨号连接"></a>8.开始拨号连接</h3><p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_59588.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_78661.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_44024.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_15615.png"></p>
<p><img src="http://doc.openluat.com/api/static/editormd/uploads/5_20082.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/20/711/" data-id="ckkfmdgd900b1vkcgh3cxf719" data-title="202 S5开发板在Windows7系统下ppp拨号教程" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-48" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/16/48/" class="article-date">
  <time class="dt-published" datetime="2020-03-16T11:15:23.000Z" itemprop="datePublished">2020-03-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/16/48/">MySql8主从复制介绍</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="MySql8主从复制介绍"><a href="#MySql8主从复制介绍" class="headerlink" title="MySql8主从复制介绍"></a>MySql8主从复制介绍</h1><p>xc20200316</p>
<p>本文介绍mysql主从复制的基本流程。<br>和两种方法：</p>
<ul>
<li><code>binlog</code> + <code>log位置</code></li>
<li><code>GTID</code></li>
</ul>
<p>我们用docker的方式运行mysql。清爽简洁。升级等操作也方便。</p>
<hr>
<h2 id="获取镜像"><a href="#获取镜像" class="headerlink" title="获取镜像"></a>获取镜像</h2><p>docker镜像信息<br><a target="_blank" rel="noopener" href="https://hub.docker.com/_/mysql/">https://hub.docker.com/_/mysql/</a></p>
<p>docker配置文档<br><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/mysql-installation-excerpt/8.0/en/docker-mysql-getting-started.html">https://dev.mysql.com/doc/mysql-installation-excerpt/8.0/en/docker-mysql-getting-started.html</a></p>
<p>拉取最新8.0.19镜像。<br><code>sudo docker pull mysql:8.0.19</code></p>
<hr>
<h2 id="主从复制方法1：binlog-log位置"><a href="#主从复制方法1：binlog-log位置" class="headerlink" title="主从复制方法1：binlog + log位置"></a>主从复制方法1：<code>binlog</code> + <code>log位置</code></h2><p>docker-compose的配置</p>
<pre><code>mysql_8:
    image: mysql:8.0.19
    ...
    volumes:     # 数据目录映射到我们指定的位置
                - &quot;/airm2m_data/airm2m/database/mysql_8/data:/var/lib/mysql&quot;

    environment: # 环境变量     默认root密码
                MYSQL_ROOT_PASSWORD: xxxxxxx

    command:     # 主从复制会用到server-id，所有节点id必须全局唯一。
                --server-id=1
</code></pre>
<p>主从复制需要开启binlog。mysql8默认开启，和数据存在同个目录。不用管了。</p>
<pre><code>docker-compose up -d mysql_8
</code></pre>
<p>启动后可看到data目录下生成了一批文件</p>
<p>进入mysql后</p>
<pre><code>show variables;
</code></pre>
<p>可以查看各种系统变量和配置</p>
<p>到此master就起来了。再用同样方式启动slave。注意server-id要不同。</p>
<p>给master创建一个slave账号，授予REPLICATION SLAVE权限。</p>
<p>进入slave，指定master的ip和端口。</p>
<pre><code>CHANGE MASTER TO
MASTER_HOST=&#39;xxxxxxx&#39;,
MASTER_PORT=3307
</code></pre>
<p>启动复制，用刚才创建的slave账号。</p>
<pre><code>START SLAVE USER=&#39;xxx&#39; PASSWORD=&#39;xxx&#39;
</code></pre>
<p>这时在master上创建数据就会同步到slave了。</p>
<p>在slave上可以查看slave同步的重要数据</p>
<pre><code>show slave status
</code></pre>
<p>binlog+pos的原理简单来说就是master产生binlog，slave复制master的binlog到自己的relay log，slave再重放relay log，插入实际数据。<br>slave会记录最后读取的数据的log文件和位置(master_log_file和read_master_log_pos)，保证不会重复同步数据。</p>
<h3 id="出错情景"><a href="#出错情景" class="headerlink" title="出错情景"></a>出错情景</h3><h5 id="情景1：stop-slave容器再起，或服务器重启。"><a href="#情景1：stop-slave容器再起，或服务器重启。" class="headerlink" title="情景1：stop slave容器再起，或服务器重启。"></a>情景1：stop slave容器再起，或服务器重启。</h5><p>slave启动后，默认的master_user会变成test，造成连不上master。先stop slave再用用户名密码start slave即可。<br>master_user估计哪里可以永久设定。先不细究。</p>
<h5 id="情景2：rm-slave容器再起。"><a href="#情景2：rm-slave容器再起。" class="headerlink" title="情景2：rm slave容器再起。"></a>情景2：rm slave容器再起。</h5><p>删除容器再创建，启动slave时会报错</p>
<pre><code>START SLAVE USER=&#39;xxx&#39; PASSWORD=&#39;xxx&#39;
</code></pre>
<p> <code>Error Code: 1872. Slave failed to initialize relay log info structure from the repository</code></p>
<p>解法：<br>在slave上</p>
<pre><code>show slave status
</code></pre>
<p>记下master_log_file和read_master_log_pos</p>
<pre><code>reset slave;   // 清空了master_log_file。read_master_log_pos设为4

CHANGE MASTER TO
MASTER_HOST=&#39;xxx&#39;,
MASTER_PORT=3307,
master_log_file=&#39;binlog.000005&#39;,  // 填记下的master_log_file和read_master_log_pos
master_log_pos=11957

START SLAVE USER=&#39;xxx&#39; PASSWORD=&#39;xxx&#39; // 启动。完成。
</code></pre>
<p>如果read_master_log_pos与rm之前的值不一样，会造成数据不一致。<br>（填小，会缺数据。而且无论怎么折腾，重设参数，都回复不过来了。目前只好转到情况4，完全重做slave）</p>
<h5 id="情景3：master容器stop再起。rm-master容器再起。"><a href="#情景3：master容器stop再起。rm-master容器再起。" class="headerlink" title="情景3：master容器stop再起。rm master容器再起。"></a>情景3：master容器stop再起。rm master容器再起。</h5><p>不用处理。slave断开后一分钟左右会自动重连。</p>
<h5 id="情景4：slave数据已错乱，无法同步。完全重做slave。需清空slave，dump出master数据，导入slave，再开始同步。"><a href="#情景4：slave数据已错乱，无法同步。完全重做slave。需清空slave，dump出master数据，导入slave，再开始同步。" class="headerlink" title="情景4：slave数据已错乱，无法同步。完全重做slave。需清空slave，dump出master数据，导入slave，再开始同步。"></a>情景4：slave数据已错乱，无法同步。完全重做slave。需清空slave，dump出master数据，导入slave，再开始同步。</h5><p>参考：<br><a target="_blank" rel="noopener" href="https://blog.51cto.com/liaoxz/2141797">https://blog.51cto.com/liaoxz/2141797</a><br><a target="_blank" rel="noopener" href="https://tecadmin.net/reset-re-sync-mysql-master-slave-replication/">https://tecadmin.net/reset-re-sync-mysql-master-slave-replication/</a></p>
<p>目前看到的最好的办法：<br>用mysqldump，加–master-data=1参数<br>可不停机dump出现有数据，并附带master_log_file和master_log_pos信息。<br>总而言之就是dump出一份通用的数据以建立一个新的slave</p>
<p>老版本客户端连8.0会报错，因为密码策略更新了。先升级客户端。（网上解法都是修改服务器默认密码策略，很难受。）<br><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/">https://dev.mysql.com/doc/mysql-apt-repo-quick-guide/en/</a></p>
<p>ubuntu14.04会出错，16.04可以。<br>先sudo apt-cache search mysql-client。尝试安装的话，都是5的版本。</p>
<pre><code>wget https://dev.mysql.com/get/mysql-apt-config_0.8.15-1_all.deb
sudo dpkg -i mysql-apt-config_0.8.15-1_all.deb
</code></pre>
<p>server选8.0</p>
<pre><code>sudo apt-get update
sudo apt-cache search mysql-client
sudo apt install mysql-client          //看到显示是的8.0.
</code></pre>
<p>装好后看mysql –version。变成8了</p>
<p>dump出master的数据</p>
<pre><code>mysqldump -uroot -pxxxxx --host xxx --port xxx --single-transaction --master-data --databases test &gt; master_test.sql
</code></pre>
<p>打开test.sql<br>看到<code>CHANGE MASTER TO MASTER_LOG_FILE=&#39;binlog.000008&#39;, MASTER_LOG_POS=2841;</code><br>这里就包含了master的信息</p>
<pre><code>stop slave
reset slave
</code></pre>
<p>把slave的数据库都删掉</p>
<p>进入slave。</p>
<pre><code>mysql -uroot -pxxxx --host 127.0.0.1 --port xxxx
</code></pre>
<p>执行dump出的sql。</p>
<pre><code>source master_all.sql

START SLAVE USER=&#39;xxx&#39; PASSWORD=&#39;xxx&#39;
</code></pre>
<p>到此数据已经同步</p>
<hr>
<h2 id="主从复制方法2：GTID"><a href="#主从复制方法2：GTID" class="headerlink" title="主从复制方法2：GTID"></a>主从复制方法2：<code>GTID</code></h2><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/replication-gtids.html">https://dev.mysql.com/doc/refman/8.0/en/replication-gtids.html</a></p>
<h3 id="GTID的格式"><a href="#GTID的格式" class="headerlink" title="GTID的格式"></a>GTID的格式</h3><ul>
<li><code>GTID = source_id:transaction_id</code><br>例如<code>3E11FA47-71CA-11E1-9E33-C80AA9429562:23</code><br>所谓GTID(global transaction identifier)就是在一个集群里，数据库每个事务(不同的节点都会区分)都有一个全局的id。<br>可以理解为集群里所有操作都有一个唯一的id。那么主从复制中的差异对比和防重复就相对容易了，<br>不再需要指定MASTER_LOG_FILE和MASTER_LOG_POS这些参数。</li>
</ul>
<ul>
<li>可以很方便地描述GTID集合，例如<code>d683ed20-5f54-11ea-b5cd-0242ac120002:1-4</code>，表示transaction_id从1到4的集合。<br>有了集合就可以用很少的空间表示大量连续的GTID了。</li>
</ul>
<h3 id="各系统变量和内部表的说明："><a href="#各系统变量和内部表的说明：" class="headerlink" title="各系统变量和内部表的说明："></a>各系统变量和内部表的说明：</h3><p><a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/8.0/en/replication-options-gtids.html">https://dev.mysql.com/doc/refman/8.0/en/replication-options-gtids.html</a></p>
<p><code>mysql.gtid_executed</code>表<br>GTID会存在mysql内部<code>mysql.gtid_executed</code>表中。</p>
<p><code>binlog</code><br>开启gtid-mode后。GTID也会存在于binlog里。</p>
<p><code>gtid_next</code>系统变量<br>控制如何得到下一个GTID，默认值<code>AUTOMATIC</code>，事务执行后自动生成。<br>还可以手动设为某个特定的GTID，这是非常规操作，不做深究。</p>
<p><code>gtid_executed</code>系统变量(注意和<code>mysql.gtid_executed</code>表并不同)<br>包含已执行的gtid<br>mysql启动时会进行初始化。初始化的依据：现有的<code>binlog</code>和<code>mysql.gtid_executed</code>表</p>
<p><code>gtid_purged</code>系统变量<br>包含已执行但不存在于任何binlog的gtid，是<code>gtid_executed</code>的子集。<br>为什么不存在于任何binlog？因为binlog通常会被删除（如<code>purge binary logs</code>删除binlog或mysql自动清理binlog(expire_logs_days参数，默认为0不自动删除)）<br>GTID的存在有这么个公式：<code>gtid_executed</code> = <code>binlog</code> + <code>gtid_purged</code><br>mysql启动时会进行初始化。初始化的依据：现有的<code>binlog</code>和<code>gtid_executed</code>系统变量</p>
<p>存在于<code>gtid_purged</code>中的三种GTID：</p>
<ol>
<li>已执行的GTID，但slave的binlog没打开。</li>
<li>写入binlog后，binlog被删除。</li>
<li>手动设置。SET @@GLOBAL.gtid_purged=’xxxxxxxxxxxxx</li>
</ol>
<h6 id="思考："><a href="#思考：" class="headerlink" title="思考："></a>思考：</h6><p>这样看来GTID的实际记录组成就是<code>mysql.gtid_executed</code>表加现有的binlog。其他几个变量都是会开机重新计算并实时变化，系统同步时会频繁用到，也可用于一些手动操作和状态查询。</p>
<h3 id="GTID的生命周期"><a href="#GTID的生命周期" class="headerlink" title="GTID的生命周期"></a>GTID的生命周期</h3><ol>
<li>一个事务在master上被执行。那么给这个事物分配一个GTID(master的id+transaction_id)并存入binlog。GTID一定是连续的（某些特殊情况出现缺口时，会自动进行填充），并存入binlog的。如果某条没存binlog，那么就不会分配给它GTID。</li>
<li>GTID在分配给一个事务后，在commit时作为一个<code>Gtid_log_event</code>存到binlog。在binlog进行滚动或mysql关闭等情况下会最终写到<code>mysql.gtid_executed</code>。</li>
<li>GTID在分配给一个事务后，会存入<code>@@GLOBAL.gtid_executed</code>系统变量里。这个变量是一个GTID集合，用来表示server当前的一个状态。<code>gtid_executed</code>系统变量包含所有已执行的GTID，而<code>mysql.gtid_executed</code>表并不一定包含全部，因为如第2点所说会先存入binlog，在后续的某个时机才会存入<code>mysql.gtid_executed</code>表。<br>（我的理解，简单来说就是同时存入<code>@@GLOBAL.gtid_executed</code>系统变量和binlog（可看作是实时的，总是最新的），后续某个时机(binlog滚动等)再存入<code>mysql.gtid_executed</code>表（可看作是非实时的，非最新的）。）</li>
<li>binlog数据传到slave并存入slave的relay log后。slave读出GTID并存入系统变量<code>gtid_next </code>，告诉系统待同步的事务。</li>
<li>slave拿到这个GTID，验证是否自己独占(slave可多线程进行复制)，验证这个GTID是否已经用过等等。</li>
<li>各种验证都没问题，slave执行这个事务。</li>
<li>如果slave的binlog是打开的，为一个<code>Gtid_log_event</code>存到binlog。在binlog进行滚动或mysql关闭等情况下会最终写到<code>mysql.gtid_executed</code></li>
<li>如果slave的binlog是关闭的，直接存入slave的<code>mysql.gtid_executed</code>表。</li>
<li>slave执行这个GTID之后，会存到<code>@@GLOBAL.gtid_executed</code>系统变量。跟master一样，<code>@@GLOBAL.gtid_executed</code>系统变量也包含所有已执行的GTID。</li>
</ol>
<p>大致就是这几个表和系统变量标识了GTID的各种状态和阶段，根据binlog的开关和滚动，以及其他设置，最终让所有GTID得到比较完美的同步。<br>看着挺复杂的，文档内容也比较多，需要仔细看文档甚至源码去学习了。</p>
<p>非事务性的操作也可能分配GTID。比如磁盘故障，造成binlog出现一个缺口，那么这个缺口也会分配一个GTID。</p>
<p>一条语句也能差分成多个事务，从而分配多个GTID。</p>
<h3 id="GTID自动寻址"><a href="#GTID自动寻址" class="headerlink" title="GTID自动寻址"></a>GTID自动寻址</h3><p>slave发送已同步过的GTID集合给master。master把slave没有的数据发回去。某些拓扑结构会造成slave收到重复的数据，但slave自己也会判断重复并跳过的。</p>
<ul>
<li>出错情景1<br>如果master将要发送的事务在<code>@@GLOBAL.gtid_purged</code>中，说明master已经执行，但对应的binlog没了。这个情况已经没法正常往slave同步了。master会报错，并给出<code>ER_FOUND_MISSING_GTIDS</code>（缺失的GTID），slave要么手动补上这些数据(去master或者别的slave上找)，要么就直接重做数据了。<h6 id="思考：同步是要依赖master的binlog的。删除最近的binlog是危险的。一般情况保留越久越好。"><a href="#思考：同步是要依赖master的binlog的。删除最近的binlog是危险的。一般情况保留越久越好。" class="headerlink" title="思考：同步是要依赖master的binlog的。删除最近的binlog是危险的。一般情况保留越久越好。"></a>思考：同步是要依赖master的binlog的。删除最近的binlog是危险的。一般情况保留越久越好。</h6></li>
</ul>
<ul>
<li>出错情景2<br>交换数据时master发现slave的某个GTID并不存在于自己的数据中。master会报错<code>ER_SLAVE_HAS_MORE_GTIDS_THAN_MASTER</code>。出现这个问题的一个可能的原因是mysql的sync_binlog参数没有设为1，master的binlog的写入有滞后，造成GTID对应的数据还没写入binlog。</li>
</ul>
<h3 id="GTID配置方法"><a href="#GTID配置方法" class="headerlink" title="GTID配置方法"></a>GTID配置方法</h3><p>打开<code>gtid_mode</code>和<code>enforce-gtid-consistency</code></p>
<pre><code># docker-compose 配置
mysql_8:
    image: mysql:8.0.19
    command:
            --server-id=1
            --gtid_mode=on
            --enforce-gtid-consistency=on
            --skip-slave-start=off   # for slave 不在启动时自动同步，而是手动启动同步。
</code></pre>
<p>启动后show variables，可看到都为ON。</p>
<h4 id="1-完全重做数据库。"><a href="#1-完全重做数据库。" class="headerlink" title="1. 完全重做数据库。"></a>1. 完全重做数据库。</h4><p>起一个干净的mysql作为master。创建slave账号。<br>起一个干净的mysql作为slave。slave要加个skip-slave-start=off，不在启动时自动同步，而是手动启动同步。</p>
<p>slave启动后开始同步</p>
<pre><code>change master to
master_host=&#39;xxxxx&#39;,
master_user=&#39;xxx&#39;,
MASTER_AUTO_POSITION = 1;
</code></pre>
<h4 id="2-出错场景"><a href="#2-出错场景" class="headerlink" title="2.出错场景"></a>2.出错场景</h4><p>如果数据不一致了，有几种解决方法。<br>这里介绍个最简单的，把数据库整个导出。<br>比如现有好几个数据库，在slave上把其中一个的几个表或一批数据误删了。这时reset slave再重启也无效。<br>那么：</p>
<p>1.slave停止复制</p>
<pre><code>stop slave
</code></pre>
<p>2.从master上dump出不一致的数据库</p>
<pre><code>mysqldump -uroot -pxxxx --host xxxx --port xxxx --single-transaction --master-data=1 --set-gtid-purged=on --databases test &gt; master_test.sql
</code></pre>
<p>3.导入slave。因为都是带GTID的，所以不会重复导入。导入后可以看到数据全了。</p>
<pre><code>mysql -uroot -pxxxxx --host 127.0.0.1 --port xxxx
source master_all.sql
</code></pre>
<p>4.slave启动复制。回到正常状态。</p>
<pre><code>START SLAVE USER=&#39;xxx&#39; PASSWORD=&#39;xxx&#39;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/16/48/" data-id="ckkfmdgbj0060vkcgdicuhvl8" data-title="MySql8主从复制介绍" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-710" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/13/710/" class="article-date">
  <time class="dt-published" datetime="2020-03-13T01:45:01.000Z" itemprop="datePublished">2020-03-13</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/13/710/">sys.waitUntil与sys.waitUntilExt的区别</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>基础用法都是相似的，用于协程的阻塞等待：</p>
<pre><code>sys.taskInit(function()
    while true do
        sys.waitUntil(&quot;MSG&quot;)
    end
end)
</code></pre>
<p>不同点在于函数返回值不同：<br>sys.waitUntil 返回 true（收到消息）/false（超时）和Data（如果有）；<br>sys.waitUntilExt返回 MSG（消息的str）/ false（超时）和Data（如果有）；</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--发布消息</span></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		sys.wait(<span class="number">2000</span>)</span><br><span class="line">		sys.publish(<span class="string">&quot;MSG_TEST&quot;</span>, <span class="string">&quot;test_payload&quot;</span>)</span><br><span class="line">		<span class="built_in">log</span>.info(<span class="string">&quot;msg_test&quot;</span>, <span class="string">&quot;send&quot;</span>)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">--订阅消息</span></span><br><span class="line"><span class="comment">--sys.subscribe(&quot;MSG&quot;, function(callback) log.info(&quot;msg&quot;,callback ) end)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">--测试waitUntil</span></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> result, data = sys.waitUntil(<span class="string">&quot;MSG_TEST&quot;</span>)</span><br><span class="line">		<span class="built_in">log</span>.info(<span class="string">&quot;msg.waitUntil&quot;</span>, result, data)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="comment">--测试waitUntil timeout</span></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> result, data = sys.waitUntil(<span class="string">&quot;MSG_TEST&quot;</span>, <span class="number">1500</span>)</span><br><span class="line">		<span class="built_in">log</span>.info(<span class="string">&quot;msg.waitUntil.timeout&quot;</span>, result, data)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--测试waitUntilExt</span></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> msg, data = sys.waitUntilExt(<span class="string">&quot;MSG_TEST&quot;</span>)</span><br><span class="line">		<span class="built_in">log</span>.info(<span class="string">&quot;msg.waitUntilExt&quot;</span>, msg, data)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br><span class="line"><span class="comment">--测试waitUntilExt timeout</span></span><br><span class="line">sys.taskInit(<span class="function"><span class="keyword">function</span><span class="params">()</span></span></span><br><span class="line">	<span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">		<span class="keyword">local</span> msg, data = sys.waitUntilExt(<span class="string">&quot;MSG_TEST&quot;</span>, <span class="number">1500</span>)</span><br><span class="line">		<span class="built_in">log</span>.info(<span class="string">&quot;msg.waitUntilExt.timeout&quot;</span>, msg, data)</span><br><span class="line">	<span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span>)</span><br></pre></td></tr></table></figure>
<p>输出结果如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[2020-03-13 09:38:54.648]: [I]-[msg_test] send</span><br><span class="line">[2020-03-13 09:38:55.155]: [I]-[msg.waitUntil.timeout] false nil</span><br><span class="line">[2020-03-13 09:38:55.157]: [I]-[msg.waitUntilExt.timeout] false nil</span><br><span class="line">[2020-03-13 09:38:56.656]: [I]-[msg.waitUntilExt] MSG_TEST test_payload</span><br><span class="line">[2020-03-13 09:38:56.658]: [I]-[msg.waitUntil] true test_payload</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/13/710/" data-id="ckkfmdgd900b0vkcg544p9pvz" data-title="sys.waitUntil与sys.waitUntilExt的区别" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-709" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/10/709/" class="article-date">
  <time class="dt-published" datetime="2020-03-10T13:26:34.000Z" itemprop="datePublished">2020-03-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/10/709/">在air202上通过IIC_SSD1306来显示图片</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p><br></p><p>之前看了社区“老张”的文章（<a href="http://doc.openluat.com/article/498/0" target="_blank">http://doc.openluat.com/article/498/0</a>），这里只讲了动态显示信号，但我想显示自己想要的图片，如何显示？</p><p>OLED，即有机发光二极管，又称为有机电激光显
示。。。</p><p><img style="width: 459px;" src="https://oldask.openluat.com/image/show/attachments-2020-03-fZtmzHvB5e678bfe36973.png" class="img-responsive">也就是IIC_SSD1306不能像SPI的屏幕直接放图片，得要转换相应的位模式（这里深层意思我不懂）</p><p>我仔细查看了社区“老张”的压缩包里的图片信息，是一个BMP的位图</p><p>确实，其它格式的图片都是不能显示</p><p>自己百度了一下如何将普通的图片转换成位图，并实践。直接附图！（参考<a href="https://wenku.baidu.com/view/f117e03eaf45b307e871979a.html" target="_blank">https://wenku.baidu.com/view/f117e03eaf45b307e871979a.html</a>）</p><p><br></p><p>1.先利用画图工具将图片转换成BMP<br></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-v1lQoIer5e678e41323ac.png" class="img-responsive"></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-e3emUFDB5e678fd45ade6.png" class="img-responsive"></p><p>2.使用photoshop进行处理</p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-GqtynvMn5e67948cb01ff.png" class="img-responsive"></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-6GdkBzEV5e67949cb2a69.png" class="img-responsive"><br></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-ZoHIXrEt5e678f6bd0e0e.png" class="img-responsive"></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-4EHD4ao55e678fa32283c.png" class="img-responsive"></p><p><br></p><p>最后，将制作好的图片显示在IIC_SSD1306屏幕上<br></p><p><img style="width: 50%;" src="https://oldask.openluat.com/image/show/attachments-2020-03-gg83pSG25e679360ca8f1.jpg" class="img-responsive"></p><p><br></p><p></p><p></p><p><a target="_blank" rel="noopener" href="https://oldask.openluat.com/file/attachments-2020-03-LhOHen3I5e67924a46c0e_新建 ZIP 压缩文件.zip">新建 ZIP 压缩文件.zip</a></p><p><br></p><p><br><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/10/709/" data-id="ckkfmdgd800ayvkcggea880q2" data-title="在air202上通过IIC_SSD1306来显示图片" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-708" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/09/708/" class="article-date">
  <time class="dt-published" datetime="2020-03-09T02:45:47.000Z" itemprop="datePublished">2020-03-09</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/09/708/">关于联通2G退网的分析</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>文章援引自联通的业务期刊，仅为分享解答大家关于2G退网的问题，如有侵权请联系删除。</p><p><span style="color: rgb(255, 0, 0);">摘 要：</span> 2G网络业务量不断下降而运维成本却居高不下，同时面对低频资源的不足，<span style="color: rgb(255, 0, 0);">减频退网</span>已成为中国联通的必然选择。通过对2G终端自然更迭为4G终端的用 户行为进行数据分析挖掘，依据所处场景和用户画像引导用户迁移，并进行效益测算，为减频退网提供数据支撑。</p><div><div><span style="color: rgb(255, 0, 0);">引言：</span>随着智能终端的快速普及以及4G无线网络覆盖的完善， 2G网络承载的业务量占比不断下降，但其无线资源利用率仍处于较高水平，用户感知体验不佳， 且网络运维成本居高不下，给中国联通带来了较大的 经济负担。同时，中国联通面对现有低频资源的不足，迫切需要重耕2G网络频谱以完善4G网络广覆盖 和深度覆盖。因此，无论从运营成本还是网络重构 上， 2G网络减频退网已成必然趋势。 2G网络涉及的用户数量庞大，且业务覆盖范围较 广。在偏远农村等4G弱覆盖区域， 2G网络承担了移动用户大量的语音业务，另一方面，由于2G网络通信装置价格低廉、技术成熟，也是众多物联网等行业终端的首选。因此，为了避免对用户造成较大的感知影响，减频退网应循序渐进，并制定相应的用户迁移策略。 本文针对某省部分地（市）联通2G终端用户行为 进行大数据分析，通过挖掘2G终端自然更迭为4G终 端用户的消费行为变化规律。根据用户所处地理区域及画像进行迁移引导，并对减频退网后的效益进行测算，为市场经营提供数据支撑。&nbsp;</div><div><h1><span style="color: rgb(0, 0, 255);">1 GSM网络现状 </span></h1><h2><span style="color: rgb(255, 0, 0);">1.1 业务占比 </span></h2><div>对于移动蜂窝网络而言，无线网络资源利用率与 网络负荷、业务感知等紧密相关，是反映网络性能的一个重要指标。在GSM网络中，其无线资源利用率主要取决于语音业务量、数据业务量以及系统综合容 量。目前该省2G网络无线资源利用率高达73.4%，而 利用率大于100%的高负荷小区数目占比31.1%，利用 率小于30%的低负荷小区数目仅占11.4%，对应的话 务量占比17.2%，数据流量占比0.3%。</div><h2><span style="color: rgb(255, 0, 0);"> 1.2 承载用户 </span></h2><div>中国联通4G终端是指支持LTEFDD900/1800/ 2100MHz或LTETDD2300/2600MHz网络制式终 端；中国联通3G终端为不支持中国联通LTE网络但支 持WCDMA900/2100MHz网络制式的终端；而中国联 通2G终端则表示既不支持中国联通LTE网络、也不支 持WCDMA网络，但能支持GSM900/1800MHz网络 制式的终端。 通过提取该省联通GSM网络不同终端类型的业 务量可知，其中70%的数据流量由4G终端贡献，对应 的话务量占比为75%。主要原因在于4G终端数目较 多，占比达到82%，且其DOU/MOU值均显著高于2G 终端。 进一步定义GSM网络承载用户为中国联通2G终 端或GSM900/1800MHz网络承载数据流量占比大于 50%的用户。据此定义分别统计2017年6月份和10 月份该省GSM网络用户承载情况如表1所示，可以看 出，10月份GSM网络承载的用户中4G终端占比 26.2%，而2G终端占比则由70.1%提高到72.1%，且 ARPU/DOU/MOU值均呈现下降趋势，此外10月份承 载用户数较6月份下降14.2%。（小知识补充：<span style="color: rgb(255, 0, 0);">ARPU</span><span style="color: rgb(51, 51, 51); font-family: arial; font-size: 13px;">(每用戶平均收入,Average Revenue Per User)，</span><span style="font-family: arial; font-size: 13px; color: rgb(255, 0, 0);">DOU</span><span style="font-family: arial; font-size: 13px;">（</span><span style="color: rgb(51, 51, 51); font-family: arial; font-size: 13px;">平均每户每月上网流量，</span><span style="color: rgb(51, 51, 51); font-family: arial; font-size: 13px;">Dataflow of usage)，MOU（平均每户每月使用时间，Moment&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: arial; font-size: 13px;">&nbsp;</span><span style="color: rgb(51, 51, 51); font-family: arial; font-size: 13px;">of usage</span>）</div><div><img src="https://oldask.openluat.com/image/show/attachments-2020-03-iDPCmDwP5e65a54624cf6.png" style="width: 50%;" class="img-responsive"></div><div>虽然GSM网络业务量主要由3G/4G终端产生，但极度依赖GSM网络（即2G网络数据流量超过50%）的 3G/4G终端占比仅为5%，该部分用户在GSM网络退网后受影响较大。对处于3G/4G网络覆盖范围内的用 户，可通过引导SIM卡升级、 4G网络开关解锁或流量促销等方式培育用户流量使用习惯；对处于3G/4G网 络弱覆盖区域，可通过完善LTE网络覆盖加以解决。 因此，GSM网络关闭后真正需要重视的是中国联通2G终端，也是本文重点研究的对象。&nbsp;<br></div><div><h2><span style="color: rgb(255, 0, 0);">1.3 2G终端制式</span></h2><div>对中国联通2G终端进行统计分析，发现纯GSM终端用户占比高达88.4%，存在0.1%的终端为异网 4G，即支持中国移动或中国电信4G网络制式，且ARPU/DOU值显著高于同类其他用户，属于高流量用户群体，如表2所示。</div><div><img src="https://oldask.openluat.com/image/show/attachments-2020-03-LQsbjT3y5e65a5afb27eb.png" style="width: 50%;" class="img-responsive"><br></div><div>中国联通2G终端设备中物联网终端占比为 30.9%，进一步对2G终端类型进行细分，按功能和设备形态划分主要包括手持设备、模组、功能机、模块、 智能机等，其中手持设备、模组和功能机占比最高，分别为37.2%、22.0%和20.6%。物联网等行业终端ARPU值较低，数据业务量较小，多用于电力等企业机构用以远程抄表。 据中国信息通信研究院2017年11月份发布的国内手机市场运行分析报告显示，10月份国内手机市场 出货量3818.1万部，同比下降9.8%，其中2G手机终 端占比为6.2%。不断新增的2G终端和较为稳定的存 量终端，给中国联通2G网络减频退网带来了较大的压力和挑战。</div><h1><span style="color: rgb(0, 0, 255);"> 2 用户迁移策略 </span></h1><h2><span style="color: rgb(255, 0, 0);">2.1 终端更迭 </span></h2><div>以该省联通2017年6月份及10月份部分2G终端 作为分析对象，通过对比终端自然更迭及消费行为特 征变化，为后续GSM网络用户迁移提供数据支撑。 2017年6月份2G终端用户随着时间推移，或继续使用 该终端，或变更为3G/4G终端，或离网。 物联网终端用户主动换机情况如表3所示，85.7% 的终端设备并未改变终端类型，即依旧使用中国联通 2G终端，且消费行为基本保持不变； 1.2%的终端变更 为中国联通3G或4G设备，数据流量显著增加，因4G 套餐资费低廉原因，其ARPU值反而下降，但仍高于其他用户； 1.1%的终端变更后受限于终端库限制无法识 别，多为山寨机；此外12.1%的终端设备离网。 与物联网终端用户相比，非物联网终端用户离网率更高，高达20.1%，且数据流量需求较大，话务相对 稳定，如表4所示。65.6%用户未改变终端类型，ARPU值下降8.1%，DOU下降17.1%，MOU值相对稳定； 11.3%的终端更换为4G终端，ARPU值增长19.3%， DOU增长111.6%。</div><div><img src="https://oldask.openluat.com/image/show/attachments-2020-03-UJgYzN5Q5e65a66418610.png" style="width: 50%;" class="img-responsive"><br></div><div> 物联网多为集团客户行业终端，且所在区域范围 较为集中，可通过公司层面协商统一解决，因此应重 点关注非物联网2G终端客户。 2017年6月为中国联通2G终端且在当年10月变 更为4G终端设备的客户，所用终端品牌主要为华为、 小米、OPPO等主流终端，用户数目占比如表5所示。</div><div><img src="https://oldask.openluat.com/image/show/attachments-2020-03-QHYTg2F75e65a6a656e38.png" style="width: 50%;" class="img-responsive"><div>进一步具体到终端型号，由2G终端更换为4G终 端设备后，排名前3的设备类型为OPPOA57、iPhone6 和小米A13，如表6所示。 通过分析主动将2G终端更换为4G终端后所用套 餐主要集中为4G套餐，如表7所示。值得注意的是伴 随着终端更迭而变换套餐的用户数很少，占比不到 5%。终端升级后，相应的ARPU值均呈现不同程度上 涨，整体增长19.34%。TOP10套餐产品增长幅度为 26.89%，腾讯大王卡受益于终端更换后的流量释放导 致收入增长高达81.75%。 按照用户年龄进行统计分析并绘制相应的分布 图（见图1），可以看出中国联通2G终端用户年龄主要 集中在25~55岁，其中15~30岁的青少年用户群体主 动更换4G终端意愿较强，而55岁之后的老年人则较为消极。</div><div><img src="https://oldask.openluat.com/image/show/attachments-2020-03-2xsYXGGP5e65a6fbdbd3c.png" style="width: 50%;" class="img-responsive"><img src="https://oldask.openluat.com/image/show/attachments-2020-03-kqxjilkI5e65a71b41412.png" style="width: 50%;" class="img-responsive"><br></div><h2><span style="color: rgb(255, 0, 0);"> 2.2 迁移引导 </span></h2><div>依据现网中国联通2G终端主动更换4G终端用户 数据分析，可将物联网终端与非物联网终端用户迁移分开处理。<span style="color: rgb(255, 0, 0);">由于物联网终端多为行业集团客户，因此 可通过公司层面统一推进，因此需重点关注非物联网联通2G终端用户迁移问题，以便顺利推进减频退网及频率重耕等。</span> 考虑到用户日常行动轨迹及活动范围，减频退网 应以连片区域为单位进行统一操作。可根据基站资 源利用率忙闲程度、区域聚类、用户画像等因素加以考量，尽可能降低对中国联通2G终端用户感知的影响，具体策略如下。</div><div> a）统计所有2G基站自忙时资源利用率和忙时用 户数，并以此聚类分割，形成网格。 </div><div>b）以网格为单位，根据语音及流量使用情况确定 每个2G终端用户的常驻网格。</div><div> c）计算每个网格下2G基站的平均自忙时资源利 用率，若该值超过50%，则定义为高负荷区域，否则视 为低负荷区域。 </div><div>d）<span style="color: rgb(255, 0, 0);">对于高负荷网格区域， 2G终端用户数相对较 多，且活跃度较高，应暂缓减频退网。</span></div><div>对于低负荷网 格区域常驻终端用户按照流量使用情况及终端制式 等进行分批迁移以加速退网，具体如下： </div><div>a）对于常驻用户为中国联通4G终端，则通过营 销引导用户开启4G流量使用功能，完善4G网络覆盖， 减少回落。 </div><div>b）如常驻用户所用设备为GSM终端或友商定制 机，且属于高流量群体，则可通过终端补贴等方式引 导用户更换全网通手机。 </div><div>c）其他常驻用户则可视投资效益等情况分批次 低成本迁移。 </div><div>针对低负荷2G网格区域，当2G网络业务出账收 入低于运维成本时，说明投资效能低下，可予以关停。 值得注意的是，需对周边进行4G网络覆盖优化，以避免因为基站关停带来的覆盖空洞或感知恶化。 市场层面上，应严控2G套餐增量用户，对于3G/ 4G网络覆盖区域，<span style="color: rgb(255, 0, 0);">可停止发展仅开通2G网络上网功能用户和仅支持2G网络的物联网终端模块。</span></div><h1><span style="color: rgb(0, 0, 255);">3 效益测算</span></h1><div>物联网行业终端可依据公司层面统一协调更换， 对于非物联网终端则需要通过市场引导加速终端升级替换。按照上述迁移策略，可以将非物联网2G终端数目的30%、出账收入的70%以及数据流量的90%进行迁移。高ARPU值高流量2G终端用户在变更为4G 终端后，受益于流量释放，次月ARPU值可增长20%左右。此时，用户迁移后的收入即可与转网前全部2G终端收入相当，为2G网减频退网奠定良好的经济基础。</div><div>运营成本方面， 2G基站能耗较高，年电费约0.82 万/站，重耕后900MHz单站电费降至0.5万元/站，单站 年节省电费0.32万元。在2G终端用户日趋减少，而运维成本居高不下的环境，可以看出减频退网对于提 高投资效益的必要性。 随着减频退网的逐步实施，核心城区可先行对无线网络进行重构，释放900MHz低频资源，构建高低频协同4G网络，以解决当前4G广覆盖和深度覆盖问题， 为快速部署NB-IoT及VoLTE做好铺垫。外场测试表明，同等环境条件下，L900覆盖距离可达到L2600频段8T8R的1.6倍、 L1800频段2T2R的1.3倍。在5MHz 带宽条件下， L900在小区边缘可提供约4Mbit/s的单用户速率，可解决现网数据业务的深度覆盖问题。在当前提速降费政策大力推行及投资受限的情况下，<span style="color: rgb(255, 0, 0);">加快2G减频退网释放900/1800MHz频谱资源用于4G 网络，既是解决当前覆盖问题的必然选择</span>，更是为未来开展大连接、云计算等各类业务奠定网络基础的必然选择。</div><h1><span style="color: rgb(0, 0, 255);"> 4 结束语</span></h1><div> 随着2G终端用户的自然更迭以及4G终端智能机 的快速普及， 2G网络收入不断下降，而运维成本却居 高不下，因此减频退网已成行业共识。为了使2G终端 用户顺利迁移，本文首先对2G终端自然更迭为4G终 端的用户进行深入分析，挖掘用户消费行为特征关 系。然后对其中的高价值高流量用户通过市场引导 优先迁移，从而降低主营收入损失，并对减频退网后 的效益进行了测算。</div></div></div><div><span style="color: rgb(255, 0, 0);">转载总结：2G退网大势所趋，现阶段主要问题是4G终端相比2G价格较高，但随着CAT1的出现这一状况将有所缓解。2G退网以后空出的频段，将重新使用，用于NB等用途也将是加快物联网终端网络覆盖的重要途径。对于现有的2G用户而言，某些区域短时间内并不会退网，但会减频，现有设备还能使用但具体能用多久和区域有关。对于新的用户而言，联通已经不开放2G新的申请了，想用2G的可以使用移动，如果项目规划使用周期长，建议抛弃2G，根据业务需求拥抱4G和NB。</span></div><div><br></div><div><br></div><div><br></div><div><br></div><div><br></div></div></div>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/09/708/" data-id="ckkfmdgd800axvkcg44v8ef5b" data-title="关于联通2G退网的分析" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-707" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/03/05/707/" class="article-date">
  <time class="dt-published" datetime="2020-03-05T11:42:40.000Z" itemprop="datePublished">2020-03-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/03/05/707/">8、合宙Air模块Luat开发：基于官方库的二次封装，使串口更加易用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<blockquote>
<p>本系列博客，理论上适用于合宙的Air202、Air268、Air720x、Air720S以及最近发布的Air720U（我还没拿到样机，应该也能支持）。</p>
</blockquote>
<blockquote>
<p>先不管支不支持，如果你用的是合宙的模块，那都不妨一试，也许会有意外收获<br>我使用的是Air720SL模块，如果在其他模块上不能用，那就是底层core固件暂时还没有支持，这里的代码是没有问题的。例程仅供参考！</p>
</blockquote>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><blockquote>
<p>每次写博客最痛苦的事情就是把要讲的东西用小白都能听懂的方式描述一遍，所以我决定换一种方式来写这篇博客，不扯这些乱七八糟的东西，默认大家都在其他地方了解过什么是串口，这里只教怎么用</p>
</blockquote>
<ul>
<li>串口通讯协议简介</li>
</ul>
<blockquote>
<p>串口通讯(Serial Communication)是一种设备间非常常用的串行通讯方式，因为它简单便捷，大部分电子设备都支持该通讯方式，电子工程师在调试设备时也经常使用该通讯方式输出调试信息，因为Air720SL自有一个USB端口用于程序下载和log打印，所以这里主要是讲怎么和其他的单片机或者通讯，不建议用来打印调试信息。</p>
</blockquote>
<ul>
<li>串口通讯的波特率</li>
</ul>
<blockquote>
<p>串口通讯是一种异步通信，异步通讯中由于没有时钟信号，所以两个通讯设备之间需要约定好波特率，即每个码元的长度，以便对信号进行解码。常见的波特率为9600、19200、115200等。</p>
</blockquote>
<ul>
<li>通讯的起始和停止信号</li>
</ul>
<blockquote>
<p>串口通讯的一个数据包从起始信号开始，直到停止信号结束。数据包的起始信号由一个逻辑 0的数据位表示，而数据包的停止信号可由 0.5、1、1.5或 2 个逻辑 1 的数据位表示，只要双方约定一致即可。</p>
</blockquote>
<ul>
<li>数据位长度</li>
</ul>
<blockquote>
<p>在数据包的起始位之后紧接着的就是要传输的主体数据内容，也称为有效数据，有效数据的长度常被约定为 5、6、7或 8位长。</p>
</blockquote>
<ul>
<li>数据校验</li>
</ul>
<blockquote>
<p>在有效数据之后，有一个可选的数据校验位。由于数据通信相对更容易受到外部干扰导致传输数据出现偏差，可以在传输过程加上校验位来解决这个问题。校验方法有奇校验(odd)、偶校验(even)、0校验(space)、1校验(mark)以及无校验(noparity)。在无校验的情况下，数据包中不包含校验位。</p>
</blockquote>
<blockquote>
<p>以上内容引用<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_24550925/article/details/85335709">开源一小步的ESP32的两个UART实验</a>有兴趣的自行了解</p>
</blockquote>
<h1 id="二、Air720SL开发板硬件部分"><a href="#二、Air720SL开发板硬件部分" class="headerlink" title="二、Air720SL开发板硬件部分"></a>二、Air720SL开发板硬件部分</h1><ul>
<li><p>查看硬件设计手册能够看到Air720Sl模组一共拥有两个串口，串口2为主串口，串口1为辅助串口<br><img src="https://img-blog.csdnimg.cn/2020030518115642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><img src="https://img-blog.csdnimg.cn/20200305181220854.png" alt="在这里插入图片描述"></p>
</li>
<li><p>官方的开发板用了一个开关，使开发板能够很方便的在一个usb口上实现串口1和串口2的切换<br><img src="https://img-blog.csdnimg.cn/20200305184058469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h1 id="三、编写驱动库函数"><a href="#三、编写驱动库函数" class="headerlink" title="三、编写驱动库函数"></a>三、编写驱动库函数</h1></li>
<li><p>官方的串口驱动库可以通过订阅系统消息，产生中断来实现通知用户已经接收到数据，但是这个通知是硬件FIFO是从空到非空的时候产生中断，如果在中断到来的那一刻立即去读取可能会存在数据读取不完整。</p>
</li>
<li><p>串口会存在分包发送的现象，那么就需要用户自己实现整合多个数据包的内容。</p>
</li>
<li><p>官方的串口demo也给出了解决方案，就是利用数据包接收超时来判断系统有没有接受到完整的数据包，这样的话串口接收程序就显得比较复杂，用户需要考虑的东西比较多，用起来也不是很方便</p>
</li>
</ul>
<blockquote>
<p>我这里基于官方的demo进行了二次封装，采用回调通知的方式通知用户接收到了完整的数据包，提供的库函数包内部自整合的超时合包机制，以及延时读取机制，保证在通知用户的时候已经接收到完整的数据（如果出现通讯故障，是没法保证的）</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br></pre></td><td class="code"><pre><span class="line">--- 模块功能：更加易用的串口</span><br><span class="line">-- @author CX</span><br><span class="line">-- @<span class="keyword">module</span></span><br><span class="line">-- @license MIT</span><br><span class="line">-- @copyright CX</span><br><span class="line">-- @release <span class="number">2020.02</span><span class="number">.13</span></span><br><span class="line"><span class="keyword">module</span>(..., package.seeall)</span><br><span class="line"></span><br><span class="line">require <span class="string">&quot;clib&quot;</span></span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------函数说明---------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">--[[</span><br><span class="line">* @description: Uart初始化</span><br><span class="line">* @param</span><br><span class="line">----------uart_id            &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">----------baud_rate          &#123;numble&#125; 波特率，可选<span class="number">1200</span>，<span class="number">2400</span>，<span class="number">4800</span>，<span class="number">9600</span>，<span class="number">10400</span>，<span class="number">14400</span>，<span class="number">19200</span>，<span class="number">28800</span>，<span class="number">38400</span>，<span class="number">57600</span>，<span class="number">115200</span>，<span class="number">230400</span>，<span class="number">460800</span>，<span class="number">921600</span></span><br><span class="line">----------data_bits          &#123;numble&#125; 数据位，<span class="number">7</span>或<span class="number">8</span></span><br><span class="line">----------parity             &#123;numble&#125; 校验位，可选uart.PAR_EVEN, uart.PAR_ODD或uart.PAR_NONE</span><br><span class="line">----------stop_bits          &#123;numble&#125; 停止位，可选uart.STOP_1，uart.STOP_2</span><br><span class="line">----------receive_cb         &#123;function&#125; 接收到数据回调函数，回调函数参数uid：接收到数据的串口id</span><br><span class="line">---------------------------------------------------------------------str：接收到的完整数据</span><br><span class="line">---------------------------------------------------------------------len：接收到的数据长度</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line"></span><br><span class="line">function Uart_Init(uart_id, baud_rate, data_bits, parity, stop_bits, receive_cb)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 串口发送</span><br><span class="line">* @param</span><br><span class="line">----------uart_id            &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">----------String             &#123;String&#125; 要发送的数据</span><br><span class="line">----------sent_cb            &#123;function&#125; 可选，数据发送成功回调函数，回调函数参数uid：发送成功的串口id，</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function Uart_Sent(uart_id, String, sent_cb)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--[[</span><br><span class="line">* @description: 串口关闭，释放占用的资源</span><br><span class="line">* @param</span><br><span class="line">----------uart_id   &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">function Uart_Close(uart_id)</span><br><span class="line">]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">-------------------------------下面都不要管了----------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">------------------------------------------------------------------------------------</span><br><span class="line">local Uart_Receive_Data = &#123;&#125;</span><br><span class="line">local Uart_Receive_cb = &#123;&#125;</span><br><span class="line">local Uart_Sent_cb = &#123;&#125;</span><br><span class="line">local Uart_Sent_Busy = &#123;&#125;</span><br><span class="line">local function Uart_Receive_timeout(uid)</span><br><span class="line">    local str = table.concat(Uart_Receive_Data[uid])</span><br><span class="line">    <span class="keyword">if</span> Uart_Receive_cb[uid] then</span><br><span class="line">        Uart_Receive_cb[uid](uid, str, <span class="meta">#str)</span></span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">local function Uart_Re_Notice(uid, ulength)</span><br><span class="line">    Uart_Receive_Data[uid] = &#123;&#125;</span><br><span class="line">    table.insert(Uart_Receive_Data[uid], uart.read(uid, <span class="number">1000</span>))</span><br><span class="line">    sys.timerStart(Uart_Receive_timeout, <span class="number">100</span>, uid)</span><br><span class="line">end</span><br><span class="line">local function Uart_Se_Notice(uid, ulength)</span><br><span class="line">    Uart_Sent_Busy[uid] = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">if</span> Uart_Sent_cb[uid] then</span><br><span class="line">        Uart_Sent_cb[uid](uid)</span><br><span class="line">    end</span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;uart&quot;</span> .. uid .. <span class="string">&quot;send done&quot;</span>)</span><br><span class="line">end</span><br><span class="line">--[[</span><br><span class="line">* @description: Uart初始化</span><br><span class="line">* @param</span><br><span class="line">----------uart_id            &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">----------baud_rate          &#123;numble&#125; 波特率，可选<span class="number">1200</span>，<span class="number">2400</span>，<span class="number">4800</span>，<span class="number">9600</span>，<span class="number">10400</span>，<span class="number">14400</span>，<span class="number">19200</span>，<span class="number">28800</span>，<span class="number">38400</span>，<span class="number">57600</span>，<span class="number">115200</span>，<span class="number">230400</span>，<span class="number">460800</span>，<span class="number">921600</span></span><br><span class="line">----------data_bits          &#123;numble&#125; 数据位，<span class="number">7</span>或<span class="number">8</span></span><br><span class="line">----------parity             &#123;numble&#125; 校验位，可选uart.PAR_EVEN, uart.PAR_ODD或uart.PAR_NONE</span><br><span class="line">----------stop_bits          &#123;numble&#125; 停止位，可选uart.STOP_1，uart.STOP_2</span><br><span class="line">----------receive_cb         &#123;function&#125; 接收到数据回调函数，回调函数参数uid：接收到数据的串口id</span><br><span class="line">---------------------------------------------------------------------str：接收到的完整数据</span><br><span class="line">---------------------------------------------------------------------len：接收到的数据长度</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">]]</span><br><span class="line">function Uart_Init(uart_id, baud_rate, data_bits, parity, stop_bits, receive_cb)</span><br><span class="line">    <span class="keyword">if</span> receive_cb == nil then</span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;CXUART&quot;</span>, <span class="string">&quot;Please fill in the receive data callback function!&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    end</span><br><span class="line">    Uart_Receive_cb[uart_id] = receive_cb</span><br><span class="line">    Uart_Sent_Busy[uart_id] = <span class="literal">false</span></span><br><span class="line">    pm.wake(<span class="string">&quot;mcuart&quot;</span>)</span><br><span class="line">    uart.setup(uart_id, baud_rate, data_bits, parity, stop_bits, nil, <span class="number">1</span>)</span><br><span class="line">    uart.on(uart_id, <span class="string">&quot;receive&quot;</span>, Uart_Re_Notice)</span><br><span class="line">    uart.on(uart_id, <span class="string">&quot;sent&quot;</span>, Uart_Se_Notice)</span><br><span class="line">end</span><br><span class="line">--[[</span><br><span class="line">* @description: 串口发送</span><br><span class="line">* @param</span><br><span class="line">----------uart_id            &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">----------String             &#123;String&#125; 要发送的数据</span><br><span class="line">----------sent_cb            &#123;function&#125; 数据发送成功回调函数，可选</span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">]]</span><br><span class="line">function Uart_Sent(uart_id, String, sent_cb)</span><br><span class="line">    <span class="keyword">if</span> Uart_Sent_Busy[uart_id] == <span class="literal">false</span> then</span><br><span class="line">        Uart_Sent_Busy[uart_id] = <span class="literal">true</span></span><br><span class="line">        Uart_Sent_cb[uart_id] = sent_cb</span><br><span class="line">        uart.write(uart_id, String)</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;CXUART&quot;</span>, <span class="string">&quot;Device is busy, please try again later&quot;</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line">--[[</span><br><span class="line">* @description: 串口关闭，释放占用的资源</span><br><span class="line">* @param</span><br><span class="line">----------uart_id   &#123;numble&#125; 串口号，可选<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span></span><br><span class="line">* @<span class="keyword">return</span>: 无</span><br><span class="line">]]</span><br><span class="line">function Uart_Close(uart_id)</span><br><span class="line">    uart.close(uart_id)</span><br><span class="line">    Uart_Receive_Data[uart_id] = nil</span><br><span class="line">    Uart_Receive_cb[uart_id] = nil</span><br><span class="line">    Uart_Sent_Busy[uart_id] = nil</span><br><span class="line">    Uart_Sent_cb[uart_id] = nil</span><br><span class="line">end</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>上面直接给出了二次封装的库函数代码，使用者只需要新建一个文件，我这里是新建了一个<code>CXUART.lua</code>，具体新建什么文件，看心情自己定，然后将上面的代码全部复制放到文件中保存</p>
</blockquote>
<h1 id="四、编写测试程序并且下载测试程序到开发板"><a href="#四、编写测试程序并且下载测试程序到开发板" class="headerlink" title="四、编写测试程序并且下载测试程序到开发板"></a>四、编写测试程序并且下载测试程序到开发板</h1><blockquote>
<p>这里我们直接贴出全部代码</p>
</blockquote>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">--必须在这个位置定义PROJECT和VERSION变量</span><br><span class="line">--PROJECT：ascii <span class="built_in">string</span>类型，可以随便定义，只要不使用,就行</span><br><span class="line">--VERSION：ascii <span class="built_in">string</span>类型，如果使用Luat物联云平台固件升级的功能，必须按照<span class="string">&quot;X.X.X&quot;</span>定义，X表示<span class="number">1</span>位数字；否则可随便定义</span><br><span class="line">PROJECT = <span class="string">&quot;UART&quot;</span></span><br><span class="line">VERSION = <span class="string">&quot;0.0.1&quot;</span></span><br><span class="line">require <span class="string">&quot;sys&quot;</span></span><br><span class="line">--加载日志功能模块，并且设置日志输出等级</span><br><span class="line">--如果关闭调用<span class="built_in">log</span>模块接口输出的日志，等级设置为<span class="built_in">log</span>.LOG_SILENT即可</span><br><span class="line">require <span class="string">&quot;log&quot;</span></span><br><span class="line">LOG_LEVEL = <span class="built_in">log</span>.LOGLEVEL_TRACE</span><br><span class="line"></span><br><span class="line">require <span class="string">&quot;CXUART&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">local function Test_Task()</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">true</span> <span class="keyword">do</span></span><br><span class="line">        <span class="built_in">log</span>.info(<span class="string">&quot;Test_Task_run&quot;</span>)</span><br><span class="line">        sys.wait(<span class="number">5000</span>)</span><br><span class="line">    end</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function MyUart_receive_cb(uid, str, len)--串口接收回调函数</span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;uart&quot;</span> .. uid .. <span class="string">&quot;:Len:&quot;</span> .. len)</span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;uart&quot;</span> .. uid .. <span class="string">&quot;:str:&quot;</span> .. str)</span><br><span class="line">    CXUART.Uart_Sent(uid, str)--原封不动返回</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">local function user_main()</span><br><span class="line">    sys.taskInit(Test_Task)</span><br><span class="line">    sys.wait(<span class="number">5000</span>)</span><br><span class="line">    CXUART.Uart_Init(<span class="number">1</span>, <span class="number">9600</span>, <span class="number">8</span>, uart.PAR_NONE, uart.STOP_1, MyUart_receive_cb)  --串口<span class="number">1</span>初始化</span><br><span class="line">    CXUART.Uart_Init(<span class="number">2</span>, <span class="number">115200</span>, <span class="number">8</span>, uart.PAR_NONE, uart.STOP_1, MyUart_receive_cb)--串口<span class="number">2</span>初始化</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">--启动系统框架</span><br><span class="line">sys.taskInit(user_main)</span><br><span class="line">sys.init(<span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">sys.run()</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<blockquote>
<p>下载程序需要连同库函数文件一并下载<br><img src="https://img-blog.csdnimg.cn/20200305190517364.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
</blockquote>
<h1 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h1><h2 id="1、我提供的库函数"><a href="#1、我提供的库函数" class="headerlink" title="1、我提供的库函数"></a>1、我提供的库函数</h2><ul>
<li><code>Uart_Init(uart_id, baud_rate, data_bits, parity, stop_bits, receive_cb)</code>–串口初始化</li>
<li><code>Uart_Sent(uart_id, String, sent_cb)</code>–串口发送数据</li>
<li><code>Uart_Close(uart_id)</code>–关闭串口，释放资源</li>
</ul>
<blockquote>
<p>不会下载的<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里</a>，进去查看我的第二篇博文<code>2、Air720SL模块Luat开发：第一个Luat的Hello World</code>里面讲了怎么下载<br>这里只是我的学习笔记，拿出来给大家分享，欢迎大家批评指正，本篇教程到此结束</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/03/05/707/" data-id="ckkfmdgd800awvkcg64f331dz" data-title="8、合宙Air模块Luat开发：基于官方库的二次封装，使串口更加易用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/25/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/24/">24</a><a class="page-number" href="/page/25/">25</a><span class="page-number current">26</span><a class="page-number" href="/page/27/">27</a><a class="page-number" href="/page/28/">28</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/27/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>