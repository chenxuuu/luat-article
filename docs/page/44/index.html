<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/44/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-545" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/16/545/" class="article-date">
  <time class="dt-published" datetime="2019-01-16T11:45:23.000Z" itemprop="datePublished">2019-01-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/16/545/">用AIR202 通过I2C读取SHT30 数据</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>SHT30 目前 应该算是比较主流的温湿传感器，据说小米的温湿传感器也是使用同款，其中SHT30-DIS 采用I2C方式进行通信，</p><p>最近开发一款产品需要采集温湿度，我采用AIR202+SHT30方案，从网络上搜索不到用lua语言开发SHT30的方案，只能自已摸索，通过合宙技术的支持，顺利读取到数据，特贴代码于此，以供大家参考。因为本人对lua语言不熟悉，所写代码如果有误，还请多多指教。下列代码中未对采集到的数据进行CRC校验，如果有熟悉LUA开发者，还请共同完善代码。</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-RManURZm5c3f18c3ec51b.png" class="img-responsive" style="width: 463px;"><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/01/16/545/" data-id="ckkfmdgc1007dvkcg7qrwbihn" data-title="用AIR202 通过I2C读取SHT30 数据" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-544" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/16/544/" class="article-date">
  <time class="dt-published" datetime="2019-01-16T09:23:33.000Z" itemprop="datePublished">2019-01-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/16/544/">不敢私藏：Air202, 按键长按重启和特长按回退为出厂版本，感谢 李炜镪</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <pre style="background-color:#2b2b2b;color:#a9b7c6;font-family:'Menlo';font-size:9.0pt;"><span style="color:#bf6060;">module</span>(<span style="color:#9966ff;">...</span><span style="color:#cc7832;">, </span><span style="color:#bf6060;">package</span>.<span style="color:#a39d2b;">seeall</span>)<br><br><span style="color:#bf6060;">require </span><span style="color:#6a8759;">'pins'<br></span><span style="color:#cc6acc;font-style:italic;"><br></span><span style="color:#cc7832;font-weight:bold;">local </span><span style="color:#009999;">btnDown </span>= <span style="color:#cc6acc;font-style:italic;">false<br></span><span style="color:#cc7832;font-weight:bold;">local </span><span style="color:#009999;">st </span>= <span style="color:#6897bb;">0<br></span><span style="color:#6897bb;"><br></span><span style="color:#bf6060;">pins</span>.<span style="color:#a39d2b;">setup</span>(<span style="color:#bf6060;">pio</span>.<span style="color:#a39d2b;">P0_2</span><span style="color:#cc7832;">, </span><span style="color:#cc7832;font-weight:bold;">function</span>()<br>    <span style="color:#cc7832;font-weight:bold;">if </span><span style="font-weight:bold;font-style:italic;">btnDown </span><span style="color:#cc7832;font-weight:bold;">then<br></span><span style="color:#cc7832;font-weight:bold;">        local </span><span style="color:#009999;">d </span>= <span style="color:#bf6060;">os</span>.<span style="color:#a39d2b;">time</span>() - <span style="font-weight:bold;font-style:italic;">st<br></span><span style="font-weight:bold;font-style:italic;"><br></span><span style="font-weight:bold;font-style:italic;">        </span><span style="color:#cc7832;font-weight:bold;">if </span><span style="color:#009999;">d </span>> <span style="color:#6897bb;">4 </span><span style="color:#cc7832;font-weight:bold;">then<br></span><span style="color:#cc7832;font-weight:bold;">            </span><span style="color:#bf6060;">log</span>.<span style="color:#a39d2b;">info</span>(<span style="color:#6a8759;">'BUTTON'</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">'RESTORE DEVICE...'</span>)<br>            <span style="color:#bf6060;">assert</span>(<span style="color:#cc6acc;font-style:italic;">false</span>)<br>        <span style="color:#cc7832;font-weight:bold;">elseif </span><span style="color:#009999;">d </span>> <span style="color:#6897bb;">1 </span><span style="color:#cc7832;font-weight:bold;">then<br></span><span style="color:#cc7832;font-weight:bold;">            </span><span style="color:#bf6060;">log</span>.<span style="color:#a39d2b;">INFO</span>(<span style="color:#6a8759;">'BUTTON'</span><span style="color:#cc7832;">, </span><span style="color:#6a8759;">'RESTART DEVICE...'</span>)<br>            <span style="color:#bf6060;">sys</span>.<span style="color:#a39d2b;">restart</span>(<span style="color:#6a8759;">'BUTTON'</span>)<br>        <span style="color:#cc7832;font-weight:bold;">end<br></span><span style="color:#cc7832;font-weight:bold;"><br></span><span style="color:#cc7832;font-weight:bold;">        </span><span style="font-weight:bold;font-style:italic;">st </span>= <span style="color:#6897bb;">0<br></span><span style="color:#6897bb;">    </span><span style="color:#cc7832;font-weight:bold;">else<br></span><span style="color:#cc7832;font-weight:bold;">        </span><span style="font-weight:bold;font-style:italic;">st </span>= <span style="color:#bf6060;">os</span>.<span style="color:#a39d2b;">time</span>()<br>    <span style="color:#cc7832;font-weight:bold;">end<br></span><span style="color:#cc7832;font-weight:bold;">    </span><span style="font-weight:bold;font-style:italic;">btnDown </span>= <span style="color:#cc7832;font-weight:bold;">not </span><span style="font-weight:bold;font-style:italic;">btnDown<br></span><span style="color:#cc7832;font-weight:bold;">end</span>)</pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/01/16/544/" data-id="ckkfmdgc0007avkcg8z712kdu" data-title="不敢私藏：Air202, 按键长按重启和特长按回退为出厂版本，感谢 李炜镪" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-543" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/14/543/" class="article-date">
  <time class="dt-published" datetime="2019-01-14T12:34:07.000Z" itemprop="datePublished">2019-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/14/543/">天蓬一号序章</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>考试结束了，放假回家闲着没事做点小东西玩吧。为啥叫天蓬一号呢，因为国家刚发了个嫦娥四号，而且明年是猪年就叫这个名字吧。</p><p>主要功能，硬件包含两个部分，一个是电子门铃：当有人来到门前时发出过年好的声音，室内端发出有人来拜年了，当人离开家的时候可以通过手机微信小程序设置成离家模式，门铃会提示访客家里没人，客人可以留言，留言信息会同步推送给小程序；另一部分是室内端：采集温湿度oled屏显示温湿度与网络时钟，可以用小程序设置闹钟。计划接入天猫精灵或者小爱。</p><p>硬件部分采用air202，因为自带语音，支持oled屏幕，编程比较简单，主要是手头比较多。</p><p>采用mqtt协议连接服务器，mqtt服务器自己搭建，小程序后台使用php开发。智能音箱的接入采用云对云接入方案。</p><p>在这里记录整个开发过程</p><p><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/01/14/543/" data-id="ckkfmdgbz0079vkcg0tw06p51" data-title="天蓬一号序章" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-542" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/14/542/" class="article-date">
  <time class="dt-published" datetime="2019-01-14T11:57:27.000Z" itemprop="datePublished">2019-01-14</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/14/542/">windows下通过python进行串口通信</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>需求描述：</p>
</blockquote>
<ul>
<li>平台环境：windows<br>通过串口编程实现自动化任务（基于python）</li>
</ul>
<blockquote>
<p>需要用到的工具：</p>
</blockquote>
<ul>
<li>python3.7.1（或其他版本）<br>serial（这是一个让python能收发串口消息的模块）<br>sublimetext3（或其他代码编辑器）</li>
</ul>
<h1 id="一、安装python"><a href="#一、安装python" class="headerlink" title="一、安装python"></a>一、安装python</h1><p>这里就不详细描述了，python安装网上很多教程（或者完全不需要教程）<br>附python官方下载地址：<a target="_blank" rel="noopener" href="https://www.python.org/downloads/">https://www.python.org/downloads/</a><br>需要注意的是，安装时记得同时安装pip</p>
<h1 id="二、安装serial"><a href="#二、安装serial" class="headerlink" title="二、安装serial"></a>二、安装serial</h1><p>这里通过pip进行安装，在命令行下执行<code>pip install pyserial</code>即可</p>
<h1 id="三、python编程"><a href="#三、python编程" class="headerlink" title="三、python编程"></a>三、python编程</h1><p>这是一个扫描当前串口并打印、通过COM5发送AT并打印返回值的Demo，大家可以按需修改，部分代码来自找茬官Jone</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#coding:utf-8</span></span><br><span class="line"><span class="comment">#!usr/bin/python3.6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> serial</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> filecmp</span><br><span class="line"><span class="keyword">import</span> serial.tools.list_ports</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#global MAX_LOOP_NUM</span></span><br><span class="line"><span class="comment">#global newCmd</span></span><br><span class="line"><span class="comment">#global sbuf</span></span><br><span class="line"><span class="comment">#sbuf=&#x27;&#x27;</span></span><br><span class="line"><span class="comment">#MAX_LOOP_NUM = 10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendInfo</span>(<span class="params">strInfo</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;[&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %X&quot;</span>)+<span class="string">&#x27;]发→◇&#x27;</span>+strInfo.decode())</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">            <span class="built_in">print</span> (<span class="string">&#x27;[&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %X&quot;</span>)+<span class="string">&#x27;]发→◇&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">            print(strInfo)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">recvInfo</span>(<span class="params">strInfo</span>):</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;[&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %X&quot;</span>)+<span class="string">&#x27;]收←◆&#x27;</span>+strInfo.decode())</span><br><span class="line">    <span class="keyword">except</span> Exception:</span><br><span class="line">        <span class="built_in">print</span> (<span class="string">&#x27;[&#x27;</span>+time.strftime(<span class="string">&quot;%Y-%m-%d %X&quot;</span>)+<span class="string">&#x27;]收←◆&#x27;</span>, end=<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">        print(strInfo)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_comport</span>():</span></span><br><span class="line">    plist = <span class="built_in">list</span>(serial.tools.list_ports.comports())</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(plist) &lt;= <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">&quot;没有发现端口!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> aport <span class="keyword">in</span> plist:<span class="comment">#循环获取所有端口</span></span><br><span class="line">            print(<span class="string">&quot;可用端口名&gt;&gt;&gt;&quot;</span>,aport[<span class="number">0</span>],<span class="string">&quot;-&quot;</span>,aport)</span><br><span class="line">            <span class="comment">#print(aport)</span></span><br><span class="line"></span><br><span class="line">        plist_0 = <span class="built_in">list</span>(plist[<span class="number">0</span>])</span><br><span class="line">        serialName = plist_0[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            serialFd = serial.Serial(serialName, <span class="number">9600</span>, timeout=<span class="number">60</span>)</span><br><span class="line">            print(<span class="string">&quot;可用端口名&gt;&gt;&gt;&quot;</span>, serialFd.name)</span><br><span class="line">            <span class="keyword">return</span> serialFd.name</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            print(<span class="string">&#x27;无法打开串口&#x27;</span>)</span><br><span class="line">            sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">waitForCmdOKRsp</span>(<span class="params">timeout</span>):</span></span><br><span class="line">    <span class="comment">#maxloopNum = 0</span></span><br><span class="line">    timeout *=<span class="number">10</span></span><br><span class="line">    <span class="comment">#print(&quot;Rsponse :&quot;)</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n=ser.inWaiting()</span><br><span class="line">        <span class="keyword">if</span> n:</span><br><span class="line">            line = ser.read(n)</span><br><span class="line">            recvInfo(line.decode())</span><br><span class="line">       <span class="comment"># maxloopNum = maxloopNum + 1</span></span><br><span class="line">            i=line.find(<span class="string">b&#x27;OK&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span> i&gt;=<span class="number">0</span>:</span><br><span class="line">                <span class="comment">#print(&#x27;find ok&#x27;)</span></span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        timeout-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (timeout&lt;=<span class="number">0</span>):</span><br><span class="line">            print(<span class="string">&#x27;[INFO]等待AT命令返回OK超时&#x27;</span>)</span><br><span class="line">            sys.exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">waitForCmdRsp</span>(<span class="params">timeout</span>):</span></span><br><span class="line">    <span class="comment">#maxloopNum = 0</span></span><br><span class="line">    timeout *=<span class="number">10</span></span><br><span class="line">    <span class="comment">#print(&quot;Rsponse :&quot;)</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        n=ser.inWaiting()</span><br><span class="line">        <span class="keyword">if</span> n:</span><br><span class="line">            line = ser.read(n).decode()</span><br><span class="line">            recvInfo(line)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">       <span class="comment"># maxloopNum = maxloopNum + 1</span></span><br><span class="line"></span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">        timeout-=<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(timeout&lt;=<span class="number">0</span>):</span><br><span class="line">            print(<span class="string">&#x27;[INFO]等待AT命令返回超时&#x27;</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sendAT_Cmd</span>(<span class="params">serInstance,atCmdStr,waitforOk,timeout</span>):</span></span><br><span class="line">    <span class="comment">#print(&quot;SendCmd: %s&quot; % atCmdStr)</span></span><br><span class="line">    sendInfo(atCmdStr)</span><br><span class="line">    serInstance.write(atCmdStr.encode(<span class="string">&#x27;utf-8&#x27;</span>))</span><br><span class="line">    <span class="comment">#or define b&#x27;string&#x27;,bytes should be used not str</span></span><br><span class="line">    <span class="keyword">if</span>(waitforOk == <span class="number">1</span>):</span><br><span class="line">        waitForCmdOKRsp(timeout)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        waitForCmdRsp(timeout)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">scanport</span>():</span><span class="comment">#扫描设备端口</span></span><br><span class="line">    plist = <span class="built_in">list</span>(serial.tools.list_ports.comports())</span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">len</span>(plist) &lt;= <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">&quot;没有发现端口!&quot;</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        <span class="keyword">for</span> aport <span class="keyword">in</span> plist:<span class="comment">#循环获取所有端口</span></span><br><span class="line">            print(<span class="string">&quot;可用端口名&gt;&gt;&gt;&quot;</span>,aport)</span><br><span class="line">            <span class="comment">#print(aport)</span></span><br><span class="line">        <span class="keyword">return</span> plist</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">portlist = scanport()</span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> portlist:</span><br><span class="line">    print(a)</span><br><span class="line"></span><br><span class="line">comport=<span class="string">&#x27;COM5&#x27;</span><span class="comment">#设置AT端口</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    ser = serial.Serial(port=comport, baudrate=<span class="number">115200</span>, bytesize=<span class="number">8</span>, parity=serial.PARITY_NONE, stopbits=<span class="number">1</span>, timeout=<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">if</span> ser.isOpen() :</span><br><span class="line">        print(<span class="string">&quot;[INFO]%s open success&quot;</span> % comport)</span><br><span class="line">    <span class="keyword">else</span> :</span><br><span class="line">        print(<span class="string">&quot;[INFO]%s open failed&quot;</span> % comport)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;[INFO]请查看是否成功打开设备端口：&quot;</span>+comport)</span><br><span class="line"></span><br><span class="line">    sys.exit()</span><br><span class="line">sendAT_Cmd(ser,<span class="string">&#x27;AT\r\n&#x27;</span>,<span class="number">1</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>示例运行截图：<br><img src="http://doc.openluat.com/api/static/editormd/uploads/5_32114.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/01/14/542/" data-id="ckkfmdgbz0078vkcgd0k61cmq" data-title="windows下通过python进行串口通信" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-541" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2019/01/07/541/" class="article-date">
  <time class="dt-published" datetime="2019-01-07T12:49:50.000Z" itemprop="datePublished">2019-01-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2019/01/07/541/">新版本DTU连接阿里云</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>稀饭放姜大神今天更新了dtu固件，支持阿里云自动注册，测试了一下非常6。这里写一下阿里云这部分如何设置。</p><p>我还是使用的高级版（因为调试比较方便而且支持后续数据流转），产品创建之类的可以参考我以前发的贴子。今天主要说的是RAM平台子用户的创建与权限分配。</p><p>因为自动注册设备需要用到两个阿里云很重要的参数AccessKey ID和Access Key Secret，而这两个参数在阿里云中的地位可不一般，他几乎可以对你一切产品进行操作，所以阿里云推出了RAM（<span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">Resource Access Management</span>）管理平台，<span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">RAM 的主要作用是控制账号系统的权限。通过使用 RAM，创建、管理子账号，并通过给子账号授予不同的权限，控制子账号对资源的操作权限</span>，今天用到的就是这个。</p><p>1，开通</p><p><a href="https://buy.aliyun.com/ram?spm=a2c4g.11186623.2.11.123a49930kpP5m" target="_blank">直接点这里</a>就可以开通，前提是你要有阿里云账号（<a href="https://promotion.aliyun.com/ntms/yunparter/invite.html?userCode=8qbzoull" target="_blank">这里注册</a>）</p><p>2，新建用户</p><p>开通完应该是这么个界面（默认没有用户那个是我加的），点右侧新建用户</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-lzOIBLUe5c33448096881.png" style="width: 683px;" class="img-responsive"></p><p><br></p><p>起个名，随便写，下面<span style="color: rgb(38, 38, 38); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Microsoft YaHei&quot;, &quot;Helvetica Neue&quot;, Helvetica, Arial, simsun, sans-serif; font-size: 12px;">编程访问</span>一定勾选，后面说了启用AccessKeyID和AccessKeySecret，支持通过API或其他开发工具访问，要的就是这个</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-8IDhzwkD5c334519c16bf.png" style="width: 677.5px;" class="img-responsive"><br></p><p>3，保存好这几个参数，建议直接下载，这个只能查看一次忘了只能重置</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-ftDXRDHf5c33464acdc02.png" style="width: 677.5px;" class="img-responsive">4，新建一个策略</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-PLozl7iG5c3346b83708b.png" style="width: 655.5px;" class="img-responsive"></p><p>5，配置策略</p><p>名称随意，选择脚本配置</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-AuYlOcEv5c334717a813e.png" style="width: 593px;" class="img-responsive">具体脚本如下</p><pre><div style="color: rgb(0, 0, 0); background-color: rgb(255, 255, 254); font-family: Consolas, &quot;Courier New&quot;, monospace; font-size: 14px; line-height: 19px; white-space: pre;"><div>{</div><div>    <span style="color: #a31515;">"Statement"</span>: [</div><div>        {</div><div>            <span style="color: #a31515;">"Effect"</span>: <span style="color: #0451a5;">"Allow"</span>,</div><div>            <span style="color: #a31515;">"Action"</span>: [</div><div>                <span style="color: #a31515;">"iot:RegisterDevice"</span>,</div><div>                <span style="color: #a31515;">"iot:QueryDeviceDetail"</span></div><div>            ],</div><div>            <span style="color: #a31515;">"Resource"</span>: <span style="color: #0451a5;">"*"</span></div><div>        }</div><div>    ],</div><div>    <span style="color: #a31515;">"Version"</span>: <span style="color: #0451a5;">"1"</span></div><p>}</p></div></pre><p>如何编写这个脚本可以看<a href="https://help.aliyun.com/document_detail/47495.html?spm=a2c4g.11186623.2.16.634625e3QP19FR" target="_blank">这里</a></p><p>这个脚本iot:RegisterDevice是<span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">注册设备，</span><span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">iot:QueryDeviceDetail是</span><span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">查询设备详情，dtu只用了这两个权限。</span></p><p><span style="color: rgb(51, 51, 51); font-family: PingFangSC, &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, arial, &quot;microsoft yahei ui&quot;, &quot;microsoft yahei&quot;, simsun, sans-serif;">6，添加权限，回到刚才创建的用户为他添加权限</span></p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-mTcurzYA5c3348df7ab15.png" style="width: 574px;" class="img-responsive"><font color="#333333" face="PingFangSC, helvetica neue, hiragino sans gb, arial, microsoft yahei ui, microsoft yahei, simsun, sans-serif">选自定义或者搜索刚才你创建策略的名字，点击添加，然后确定就可以</font></p><p></p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-G6lD3OWn5c33497f3c681.png" style="width: 350.5px;" class="img-responsive"><br></p><p>7，dtu设置，把刚才新建的用户的信息填入即可</p><p><img src="http://oldask.openluat.com/image/show/attachments-2019-01-xpGGN69Z5c3349fd0830f.png" style="width: 468.5px;" class="img-responsive">RAM的使用就是为了安全</p><p><br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2019/01/07/541/" data-id="ckkfmdgbz0077vkcgaft0bly8" data-title="新版本DTU连接阿里云" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-540" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/31/540/" class="article-date">
  <time class="dt-published" datetime="2018-12-31T01:15:00.000Z" itemprop="datePublished">2018-12-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/31/540/">有哪些让人拍案叫绝的智障设计？</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2><img style="width: 757.5px;" src="http://oldask.openluat.com/image/show/attachments-2018-12-C1fuK8NH5c2969f1daa70.png" class="img-responsive"></h2><p>偶然间阅读到了这条，瞬间颇有感触，把自己的一些心得写出来和大家分享。</p><p>如果开发者的设备使用的是常电，那么没有供电方面的困扰。可是如果使用电池+充电模式，如车载定位器、定位手表等设备，那么就要小心啦。如果像文中一样，很可能出现“<b>充电--开机--低电关机--重启--充电--开机</b>”的死循环情况。长此以往，还真可能损坏硬件。</p><p>那么如何解决这个问题呢？建议开发者增加如下机制：设备启动后：</p><p>&nbsp;&nbsp;&nbsp; 检查上次关机的原因：&nbsp;&nbsp;&nbsp;&nbsp;1、检查电池电压，如果电压过低，则禁止射频（飞行模式），并进入睡眠模式，等待电池电压足够高以后再开启射频；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2、如果上次关机是低电关机，强制检查电池电压，再决定是否开启射频；</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 3、如果无法检测电池电压，则反复进行提示（LCD）或者上报状态，同时关机。</p><p>&nbsp;&nbsp;&nbsp; 关机前，记录下关机前电压、关机原因、关机时间（手动关机、程控关机、低电关机等），意外掉电的情况无法因记录则放弃。开机后，可以，也可以检查记录文件，如果开机关机间隔很短，且多次短时间内重启，则可能出现“充电开关机死循环”，此时应i主动上报状态（LCD/网络），同时禁止射频（飞行模式）+进入休眠，给电池一个充电的缓冲时间。</p><p><br></p><p>可能用到的函数：低电关机设置：http://wiki.openluat.com/doc/luatApi%20-backup/#sysinit</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 检测电池电压：http://wiki.openluat.com/doc/luatApi%20-backup/#miscgetvbatt</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入飞行模式：http://wiki.openluat.com/doc/luatApi%20-backup/#netswitchfly</p><p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 进入休眠模式：http://wiki.openluat.com/doc/luatApi%20-backup/#pm<br></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/12/31/540/" data-id="ckkfmdgby0076vkcg2buo32y2" data-title="有哪些让人拍案叫绝的智障设计？" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-539" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/24/539/" class="article-date">
  <time class="dt-published" datetime="2018-12-24T15:09:37.000Z" itemprop="datePublished">2018-12-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/24/539/">合宙AT指令发送短信</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>如果看过合宙的AT指令手册，我想你会知道合宙的AT发短信的模式：TEXT和PDU两种。</p><p>首先来说说TEXT模式：这个模式不管是发送还是读取都是最简单的，也是很好理解的。但是它有个缺点就是无法发送中文，只能发送或接收ASCII码的数据。</p><p>使用步骤很简单：1 、AT发送AT+CMGF=1，设置为TEXT模式。</p><p>2、在输AT+CMGS="要发送的手机号"&nbsp;</p><p>3、出现 “&gt;”符号后，再输入要发送的信息（注意只能ASCII码的字符）。</p><p>4、最后以16进制格式发送 1a&nbsp; 其代表ctrl-Z这命令<img src="http://oldask.openluat.com/image/show/attachments-2018-12-2uUFpyuo5c20f0783ecff.png" class="img-responsive" style="width: 303.5px;"></p><p>再来说说PDU模式：这个模式相对使用起来较复杂不如TEXT那么直观简单，但是所能做到的却更强，建议实际产品都采纳这种模式。</p><p>发送短信的步骤如下：</p><p>1、AT+CMGS=21 &nbsp; &nbsp; &nbsp; 21代表要发的字符串的长度，具体使用时要改变</p><p>2、出现 “&gt;”符号后，再输入要发送的信息（需要PDU的格式）例：0011000D9168*************0008AA068C228C22FF01&nbsp; &nbsp; &nbsp; ***号代表手机号码其格式为：单数手机号+F（双数号码不用加f）然后把其两两对换。例：10086变为0180f6&nbsp; &nbsp;。在这说明号码前面的91代表“+”这符号 68即86 和起来为+86。</p><p>在这里分享个在线的PDU转码工具：http://www.multisilicon.com/blog/a22201774~/pdu.htm</p><p>3、最后以16进制格式发送 1a 短信就发出</p><p>返回CMGS代表发送成功的数据量</p><p><img src="http://oldask.openluat.com/image/show/attachments-2018-12-hbcAx58G5c20f5a0006d5.png" class="img-responsive" style="width: 207.5px;"></p><p>关于PDU编码，将放到其他的文章之中。搜PDU编码格式即可</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/12/24/539/" data-id="ckkfmdgby0074vkcg9sr9cijn" data-title="合宙AT指令发送短信" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-538" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/19/538/" class="article-date">
  <time class="dt-published" datetime="2018-12-19T08:38:45.000Z" itemprop="datePublished">2018-12-19</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/19/538/">面世就定价8000元，5G目前恐难以商用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>转自：http://www.tmtpost.com/3655156.html</p><p>种种利好消息带动了外界对5G的想象，意味着经过长时间技术研发和规模化网络实验，5G终于走到终端应用试验阶段。</p><p>3G手机2008年进入市场，4G手机2014年进入市场，从3G到4G时代中国用了6年时间，如今我国的4G网络以前所未有的速度迅猛发展，并已进入成熟期。从过往移动通信网络迭代速度来看，在4G发展的第五个年头推出商用5G也确实符合时宜。</p><p>然而据中国移动消息首批5G手机将达到8000元，加之不菲的5G套餐费用（预测在300元上下），无疑给大众泼了一盆冷水。虽然中移动乐观的预计到2020年，5G手机价格就可能降低到千元左右，可显然这只是中移动一厢情愿的想象。</p><p>用户真的迫切需要5G来革命自己的上网体验吗？天浩认为在当下的移动互联网世界，4G给予用户带来的上网服务已经绰绰有余。从5G天价面世本身来看，就给出了答案。如果中移动足够自信5G的快速普及，断然不会定下这么高的价格。</p><p>结合过往iPhone6一直坚挺为国内普及率最高的iPhone型号，以及微软不惜用停止对Windows XP支持来逼迫用户升级新版系统来看，远远超过用户真实需求的5G，并且要让用户大掏腰包，几年内很难如中移动所愿的全面落地。</p><h2>距离5G商用一步之遥</h2><p>据中国移动的官方微博消息，中国要建设全球规模最大的5G试验网，在17个城市全面启动面向商用的5G测试，与6个厂家发布了首批5G终端产品计划，将于2018年底推出首批5G终端芯片，2019年一季度推出首批5G终端。</p><p>根据其预判，首批5G手机的上市价将高达8000元以上。但随着5G网络的逐渐普及，到了2020年，5G手机的价格可能降到八分之一左右，也就是千元机的级别。</p><p>4G的发展刚刚起步的时候，5G的话题已经甚嚣尘上。早在2014年5月13日三星电子宣布已开发出了首个基于5G核心技术的移动传输网络，并表示在2020年之前进行5G网络的商业推广。而在近日，据芬兰媒体报道称，该国运营商Elisa已经正式宣布商用5G网络，并且还推出了全球首个5G移动套餐，每月收费50欧元（约合人民币390元），用户可以无限量地使用5G流量。</p><p>在这期间国内三大运营商也都在积极推进5G商用化进程，曾在3G落后一步的中移动率先将5G作为未来重要的战略规划。</p><p>中国移动计划未来三年内展开大规模网络测试，联合合作的企业进行应用试验，力争2020年实现5G网络商用。此外，中国联通也宣布将加快5G关键技术的研究，将5G网络正式商用的目标也定在2020年这个节点。同时，中国电信提出转型3.0，计划未来十年内分三步进行5G部署并全面开展5G相关研究和测试验证，争取2025年在6GHz以下首发5G。</p><p>5G在全球如火如荼地开展，不管是网络运营商还是手机厂商，都在积极布局5G产业，推动5G产业链成熟。最近在广州举行的中国移动全球合作伙伴大会，其主题是“5G连接新时代”，小米、OPPO、vivo等国内手机巨头都展出了最新款的5G手机，均搭载骁龙855芯片和X50
 5G调制解调器，好像我们距离5G时代只有一步之遥了。</p><h2>8000定价让人心凉</h2><p>从目前全球关于5G的报道来看，2019年/2020年前后5G的大范围商用将逐步推进，但不得不说，5G高昂的价格令人心凉。先不说高昂的5G套餐费用，光是5G手机本身的定价也令人望而却步，以移动5G手机8000的定价为例，直接决定了首批5G用户只能是在中高收入人群里流行。</p><p>对于大部分5环外刚刚用上千元机的用户而言，即使中移动乐观预测的千元5G手机能够实现，可动辄300元左右的流量资费，就足以让他们宁可不“尝鲜”，也不会贸然的进入5G时代。要知道2017年国人年可支配收入才25974元。</p><p>据今年1月18日，国家统计局发布的2017年居民收入情况数据显示，2017年全国居民人均可支配收入25974元，比上年名义增长9.0%，扣除价格因素，实际增长7.3%。2017年，全国居民人均消费支出18322元，比上年名义增长7.1%，扣除价格因素，实际增长5.4%。</p><p>5G手机的定价以及套餐费用与目前国人的人均可支配收入、人均消费支出背离太远，5G手机注定是“富人”们的权利，就如同每年推出的新款iPhone手机一样，率先尝鲜都是“有钱人”，根据极光大数据的数据显示，截止2018年Q2，iPhone
 6仍旧是苹果持有率最高的型号，对外销售了10个月的iPhone X却只能排到第6名。</p><p>要知道iPhone
X在硬件创新上相比iPhone 6整整进步了一两代，更高的屏占比、Face ID与无线充电等在使用体验上远远将iPhone
6甩在身后。但是相较于日常的手机使用，黑科技满满的iPhone
X没有“颠覆”性的改变，却“奇贵无比”，致使比自己早诞生2年、1年的老机子，普及率远远高于自己。</p><p>反过来看5G，为第五代移动通信网络，其峰值理论传输速度可达每秒数十Gb，这比4G网络的传输速度快数百倍，整部超高画质电影可在1秒之内下载完成。5G技术的诞生，标志着用户用智能终端分享3D电影、游戏以及超高画质（UHD）节目的时代已向我们走来。</p><p>可以平均6寸上下屏幕的手机，真的需要那么快的网速吗？5G带来的超高画质（UHD）和现在4G可以完美实现的1080超清在视觉上究竟能带多么翻天覆地的变化？未来几年2-3千元的手机屏幕真的能够释放5G带来的画质革命？</p><p>这一系列的问题，并不难回答。就像iPhone 6的坚挺和Windows XP的长寿，5G能否打破这个魔咒，真的让人堪忧。</p><h2>三大难题制约5G普及</h2><p>天浩在深度思考5G未来的问题后，认为有三大难题制约了5G的普及。</p><p>首先，<strong>对手机用户而言5G不是刚需</strong>。众所周知，2G解决的是语音通话的问题，满足了用户对手机通话的基本要求。3G、4G时代用户可以快速传输数据、音频、视频和图像等，移动通信质量提升、峰值速率提高等等，带来用户体验的极大提升，可以说从3G到4G的发展是具有跨时代意义的。</p><p>而5G技术传输速度相比4G的百倍超越，在现有的手机硬件与应用生态里，完全不足以发挥。此外，5G可以实现从人与人之间的通信走向人与物、物与物之间的通信，为万物互联的时代来临奠定基础。但物联网是一个比5G普及起来周期更长的事物，站在普通手机用户角度而言，即使不谈手机价格和套餐资费高低问题，仅从需求来讲，5G也并非刚需。</p><p>从2G到3G、4G的每次换代，戳中的都是用户真实痛点。3G相较2G而言带来的是语音时代向数据时代的革命，4G带来的则是满足手机用户日益增长用手机观看视频、玩大流量游戏及超大文件传送的需求。</p><p>而从目前的4G更新换代到5G就不是用户刚需了。现在的4G网络已基本满足普通用户的需求，这样显得5G地位较为尴尬，对普通用户而言，花掉目前使用合适的4G去追求价格高昂的5G，岂不是白花了“冤枉钱”？</p><p>其次是<strong>5G综合费用超过普通人承受能力</strong>。回首3G的普及，即使是从语音通讯到数据通讯的大变革，若没有当年运营商强推的0元购机活动及国产千元机的流行，3G的普及周期就可能非常之长。</p><p>而4G的发展，离不开当年红米、魅蓝、奇酷等一批几百元的4G手机大量面世。千元机让4G用户迅速突破11亿，可为了满足11亿用户4G的需要，三大运营商共投入几千亿建设340万左右的4G基站，致使每个手机用户都背负着一百元甚至两百元的套餐资费（本人4G套餐199元）。</p><p>去年底，中国移动研究院无线所总工刘光毅曾透露一个信息，因为5G建网频段较高，基站覆盖范围相对变小，同时5G的应用场景增多，所以想要保证5G高速率和广覆盖需求，基站数量应至少是4G基站数量2倍左右。通过推算，3G基础设施三大运营商投资3600亿元，4G基础设施投资在8000亿元，那5G要想实现大范围普及成本又将是多高呢？</p><p>目前4G的投入都没有回收，羊毛出在羊身上，300元5G资费都是乐观的猜测。十几亿手机用户里，有多高比例的用户能承担得起每月300元的套餐资费呢？</p><p>另一方面各大手机厂商要面临着动辄几十亿的5G技术研究经费，手机厂商每生产一台5G手机，都需要缴纳5G专利费用，高通的收费是单模5G手机收费4%，多模手机收费5%，而华为5G的收费标准没有多模和单模的区分，收费标准统一都是4%。此外，5G在上网速率上是超级迭代，总不能每秒数十Gb的5G网络，配的手机屏幕分辨率太低，CPU处理速度跟不上网速吧？所以，与5G相匹配的手机价格高是必然的。</p><p>还有5G手机的研发费用、专利费用等支出，最终还是会转移到消费者身上，这也就造成了5G手机价格昂贵的原因。消费者是否愿意为“天价”5G买单还是个问题。天浩认为，5G的推出或许会成为小众需求，对于普通大众而言，可以预见的时间里，他们很难掏腰包买5G的账，而用户过少套餐资费必然就要高（否则亏得太多），套餐资费高用户的换5G的热情就会被压抑，恶性循环，势必大大延长5G的普及的周期。</p><p>三是<strong>投入与回报比低</strong>，运营商“强推”动力存疑。早前摩根士丹利将中国移动和中国联通列为“亚洲电信股中不建议投资股份”，理由则是“5G业务的资本投资过大且其回报率较低”。为满足5G时代需求，运营商一般会采用更高频段、全国性覆盖的频谱，这无疑会大幅拉高资本投入。</p><p>据摩根士丹利预计，中国移动资本开支在2019至2023年间将达到4800亿元。在5G市场尚不明确的情况下，这些精明的运营商势必会非常谨慎，搞一搞营销噱头还行，很难会真的下血本快速普及5G基站。而且手机厂商也不敢all
 in，2014年4G时代以小米、奇酷、魅族为首的厂商贴钱做4G的盛况将不会重现，这也不利于推进5G的普及发展。</p><p>天浩认为5G在可见的时间里难彻底普及，5G已经超出用户真实需要，而且价格昂贵。除非运营商强硬关闭4G，否则远远超出用户刚需需求的5G真正的全面落地很难。虽然中移动乐观的认为2020年成本降至1000元，但真的会实现吗？</p><p>目前因为考虑投入问题4G网络还未实现稳定，又要投下一大笔钱的5G，十几年间一万多亿的投资只能用户来“还”，所以说5G价格不可能真正的大幅度下降。</p><p>对于目前的消费者而言，在相当长的时间里还是更喜欢性价比高的4G。虽然5G普及能带来一万个好处，可商业永远只谈现实，在可见的时间里，5G全面普或只是部分人的一腔情愿。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/12/19/538/" data-id="ckkfmdgby0075vkcgdskz0wed" data-title="面世就定价8000元，5G目前恐难以商用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-537" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/16/537/" class="article-date">
  <time class="dt-published" datetime="2018-12-16T14:40:43.000Z" itemprop="datePublished">2018-12-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/16/537/">Luat读写SD卡/TF卡,通过fatfs模块</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="高能预警"><a href="#高能预警" class="headerlink" title="高能预警"></a>高能预警</h2><p>当前版本 v0034 还没有内置fatfs的, 这里用的是自定义lod文件</p>
<p>update: 2019-06-18 更新到0034底层,并提供编译好的lod</p>
<h2 id="代码预览"><a href="#代码预览" class="headerlink" title="代码预览"></a>代码预览</h2><figure class="highlight lua"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">pmd.ldoset(<span class="number">6</span>,pmd.LDO_VMMC) <span class="comment">-- 必须打开供电</span></span><br><span class="line"><span class="comment">--fatfs.debug() -- 调试模式,会打印很多日志,帮助排错</span></span><br><span class="line">fatfs.init() <span class="comment">-- 初始化, 默认连接SPI_1, 片选是GPIO3</span></span><br><span class="line"><span class="keyword">local</span> fsm, err = fatfs.getfree() <span class="comment">-- 获取磁盘信息</span></span><br><span class="line"><span class="keyword">if</span> fsm ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;FatFS&quot;</span>,<span class="string">&quot;Total&quot;</span>, <span class="built_in">tostring</span>(fsm.total_kb) .. <span class="string">&quot;kb&quot;</span>, <span class="built_in">tostring</span>(fsm.total_kb/<span class="number">1024</span>) .. <span class="string">&quot;mb&quot;</span>)</span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;FatFS&quot;</span>,<span class="string">&quot;Free&quot;</span>, <span class="built_in">tostring</span>(fsm.free_kb) .. <span class="string">&quot;kb&quot;</span>, <span class="built_in">tostring</span>(fsm.free_kb/<span class="number">1024</span>) .. <span class="string">&quot;mb&quot;</span>)</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 读取文件</span></span><br><span class="line"><span class="keyword">local</span> re, cnt, msg = fatfs.readfile(<span class="string">&quot;lua.txt&quot;</span>)</span><br><span class="line"><span class="keyword">if</span> cnt ~= <span class="literal">nil</span> <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">log</span>.info(<span class="string">&quot;FatFS&quot;</span>, <span class="string">&quot;lua.txt&quot;</span>, <span class="string">&quot;content ---&gt; &quot;</span>, cnt);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">-- 播放mp3目录下的sms.mp3文件</span></span><br><span class="line"><span class="comment">--fatfs.playmp3(&quot;/mp3/sms.mp3&quot;)</span></span><br></pre></td></tr></table></figure>
<h2 id="如何做到的"><a href="#如何做到的" class="headerlink" title="如何做到的?"></a>如何做到的?</h2><p>先列一下前提和已知条件:</p>
<ol>
<li>SD卡(或者常用的小卡, TF卡),是支持SPI方式进行访问的,但比SDIO模式慢</li>
<li>Air202/Air268/Air168/Air800均提供了SPI功能,而且性能还不错</li>
<li>FAT16/FAT32可以通过fatfs进行访问,对接底层需要实现几个基础方法</li>
</ol>
<p>把关键点逐个击破</p>
<ul>
<li>第一步, 知晓SD的SPI协议, 通过直接调用luat的spi, 完成卡的初始化,容量读取,读取数据块,跑通基本逻辑,验证可能性</li>
<li>第二步, 下载luat的lod源码(一说csdk), 编译出原始lod, 并验证c模块的加载</li>
<li>第三步, 把fatfs源码集成进lod源码, 并实现几个核心api, 完成对sd的读写</li>
</ul>
<h2 id="使用的硬件"><a href="#使用的硬件" class="headerlink" title="使用的硬件"></a>使用的硬件</h2><ul>
<li>Air202 S5/Air800 M4 开发板</li>
<li>TF卡/SD卡一张, 确保只有一个分区, 并格式化为FAT32, 根目录放几个文件,英文命名</li>
<li>TF卡读写模块</li>
</ul>
<p>接线:</p>
<table>
<thead>
<tr>
<th>Air800 M4</th>
<th>TF模块</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>5V</td>
<td>VCC</td>
<td>供电</td>
</tr>
<tr>
<td>GND</td>
<td>GND</td>
<td>地</td>
</tr>
<tr>
<td>SPI1_SCL/GPIO_8</td>
<td>SCL</td>
<td>时钟</td>
</tr>
<tr>
<td>SPI1_MISO/GPIO_12</td>
<td>SDI</td>
<td>数据输入</td>
</tr>
<tr>
<td>SPI1_MOSI/GPIO_11</td>
<td>SDO</td>
<td>数据输出</td>
</tr>
<tr>
<td><strong>GPIO_3</strong></td>
<td>CS</td>
<td>片选,不要错(可配置)</td>
</tr>
</tbody></table>
<h2 id="如何使用"><a href="#如何使用" class="headerlink" title="如何使用"></a>如何使用</h2><ul>
<li>首先, 需要访问 <a target="_blank" rel="noopener" href="https://gitee.com/wendal/Luat_Lod_Source">https://gitee.com/wendal/Luat_Lod_Source</a> , 如果您有码云账号, 麻烦点个star</li>
<li>然后, 访问附件, 下载 Luat_V0032_8955.lod 或者 Luat_V0034_8955_fatfs.lod</li>
<li>再接着, 把lod和 <a target="_blank" rel="noopener" href="https://gitee.com/wendal/Luat_Lod_Source/blob/add_fatfs/sdtest/main.lua">main.lua</a> 下载到 你的开发板</li>
<li>开机,看日志</li>
</ul>
<h2 id="已经支持的API"><a href="#已经支持的API" class="headerlink" title="已经支持的API"></a>已经支持的API</h2><table>
<thead>
<tr>
<th>方法名</th>
<th>用途</th>
</tr>
</thead>
<tbody><tr>
<td>mount</td>
<td>初始化,必须调用一次且仅一次</td>
</tr>
<tr>
<td>getfree</td>
<td>获取空间信息,在mount之后调用</td>
</tr>
<tr>
<td>unmount</td>
<td>取消挂载,通常不需要调用</td>
</tr>
<tr>
<td>mkfs</td>
<td>格式化SD/TF卡</td>
</tr>
<tr>
<td>debug</td>
<td>调试模式,如果发现bug,请开启之,不需要传参数</td>
</tr>
<tr>
<td>lsdir</td>
<td>列出目录下的文件</td>
</tr>
<tr>
<td>mkdir</td>
<td>创建目录</td>
</tr>
<tr>
<td>stat</td>
<td>获取文件/文件夹信息</td>
</tr>
<tr>
<td>open</td>
<td>打开文件,返回举报</td>
</tr>
<tr>
<td>read</td>
<td>使用句柄读取文件数据</td>
</tr>
<tr>
<td>write</td>
<td>使用句柄写入文件数据</td>
</tr>
<tr>
<td>seek</td>
<td>移动句柄指针</td>
</tr>
<tr>
<td>close</td>
<td>关闭文件句柄</td>
</tr>
<tr>
<td>unlink</td>
<td>删除文件/文件夹</td>
</tr>
<tr>
<td>rename</td>
<td>文件改名</td>
</tr>
<tr>
<td>readfile</td>
<td>直接读取文件内容,简易方法</td>
</tr>
<tr>
<td>playmp3</td>
<td>播放sd卡上的mp3文件</td>
</tr>
</tbody></table>
<h2 id="固件里面到底改了什么"><a href="#固件里面到底改了什么" class="headerlink" title="固件里面到底改了什么?"></a>固件里面到底改了什么?</h2><p>如果你看到这里,应该是的确有心用SD卡了,那么我需要澄清几个问题:</p>
<ol>
<li>并不变砖, 虽然我刷挂了一块板子, 原因是选错了lod, 而不是因为fatfs. 编译目录里面有2个lod文件, 一大一小, 刷小的会挂(这点比较坑).</li>
<li>fatfs对源码的修改并不大, 只是添加一个库,并引用它 <strong>源码级别的引用</strong> , 并没有去修改其他模块的代码, 也不会影响其他模块的功能</li>
<li>同样的修改可以应用到老的lod源码, 独立性很强的</li>
</ol>
<p>修改的内容(注意文件编码,都是GB2312):</p>
<ol>
<li>添加 <code>cust_src/elua/lib/fatfs</code> 目录, 所有实现代码都在这里</li>
<li>修改 <code>cust_src/cust_module_list.mk</code> 添加对fatfs目录编译引用<figure class="highlight makefile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// 在末尾添加</span><br><span class="line">LOCAL_MODULE_DEPENDS  += cust_src/elua/lib/fatfs</span><br></pre></td></tr></table></figure></li>
<li>修改 <code>cust_src/elua/modules/include/auxmods.h</code><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在125行附近添加, 是新建2行, 前后都要加空行</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> AUXLIB_FATFS     <span class="meta-string">&quot;fatfs&quot;</span></span></span><br><span class="line"><span class="function">LUALIB_API <span class="title">int</span> <span class="params">( luaopen_fatfs )</span><span class="params">( lua_State *L )</span></span>;</span><br></pre></td></tr></table></figure></li>
<li>修改 <code>cust_src/elua/platform/coolsand/include/platform_conf.h</code></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在141行加入,前后不要加空行!!! 注意末尾的斜杠!!</span></span><br><span class="line">_ROM( AUXLIB_FATFS, luaopen_fatfs, fatfs_map ) \</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>是的,就修改这4个地方, 没有对其他模块进行修改的.</p>
<h2 id="fatfs库的源码是怎么实现的"><a href="#fatfs库的源码是怎么实现的" class="headerlink" title="fatfs库的源码是怎么实现的"></a>fatfs库的源码是怎么实现的</h2><ul>
<li>首先,它是最新的FatFs R0.13c</li>
<li>然后,主要代码来源于ffsample里面的generic, 这是一个非常完善的demo, 经过我多天的摸索, 发现替换掉里面的几个底层方法,就可以很好地适配Air系列的SPI, 分别是 <code>dly_us(延时函数)</code> <code>xmit_mmc(发送函数)</code> <code>rcvr_mmc(接收函数)</code>, 这里代码都在diskio.c文件里面</li>
<li>最后,就是fatfs的lua绑定了, 这部分只能从0开始写了</li>
</ul>
<h2 id="还有什么不足"><a href="#还有什么不足" class="headerlink" title="还有什么不足"></a>还有什么不足</h2><ul>
<li>还不能与FLOAT固件兼容,应该是固件空间的设置问题,还没搞懂</li>
<li>还需要支持模拟SPI的方式</li>
<li>需要提高读写速度,当前速度还是有点慢, 部分原因是SPI的速率还没找到最合适的</li>
<li>延时函数只能到毫秒级, 如果实现us级别,读写速度更快</li>
<li>还不知道get_fattime,导致当前创建的文件,时间是固定的</li>
</ul>
<p>嗯,大概就是这样,希望大家喜欢这个fatfs模块</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/12/16/537/" data-id="ckkfmdgbx0073vkcghe57bxcf" data-title="Luat读写SD卡/TF卡,通过fatfs模块" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-536" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2018/12/10/536/" class="article-date">
  <time class="dt-published" datetime="2018-12-10T13:52:38.000Z" itemprop="datePublished">2018-12-10</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2018/12/10/536/">理解Lua 语言中的点、冒号与self</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <div id="pro-mian-header" style="margin: 0px; padding: 40px 0px 0px; font-family: Verdana, Arial, Helvetica, sans-serif;"><div class="content-top" style="margin: 0px; padding: 0px;"><p style="margin-bottom: 0px; padding: 0px; font-size: 22px; color: rgb(0, 0, 0);">lua编程中，经常遇到函数的定义和调用，有时候用点号调用，有时候用冒号调用，这里简单的说明一下原理。如：</p></div></div><div class="content-bg" style="margin: 0px; padding: 0px; width: auto; max-width: 980px; font-family: Verdana, Arial, Helvetica, sans-serif;"><div class="content-intro view-box " style="margin-right: 0px; margin-bottom: 0px; margin-left: 0px; padding: 15px 0px 20px; line-height: 1.7; color: rgb(51, 51, 51); outline: none; overflow-wrap: break-word; min-height: 600px; margin-top: 0px !important;"><div class="view-body think-editor-content" style="margin: 0px; padding: 0px;"><h3 style="margin-right: 0px; margin-left: 0px; padding: 0px; font-weight: 600; color: rgb(51, 51, 51); line-height: 1.7; font-size: 14px;">点号调用：</h3><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px 5px; position: relative; width: auto; max-width: 700px; line-height: 1.7; background: rgb(239, 239, 239); border-radius: 3px; font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace; border-color: rgb(221, 221, 221);"><code class="hljs javascript" style="margin: 0px; display: block; overflow-x: auto; background-image: none; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(51, 51, 51); font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace;">-- 点号定义和点号调用:
girl = &#123;money = <span class="hljs-number" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">200</span>&#125;

<p><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px; font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;">function</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl ,someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br>    </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> = </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> - </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">end</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"></p>
<p></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl ,100</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">print</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl.money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)</span></span></span></code></pre><h3 style="margin-right: 0px; margin-left: 0px; padding: 0px; font-weight: 600; color: rgb(51, 51, 51); line-height: 1.7; font-size: 14px;">引用参数self：</h3><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px 5px; position: relative; width: auto; max-width: 700px; line-height: 1.7; background: rgb(239, 239, 239); border-radius: 3px; font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace; border-color: rgb(221, 221, 221);"><code class="hljs javascript" style="margin: 0px; display: block; overflow-x: auto; background-image: none; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(51, 51, 51); font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace;">-- 参数self指向调用者自身(类似于c++里的<span class="hljs-keyword" style="margin: 0px; padding: 0px; font-weight: bold;">this</span> 指向当前类)<br>girl = &#123;money = <span class="hljs-number" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">200</span>&#125;</p>
<p><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px; font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;">function</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">self ,someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br>    </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">self</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> = </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">self</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> - </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">end</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"></p>
<p></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl, 100</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">print</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl.money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)</span></span></span></code></pre><h3 style="margin-right: 0px; margin-left: 0px; padding: 0px; font-weight: 600; color: rgb(51, 51, 51); line-height: 1.7; font-size: 14px;">冒号调用：</h3><pre style="margin-top: 15px; margin-bottom: 15px; padding: 10px 5px; position: relative; width: auto; max-width: 700px; line-height: 1.7; background: rgb(239, 239, 239); border-radius: 3px; font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace; border-color: rgb(221, 221, 221);"><code class="hljs javascript" style="margin: 0px; display: block; overflow-x: auto; background-image: none; background-position: initial; background-size: initial; background-repeat: initial; background-attachment: initial; background-origin: initial; background-clip: initial; color: rgb(51, 51, 51); font-size: 14px; font-family: Consolas, &quot;Courier New&quot;, Courier, monospace;">-- 冒号定义和冒号调用:<br>girl = &#123;money = <span class="hljs-number" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">200</span>&#125;</p>
<p><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px; font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-keyword" style="margin: 0px; padding: 0px;">function</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">:</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br>    </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">self</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> = </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">self</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">.</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"> - </span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">someMoney</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">end</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"></p>
<p></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">girl</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">:</span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">goToMarket</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">100</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)<br></span></span><span class="hljs-title" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0); font-weight: bold;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-title" style="margin: 0px; padding: 0px;">print</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">(</span></span><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-params" style="margin: 0px; padding: 0px;">girl.money</span></span></span></span></span><span class="hljs-function" style="margin: 0px; padding: 0px;"><span class="hljs-function" style="margin: 0px; padding: 0px;">)</span></span></span></code></pre><p style="margin-bottom: 5px; padding: 0px; overflow-wrap: break-word; line-height: 1.7;">冒号定义和冒号调用其实跟上面的效果一样，只是把第一个隐藏参数省略了，而该参数self指向调用者自身。</p><p style="margin-bottom: 5px; padding: 0px; overflow-wrap: break-word; line-height: 1.7;"><strong style="margin: 0px; padding: 0px;">总结：</strong>冒号只是起了省略第一个参数self的作用，该self指向调用者本身，并没有其他特殊的地方。</p></div></div></div></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2018/12/10/536/" data-id="ckkfmdgei00davkcg67j95vde" data-title="理解Lua 语言中的点、冒号与self" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/43/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/42/">42</a><a class="page-number" href="/page/43/">43</a><span class="page-number current">44</span><a class="page-number" href="/page/45/">45</a><a class="page-number" href="/page/46/">46</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/45/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>