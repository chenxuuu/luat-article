<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Luat doc 社区文章静态页面镜像</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:type" content="website">
<meta property="og:title" content="Luat doc 社区文章静态页面镜像">
<meta property="og:url" content="https://doc.luatos.wiki/page/11/index.html">
<meta property="og:site_name" content="Luat doc 社区文章静态页面镜像">
<meta property="og:description" content="Luat doc 社区文章静态页面镜像">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="chenxuuu">
<meta property="article:tag" content="lua">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Luat doc 社区文章静态页面镜像" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Luat doc 社区文章静态页面镜像</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS 订阅"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜索"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://doc.luatos.wiki"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-1789" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/02/1789/" class="article-date">
  <time class="dt-published" datetime="2020-11-02T13:49:13.000Z" itemprop="datePublished">2020-11-02</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/02/1789/"> 串口2数据发送和接收问题</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>[testUart.write] string 8A0106119C 5</p><p>sscom 只能接收到 B1 06 11 9C </p><p></p><p>sscom发送  8A0106119C</p><p>[testUart.read hex] 8A0</p><p></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/11/02/1789/" data-id="ckkfmdg9y001tvkcgcly32m6f" data-title=" 串口2数据发送和接收问题" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1782" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/11/01/1782/" class="article-date">
  <time class="dt-published" datetime="2020-11-01T14:54:11.000Z" itemprop="datePublished">2020-11-01</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/11/01/1782/">1、杂项：Windows服务器openssh连接(含ssh免密登录)</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/104285283">点击这里查看所有博文</a></p>
<h1 id="一、前言"><a href="#一、前言" class="headerlink" title="一、前言"></a>一、前言</h1><p>&emsp;&emsp;前几天搞到了一台性能不错的台式机，想着把它拿来当作编译服务器用。折腾半天装了个linux系统，各种驱动一打，是真的浪费时间。结果最后发现公司的编译环境在linux系统上跑不起来。当时整个人都裂开了，这种说不出来感觉，就像到嘴的鸭子跑了。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101202641472.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;无奈之下又花费几个小时重新格盘装了个windows系统，装上后配置了下远程桌面连接和文件共享。虽然可以实现在本机上编译代码然后远程连接到服务器上编译。搞好后又总感觉缺了点什么，不是很方便，主要还是来回切换人太麻烦了。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101205152670.png#pic_center" alt="在这里插入图片描述"></p>
<p>&emsp;&emsp;几个月前我正好折腾了下<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_44570083/article/details/106672329">wsl上的vscode远程编译</a>，那感觉确实不错。当时就想既然vscode都能实现wsl的远程编译，那么搞下服务器的远程编译应该也不是问题，结果在插件市场一搜还真有。只不过需要服务器具有ssh远程连接的功能，至于怎么在vscode上远程编译后面再说。今天我们就一起来看看怎么才能搞一下windows服务器的ssh连接。</p>
<h1 id="二、启用windows的ssh功能"><a href="#二、启用windows的ssh功能" class="headerlink" title="二、启用windows的ssh功能"></a>二、启用windows的ssh功能</h1><p>&emsp;&emsp;Windows系统其实提供了ssh的拓展功能，只不过默认没有打开。就像wsl一样，这些功能受众很小，一般人根本用不上它。所以我们需要手动去打开它，服务器和客户端上都要去打开，不然用不了。也可以通过第三方软件去实现这个功能，客户端用<code>xshell</code>，服务器用<code>freesshd</code>。不过这些都是需要安装第三方软件的，不靠谱。我们选择的是windows内置的<code>openssh</code>的功能。</p>
<p>1、打开Windows系统设置，点击应用选项</p>
<p><img src="https://img-blog.csdnimg.cn/2020110121004082.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>2、点击应用和功能选项卡里可选功能</p>
<p><img src="https://img-blog.csdnimg.cn/20201101210207115.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>3、点击添加功能，这没什么好说的。按照上面点就行了</p>
<p><img src="https://img-blog.csdnimg.cn/20201101210316547.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>4、搜索ssh，会出现以下两个结果。一般情况下服务器只要安装OpenSSH服务器，客户端那就安装OpenSSH客户端即可。不过我这里建议大家两个都装上，至少在服务器上要两个都装上（<code>为什么</code>？后面再说）。客户端上那无所谓，装一个就行了。安装的时间比较慢，稍等便可即可。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101210710586.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="三、配置服务自启动"><a href="#三、配置服务自启动" class="headerlink" title="三、配置服务自启动"></a>三、配置服务自启动</h1><p>1、服务器上两个软件都安装好后需要配置下服务自启动，以便每次重启电脑都能自动启动服务。在服务里，找到这个东西<code>OpenSSH SSH Server</code></p>
<p><img src="https://img-blog.csdnimg.cn/20201101213010588.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>2、点击属性设置，将启动类型设置成自动启动，并且点击启动按钮，立即启动服务。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101213054245.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="四、回环连接测试"><a href="#四、回环连接测试" class="headerlink" title="四、回环连接测试"></a>四、回环连接测试</h1><p>1、打开PowerShell或者CMD，输入 <code>ssh CX@127.0.0.1</code>测试本地是否可以正常连接，这里用的就是上面第4点安装的ssh客户端去连接自己的ssh服务器。回车后，输入<code>yes</code>！。（格式：<code>ssh   用户名@IP地址</code>），我这里是本地所以直接填的网卡回环地址。客户机如果想要连接服务器的话需要填写服务器实际的ip地址，填127.0.0.1是没用的！！！</p>
<p><img src="https://img-blog.csdnimg.cn/20201101213454835.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>2、输入用户密码，这里输入的密码不可见，输完直接回车即可</p>
<p><img src="https://img-blog.csdnimg.cn/2020110121354722.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>3、正常的话PowerShell界面会刷新，变成下面的样子。以前玩过linux上ssh连接的同学，一看这个界面就知道这玩意已经是连接上了服务器了，自动定位到了登录用户的家目录。到这一步就说明服务器没什么问题了，后面就是需要使用客户端去进行远端连接。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101213800212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="五、关闭防火墙"><a href="#五、关闭防火墙" class="headerlink" title="五、关闭防火墙"></a>五、关闭防火墙</h1><p>1、点击系统和安全</p>
<p><img src="https://img-blog.csdnimg.cn/20201101214706716.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>2、点击Windows Defender防火墙</p>
<p><img src="https://img-blog.csdnimg.cn/20201101214733904.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>3、我这里的服务器只在个人的局域网使用，图个简单，就直接把防火墙关了。真正的网络服务器可千万别这么干。有需要的同学，了解下端口放行。我们ssh服务默认用到了22端口。配置下出入站放行22端口就行了。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101214844588.png#pic_center" alt="在这里插入图片描述"></p>
<p>4、不多比比，直接关掉</p>
<p><img src="https://img-blog.csdnimg.cn/20201101215052155.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<h1 id="六、远端连接"><a href="#六、远端连接" class="headerlink" title="六、远端连接"></a>六、远端连接</h1><h2 id="6-1、密码连接"><a href="#6-1、密码连接" class="headerlink" title="6.1、密码连接"></a>6.1、密码连接</h2><p>&emsp;&emsp;和上面本地回环测试差不多，在客户端机器上，输入连接命令，不过需要把ip地址换成服务器实际的ip地址。我这里给服务器配置的是固定ip192.168.1.100。只要两台机器在一个局域网内，同时服务器端端口被放行或者防火墙被关闭，是可以直接输入密码连接成功的。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101215526540.png#pic_center" alt="在这里插入图片描述"><br><img src="https://img-blog.csdnimg.cn/20201101215723100.png#pic_center" alt="在这里插入图片描述"></p>
<h2 id="6-2、证书连接"><a href="#6-2、证书连接" class="headerlink" title="6.2、证书连接"></a>6.2、证书连接</h2><p>&emsp;&emsp;一般情况下来说密码连接应该也就够用了，不过密码连接还有一点不太好的地方就是每次重新连接都必须输一次密码。像我这么懒的人每次都要输密码那简直不能忍，太麻烦了。密码要是复杂的话还要输半天，搞不好就输错了还得重来。</p>
<p>&emsp;&emsp;ssh还有一种连接方式就是证书连接，证书连接相比密码登录要更安全点。最重要的是配置一次，就可以实现终身免密登录，对于懒癌患者那就是香到爆炸。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101220901231.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>1、首先需要在客户端上生成密钥，在<code>客户端的PowerShell</code>中输入ssh-keygen -t rsa -C “192.168.1.100 openssh”，用-C来指定所指定的注释，可以方便用户标识这个密钥，指出密钥的用途或其他有用的信息。我这里也是随便写的，然后什么都不要管，什么都不要输入，一路回车。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101221504602.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>2、命令执行完毕后会在<code>C:\Users\CX\.ssh</code>下生成两个文件，分别为<code>id_rsa</code>(私钥)、<code>id_rsa.pub</code>（公钥）</p>
<p><img src="https://img-blog.csdnimg.cn/20201101221612191.png#pic_center" alt="在这里插入图片描述"></p>
<p>3、把<code>id_rsa.pub</code>公钥拷贝到Windows服务器中需要登陆的用户名下的<code>.ssh</code>文件夹中<code>C:\Users\CX\.ssh</code>（这是个隐藏文件夹，需要打开显示隐藏文件的功能才行，没有的话可以新建一个），然后将<code>id_rsa.pub</code>文件改名为改名为<code>authorized_keys</code>。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101222339757.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>4、最后一步，<code>非常重要！非常重要！非常重要！</code>，重要的是说三遍。下面写的几点搞错一个客户端都连接不上。</p>
<p>（1）打开<code>C:\ProgramData\ssh</code>文件夹下的<code>sshd_config</code>文件。检查<code>PubkeyAuthentication</code>值是不是<code>yes</code>。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101222653713.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>
<p>（2）将<code>AuthorizedKeysFile</code>值改为<code>.ssh/authorized_keys</code><br><img src="https://img-blog.csdnimg.cn/20201101222732921.png#pic_center" alt="在这里插入图片描述"></p>
<p>（3）把最后两行注释掉，<code>一定要注释！！！！！</code></p>
<p><img src="https://img-blog.csdnimg.cn/20201101222800882.png#pic_center" alt="在这里插入图片描述"></p>
<p>（4）服务器控制台输入<code>Restart-Service sshd</code>，重启sshd服务<img src="https://img-blog.csdnimg.cn/20201101223023628.png#pic_center" alt="在这里插入图片描述"></p>
<p>5、输入<code>ssh -i C:\Users\CX\.ssh\id_rsa CX@192.168.1.100</code>回车，输入yes。格式：ssh  -i  <code>私钥地址</code>  <code>用户名</code>@<code>IP地址</code>。私钥就是上面生成的那个，没有后缀的文件。这样就可以实现免密登录，把这条命令保存为批处理文件，每次只要运行一下就会自动连接上了。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101223559222.png#pic_center" alt="在这里插入图片描述"></p>
<h1 id="七、编译一下试试"><a href="#七、编译一下试试" class="headerlink" title="七、编译一下试试"></a>七、编译一下试试</h1><p>&emsp;&emsp;定位到开发包路径。编译OK，远程编译环境搭建完成。</p>
<p><img src="https://img-blog.csdnimg.cn/20201101224719504.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3dlaXhpbl80NDU3MDA4Mw==,size_16,color_FFFFFF,t_70#pic_center" alt="在这里插入图片描述"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/11/01/1782/" data-id="ckkfmdg9y001svkcgeg25e3z2" data-title="1、杂项：Windows服务器openssh连接(含ssh免密登录)" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1777" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/31/1777/" class="article-date">
  <time class="dt-published" datetime="2020-10-31T06:01:09.000Z" itemprop="datePublished">2020-10-31</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/31/1777/">js 事件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h2><p>事件：触发-响应机制</p>
<h3 id="事件三要素"><a href="#事件三要素" class="headerlink" title="事件三要素"></a>事件三要素</h3><ul>
<li>事件源:触发(被)事件的元素</li>
<li>事件名称: click 点击事件</li>
<li>事件处理程序:事件触发后要执行的代码(函数形式)</li>
</ul>
<h3 id="事件的基本使用"><a href="#事件的基本使用" class="headerlink" title="事件的基本使用"></a>事件的基本使用</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&#x27;代码会在box被点击后执行&#x27;</span>);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="属性操作"><a href="#属性操作" class="headerlink" title="属性操作"></a>属性操作</h2><h3 id="非表单元素的属性"><a href="#非表单元素的属性" class="headerlink" title="非表单元素的属性"></a>非表单元素的属性</h3><p>href、title、id、src、className</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> link = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;link&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(link.href);</span><br><span class="line"><span class="built_in">console</span>.log(link.title);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> pic = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;pic&#x27;</span>);</span><br><span class="line"><span class="built_in">console</span>.log(pic.src);</span><br></pre></td></tr></table></figure>

<ul>
<li>innerHTML和innerText</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.innerHTML = <span class="string">&#x27;我是文本&lt;p&gt;我会生成为标签&lt;/p&gt;&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(box.innerHTML);</span><br><span class="line">box.innerText = <span class="string">&#x27;我是文本&lt;p&gt;我不会生成为标签&lt;/p&gt;&#x27;</span>;</span><br><span class="line"><span class="built_in">console</span>.log(box.innerText);</span><br></pre></td></tr></table></figure>
<ul>
<li>HTML转义符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&quot;		&quot;</span><br><span class="line">&#39;		&amp;apos;</span><br><span class="line">&amp;		&amp;</span><br><span class="line">&lt;		&lt;   &#x2F;&#x2F; less than  小于</span><br><span class="line">&gt;		&gt;   &#x2F;&#x2F; greater than  大于</span><br><span class="line">空格	   &amp;nbsp;</span><br><span class="line">©		&amp;copy;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>innerHTML和innerText的区别</p>
</li>
<li><p>innerText的兼容性处理</p>
</li>
</ul>
<h3 id="表单元素属性"><a href="#表单元素属性" class="headerlink" title="表单元素属性"></a>表单元素属性</h3><ul>
<li>value 用于大部分表单元素的内容获取(option除外)</li>
<li>type 可以获取input标签的类型(输入框或复选框等)</li>
<li>disabled 禁用属性</li>
<li>checked 复选框选中属性</li>
<li>selected 下拉菜单选中属性</li>
</ul>
<h3 id="自定义属性操作"><a href="#自定义属性操作" class="headerlink" title="自定义属性操作"></a>自定义属性操作</h3><ul>
<li>getAttribute() 获取标签行内属性</li>
<li>setAttribute() 设置标签行内属性</li>
<li>removeAttribute() 移除标签行内属性</li>
<li>与element.属性的区别: 上述三个方法用于获取任意的行内属性。</li>
</ul>
<h3 id="样式操作"><a href="#样式操作" class="headerlink" title="样式操作"></a>样式操作</h3><ul>
<li><p>使用style方式设置的样式显示在标签行内</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.style.width = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">box.style.height = <span class="string">&#x27;100px&#x27;</span>;</span><br><span class="line">box.style.backgroundColor = <span class="string">&#x27;red&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>注意</p>
<p>通过样式属性设置宽高、位置的属性类型是字符串，需要加上px</p>
</li>
</ul>
<h3 id="类名操作"><a href="#类名操作" class="headerlink" title="类名操作"></a>类名操作</h3><ul>
<li>修改标签的className属性相当于直接修改标签的类名<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.className = <span class="string">&#x27;show&#x27;</span>;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h2 id="创建元素的三种方式"><a href="#创建元素的三种方式" class="headerlink" title="创建元素的三种方式"></a>创建元素的三种方式</h2><h3 id="document-write"><a href="#document-write" class="headerlink" title="document.write()"></a>document.write()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.write(<span class="string">&#x27;新设置的内容&lt;p&gt;标签也可以生成&lt;/p&gt;&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> box = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;box&#x27;</span>);</span><br><span class="line">box.innerHTML = <span class="string">&#x27;新内容&lt;p&gt;新标签&lt;/p&gt;&#x27;</span>;</span><br></pre></td></tr></table></figure>
<h3 id="document-createElement"><a href="#document-createElement" class="headerlink" title="document.createElement()"></a>document.createElement()</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> div = <span class="built_in">document</span>.createElement(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(div);</span><br></pre></td></tr></table></figure>
<h3 id="性能问题"><a href="#性能问题" class="headerlink" title="性能问题"></a>性能问题</h3><ul>
<li>innerHTML方法由于会对字符串进行解析，需要避免在循环内多次使用。</li>
<li>可以借助字符串或数组的方式进行替换，再设置给innerHTML</li>
<li>优化后与document.createElement性能相近</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/31/1777/" data-id="ckkfmdg9y001rvkcgf34whm3g" data-title="js 事件" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1775" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/30/1775/" class="article-date">
  <time class="dt-published" datetime="2020-10-30T12:31:55.000Z" itemprop="datePublished">2020-10-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/30/1775/">一句JS代码</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var toStr1 &#x3D; Function.prototype.call.bind(Object.prototype.toString);</span><br></pre></td></tr></table></figure>
<p>这句你看懂了吗？（这是我在看框架时，看到的一行代码。。。。。我是第一次见）<br>我的第一感觉：call？bind?还能这样用？你想干啥？</p>
<p>然后我就调用了一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var toStr1 &#x3D; Function.prototype.call.bind(Object.prototype.toString);</span><br><span class="line"></span><br><span class="line">toStr1(&#123;&#125;)</span><br><span class="line">&quot;[object Object]&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">toStr1(&#39;aaaa&#39;)</span><br><span class="line">&quot;[object String]&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">toStr1(1111)</span><br><span class="line">&quot;[object Number]&quot;</span><br></pre></td></tr></table></figure>
<p>从上面的实际操作输出结果来看，这就是一个检验对象类型的一个东东。</p>
<p>可能你见过较多的检测类型的是下面的这种写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var toStr2 &#x3D; obj &#x3D;&gt; Object.prototype.toString.call(obj);</span><br></pre></td></tr></table></figure>
<p>（呃…….这种我见的好像也不多。但是这能正常理解啊）</p>
<p>大家想必也都比较清除call和bind两种方法，实际本质上两种方法没有太大区别（我觉得），但是为啥大家在框架级代码中常常见到的是第一种，而并非第二种（代码逻辑清晰，理解起来更加容易，最重要能实现同样的需求）。<br>经过本人通过度娘了解到，这是为了“<strong>防止原型污染</strong>”。（呃…….我有懵比了）<br>下面是我了解后进行的一些代码操作运行：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">var toStr1 &#x3D; Function.prototype.call.bind(Object.prototype.toString);</span><br><span class="line"></span><br><span class="line">var toStr2 &#x3D; obj &#x3D;&gt; Object.prototype.toString.call(obj);</span><br><span class="line"></span><br><span class="line">Object.prototype.toString &#x3D; function()&#123;</span><br><span class="line">  return &#39;toString方法被覆盖！&#39;;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 接着我们再调用上述方法</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; toStr1</span><br><span class="line">console.log(toStr1(&#123;&#125;));      &#x2F;&#x2F; &quot;[object Object]&quot;</span><br><span class="line">console.log(toStr1(123));     &#x2F;&#x2F; &quot;[object Number]&quot;</span><br><span class="line">console.log(toStr1(&quot;abc&quot;));   &#x2F;&#x2F; &quot;[object String]&quot;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; toStr2</span><br><span class="line">console.log(toStr2(&#123;&#125;));      &#x2F;&#x2F; &quot;toString方法被覆盖！&quot;</span><br><span class="line">console.log(toStr2(123));     &#x2F;&#x2F; &quot;toString方法被覆盖！&quot;</span><br><span class="line">console.log(toStr2(&quot;abc&quot;));   &#x2F;&#x2F; &quot;toString方法被覆盖！&quot;</span><br></pre></td></tr></table></figure>
<p>第一种可以，第二种竟然挂了，为啥<br>给出的解释：我们知道bind函数返回结果是一个函数，这个函数是函数内部的函数，会被延迟执行，那么很自然联想到这里可能存在闭包！因为闭包可以保持内部函数执行时的上下文状态（还有很多“废话”，大家有兴趣可以自行百度，我lan）</p>
<p>拓：<br>顺便给大家贴一段代码自行领悟：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var toStr3 &#x3D; Function.call.bind(Object.prototype.toString);</span><br><span class="line">var toStr4 &#x3D; Function.call.call.bind(Object.prototype.toString);</span><br><span class="line">var toStr5 &#x3D; Function.call.call.call.bind(Object.prototype.toString);</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/30/1775/" data-id="ckkfmdg9x001qvkcgaj89f1ol" data-title="一句JS代码" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1760" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/26/1760/" class="article-date">
  <time class="dt-published" datetime="2020-10-26T12:17:03.000Z" itemprop="datePublished">2020-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/26/1760/">前端处理html转pdf基础</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="场景："><a href="#场景：" class="headerlink" title="场景："></a>场景：</h3><p>为了方便用户的操作，有些时候前端需要将对应的html界面转为pdf，格式相对比较稳定；用于更方便的保存和查看。</p>
<h3 id="工具库（jspdf-html2canvas）"><a href="#工具库（jspdf-html2canvas）" class="headerlink" title="工具库（jspdf/html2canvas）"></a>工具库（jspdf/html2canvas）</h3><p>jspdf：jsPDF 是一个基于 HTML5 的客户端解决方案,用于生成各种用途的 PDF 文档。<br>html2canvas：html2canvas可以通过纯JS对浏览器端经行截屏，但截图的精确度还有待提高，部分css不可识别，所以在canvas中不能完美呈现原画面样式（但是在这里主要时为了描绘一个canvas容器，用于承载主要内容）</p>
<p>CDN资源：可用于引用静态cdn资源进行开发（一般<strong>不</strong>直接引用）</p>
<script src="https://cdn.bootcss.com/html2canvas/0.5.0-beta4/html2canvas.js"></script>
<script src="https://cdn.bootcss.com/jspdf/1.3.4/jspdf.debug.js"></script>

<p>使用方法：<br>npm install jspdf html2canvas –save（或者使用cnpm/yarn）<br><strong>注意（坑）：</strong><br>大多数情况使用npm直接安装会报错，现象：<br><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026200536343_error1.png" alt="undefined" title="undefined"></a><br>在package.json文件中查看已经有jspdf了，但是项目却整体挂了：此时千万别想太多不是你代码的问题（前提：你能保证在安装之前项目是能正常运行的），很大可能是因为你在安装过程中出现了一些位置的bug（原因暂不清除，本人使用npm安装5遍左右，导致项目挂了，百度结果：资源下载不完全/需要安装python环境/需要在git中安装；在下逐一尝试，然并卵………..“口吐芬芳”）<br>解决方法：<br>1、所有环境对应重新安装一边，不要嫌麻烦，即使你知道这样可能没什么用（可能实际真的没什么用）；<br>2、不适用npm安装，使用yarn进行安装  yarn add xxx<br>3、耐心等待<br>4、重新启动项目</p>
<p>完整代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">var target &#x3D; document.getElementById(&quot;detail_info&quot;);</span><br><span class="line">    target.style.background &#x3D; &quot;#FFFFFF&quot;;  &#x2F;&#x2F;设置背景色</span><br><span class="line">    &#x2F;&#x2F;官网推荐写法(html2canvas(target).then(canvas &#x3D;&gt;&#123;&#125;)，建议不要使用function()&#123;&#125;</span><br><span class="line">    html2canvas(target).then(canvas &#x3D;&gt; &#123;</span><br><span class="line">      var contentWidth &#x3D; canvas.width;</span><br><span class="line">      var contentHeight &#x3D; canvas.height;</span><br><span class="line">      &#x2F;&#x2F;一页pdf显示html页面生成的canvas高度;</span><br><span class="line">      var pageHeight &#x3D; contentWidth &#x2F; 592.28 * 841.89;</span><br><span class="line">      &#x2F;&#x2F;未生成pdf的html页面高度</span><br><span class="line">      var leftHeight &#x3D; contentHeight;</span><br><span class="line">      &#x2F;&#x2F;页面偏移</span><br><span class="line">      var position &#x3D; 0;</span><br><span class="line">      &#x2F;&#x2F;a4纸的尺寸[595.28,841.89]，html页面生成的canvas在pdf中图片的宽高</span><br><span class="line">      var imgWidth &#x3D; 595.28;</span><br><span class="line">      var imgHeight &#x3D; 592.28 &#x2F; contentWidth * contentHeight;</span><br><span class="line">      var pageData &#x3D; canvas.toDataURL(&#39;image&#x2F;jpeg&#39;, 1.0);</span><br><span class="line">      var pdf &#x3D; new jsPDF(&#39;&#39;, &#39;pt&#39;, &#39;a4&#39;);</span><br><span class="line">      &#x2F;&#x2F;有两个高度需要区分，一个是html页面的实际高度，和生成pdf的页面高度(841.89)</span><br><span class="line">      &#x2F;&#x2F;当内容未超过pdf一页显示的范围，无需分页</span><br><span class="line">      if (leftHeight &lt; pageHeight) &#123;</span><br><span class="line">        pdf.addImage(pageData, &#39;JPEG&#39;, 0, 0, imgWidth, imgHeight);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        while (leftHeight &gt; 0) &#123;</span><br><span class="line">          pdf.addImage(pageData, &#39;JPEG&#39;, 0, position, imgWidth, imgHeight)</span><br><span class="line">          leftHeight -&#x3D; pageHeight;</span><br><span class="line">          position -&#x3D; 841.89;</span><br><span class="line">          &#x2F;&#x2F;避免添加空白页</span><br><span class="line">          if (leftHeight &gt; 0) &#123;</span><br><span class="line">            pdf.addPage();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      pdf.save(&quot;发货单.pdf&quot;);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<p>注释：detail_info是你所要转pdf的对应的容器id<br>此处注意：<br>你有可能见到这种写法：<a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026201328488_error2.png" alt="undefined" title="undefined"></a><br>这种方法存在弊端（不适用于所有浏览器的使用）；<br>官方推荐写法参见我的代码；</p>
<p>本文是根据本人的实际开发情况进行描述的，并不全面，多多指教！！！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/26/1760/" data-id="ckkfmdg9x001pvkcg84y0dk6y" data-title="前端处理html转pdf基础" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1759" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/26/1759/" class="article-date">
  <time class="dt-published" datetime="2020-10-26T08:24:31.000Z" itemprop="datePublished">2020-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/26/1759/">对于javaScript原型学习理解</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h6 id="首先看一个构造函数"><a href="#首先看一个构造函数" class="headerlink" title="首先看一个构造函数"></a>首先看一个构造函数</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">    <span class="built_in">this</span>.sex = sex</span><br><span class="line">    <span class="comment">// 不能使用匿名函数，多个对象会存储多个方法。影响性能</span></span><br><span class="line">    <span class="built_in">this</span>.eat = catEat</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">catEat</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;吃吃吃&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c1 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小花&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;母&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> c2 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小绿&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;公&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此时返回为true</span></span><br><span class="line"><span class="built_in">console</span>.log(c1.catEat === c2.catEat)</span><br></pre></td></tr></table></figure>
<h6 id="每一个构造函数都有一个属性：-原型，或者说原型对象"><a href="#每一个构造函数都有一个属性：-原型，或者说原型对象" class="headerlink" title="每一个构造函数都有一个属性： 原型，或者说原型对象"></a>每一个构造函数都有一个属性： 原型，或者说原型对象</h6><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">    <span class="built_in">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype.catEat = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&#x27;吃吃吃&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c1 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小花&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;母&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> c2 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小绿&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;公&#x27;</span>)</span><br><span class="line"></span><br><span class="line">c1.catEat()</span><br><span class="line">c2.catEat()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 此时返回为true</span></span><br><span class="line"><span class="built_in">console</span>.log(c1.catEat === c2.catEat)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.dir(c1);</span><br></pre></td></tr></table></figure>
<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026162050154_image-20201026152351078.png" alt="undefined" title="undefined"></a></p>
<h6 id="此时，我们可以得出结论。通过Cat对象创建的实例对象，可以访问到Cat-prototype成员"><a href="#此时，我们可以得出结论。通过Cat对象创建的实例对象，可以访问到Cat-prototype成员" class="headerlink" title="此时，我们可以得出结论。通过Cat对象创建的实例对象，可以访问到Cat.prototype成员"></a>此时，我们可以得出结论。通过Cat对象创建的实例对象，可以访问到Cat.prototype成员</h6><h6 id="c1-proto-等于-Cat-prototype-属性"><a href="#c1-proto-等于-Cat-prototype-属性" class="headerlink" title="c1.proto  等于 Cat.prototype 属性"></a>c1.<strong>proto</strong>  等于 Cat.prototype 属性</h6><p>当调用对象的属性或者方法时，先去找对象本身的属性/方法 ，如果对象没有该属性或者方法。此时去调用原型中的属性或者方法。如果对象本身没有该属性或者方法，原型中也没有该属性或者方法，此时会报错</p>
<p>对于 对象，原型，构造函数的关系， 我们可以通过一张图表示出来</p>
<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026162143934_image-20201026153851102.png" alt="undefined" title="undefined"></a></p>
<h6 id="思考："><a href="#思考：" class="headerlink" title="思考："></a>思考：</h6><p>原型的构造函数是什么？ 原型的原型是什么？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o = c1.__proto__</span><br><span class="line"><span class="built_in">console</span>.log(o.__proto__.constructor)</span><br><span class="line"><span class="built_in">console</span>.log(o.__proto__.__proto__)</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026162216133_image-20201026155151609.png" alt="undefined" title="undefined"></a></p>
<p>原型对象的<strong>proto</strong> 为 一个 object 对象，而object 的 原型对象为null。</p>
<h6 id="思考：-1"><a href="#思考：-1" class="headerlink" title="思考："></a>思考：</h6><p>当我们构造方法中设置prototype属性时，一个实例对象修改此属性，会对其他实例对象有影响吗？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cat</span>(<span class="params">name, age, sex</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">    <span class="built_in">this</span>.sex = sex</span><br><span class="line">&#125;</span><br><span class="line">Cat.prototype.color = <span class="string">&#x27;white&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> c1 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小花&#x27;</span>, <span class="number">3</span>, <span class="string">&#x27;母&#x27;</span>)</span><br><span class="line"><span class="keyword">let</span> c2 = <span class="keyword">new</span> Cat(<span class="string">&#x27;小绿&#x27;</span>, <span class="number">1</span>, <span class="string">&#x27;公&#x27;</span>)</span><br><span class="line"></span><br><span class="line">c1.color = <span class="string">&#x27;yellow&#x27;</span></span><br><span class="line"><span class="built_in">console</span>.log(c1.color)</span><br><span class="line"><span class="built_in">console</span>.log(c2.color)</span><br><span class="line"><span class="built_in">console</span>.dir(c1)</span><br><span class="line"><span class="built_in">console</span>.dir(c2)</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201026162251645_image-20201026160335643.png" alt="undefined" title="undefined"></a></p>
<p>得出结论，只有当获取属性时。受到原型影响，设置属性时，只会为c1创建属性，此时不再访问__proto__属性。</p>
<p>只有获取收到影响。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/26/1759/" data-id="ckkfmdg9x001ovkcg99jac3cr" data-title="对于javaScript原型学习理解" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1758" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/26/1758/" class="article-date">
  <time class="dt-published" datetime="2020-10-26T04:24:47.000Z" itemprop="datePublished">2020-10-26</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/26/1758/">MIT 6.824 Distributed Systems 分布式系统课程系列1 Lab1-MapReduce</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="MIT-6-824-Distributed-Systems-分布式系统课程系列1-Lab1-MapReduce"><a href="#MIT-6-824-Distributed-Systems-分布式系统课程系列1-Lab1-MapReduce" class="headerlink" title="MIT 6.824 Distributed Systems 分布式系统课程系列1 Lab1-MapReduce"></a>MIT 6.824 Distributed Systems 分布式系统课程系列1 Lab1-MapReduce</h1><ul>
<li><p>该课程包括分布式系统相关的各种知识。包括mapreduce，raft算法，Zookeeper,比特币等等。</p>
</li>
<li><p>配备4个lab，需要动手写代码，实现mapreduce，raft算法，在raft基础上建立分布式kv服务。</p>
</li>
<li><p>同时可学一下go语言。go语言争议很大，之前粗略看过两次都丧失兴趣。这次正好强制再学一次并实际应用。</p>
</li>
<li><p>课程主页<br><a target="_blank" rel="noopener" href="https://pdos.csail.mit.edu/6.824/">https://pdos.csail.mit.edu/6.824/</a><br><a target="_blank" rel="noopener" href="https://pdos.csail.mit.edu/6.824/schedule.html">https://pdos.csail.mit.edu/6.824/schedule.html</a><br>还有配套的视频。可去各大视频网站查找。</p>
</li>
</ul>
<hr>
<p>go 1.15安装</p>
<p><a target="_blank" rel="noopener" href="https://github.com/golang/go/wiki/Ubuntu">https://github.com/golang/go/wiki/Ubuntu</a></p>
<pre><code>sudo add-apt-repository ppa:longsleep/golang-backports
sudo apt update
sudo apt install golang-go

export PATH=$PATH:/usr/lib/go-1.15/bin
</code></pre>
<hr>
<h2 id="实验主页"><a href="#实验主页" class="headerlink" title="实验主页"></a>实验主页</h2><p><a target="_blank" rel="noopener" href="https://pdos.csail.mit.edu/6.824/labs/lab-mr.html">https://pdos.csail.mit.edu/6.824/labs/lab-mr.html</a></p>
<ul>
<li>做一个mapreduce程序。处理多个文本，统计里面每个单词的数量。</li>
<li>基本原理就是分而治之，分割任务，分配给多个机器去处理，得到一些可独立处理的中间结果，再多个机器做汇总的任务，得到最终结果。</li>
<li>通过lab1可熟悉最基本的go代码：基本语法、文件操作、编解码、错误处理、rpc等等。</li>
</ul>
<h2 id="课程示例代码："><a href="#课程示例代码：" class="headerlink" title="课程示例代码："></a>课程示例代码：</h2><pre><code>git clone git://g.csail.mit.edu/6.824-golabs-2020 6.824

cd 6.824
cd src/main
go build -buildmode=plugin ../mrapps/wc.go      把wc变成一个类似插件
go run mrsequential.go wc.so pg*.txt            跑mrsequential.go，用wc.so插件里的函数处理文件pg*.txt。
</code></pre>
<p>最终测试是运行 <code>/src/main/test-mr.sh</code><br>需要看一下这个测试脚本来搞清流程。</p>
<h2 id="看示例代码："><a href="#看示例代码：" class="headerlink" title="看示例代码："></a>看示例代码：</h2><ul>
<li><p>mrsequential.go是个顺序执行的流程，实现了最简单的mapreduce。</p>
</li>
<li><p>map函数把文字分割成单词，返回包含所有{单词,1}键值对的数组。框架把相同键的数据给reduce函数，reduce函数统计相同键数据的数量。</p>
</li>
<li><p>最后把每个单词的数量输出到mr-out-0文件。</p>
</li>
<li><p>import “plugin”<br>可把自己的代码编成plugin。选择plugin里的函数。</p>
</li>
</ul>
<ul>
<li>intermediate = append(intermediate, kva…)<br>把kva里的每项添加到intermediate。这写法有点。。。<br>tgpl 139</li>
</ul>
<h2 id="实验任务："><a href="#实验任务：" class="headerlink" title="实验任务："></a>实验任务：</h2><ul>
<li><p>完成mr/master.go, mr/worker.go, and mr/rpc.go<br>做两个程序，一个master一个worker。实现一个分布式的mapreduce。</p>
</li>
<li><p>一个master进程，多个worker进程。worker通过rpc向master请求任务并执行。</p>
</li>
</ul>
<h2 id="流程解析"><a href="#流程解析" class="headerlink" title="流程解析"></a>流程解析</h2><ul>
<li>得看mapreduce论文或网友解读，不然只看实验要求的话很难猜出它的逻辑。</li>
<li>论文里的那张流程图非常清晰。程序分为两个过程，先多个worker做map，生成中间文件，再多个worker做reduce，生成数个最终文件。</li>
</ul>
<ol>
<li>a个原始文本分为a个map任务，编号X。</li>
<li>master分配map任务给worker，处理分到的文件，得到一串键值对，value都是1，如{‘about’, 1}。</li>
<li>存入中间文件。怎么存，要用ihash当前单词，再%nReduce得到Y。按XY存到mr-X-Y文件。</li>
<li>master分配reduce任务给worker。此时所有单词的数据是按单词的hash再%nReduce分割在不同Y编号中的。那么对于每个Y，可以把所有X文件里的键值对数量累加一下，存到mr-out-Y。此时每个mr-out-Y文件就存了以hash分割的所有原始数据的单词数据。</li>
<li>test-mr.sh这个测试程序就是把所有mr-out-Y文件里的数据整合起来排序。得到的结果如果与mrsequential.go得到的结果一样就通过测试。</li>
</ol>
<h2 id="go相关："><a href="#go相关：" class="headerlink" title="go相关："></a>go相关：</h2><ul>
<li><p>怎么好像每运行一次后都要再编译下plugin？</p>
</li>
<li><p>rpc: gob error encoding body: gob: type xxxx has no exported fields<br>定义结构，成员名字首字母要大写，不然rpc这边会报错。</p>
</li>
<li><p>文件Create后马上Open。再写会失败。</p>
</li>
<li><p>go的rpc还挺方便。但如果要用别的语言交互，还是得整协议。<br>文档：<br><a target="_blank" rel="noopener" href="https://golang.google.cn/pkg/net/rpc/#Register">https://golang.google.cn/pkg/net/rpc/#Register</a><br><a target="_blank" rel="noopener" href="https://drstearns.github.io/tutorials/gojson/">https://drstearns.github.io/tutorials/gojson/</a></p>
</li>
</ul>
<h2 id="代码："><a href="#代码：" class="headerlink" title="代码："></a>代码：</h2><p>没有做的很完善精细，只是跑通测试。仅供参考。</p>
<h3 id="rpc-go"><a href="#rpc-go" class="headerlink" title="rpc.go"></a>rpc.go</h3><pre><code>package mr

//
// RPC definitions.
//
// remember to capitalize all names.
//

import &quot;os&quot;
import &quot;strconv&quot;

//
// example to show how to declare the arguments
// and reply for an RPC.
//

type ExampleArgs struct &#123;
    X int
&#125;

type ExampleReply struct &#123;
    ServerStatus int
&#125;

// Add your RPC definitions here.

//type Task struct &#123;
//    Text string
//&#125;

type Task struct &#123;
    TaskType int
    TaskID int
    FileName string
    NReduce int
    NMap int
&#125;

type TaskResult struct &#123;
    TaskType int
    Result bool
    TaskID int
    //Data []KeyValue

&#125;

// Cook up a unique-ish UNIX-domain socket name
// in /var/tmp, for the master.
// Can&#39;t use the current directory since
// Athena AFS doesn&#39;t support UNIX-domain sockets.
func masterSock() string &#123;
    s := &quot;/var/tmp/824-mr-&quot;
    s += strconv.Itoa(os.Getuid())
    return s
&#125;
</code></pre>
<h3 id="master-go"><a href="#master-go" class="headerlink" title="master.go"></a>master.go</h3><pre><code>package mr

import &quot;log&quot;
import &quot;net&quot;
import &quot;os&quot;
import &quot;net/rpc&quot;
import &quot;net/http&quot;

import &quot;fmt&quot;
//import &quot;io/ioutil&quot;

type Master struct &#123;
    // Your definitions here.
    map_task_status map[int]int
    map_task_content map[int]string
    map_task_count int
    map_current_task int
    map_done_task_count int

    nReduce int

    reduce_task_status map[int]int
    reduce_task_count int
    reduce_current_task int
    reduce_done_task_count int

    server_status int
&#125;

// Your code here -- RPC handlers for the worker to call.

//
// an example RPC handler.
//
// the RPC argument and reply types are defined in rpc.go.
//
func (m *Master) Example(args *ExampleArgs, reply *ExampleReply) error &#123;

    return nil
&#125;

func (m *Master) FetchTask(args *ExampleArgs, task *Task) error &#123;
    fmt.Println(&quot;FetchTask&quot;)
    //fmt.Println(m.map_current_task)

    //task.Text = m.task_content[m.map_current_task]

    //m.map_current_task += 1

    if m.map_current_task &lt; m.map_task_count &#123; // map 未结束
        task.TaskType = 0
        task.TaskID = m.map_current_task
        task.FileName = m.map_task_content[m.map_current_task]
        task.NReduce = m.nReduce
        task.NMap = m.map_task_count

        m.map_current_task += 1
    &#125; else &#123;
        task.TaskType = 1
        task.TaskID = m.reduce_current_task
        task.NReduce = m.nReduce
        task.NMap = m.map_task_count

        m.reduce_current_task += 1
    &#125;

    return nil
&#125;

func (m *Master) ReportTask(result *TaskResult, reply *ExampleReply) error &#123;
    fmt.Println(&quot;ReportTask&quot;)

    if result.TaskType == 0 &#123; // 简化
        m.map_done_task_count ++
    &#125; else &#123;
        m.reduce_done_task_count ++
    &#125;

    if m.map_done_task_count == m.map_task_count &amp;&amp; m.reduce_done_task_count == m.reduce_task_count &#123;
        reply.ServerStatus = 1
        m.server_status = 1
    &#125; else &#123;
        reply.ServerStatus = 0
    &#125;

    return nil
&#125;

//
// start a thread that listens for RPCs from worker.go
//
func (m *Master) server() &#123;
    rpc.Register(m)
    rpc.HandleHTTP()
    //l, e := net.Listen(&quot;tcp&quot;, &quot;:1234&quot;)
    sockname := masterSock()
    os.Remove(sockname)
    l, e := net.Listen(&quot;unix&quot;, sockname)
    if e != nil &#123;
        log.Fatal(&quot;listen error:&quot;, e)
    &#125;
    go http.Serve(l, nil)
&#125;

//
// main/mrmaster.go calls Done() periodically to find out
// if the entire job has finished.
//
func (m *Master) Done() bool &#123;
    ret := false

    // Your code here.
    //if m.map_done_task_count == m.map_task_count &#123;
    //    ret = true
    //&#125;

    if m.server_status == 1&#123;
        ret = true
    &#125;

    return ret
&#125;

//
// create a Master.
// main/mrmaster.go calls this function.
// nReduce is the number of reduce tasks to use.
//
func MakeMaster(files []string, nReduce int) *Master &#123;
    m := Master&#123;&#125;

    // Your code here.

    m.server_status = 0

    // 读所有输入文件。每个文件的内容存作为一个task，存到一个
    m.map_task_status = make(map[int]int)
    m.map_task_content = make(map[int]string)
    m.map_task_count = 0
    m.map_current_task = 0
    m.map_done_task_count = 0

    m.nReduce = nReduce

    for _, filename := range files &#123;
        /*
        file, err := os.Open(filename)
        if err != nil &#123;
            log.Fatalf(&quot;cannot open %v&quot;, filename)
        &#125;
        content, err := ioutil.ReadAll(file)
        if err != nil &#123;
            log.Fatalf(&quot;cannot read %v&quot;, filename)
        &#125;
        file.Close()*/

        m.map_task_status[m.map_task_count] = 0
        m.map_task_content[m.map_task_count] = string(filename)

        fmt.Println(m.map_task_count)
        fmt.Println(len(string(filename)))
        m.map_task_count += 1
    &#125;

    fmt.Println(m.map_task_content)

    // reduce tasks
    m.reduce_task_status = make(map[int]int)
    m.reduce_task_count = nReduce
    m.reduce_current_task = 0
    m.reduce_done_task_count = 0

    for i := 0; i &lt; nReduce; i++ &#123;
        m.reduce_task_status[i] = 0
    &#125;

    m.server()
    return &amp;m
&#125;
</code></pre>
<h3 id="worker-go"><a href="#worker-go" class="headerlink" title="worker.go"></a>worker.go</h3><pre><code>package mr

import &quot;fmt&quot;
import &quot;log&quot;
import &quot;net/rpc&quot;
import &quot;hash/fnv&quot;
import &quot;io/ioutil&quot;
import &quot;os&quot;
import &quot;encoding/json&quot;
import &quot;sort&quot;

//
// Map functions return a slice of KeyValue.
//
type KeyValue struct &#123;
    Key   string
    Value string
&#125;

// for sorting by key.
type ByKey []KeyValue

// for sorting by key.
func (a ByKey) Len() int           &#123; return len(a) &#125;
func (a ByKey) Swap(i, j int)      &#123; a[i], a[j] = a[j], a[i] &#125;
func (a ByKey) Less(i, j int) bool &#123; return a[i].Key &lt; a[j].Key &#125;

//
// use ihash(key) % NReduce to choose the reduce
// task number for each KeyValue emitted by Map.
//
func ihash(key string) int &#123;
    h := fnv.New32a()
    h.Write([]byte(key))
    return int(h.Sum32() &amp; 0x7fffffff)
&#125;

//
// main/mrworker.go calls this function.
//
func Worker(mapf func(string, string) []KeyValue,
    reducef func(string, []string) string) &#123;

    // Your worker implementation here.

    // uncomment to send the Example RPC to the master.
    // CallExample()
    //GetTask()

    for true &#123;
        // declare an argument structure.
        args := ExampleArgs&#123;&#125;

        // fill in the argument(s).
        args.X = 99

        // declare a reply structure.
        //reply := ExampleReply&#123;&#125;
        task := Task&#123;&#125;

        // send the RPC request, wait for the reply.
        err := call(&quot;Master.FetchTask&quot;, &amp;args, &amp;task)

        if !err &#123;
            log.Fatal(&quot;rpc error:&quot;, err)
            break
        &#125;

        fmt.Printf(&quot;task.TaskType %d\n&quot;, task.TaskType)

        if task.TaskType == 0 &#123;
            file_name := task.FileName

            file, err := os.Open(file_name)
            if err != nil &#123;
                log.Fatalf(&quot;cannot open %v&quot;, file_name)
            &#125;
            content, err := ioutil.ReadAll(file)
            if err != nil &#123;
                log.Fatalf(&quot;cannot read %v&quot;, file_name)
            &#125;
            file.Close()


            map_data := make(map[int][]KeyValue)

            kva := mapf(&quot;gg&quot;, string(content))

            for _, kv := range kva &#123;
                //fmt.Printf(&quot;%s %s\n&quot;, kv.Key, kv.Value)
                hash_id := ihash(kv.Key) % task.NReduce

                map_data[hash_id] = append(map_data[hash_id], kv)
            &#125;

            // 输出到临时文件 mr-task.TaskID-hash_id
            for hash_id, data  := range map_data &#123;
                file_name := fmt.Sprintf(&quot;mr-%d-%d&quot;, task.TaskID, hash_id)

                file, err := os.Create(file_name)

                //file, err := os.Open(file_name)
                if err != nil &#123;
                    log.Fatalf(&quot;cannot create %v&quot;, file_name)
                &#125;

                enc := json.NewEncoder(file)
                for _, kv := range data &#123;
                    //fmt.Printf(&quot;%s %s\n&quot;, kv.Key, kv.Value)
                    err := enc.Encode(&amp;kv)
                    if err != nil &#123;
                        fmt.Println(err)
                        log.Fatalf(&quot;Encode error&quot;)
                    &#125;
                &#125;

                file.Close()
            &#125;

            // report
            // declare an argument structure.
            reply := ExampleReply&#123;&#125;

            // declare a reply structure.
            //reply := ExampleReply&#123;&#125;
            task_result := TaskResult&#123;&#125;
            task_result.Result = true
            task_result.TaskType = task.TaskType
            task_result.TaskID = task.TaskID
            //task_result.Data =

            // send the RPC request, wait for the reply.
            call(&quot;Master.ReportTask&quot;, &amp;task_result, &amp;reply)

            if reply.ServerStatus == 1 &#123;
                fmt.Println(&quot;server tasks all done&quot;)
                break
            &#125;
        &#125; else &#123;
            // 把所有mr-X-Y整合为mr-out-Y

            //file_names := fmt.Sprintf(&quot;mr-*-%d&quot;, task.TaskID)

            kva := []KeyValue&#123;&#125;

            //for _, filename := range file_names &#123;
            for t := 0; t &lt; task.NMap; t ++ &#123;
                filename := fmt.Sprintf(&quot;mr-%d-%d&quot;, t, task.TaskID)

                file, err := os.Open(filename)
                if err != nil &#123;
                    log.Fatalf(&quot;cannot open %v&quot;, filename)
                &#125;

                /*
                content, err := ioutil.ReadAll(file)
                if err != nil &#123;
                    log.Fatalf(&quot;cannot read %v&quot;, filename)
                &#125;*/

                dec := json.NewDecoder(file)

                for &#123;
                    var kv KeyValue
                    if err := dec.Decode(&amp;kv); err != nil &#123;
                      break
                    &#125;
                    kva = append(kva, kv)
                &#125;

                file.Close()

                //kva := mapf(filename, string(content))
                //intermediate = append(intermediate, kva...)
            &#125;

            sort.Sort(ByKey(kva))

            file_name := fmt.Sprintf(&quot;mr-out-%d&quot;, task.TaskID)

            file, err := os.Create(file_name)
            if err != nil &#123;
                log.Fatalf(&quot;cannot create %v&quot;, file_name)
            &#125;

            i := 0
            for i &lt; len(kva) &#123;
                j := i + 1
                for j &lt; len(kva) &amp;&amp; kva[j].Key == kva[i].Key &#123;
                    j++
                &#125;
                values := []string&#123;&#125;
                for k := i; k &lt; j; k++ &#123;
                    values = append(values, kva[k].Value)
                &#125;
                output := reducef(kva[i].Key, values)

                // this is the correct format for each line of Reduce output.
                fmt.Fprintf(file, &quot;%v %v\n&quot;, kva[i].Key, output)

                i = j
            &#125;

            file.Close()

            // report
            // declare an argument structure.
            reply := ExampleReply&#123;&#125;

            // declare a reply structure.
            //reply := ExampleReply&#123;&#125;
            task_result := TaskResult&#123;&#125;
            task_result.Result = true
            task_result.TaskType = task.TaskType
            task_result.TaskID = task.TaskID
            //task_result.Data =

            // send the RPC request, wait for the reply.
            call(&quot;Master.ReportTask&quot;, &amp;task_result, &amp;reply)

            if reply.ServerStatus == 1 &#123;
                fmt.Println(&quot;server tasks all done&quot;)
                break
            &#125;
        &#125;
    &#125;
&#125;

func GetTask() &#123;

    // declare an argument structure.
    args := ExampleArgs&#123;&#125;

    // fill in the argument(s).
    args.X = 99

    // declare a reply structure.
    //reply := ExampleReply&#123;&#125;
    task := Task&#123;&#125;

    // send the RPC request, wait for the reply.
    call(&quot;Master.FetchTask&quot;, &amp;args, &amp;task)

    // reply.Y should be 100.
    fmt.Printf(&quot;task.TaskType %s\n&quot;, task.TaskType)
&#125;

func ReportTask() &#123;
&#125;

//
// example function to show how to make an RPC call to the master.
//
// the RPC argument and reply types are defined in rpc.go.
//
func CallExample() &#123;

    // declare an argument structure.
    args := ExampleArgs&#123;&#125;

    // fill in the argument(s).
    args.X = 99

    // declare a reply structure.
    reply := ExampleReply&#123;&#125;

    // send the RPC request, wait for the reply.
    call(&quot;Master.Example&quot;, &amp;args, &amp;reply)
&#125;

//
// send an RPC request to the master, wait for the response.
// usually returns true.
// returns false if something goes wrong.
//
func call(rpcname string, args interface&#123;&#125;, reply interface&#123;&#125;) bool &#123;
    // c, err := rpc.DialHTTP(&quot;tcp&quot;, &quot;127.0.0.1&quot;+&quot;:1234&quot;)
    sockname := masterSock()
    c, err := rpc.DialHTTP(&quot;unix&quot;, sockname)
    if err != nil &#123;
        log.Fatal(&quot;dialing:&quot;, err)
    &#125;
    defer c.Close()

    err = c.Call(rpcname, args, reply)
    if err == nil &#123;
        return true
    &#125;

    fmt.Println(err)
    return false
&#125;
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/26/1758/" data-id="ckkfmdg9w001nvkcggrc4evu0" data-title="MIT 6.824 Distributed Systems 分布式系统课程系列1 Lab1-MapReduce" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1732" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/22/1732/" class="article-date">
  <time class="dt-published" datetime="2020-10-21T18:59:36.000Z" itemprop="datePublished">2020-10-22</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/22/1732/">关于录音上传到服务器的问题。</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>1、录音的格式是什么格式</p><p>2、用http.request上传到服务器，cgi该如何处理，我用页面可以实现文件上传，但是模块就无法实现。</p><p>3、还有其他的方法去实现文件上传吗？有没有官方的demo。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/22/1732/" data-id="ckkfmdg9w001mvkcg19782wea" data-title="关于录音上传到服务器的问题。" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1731" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/21/1731/" class="article-date">
  <time class="dt-published" datetime="2020-10-21T13:58:09.000Z" itemprop="datePublished">2020-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/21/1731/">前端 swiper框架的应用</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>很早之前用过swiper框架，是基于js应用的，使用方法如下：</p>
<p>1.先引入插件中的css和js代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;link rel&#x3D;&quot;stylesheet&quot; href&#x3D;&quot;dist&#x2F;css&#x2F;swiper-bundle.min.css&quot;&gt;</span><br><span class="line">&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">    ...</span><br><span class="line">    &lt;script src&#x3D;&quot;dist&#x2F;js&#x2F;swiper-bundle.min.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">    ...</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>
<p>2.在需要放置轮播图的区域内书写以下代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;swiper-container&quot;&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;swiper-wrapper&quot;&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;swiper-slide&quot;&gt;Slide 1&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;swiper-slide&quot;&gt;Slide 2&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;swiper-slide&quot;&gt;Slide 3&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;&#x2F;div&gt;</span><br><span class="line">    &lt;!-- 如果需要分页器 --&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;swiper-pagination&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 如果需要导航按钮 --&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;swiper-button-prev&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;swiper-button-next&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 如果需要滚动条 --&gt;</span><br><span class="line">    &lt;div class&#x3D;&quot;swiper-scrollbar&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>
<p>3.初始化swiper</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  var mySwiper &#x3D; new Swiper (&#39;.swiper-container&#39;, &#123;</span><br><span class="line">    direction: &#39;vertical&#39;, &#x2F;&#x2F; 垂直切换选项</span><br><span class="line">    loop: true, &#x2F;&#x2F; 循环模式选项</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 如果需要分页器</span><br><span class="line">    pagination: &#123;</span><br><span class="line">      el: &#39;.swiper-pagination&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 如果需要前进后退按钮</span><br><span class="line">    navigation: &#123;</span><br><span class="line">      nextEl: &#39;.swiper-button-next&#39;,</span><br><span class="line">      prevEl: &#39;.swiper-button-prev&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    &#x2F;&#x2F; 如果需要滚动条</span><br><span class="line">    scrollbar: &#123;</span><br><span class="line">      el: &#39;.swiper-scrollbar&#39;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">  &lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<p>以上写法是官方给出的标准写法，但是合宙前端项目大多基于react框架编写，这种方法并不太适用，既不好看而且来回翻找也影响效率。机智的我在官方文档中找到了在React中的使用方法<br><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201020213108946_%E5%BE%AE%E4%BF%A1%E5%9B%BE%E7%89%87_20201020213046.png" alt="undefined" title="undefined"></a></p>
<p>这是完全不同的一种写法——通过在标签上加属性值来实现功能的。</p>
<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201020213723932_QQ%E6%88%AA%E5%9B%BE20201020213648.png" alt="undefined" title="undefined"></a></p>
<p>but，官方只给出了几个小例子，并没有完整的api文档，所以我就通过js的api对照+猜想+广大前端盆友的智慧相助，完成了业务的编写，趁热写一篇文章总结一下几个常用的例子。</p>
<p>❀❀<br>1.首先引入swiper/react和scss或者less文件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Swiper, SwiperSlide &#125; from &#39;swiper&#x2F;react&#39;;</span><br><span class="line"></span><br><span class="line">import &#39;swiper&#x2F;swiper.less&#39;;</span><br></pre></td></tr></table></figure>
<p>❀特别注意！！❀<br>凡是组件里的（比较常用的是自动切换Autoplay/分页器Pagination/前进后退按钮Navigation Buttons）一定要引入相应的scss/less文件，组件并且use一下。（我之前就因为少引入了less文件导致怎么都加载不出来，找了好一阵子）</p>
<p><a href="undefined" title="undefined"><img src="http://openluat-luatcommunity.oss-cn-hangzhou.aliyuncs.com/images/20201020215613332_QQ%E6%88%AA%E5%9B%BE20201020215414.png" alt="undefined" title="undefined"></a></p>
<p>❀❀<br>2.正常书写标签属性就可以了(我把我总结的常用属性都po上注释一下)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">export default () &#x3D;&gt; &#123;</span><br><span class="line">  return (</span><br><span class="line">    &lt;Swiper</span><br><span class="line">          loop&#x3D;&#123;true&#125; &#x2F;&#x2F;是否形成环路</span><br><span class="line">          speed&#x3D;&#123;1000&#125; &#x2F;&#x2F;速度（毫秒）</span><br><span class="line">          spaceBetween&#x3D;&#123;16&#125; &#x2F;&#x2F;两个页面之间的间隔</span><br><span class="line">          autoplay&#x3D;&#123; &#123; &#x2F;&#x2F;自动播放</span><br><span class="line">            delay: 3000, &#x2F;&#x2F;延迟3秒进入下一张</span><br><span class="line">            disableOnInteraction: false &#x2F;&#x2F;用户操作后继续自动播放</span><br><span class="line">          &#125; &#125;</span><br><span class="line">          pagination&#x3D;&#123; &#123; clickable: true &#125; &#125; &#x2F;&#x2F;分页器是否能够点击</span><br><span class="line">          slidesPerView&#x3D;&#123;3&#125;&#x2F;&#x2F;一个页面需要显示几张图(可以设置为auto）</span><br><span class="line">&gt;</span><br><span class="line">      &lt;SwiperSlide&gt;Slide 1&lt;&#x2F;SwiperSlide&gt;</span><br><span class="line">      &lt;SwiperSlide&gt;Slide 2&lt;&#x2F;SwiperSlide&gt;</span><br><span class="line">      ...</span><br><span class="line">    &lt;&#x2F;Swiper&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>还有许多我没有涉及到的属性，可以去<a target="_blank" rel="noopener" href="https://www.swiper.com.cn/api/index.html" title="swiper官方api">swiper官方api</a>中扒一下，前端小白的第一篇文章到这里就告一段落了，溜了~</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/21/1731/" data-id="ckkfmdg9w001lvkcg0r1sfrdu" data-title="前端 swiper框架的应用" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-1730" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/10/21/1730/" class="article-date">
  <time class="dt-published" datetime="2020-10-21T13:42:21.000Z" itemprop="datePublished">2020-10-21</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/10/21/1730/">Loadsh的学习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="简述"><a href="#简述" class="headerlink" title="简述"></a>简述</h2><p>Lodash内部封装了诸多对字符串、数组、对象等常见数据类型的处理函数；<br>也有很多工程师把自己喜欢的一些三方库进行封装处理，为了后续方便开发，保证代码健壮性。</p>
<h2 id="为何用"><a href="#为何用" class="headerlink" title="为何用"></a>为何用</h2><p>在实际任务需求开发中，前端可能需要处理很多数据，根据不同的UI库将数据处理成相应的格式；也有可能你没有使用UI库，但是不免也会存在处理数据的情况。<br>最常见的应该就是<strong>数组</strong>/<strong>对象</strong>的处理。比如：数组的拆分、合并、嵌套等这是最常见的需求；也许你会说使用ES6、ES7语法能实现，确实，有些需求可通过ES6、ES7语法进行实现，但是也有很多不能实现，只能通过各种对数据循环迭代进行处理，耗费百万脑细胞。。。假如你使用Lo呢？会出现什么情况呢？目前，主要是对数组和对象的操作比较频繁，这里也主要粗略讲解一下Array/Collocation这两个模块（本人暂时就只用这两个模块进行需求开发，也确实是能力有限），其他的模块（func，num….）可去官网进行了解学习。。。</p>
<h2 id="如何用"><a href="#如何用" class="headerlink" title="如何用"></a>如何用</h2><p>在React + Webpack + Babel(ES6)的开发环境中，使用Lodash需要安装插件babel-plugin-lodash并更新Babel配置文件：<br><code>npm install --save lodash npm install --save-dev babel-plugin-lodash</code><br>更新Bable的配置文件 .babelrc:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;presets&quot;:[</span><br><span class="line">        &quot;react&quot;,</span><br><span class="line">        &quot;es2015&quot;,</span><br><span class="line">        &quot;stage-0&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;plugins&quot;:[</span><br><span class="line">        &quot;lodash&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import Lo from &#39;lodash&#39;;</span><br><span class="line"></span><br><span class="line">Lo.map([1, 2, 3], xxxxx);</span><br></pre></td></tr></table></figure>
<h3 id="Array"><a href="#Array" class="headerlink" title="Array"></a>Array</h3><p>1、一个简单的循环</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; 正常使用</span><br><span class="line">for(var i &#x3D; 0; i &lt; 5; i++)&#123;</span><br><span class="line">    &#x2F;&#x2F;...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 2. 使用forEach</span><br><span class="line">Array.apply(null, Array(5)).forEach(function()&#123;</span><br><span class="line">    &#x2F;&#x2F;...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用Lodash(times：Lo的使用函数)</span><br><span class="line">（拓展：</span><br><span class="line">     Lo.times(n, [iteratee&#x3D;_.identity]</span><br><span class="line">    调用 iteratee n 次，每次调用返回的结果存入到数组中。</span><br><span class="line">     i teratee 调用入 1个参数： (index)。</span><br><span class="line">  参数：</span><br><span class="line">    n (number)</span><br><span class="line">    要调用 iteratee 的次数</span><br><span class="line"></span><br><span class="line">    [iteratee&#x3D;_.identity] (Function)</span><br><span class="line">     这个函数会处理每一个元素</span><br><span class="line"></span><br><span class="line">   返回值 (Array)</span><br><span class="line">   返回调用结果的数组</span><br><span class="line">  )</span><br><span class="line">Lo.times(5, function()&#123;</span><br><span class="line">    &#x2F;&#x2F;...</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>2、深层查找</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var jin &#x3D; [&#123;</span><br><span class="line">    &quot;jin1&quot;: &quot;Colin&quot;,</span><br><span class="line">    &quot;pets&quot;: [&#123;&quot;name&quot;: &quot;dog1&quot;&#125;, &#123;&quot;name&quot;: &quot;dog2&quot;&#125;]</span><br><span class="line">&#125;, &#123;</span><br><span class="line">    &quot;jin2&quot;: &quot;John&quot;,</span><br><span class="line">    &quot;pets&quot;: [&#123;&quot;name&quot;: &quot;dog3&quot;&#125;, &#123;&quot;name&quot;: &quot;dog4&quot;&#125;]</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F; 使用map</span><br><span class="line">jin.map(function(owner)&#123;</span><br><span class="line">    return owner.pets[0].name;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;使用 Lodash</span><br><span class="line">Lo.map(jin, &quot;pets[0].name&quot;);</span><br></pre></td></tr></table></figure>
<p>Lo.map 方法是对原生 map 方法的改进；<br>其中使用 pets[0].name 字符串对嵌套数据取值的方式简化了很多冗余的代码。</p>
<p>3、深拷贝( warning：使用序列化parse进行深拷贝，会存在一些问题：value值为函数、undefine等，希望大家自己动手查查看)</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">var obj &#x3D; &#123;</span><br><span class="line">    &quot;name&quot;: &quot;colin&quot;</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; Lodash</span><br><span class="line">var objB &#x3D; Lo.cloneDeep(obj);</span><br><span class="line">objB &#x3D;&#x3D;&#x3D; a  &#x2F;&#x2F; false</span><br></pre></td></tr></table></figure>
<p>还有很多:<br>chunk<br>compact<br>difference<br>random（随机数）<br>等等…..；；；<br>对象扩展extend各种…..<br><code>Lo.times(9999*99...9,Lo.constant(一点))</code><br>成功=一点+一点+一点</p>
<p>一个让你后悔“没有”“没有”“没有”学习的js三方工具库，你后悔了吗！！！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://doc.luatos.wiki/2020/10/21/1730/" data-id="ckkfmdg9v001kvkcg7ectbxc0" data-title="Loadsh的学习" class="article-share-link">分享</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/10/">&laquo; 上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/">12</a><a class="page-number" href="/page/13/">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/59/">59</a><a class="extend next" rel="next" href="/page/12/">下一页 &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2032/01/">一月 2032</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/12/">十二月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">一月 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">十二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/10/">十月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">九月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">八月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">七月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">六月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">五月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">四月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">一月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">八月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">七月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">五月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">四月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">十一月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">九月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2032/01/01/608/">【置顶】合宙模块资料汇总</a>
          </li>
        
          <li>
            <a href="/2022/12/31/638/">Air系列模块常见问题列表</a>
          </li>
        
          <li>
            <a href="/2021/01/27/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2021/01/27/2420/">ECMAScript(ES6)基本语法介绍（一）</a>
          </li>
        
          <li>
            <a href="/2021/01/26/2417/">Air720S系列_luat二次开发固件（ 底层软件+上层脚本）</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 chenxuuu<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>