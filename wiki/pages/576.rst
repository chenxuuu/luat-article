sms
===

.. _sms-1:

sms
---

模块功能：短信功能

sms.send(num, data, cbFnc, idx)
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

发送短信

-  参数

+-----------------------------------+-----------------------------------+
| 传入值类型                        | 释义                              |
+===================================+===================================+
| string                            | num，                             |
|                                   | 短信接收方号码，ASCII码字符串格式 |
+-----------------------------------+-----------------------------------+
| string                            | data，短信内容，GB2312            |
|                                   | 编码的字符串如果短信内容中只有asc |
|                                   | ii可见字符，则超过160个字符时，会 |
|                                   | 被拆分为几条长级联短信进行发送如  |
|                                   | 果短信内容中包含除ascii可见字符外 |
|                                   | 的其他字符，例如包含汉字，一个汉  |
|                                   | 字算作一个字符，一个ascii可见字符 |
|                                   | 也算作一个字符，超过70个字符时，  |
|                                   | 会被拆分为几条长级联短信进行发送  |
+-----------------------------------+-----------------------------------+
| function                          | **可选参数                        |
|                                   | ，默认为\ ``nil``**\ ，cbFnc，短  |
|                                   | 信发送结果异步返回时的用户回调函  |
|                                   | 数，回调函数的调用形式为：cbFnc(  |
|                                   | result,num,data)num：短信接收方的 |
|                                   | 号码，ASCII码字符串格式data：短信 |
|                                   | 内容，unicode大端编码的HEX字符串  |
+-----------------------------------+-----------------------------------+
| number                            | **可选参数，默                    |
|                                   | 认为\ ``nil``**\ ，idx，插入短信  |
|                                   | 发送缓冲表的位置，默认是插入末尾  |
+-----------------------------------+-----------------------------------+

-  返回值

result，true表示调用接口成功（并不是短信发送成功，短信发送结果，通过sendcnf返回，如果有cbFnc，会通知cbFnc函数）；返回false，表示调用接口失败

-  例子

.. code:: lua

   sms.send("10086","test",cbFnc)

--------------

sms.setNewSmsCb(cbFnc)
~~~~~~~~~~~~~~~~~~~~~~

设置新短信的用户处理函数

-  参数

========== ===========================
传入值类型 释义
========== ===========================
function   cbFnc，新短信的用户处理函数
========== ===========================

-  返回值

nil

-  例子

.. code:: lua

   sms.setNewSmsCb(cbFnc)

--------------
