adc
===

作者：朱天华 陈之敏 时间：2020年08月03日 关键字：adc、模拟量、lua

ADC硬件接口描述参考：https://doc.luatos.wiki/wiki/pages/61.html

result=adc.open(id,scale)
-------------------------

-  功能：打开ADC通道

-  参数：

+-----+--------+-------------------------------+----------------------+
| 参  | 类型   | 释义                          | 取值                 |
| 数  |        |                               |                      |
+=====+========+===============================+======================+
| id  | number | 需要打开的adc的通道id         | 0：ADC0依次类推      |
+-----+--------+-------------------------------+----------------------+
| sc  | number | 设置adc检测的范围             | adc.SCAL             |
| ale |        |                               | E_1V250adc.SCALE_2V4 |
|     |        |                               | 44adc.SCALE_3V233adc |
|     |        |                               | .SCALE_5V000注：V1.2 |
|     |        |                               | 支持版本>=0025V1.3   |
|     |        |                               | 支持版本>=3024       |
+-----+--------+-------------------------------+----------------------+

-  返回值：

====== ====== ================= ========================
返回值 类型   释义              取值
====== ====== ================= ========================
result number 返回ADC打开的结果 0：打开失败。1：打开成功
====== ====== ================= ========================

-  示例：

.. code:: c

   local id=2
   local result=adc.open(id)
   if result==1 then
       log.info("adc",id,"打开成功！");
   end

adcval, voltval=adc.read(id)
----------------------------

-  功能：读取ADC。

-  参数：

==== ====== ===================== =================
参数 类型   释义                  取值
==== ====== ===================== =================
id   number 需要读取的adc的通道id 0：ADC0，依次类推
==== ====== ===================== =================

-  返回值：

======= ====== ========================== ======================
参数    类型   释义                       取值
======= ====== ========================== ======================
adcval  number adc的原始值                当读取失败则返回0xFFFF
voltval number 转换后的电压值，单位为毫伏 当读取失败则返回0xFFFF
======= ====== ========================== ======================

-  示例：

.. code:: c

   local id=2
   local adcval, voltval=adc.read(id)
   if adcval~=0xffff then
       log.info("ADC的原始测量数据和电压值:", adcval, voltval)
   end

result=adc.close(Id)
--------------------

-  功能：关闭ADC通道

-  参数：

==== ====== ===================== =================
参数 类型   释义                  取值
==== ====== ===================== =================
id   number 需要读取的adc的通道id 0：ADC0，依次类推
==== ====== ===================== =================

-  返回值：

====== ====== ================= ========================
参数   类型   释义              取值
====== ====== ================= ========================
result number 返回ADC关闭的结果 0：关闭失败。1：关闭成功
====== ====== ================= ========================

-  示例：

.. code:: c

   local id=2
   local result=adc.close(id)
   if result==1 then
       log.info("adc",id,"关闭成功！");
   end
