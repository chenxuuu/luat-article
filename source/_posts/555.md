---
title: "Air720系列AT命令远程升级配置详细步骤"
date: 2019-03-01 12:37:31
---

# 升级平台的配置

首先打开升级平台：[https://iot.openluat.com](https://iot.openluat.com)

使用购买模块/开发板时使用的手机号作为用户名，密码默认为888888，登陆后台

**注意，如果是官方平台购买的，并且登陆后台后已经有了一个默认720项目，可以直接去执行AT命令，并且无需设置productkey参数**

登陆后，可以看到一个默认新建好的产品，如果没有，可以点击右上角的`创建新产品`新建一个，产品名任意：
[![](/static/editormd/php/../uploads/5_96216.jpg)](/static/editormd/php/../uploads/5_96216.jpg)

点击`进入产品`。

打开[http://www.openluat.com/Product/4g/Air720D.html](http://www.openluat.com/Product/4g/Air720D.html)，选择`资料下载`，在列表中找到`标准固件（AT指令, Linux网卡, 安卓RIL适配）`，直接下载此AT的zip压缩包：
[![](/static/editormd/php/../uploads/5_44807.jpg)](/static/editormd/php/../uploads/5_44807.jpg)

我们可以看到压缩包内有一些文件，请`选择和自己模块型号相同的bin文件`进行解压，我这里使用的是720D，所以我解压720D的bin文件：
[![](/static/editormd/php/../uploads/5_62301.jpg)](/static/editormd/php/../uploads/5_62301.jpg)

接着返回之前的iot升级平台，在左侧选择`固件升级`--`升级配置`--`新建项目`--`选择之前解压出来的bin文件`--`是否允许升级选“是”`--点击确定：

[![](/static/editormd/php/../uploads/5_42898.jpg)](/static/editormd/php/../uploads/5_42898.jpg)

我们可以在新建好的项目右侧，点击`添加`，将我们要升级的设备imei添加进去

> 也可以在上面那步勾选`升级全部设备`，这样所有使用该`productkey`的设备都会匹配升级


# 模块AT操作

在模块开机后，使用`ATI`可以查看模块当前固件版本，请确保云平台设置的版本高于当前版本，才会升级：

```
[12:28:11.121]发→◇ATI
□
[12:28:11.124]收←◆ATI

AirM2M_720D_V666_LTE_AT

OK
```

请确保模块已经成功附着网络，使用`AT+UPGRADE`命令即可执行升级操作，下载完成后会自动进行重启，重启途中pwr灯会不停闪烁（如果模块没有绑定到任何项目，可以使用`AT+UPGRADE="KEY","你的项目的productkey"`来强制把无归属模块绑定到项目）：

```
[12:28:40.576]发→◇AT+CGATT?
□
[12:28:40.651]收←◆AT+CGATT?

+CGATT: 1

OK
[12:29:18.776]发→◇AT+UPGRADE
□
[12:29:18.781]收←◆AT+UPGRADE

[12:29:19.075]收←◆
OK
+UPGRADEIND: 0

[12:29:32.566]收←◆+UPGRADEIND: 10

[12:29:41.820]收←◆+UPGRADEIND: 20

[12:29:51.672]收←◆+UPGRADEIND: 30

[12:30:01.163]收←◆+UPGRADEIND: 40

[12:30:10.957]收←◆+UPGRADEIND: 50

[12:30:20.463]收←◆+UPGRADEIND: 60

[12:30:30.263]收←◆+UPGRADEIND: 70

[12:30:40.213]收←◆+UPGRADEIND: 80

[12:30:49.927]收←◆+UPGRADEIND: 90

[12:31:14.689]收←◆+UPGRADEIND: 100

[12:31:16.785]收←◆\0
[12:31:19.832]收←◆
+UPGRADEDL: 0

[12:31:31.389]收←◆
+UPGRADEDL: 10

[12:31:37.050]收←◆
+UPGRADEDL: 20

[12:31:42.286]收←◆
+UPGRADEDL: 30

[12:31:47.510]收←◆
+UPGRADEDL: 40

[12:31:52.730]收←◆
+UPGRADEDL: 50

[12:31:57.922]收←◆
+UPGRADEDL: 60

[12:32:03.141]收←◆
+UPGRADEDL: 70

[12:32:08.353]收←◆
+UPGRADEDL: 80

[12:32:13.519]收←◆
+UPGRADEDL: 90

[12:32:17.617]收←◆
+UPGRADEDL: 100

[12:32:17.671]收←◆\0
[12:32:26.256]收←◆UART Boot Completed
```

我们再用`ATI`命令检查模块版本，会发现成功升级为云平台设置的版本：

```

[12:32:31.008]发→◇AT
□
[12:32:33.993]收←◆
OK
[12:32:37.717]收←◆
+NITZ: 19/03/01,04:32:37+32,0

[12:32:39.024]发→◇ATI
□
[12:32:39.028]收←◆ATI

AirM2M_720D_V742_LTE_AT

OK

```



# 附

如果出错通过AT+UPGRADE? 返回的+UPGRADE后面第四个参数为错误码

## 升级失败错误码

3 ：无效的设备。找不到设备。

17：无权限。设备会上报imei、固件名、项目key。服务器会以此查出设备、固件、项目三	条记录，如果	这三者不在同一个用户名下，就会认为无权限

25：无效的项目

26：无效的固件

27：已经是最新版本。通过了前面的检查，但版本号已是最新，或没打开升级开关、没指定imei等。
